<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

	 <meta name="description" content="">

    <meta name="author" content="dmey (forked from NREL)" >
    <link rel="icon" href="../favicon.png">

    <title>PlantChillers.f90 &ndash; EnergyPlusFortran</title>

    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/pygments.css" rel="stylesheet">
    <link href="../css/font-awesome.min.css" rel="stylesheet">
    <link href="../css/local.css" rel="stylesheet">


    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script src="../js/jquery-2.1.3.min.js"></script>
    <script src="../js/svg-pan-zoom.min.js"></script>


    <script src="../tipuesearch/tipuesearch_content.js"></script>
    <link  href="../tipuesearch/tipuesearch.css" rel="stylesheet">
    <script src="../tipuesearch/tipuesearch_set.js"></script>
    <script src="../tipuesearch/tipuesearch.js"></script>


  </head>

  <body>

    <!-- Fixed navbar -->
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../index.html">EnergyPlusFortran <small>8.1.0.009</small></a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">

            <li class="dropdown hidden-xs visible-sm visible-md hidden-lg">
              <a href="#" class="dropdown-toggle"
              data-toggle="dropdown" role="button"
              aria-haspopup="true"
		 aria-expanded="false">Contents <span class="caret"></span></a>
	      <ul class="dropdown-menu">

            <li><a href="../lists/files.html">Source Files</a></li>


            <li><a href="../lists/modules.html">Modules</a></li>


            <li><a href="../lists/procedures.html">Procedures</a></li>


            <li><a href="../lists/types.html">Derived Types</a></li>


            <li><a href="../program/energyplus.html">Program</a></li>

            </ul>
            </li>

<li class="visible-xs hidden-sm visible-lg"><a href="../lists/files.html">Source Files</a></li>


<li class="visible-xs hidden-sm visible-lg"><a href="../lists/modules.html">Modules</a></li>


<li class="visible-xs hidden-sm visible-lg"><a href="../lists/procedures.html">Procedures</a></li>


<li class="visible-xs hidden-sm visible-lg"><a href="../lists/types.html">Derived Types</a></li>


<li class="visible-xs hidden-sm visible-lg"><a href="../program/energyplus.html">Program</a></li>

          </ul>


        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">


  <div class="row">
    <h1>PlantChillers.f90
    <small>Source File</small>

    </h1>

<div class="row">
  <div class="col-lg-12">
<div class="well well-sm">
  <ul class="list-inline" style="margin-bottom:0px;display:inline">


     <li><i class="fa fa-list-ol"></i>
       <a data-toggle="tooltip"
	  data-placement="bottom" data-html="true"
	  title=" 1.2% of total for source files.">4706 statements</a>
     </li>


    <li><i class="fa fa-code"></i><a href="../src/PlantChillers.f90"> Source File</a></li>

  </ul>
  <ol class="breadcrumb in-well text-right">

     <li class="active">PlantChillers.f90</li>
  </ol>
</div>
</div>
</div>
<script>
  $(function () {
  $('[data-toggle="tooltip"]').tooltip()
  })
</script>

  </div>
  <div class="row">
    <div class="col-md-3 hidden-xs hidden-sm visible-md visible-lg">

<div id="sidebar">


<div class="panel panel-primary">
  <div class="panel-heading text-left"><h3 class="panel-title"><a data-toggle="collapse" href="#mods-0">Modules</a></h3></div>
  <div id="mods-0" class="panel-collapse collapse">
    <div class="list-group">

      <a class="list-group-item" href="../module/plantchillers.html">PlantChillers</a>

    </div>
  </div>
</div>


<div class="panel panel-primary">
  <div class="panel-heading text-left"><h3 class="panel-title">Source Code</h3></div>
  <div class="list-group">
    <a class="list-group-item" href="../sourcefile/plantchillers.f90.html#src">PlantChillers.f90</a>
  </div>
</div>


  <hr>


<div class="panel panel-default">
  <div class="panel-heading text-left"><h3 class="panel-title"><a data-toggle="collapse" href="#allfiles-0">All Source Files</a></h3></div>
  <div id="allfiles-0" class="panel-collapse collapse">
    <div class="list-group">

      <a class="list-group-item" href="../sourcefile/airflownetworkbalancemanager.f90.html">AirflowNetworkBalanceManager.f90</a>

      <a class="list-group-item" href="../sourcefile/airflownetworksolver.f90.html">AirflowNetworkSolver.f90</a>

      <a class="list-group-item" href="../sourcefile/baseboardradiator.f90.html">BaseboardRadiator.f90</a>

      <a class="list-group-item" href="../sourcefile/baseboardradiatorelectric.f90.html">BaseboardRadiatorElectric.f90</a>

      <a class="list-group-item" href="../sourcefile/baseboardradiatorsteam.f90.html">BaseboardRadiatorSteam.f90</a>

      <a class="list-group-item" href="../sourcefile/baseboardradiatorwater.f90.html">BaseboardRadiatorWater.f90</a>

      <a class="list-group-item" href="../sourcefile/branchinputmanager.f90.html">BranchInputManager.f90</a>

      <a class="list-group-item" href="../sourcefile/branchnodeconnections.f90.html">BranchNodeConnections.f90</a>

      <a class="list-group-item" href="../sourcefile/conductiontransferfunctioncalc.f90.html">ConductionTransferFunctionCalc.f90</a>

      <a class="list-group-item" href="../sourcefile/cooltower.f90.html">CoolTower.f90</a>

      <a class="list-group-item" href="../sourcefile/costestimatemanager.f90.html">CostEstimateManager.f90</a>

      <a class="list-group-item" href="../sourcefile/curvemanager.f90.html">CurveManager.f90</a>

      <a class="list-group-item" href="../sourcefile/cvfonlyroutines.f90.html">CVFOnlyRoutines.f90</a>

      <a class="list-group-item" href="../sourcefile/dataairflownetwork.f90.html">DataAirflowNetwork.f90</a>

      <a class="list-group-item" href="../sourcefile/dataairloop.f90.html">DataAirLoop.f90</a>

      <a class="list-group-item" href="../sourcefile/dataairsystems.f90.html">DataAirSystems.f90</a>

      <a class="list-group-item" href="../sourcefile/databranchairloopplant.f90.html">DataBranchAirLoopPlant.f90</a>

      <a class="list-group-item" href="../sourcefile/databranchnodeconnections.f90.html">DataBranchNodeConnections.f90</a>

      <a class="list-group-item" href="../sourcefile/databsdfwindow.f90.html">DataBSDFWindow.f90</a>

      <a class="list-group-item" href="../sourcefile/datacomplexfenestration.f90.html">DataComplexFenestration.f90</a>

      <a class="list-group-item" href="../sourcefile/datacontaminantbalance.f90.html">DataContaminantBalance.f90</a>

      <a class="list-group-item" href="../sourcefile/dataconvergparams.f90.html">DataConvergParams.f90</a>

      <a class="list-group-item" href="../sourcefile/dataconversions.f90.html">DataConversions.f90</a>

      <a class="list-group-item" href="../sourcefile/datacostestimate.f90.html">DataCostEstimate.f90</a>

      <a class="list-group-item" href="../sourcefile/datadaylighting.f90.html">DataDaylighting.f90</a>

      <a class="list-group-item" href="../sourcefile/datadaylightingdevices.f90.html">DataDaylightingDevices.f90</a>

      <a class="list-group-item" href="../sourcefile/datadefineequip.f90.html">Datadefineequip.f90</a>

      <a class="list-group-item" href="../sourcefile/datadelight.f90.html">DataDElight.f90</a>

      <a class="list-group-item" href="../sourcefile/dataenvironment.f90.html">DataEnvironment.f90</a>

      <a class="list-group-item" href="../sourcefile/dataequivalentlayerwindow.f90.html">DataEquivalentLayerWindow.f90</a>

      <a class="list-group-item" href="../sourcefile/dataerrortracking.f90.html">DataErrorTracking.f90</a>

      <a class="list-group-item" href="../sourcefile/datagenerators.f90.html">DataGenerators.f90</a>

      <a class="list-group-item" href="../sourcefile/dataglobalconstants.f90.html">DataGlobalConstants.f90</a>

      <a class="list-group-item" href="../sourcefile/dataglobals.f90.html">DataGlobals.f90</a>

      <a class="list-group-item" href="../sourcefile/dataheatbalance.f90.html">DataHeatBalance.f90</a>

      <a class="list-group-item" href="../sourcefile/dataheatbalfansys.f90.html">DataHeatBalFanSys.f90</a>

      <a class="list-group-item" href="../sourcefile/dataheatbalsurface.f90.html">DataHeatBalSurface.f90</a>

      <a class="list-group-item" href="../sourcefile/datahvaccontrollers.f90.html">DataHVACControllers.f90</a>

      <a class="list-group-item" href="../sourcefile/datahvacglobals.f90.html">DataHVACGlobals.f90</a>

      <a class="list-group-item" href="../sourcefile/datainterfaces.f90.html">DataInterfaces.f90</a>

      <a class="list-group-item" href="../sourcefile/dataipshortcuts.f90.html">DataIPShortCuts.f90</a>

      <a class="list-group-item" href="../sourcefile/dataloopnode.f90.html">DataLoopNode.f90</a>

      <a class="list-group-item" href="../sourcefile/datamoisturebalance.f90.html">DataMoistureBalance.f90</a>

      <a class="list-group-item" href="../sourcefile/datamoisturebalanceempd.f90.html">DataMoistureBalanceEMPD.f90</a>

      <a class="list-group-item" href="../sourcefile/dataoutputs.f90.html">DataOutputs.f90</a>

      <a class="list-group-item" href="../sourcefile/dataphotovoltaics.f90.html">DataPhotovoltaics.f90</a>

      <a class="list-group-item" href="../sourcefile/dataplant.f90.html">DataPlant.f90</a>

      <a class="list-group-item" href="../sourcefile/dataplantpipingsystems.f90.html">DataPlantPipingSystems.f90</a>

      <a class="list-group-item" href="../sourcefile/dataprecisionglobals.f90.html">DataPrecisionGlobals.f90</a>

      <a class="list-group-item" href="../sourcefile/datareportingflags.f90.html">DataReportingFlags.f90</a>

      <a class="list-group-item" href="../sourcefile/dataroomair.f90.html">DataRoomAir.f90</a>

      <a class="list-group-item" href="../sourcefile/datarootfinder.f90.html">DataRootFinder.f90</a>

      <a class="list-group-item" href="../sourcefile/dataruntimelanguage.f90.html">DataRuntimeLanguage.f90</a>

      <a class="list-group-item" href="../sourcefile/datashadowingcombinations.f90.html">DataShadowingCombinations.f90</a>

      <a class="list-group-item" href="../sourcefile/datasizing.f90.html">DataSizing.f90</a>

      <a class="list-group-item" href="../sourcefile/datastringglobals.f90.html">DataStringGlobals.f90</a>

      <a class="list-group-item" href="../sourcefile/datasurfacecolors.f90.html">DataSurfaceColors.f90</a>

      <a class="list-group-item" href="../sourcefile/datasurfacelists.f90.html">DataSurfaceLists.f90</a>

      <a class="list-group-item" href="../sourcefile/datasurfaces.f90.html">DataSurfaces.f90</a>

      <a class="list-group-item" href="../sourcefile/datasystemvariables.f90.html">DataSystemVariables.f90</a>

      <a class="list-group-item" href="../sourcefile/datatimings.f90.html">DataTimings.f90</a>

      <a class="list-group-item" href="../sourcefile/dataucsdshareddata.f90.html">DataUCSDSharedData.f90</a>

      <a class="list-group-item" href="../sourcefile/datavectortypes.f90.html">DataVectorTypes.f90</a>

      <a class="list-group-item" href="../sourcefile/dataviewfactorinformation.f90.html">DataViewFactorInformation.f90</a>

      <a class="list-group-item" href="../sourcefile/datawater.f90.html">DataWater.f90</a>

      <a class="list-group-item" href="../sourcefile/datazonecontrols.f90.html">DataZoneControls.f90</a>

      <a class="list-group-item" href="../sourcefile/datazoneenergydemands.f90.html">DataZoneEnergyDemands.f90</a>

      <a class="list-group-item" href="../sourcefile/datazoneequipment.f90.html">DataZoneEquipment.f90</a>

      <a class="list-group-item" href="../sourcefile/daylightingdevices.f90.html">DaylightingDevices.f90</a>

      <a class="list-group-item" href="../sourcefile/daylightingmanager.f90.html">DaylightingManager.f90</a>

      <a class="list-group-item" href="../sourcefile/delightmanagerf.f90.html">DElightManagerF.f90</a>

      <a class="list-group-item" href="../sourcefile/delightmanagerf_no.f90.html">DElightManagerF_NO.f90</a>

      <a class="list-group-item" href="../sourcefile/demandmanager.f90.html">DemandManager.f90</a>

      <a class="list-group-item" href="../sourcefile/desiccantdehumidifiers.f90.html">DesiccantDehumidifiers.f90</a>

      <a class="list-group-item" href="../sourcefile/directair.f90.html">DirectAir.f90</a>

      <a class="list-group-item" href="../sourcefile/displayroutines.f90.html">DisplayRoutines.f90</a>

      <a class="list-group-item" href="../sourcefile/dxcoil.f90.html">DXCoil.f90</a>

      <a class="list-group-item" href="../sourcefile/earthtube.f90.html">EarthTube.f90</a>

      <a class="list-group-item" href="../sourcefile/economiclifecyclecost.f90.html">EconomicLifeCycleCost.f90</a>

      <a class="list-group-item" href="../sourcefile/economictariff.f90.html">EconomicTariff.f90</a>

      <a class="list-group-item" href="../sourcefile/ecoroof.f90.html">EcoRoof.f90</a>

      <a class="list-group-item" href="../sourcefile/electricpowergenerators.f90.html">ElectricPowerGenerators.f90</a>

      <a class="list-group-item" href="../sourcefile/electricpowermanager.f90.html">ElectricPowerManager.f90</a>

      <a class="list-group-item" href="../sourcefile/emsmanager.f90.html">EMSManager.f90</a>

      <a class="list-group-item" href="../sourcefile/energyplus.f90.html">EnergyPlus.f90</a>

      <a class="list-group-item" href="../sourcefile/exteriorenergyusemanager.f90.html">ExteriorEnergyUseManager.f90</a>

      <a class="list-group-item" href="../sourcefile/externalinterface_no.f90.html">ExternalInterface_NO.f90</a>

      <a class="list-group-item" href="../sourcefile/fancoilunits.f90.html">FanCoilUnits.f90</a>

      <a class="list-group-item" href="../sourcefile/faultsmanager.f90.html">FaultsManager.f90</a>

      <a class="list-group-item" href="../sourcefile/fluidproperties.f90.html">FluidProperties.f90</a>

      <a class="list-group-item" href="../sourcefile/general.f90.html">General.f90</a>

      <a class="list-group-item" href="../sourcefile/generalroutines.f90.html">GeneralRoutines.f90</a>

      <a class="list-group-item" href="../sourcefile/globalnames.f90.html">GlobalNames.f90</a>

      <a class="list-group-item" href="../sourcefile/heatbalanceairmanager.f90.html">HeatBalanceAirManager.f90</a>

      <a class="list-group-item" href="../sourcefile/heatbalanceconvectioncoeffs.f90.html">HeatBalanceConvectionCoeffs.f90</a>

      <a class="list-group-item" href="../sourcefile/heatbalancehamtmanager.f90.html">HeatBalanceHAMTManager.f90</a>

      <a class="list-group-item" href="../sourcefile/heatbalanceinternalheatgains.f90.html">HeatBalanceInternalHeatGains.f90</a>

      <a class="list-group-item" href="../sourcefile/heatbalanceintradexchange.f90.html">HeatBalanceIntRadExchange.f90</a>

      <a class="list-group-item" href="../sourcefile/heatbalancemanager.f90.html">HeatBalanceManager.f90</a>

      <a class="list-group-item" href="../sourcefile/heatbalancemovableinsulation.f90.html">HeatBalanceMovableInsulation.f90</a>

      <a class="list-group-item" href="../sourcefile/heatbalancesurfacemanager.f90.html">HeatBalanceSurfaceManager.f90</a>

      <a class="list-group-item" href="../sourcefile/heatbalfinitedifferencemanager.f90.html">HeatBalFiniteDifferenceManager.f90</a>

      <a class="list-group-item" href="../sourcefile/heatrecovery.f90.html">HeatRecovery.f90</a>

      <a class="list-group-item" href="../sourcefile/humidifiers.f90.html">Humidifiers.f90</a>

      <a class="list-group-item" href="../sourcefile/hvaccontrollers.f90.html">HVACControllers.f90</a>

      <a class="list-group-item" href="../sourcefile/hvaccooledbeam.f90.html">HVACCooledBeam.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacdualductsystem.f90.html">HVACDualDuctSystem.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacduct.f90.html">HVACDuct.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacdxsystem.f90.html">HVACDXSystem.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacevapcomponent.f90.html">HVACEvapComponent.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacfancomponent.f90.html">HVACFanComponent.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacfurnace.f90.html">HVACFurnace.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacheatingcoils.f90.html">HVACHeatingCoils.f90</a>

      <a class="list-group-item" href="../sourcefile/hvachxassistedcoolingcoil.f90.html">HVACHXAssistedCoolingCoil.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacinterfacemanager.f90.html">HVACInterfaceManager.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacmanager.f90.html">HVACManager.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacmixercomponent.f90.html">HVACMixerComponent.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacmultispeedheatpump.f90.html">HVACMultiSpeedHeatPump.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacsingleductinduc.f90.html">HVACSingleDuctInduc.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacsingleductsystem.f90.html">HVACSingleDuctSystem.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacsplittercomponent.f90.html">HVACSplitterComponent.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacstandaloneerv.f90.html">HVACStandAloneERV.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacsteamcoilcomponent.f90.html">HVACSteamCoilComponent.f90</a>

      <a class="list-group-item" href="../sourcefile/hvactranspiredcollector.f90.html">HVACTranspiredCollector.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacunitarybypassvav.f90.html">HVACUnitaryBypassVAV.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacunitarysystem.f90.html">HVACUnitarySystem.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacvariablerefrigerantflow.f90.html">HVACVariableRefrigerantFlow.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacwatercoilcomponent.f90.html">HVACWaterCoilComponent.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacwatertoair.f90.html">HVACWatertoAir.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacwatertoairmultispeedhp.f90.html">HVACWatertoAirMultiSpeedHP.f90</a>

      <a class="list-group-item" href="../sourcefile/inputprocessor.f90.html">InputProcessor.f90</a>

      <a class="list-group-item" href="../sourcefile/matrixdatamanager.f90.html">MatrixDataManager.f90</a>

      <a class="list-group-item" href="../sourcefile/mixedair.f90.html">MixedAir.f90</a>

      <a class="list-group-item" href="../sourcefile/moisturebalanceempdmanager.f90.html">MoistureBalanceEMPDManager.f90</a>

      <a class="list-group-item" href="../sourcefile/nodeinputmanager.f90.html">NodeInputManager.f90</a>

      <a class="list-group-item" href="../sourcefile/nonzoneequipmentmanager.f90.html">NonZoneEquipmentManager.f90</a>

      <a class="list-group-item" href="../sourcefile/outairnodemanager.f90.html">OutAirNodeManager.f90</a>

      <a class="list-group-item" href="../sourcefile/outdoorairunit.f90.html">OutdoorAirUnit.f90</a>

      <a class="list-group-item" href="../sourcefile/outputprocessor.f90.html">OutputProcessor.f90</a>

      <a class="list-group-item" href="../sourcefile/outputreportpredefined.f90.html">OutputReportPredefined.f90</a>

      <a class="list-group-item" href="../sourcefile/outputreports.f90.html">OutputReports.f90</a>

      <a class="list-group-item" href="../sourcefile/outputreporttabular.f90.html">OutputReportTabular.f90</a>

      <a class="list-group-item" href="../sourcefile/packagedterminalheatpump.f90.html">PackagedTerminalHeatPump.f90</a>

      <a class="list-group-item" href="../sourcefile/packagedthermalstoragecoil.f90.html">PackagedThermalStorageCoil.f90</a>

      <a class="list-group-item" href="../sourcefile/photovoltaics.f90.html">Photovoltaics.f90</a>

      <a class="list-group-item" href="../sourcefile/photovoltaicthermalcollectors.f90.html">PhotovoltaicThermalCollectors.f90</a>

      <a class="list-group-item" href="../sourcefile/plantabsorptionchillers.f90.html">PlantAbsorptionChillers.f90</a>

      <a class="list-group-item" href="../sourcefile/plantboilers.f90.html">PlantBoilers.f90</a>

      <a class="list-group-item" href="../sourcefile/plantboilerssteam.f90.html">PlantBoilersSteam.f90</a>

      <a class="list-group-item" href="../sourcefile/plantcentralgshp.f90.html">PlantCentralGSHP.f90</a>

      <a class="list-group-item" href="../sourcefile/plantchillers.f90.html">PlantChillers.f90</a>

      <a class="list-group-item" href="../sourcefile/plantcondloopoperation.f90.html">PlantCondLoopOperation.f90</a>

      <a class="list-group-item" href="../sourcefile/plantcondlooptowers.f90.html">PlantCondLoopTowers.f90</a>

      <a class="list-group-item" href="../sourcefile/planteirchillers.f90.html">PlantEIRChillers.f90</a>

      <a class="list-group-item" href="../sourcefile/plantevapfluidcoolers.f90.html">PlantEvapFluidCoolers.f90</a>

      <a class="list-group-item" href="../sourcefile/plantexhaustabsorptionchiller.f90.html">PlantExhaustAbsorptionChiller.f90</a>

      <a class="list-group-item" href="../sourcefile/plantfluidcoolers.f90.html">PlantFluidCoolers.f90</a>

      <a class="list-group-item" href="../sourcefile/plantgasabsorptionchiller.f90.html">PlantGasAbsorptionChiller.f90</a>

      <a class="list-group-item" href="../sourcefile/plantgroundheatexchangers.f90.html">PlantGroundHeatExchangers.f90</a>

      <a class="list-group-item" href="../sourcefile/plantheatexchanger.f90.html">PlantHeatExchanger.f90</a>

      <a class="list-group-item" href="../sourcefile/planticethermalstorage.f90.html">PlantIceThermalStorage.f90</a>

      <a class="list-group-item" href="../sourcefile/plantloadprofile.f90.html">PlantLoadProfile.f90</a>

      <a class="list-group-item" href="../sourcefile/plantloopequipment.f90.html">PlantLoopEquipment.f90</a>

      <a class="list-group-item" href="../sourcefile/plantloopsolver.f90.html">PlantLoopSolver.f90</a>

      <a class="list-group-item" href="../sourcefile/plantmanager.f90.html">PlantManager.f90</a>

      <a class="list-group-item" href="../sourcefile/plantoutsideenergysources.f90.html">PlantOutsideEnergySources.f90</a>

      <a class="list-group-item" href="../sourcefile/plantpipeheattransfer.f90.html">PlantPipeHeatTransfer.f90</a>

      <a class="list-group-item" href="../sourcefile/plantpipes.f90.html">PlantPipes.f90</a>

      <a class="list-group-item" href="../sourcefile/plantpipingsystemmanager.f90.html">PlantPipingSystemManager.f90</a>

      <a class="list-group-item" href="../sourcefile/plantpondgroundheatexchanger.f90.html">PlantPondGroundHeatExchanger.f90</a>

      <a class="list-group-item" href="../sourcefile/plantpressuresystem.f90.html">PlantPressureSystem.f90</a>

      <a class="list-group-item" href="../sourcefile/plantpumps.f90.html">PlantPumps.f90</a>

      <a class="list-group-item" href="../sourcefile/plantsolarcollectors.f90.html">PlantSolarCollectors.f90</a>

      <a class="list-group-item" href="../sourcefile/plantsurfacegroundheatexchanger.f90.html">PlantSurfaceGroundHeatExchanger.f90</a>

      <a class="list-group-item" href="../sourcefile/plantutilities.f90.html">PlantUtilities.f90</a>

      <a class="list-group-item" href="../sourcefile/plantvalves.f90.html">PlantValves.f90</a>

      <a class="list-group-item" href="../sourcefile/plantwatersources.f90.html">PlantWaterSources.f90</a>

      <a class="list-group-item" href="../sourcefile/plantwaterthermaltank.f90.html">PlantWaterThermalTank.f90</a>

      <a class="list-group-item" href="../sourcefile/plantwatertowatergshp.f90.html">PlantWatertoWaterGSHP.f90</a>

      <a class="list-group-item" href="../sourcefile/plantwateruse.f90.html">PlantWaterUse.f90</a>

      <a class="list-group-item" href="../sourcefile/pollutionanalysismodule.f90.html">PollutionAnalysisModule.f90</a>

      <a class="list-group-item" href="../sourcefile/poweredinductionunits.f90.html">PoweredInductionUnits.f90</a>

      <a class="list-group-item" href="../sourcefile/psychroutines.f90.html">PsychRoutines.f90</a>

      <a class="list-group-item" href="../sourcefile/purchasedairmanager.f90.html">Purchasedairmanager.f90</a>

      <a class="list-group-item" href="../sourcefile/radiantsystemhightemp.f90.html">RadiantSystemHighTemp.f90</a>

      <a class="list-group-item" href="../sourcefile/radiantsystemlowtemp.f90.html">RadiantSystemLowTemp.f90</a>

      <a class="list-group-item" href="../sourcefile/refrigeratedcase.f90.html">RefrigeratedCase.f90</a>

      <a class="list-group-item" href="../sourcefile/reportsizingmanager.f90.html">ReportSizingManager.f90</a>

      <a class="list-group-item" href="../sourcefile/returnairpath.f90.html">ReturnAirPath.f90</a>

      <a class="list-group-item" href="../sourcefile/roomairmanager.f90.html">RoomAirManager.f90</a>

      <a class="list-group-item" href="../sourcefile/roomairmodelcrossvent.f90.html">RoomAirModelCrossVent.f90</a>

      <a class="list-group-item" href="../sourcefile/roomairmodeldisplacementvent.f90.html">RoomAirModelDisplacementVent.f90</a>

      <a class="list-group-item" href="../sourcefile/roomairmodelmundt.f90.html">RoomAirModelMundt.f90</a>

      <a class="list-group-item" href="../sourcefile/roomairmodelufad.f90.html">RoomAirModelUFAD.f90</a>

      <a class="list-group-item" href="../sourcefile/roomairmodelusertemppattern.f90.html">RoomAirModelUserTempPattern.f90</a>

      <a class="list-group-item" href="../sourcefile/rootfinder.f90.html">RootFinder.f90</a>

      <a class="list-group-item" href="../sourcefile/runtimelanguageprocessor.f90.html">RuntimeLanguageProcessor.f90</a>

      <a class="list-group-item" href="../sourcefile/schedulemanager.f90.html">ScheduleManager.f90</a>

      <a class="list-group-item" href="../sourcefile/setpointmanager.f90.html">SetPointManager.f90</a>

      <a class="list-group-item" href="../sourcefile/simairservingzones.f90.html">SimAirServingZones.f90</a>

      <a class="list-group-item" href="../sourcefile/simulationmanager.f90.html">SimulationManager.f90</a>

      <a class="list-group-item" href="../sourcefile/sizingmanager.f90.html">SizingManager.f90</a>

      <a class="list-group-item" href="../sourcefile/solarreflectionmanager.f90.html">SolarReflectionManager.f90</a>

      <a class="list-group-item" href="../sourcefile/solarshading.f90.html">SolarShading.f90</a>

      <a class="list-group-item" href="../sourcefile/sortandstringutilities.f90.html">SortAndStringUtilities.f90</a>

      <a class="list-group-item" href="../sourcefile/sqlite3.c.html">sqlite3.c</a>

      <a class="list-group-item" href="../sourcefile/sqlitecroutines.c.html">SQLiteCRoutines.c</a>

      <a class="list-group-item" href="../sourcefile/sqlitefortranroutines.f90.html">SQLiteFortranRoutines.f90</a>

      <a class="list-group-item" href="../sourcefile/sqlitefortranroutines_no.f90.html">SQLiteFortranRoutines_NO.f90</a>

      <a class="list-group-item" href="../sourcefile/standardratings.f90.html">StandardRatings.f90</a>

      <a class="list-group-item" href="../sourcefile/surfacegeometry.f90.html">SurfaceGeometry.f90</a>

      <a class="list-group-item" href="../sourcefile/systemavailabilitymanager.f90.html">SystemAvailabilityManager.f90</a>

      <a class="list-group-item" href="../sourcefile/systemreports.f90.html">SystemReports.f90</a>

      <a class="list-group-item" href="../sourcefile/tarcogcomplexfenestration.f90.html">TarcogComplexFenestration.f90</a>

      <a class="list-group-item" href="../sourcefile/thermalchimney.f90.html">ThermalChimney.f90</a>

      <a class="list-group-item" href="../sourcefile/thermalcomfort.f90.html">ThermalComfort.f90</a>

      <a class="list-group-item" href="../sourcefile/unitheater.f90.html">UnitHeater.f90</a>

      <a class="list-group-item" href="../sourcefile/unitventilator.f90.html">UnitVentilator.f90</a>

      <a class="list-group-item" href="../sourcefile/userdefinedcomponents.f90.html">UserDefinedComponents.f90</a>

      <a class="list-group-item" href="../sourcefile/utilityroutines.f90.html">UtilityRoutines.f90</a>

      <a class="list-group-item" href="../sourcefile/vectorutilities.f90.html">VectorUtilities.f90</a>

      <a class="list-group-item" href="../sourcefile/ventilatedslab.f90.html">VentilatedSlab.f90</a>

      <a class="list-group-item" href="../sourcefile/watermanager.f90.html">WaterManager.f90</a>

      <a class="list-group-item" href="../sourcefile/weathermanager.f90.html">WeatherManager.f90</a>

      <a class="list-group-item" href="../sourcefile/windowac.f90.html">WindowAC.f90</a>

      <a class="list-group-item" href="../sourcefile/windowcomplexmanager.f90.html">WindowComplexManager.f90</a>

      <a class="list-group-item" href="../sourcefile/windowequivalentlayer.f90.html">WindowEquivalentLayer.f90</a>

      <a class="list-group-item" href="../sourcefile/windowmanager.f90.html">WindowManager.f90</a>

      <a class="list-group-item" href="../sourcefile/windturbine.f90.html">WindTurbine.f90</a>

      <a class="list-group-item" href="../sourcefile/zoneairloopequipmentmanager.f90.html">Zoneairloopequipmentmanager.f90</a>

      <a class="list-group-item" href="../sourcefile/zonecontaminantpredictorcorrector.f90.html">ZoneContaminantPredictorCorrector.f90</a>

      <a class="list-group-item" href="../sourcefile/zonedehumidifier.f90.html">ZoneDehumidifier.f90</a>

      <a class="list-group-item" href="../sourcefile/zoneequipmentmanager.f90.html">Zoneequipmentmanager.f90</a>

      <a class="list-group-item" href="../sourcefile/zoneplenumcomponent.f90.html">ZonePlenumComponent.f90</a>

      <a class="list-group-item" href="../sourcefile/zonetemppredictorcorrector.f90.html">ZoneTempPredictorCorrector.f90</a>

    </div>
  </div>
</div>


</div>

    </div>
    <div class="col-md-9" id='text'>


    <h3>This File Depends On</h3>

                <div class="depgraph"><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: sourcefile~~plantchillers.f90~~EfferentGraph Pages: 1 -->
<svg id="sourcefileplantchillersf90EfferentGraph" width="641pt" height="1042pt"
 viewBox="0.00 0.00 641.00 1042.40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="sourcefile~~plantchillers.f90~~EfferentGraph" class="graph" transform="scale(.2645 .2645) rotate(0) translate(4 3937.6567)">
<title>sourcefile~~plantchillers.f90~~EfferentGraph</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-3937.6567 2419.8386,-3937.6567 2419.8386,4 -4,4"/>
<!-- sourcefile~plantchillers.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node1" class="node">
<title>sourcefile~plantchillers.f90</title>
<polygon fill="none" stroke="#000000" points="2416.0664,-2088.2471 2327.1578,-2088.2471 2327.1578,-2066.2362 2416.0664,-2066.2362 2416.0664,-2088.2471"/>
<text text-anchor="middle" x="2371.6121" y="-2074.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#000000">PlantChillers.f90</text>
</g>
<!-- sourcefile~datahvacglobals.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node2" class="node">
<title>sourcefile~datahvacglobals.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node2"><a xlink:href="../sourcefile/datahvacglobals.f90.html" xlink:title="DataHVACGlobals.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="658.8752,-2903.2471 543.4891,-2903.2471 543.4891,-2881.2362 658.8752,-2881.2362 658.8752,-2903.2471"/>
<text text-anchor="middle" x="601.1821" y="-2889.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">DataHVACGlobals.f90</text>
</a>
</g>
</g>
<!-- sourcefile~datahvacglobals.f90&#45;&gt;sourcefile~plantchillers.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge237" class="edge">
<title>sourcefile~datahvacglobals.f90&#45;&gt;sourcefile~plantchillers.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M641.7285,-2903.3374C655.6724,-2907.4013 671.3149,-2912.2377 685.3989,-2917.2417 735.5589,-2935.0631 746.8475,-2942.7685 795.9847,-2963.2417"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M795.9847,-2963.2417C975.7355,-3038.1355 1471.2552,-2864.9695 1665.8309,-2857.2417"/>
</g>
<!-- sourcefile~general.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node18" class="node">
<title>sourcefile~general.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node18"><a xlink:href="../sourcefile/general.f90.html" xlink:title="General.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="829.3535,-2141.2471 762.616,-2141.2471 762.616,-2119.2362 829.3535,-2119.2362 829.3535,-2141.2471"/>
<text text-anchor="middle" x="795.9847" y="-2127.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">General.f90</text>
</a>
</g>
</g>
<!-- sourcefile~datahvacglobals.f90&#45;&gt;sourcefile~general.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge175" class="edge">
<title>sourcefile~datahvacglobals.f90&#45;&gt;sourcefile~general.f90</title>
<path fill="none" stroke="#0000ff" stroke-dasharray="5,2" d="M614.6409,-2881.178C634.2177,-2864.1761 669.8992,-2829.5482 685.3989,-2791.2417 766.6386,-2590.4629 670.2481,-2515.7069 721.3989,-2305.2417 735.6859,-2246.4567 767.7141,-2182.1994 784.78,-2150.398"/>
<polygon fill="#0000ff" stroke="#0000ff" points="788.0465,-2151.7178 789.7537,-2141.2614 781.8984,-2148.371 788.0465,-2151.7178"/>
</g>
<!-- sourcefile~runtimelanguageprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node26" class="node">
<title>sourcefile~runtimelanguageprocessor.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node26"><a xlink:href="../sourcefile/runtimelanguageprocessor.f90.html" xlink:title="RuntimeLanguageProcessor.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="1746.8507,-1705.2471 1584.8112,-1705.2471 1584.8112,-1683.2362 1746.8507,-1683.2362 1746.8507,-1705.2471"/>
<text text-anchor="middle" x="1665.8309" y="-1691.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">RuntimeLanguageProcessor.f90</text>
</a>
</g>
</g>
<!-- sourcefile~datahvacglobals.f90&#45;&gt;sourcefile~runtimelanguageprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge19" class="edge">
<title>sourcefile~datahvacglobals.f90&#45;&gt;sourcefile~runtimelanguageprocessor.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M624.9214,-2881.1826C649.0204,-2870.0967 687.5071,-2852.7776 721.3989,-2839.2417 866.7434,-2781.1931 958.2001,-2844.9044 1052.825,-2720.2417 1119.6408,-2632.2157 1052.7481,-2328.6993 1088.825,-2224.2417 1133.2959,-2095.4793 1354.5187,-1798.8554 1483.574,-1755.2417"/>
</g>
<!-- sourcefile~branchinputmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node47" class="node">
<title>sourcefile~branchinputmanager.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node47"><a xlink:href="../sourcefile/branchinputmanager.f90.html" xlink:title="BranchInputManager.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="1909.8448,-2945.2471 1782.8395,-2945.2471 1782.8395,-2923.2362 1909.8448,-2923.2362 1909.8448,-2945.2471"/>
<text text-anchor="middle" x="1846.3422" y="-2931.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">BranchInputManager.f90</text>
</a>
</g>
</g>
<!-- sourcefile~datahvacglobals.f90&#45;&gt;sourcefile~branchinputmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge187" class="edge">
<title>sourcefile~datahvacglobals.f90&#45;&gt;sourcefile~branchinputmanager.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1145.9073,-3195.2417C1211.9425,-3185.3225 1412.9179,-3159.8254 1483.574,-3159.2417"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M795.9847,-2963.2417C826.6334,-2978.4352 840.957,-2965.118 870.5706,-2982.2417 890.4329,-2993.7268 889.2696,-3004.1719 906.5706,-3019.2417 1006.1335,-3105.9649 1013.8734,-3196.0974 1145.9073,-3195.2417"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1483.574,-3159.2417C1566.2909,-3154.7864 1595.4097,-3241.8628 1665.8309,-3198.2417"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1665.8309,-3198.2417C1762.1168,-3138.5992 1819.5698,-3006.3808 1838.9403,-2955.1188"/>
<polygon fill="#ff0000" stroke="#ff0000" points="1842.3243,-2956.0575 1842.496,-2945.4641 1835.7556,-2953.6383 1842.3243,-2956.0575"/>
</g>
<!-- sourcefile~plantutilities.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node3" class="node">
<title>sourcefile~plantutilities.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node3"><a xlink:href="../sourcefile/plantutilities.f90.html" xlink:title="PlantUtilities.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="2153.6449,-2907.2471 2066.0756,-2907.2471 2066.0756,-2885.2362 2153.6449,-2885.2362 2153.6449,-2907.2471"/>
<text text-anchor="middle" x="2109.8602" y="-2893.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">PlantUtilities.f90</text>
</a>
</g>
</g>
<!-- sourcefile~plantutilities.f90&#45;&gt;sourcefile~plantchillers.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge238" class="edge">
<title>sourcefile~plantutilities.f90&#45;&gt;sourcefile~plantchillers.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M2153.6068,-2887.8695C2180.784,-2881.6465 2215.9217,-2871.7074 2244.8185,-2857.2417"/>
</g>
<!-- sourcefile~dataipshortcuts.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node4" class="node">
<title>sourcefile~dataipshortcuts.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node4"><a xlink:href="../sourcefile/dataipshortcuts.f90.html" xlink:title="DataIPShortCuts.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="453.3838,-2217.2471 344.7839,-2217.2471 344.7839,-2195.2362 453.3838,-2195.2362 453.3838,-2217.2471"/>
<text text-anchor="middle" x="399.0839" y="-2203.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">DataIPShortCuts.f90</text>
</a>
</g>
</g>
<!-- sourcefile~dataipshortcuts.f90&#45;&gt;sourcefile~plantchillers.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge239" class="edge">
<title>sourcefile~dataipshortcuts.f90&#45;&gt;sourcefile~plantchillers.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M403.2669,-2217.3819C416.795,-2252.7236 461.7057,-2364.8467 516.9653,-2447.2417 526.4876,-2461.4399 706.7023,-2668.5083 721.3989,-2677.2417 794.0309,-2720.4028 822.6315,-2710.6236 906.5706,-2720.2417 971.1499,-2727.6415 987.8591,-2722.4088 1052.825,-2720.2417 1229.4567,-2714.3495 1695.3746,-2575.3597 1846.3422,-2667.2417"/>
</g>
<!-- sourcefile~curvemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node12" class="node">
<title>sourcefile~curvemanager.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node12"><a xlink:href="../sourcefile/curvemanager.f90.html" xlink:title="CurveManager.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="1029.0877,-2906.2471 930.3078,-2906.2471 930.3078,-2884.2362 1029.0877,-2884.2362 1029.0877,-2906.2471"/>
<text text-anchor="middle" x="979.6978" y="-2892.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">CurveManager.f90</text>
</a>
</g>
</g>
<!-- sourcefile~dataipshortcuts.f90&#45;&gt;sourcefile~curvemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge144" class="edge">
<title>sourcefile~dataipshortcuts.f90&#45;&gt;sourcefile~curvemanager.f90</title>
<path fill="none" stroke="#00ff7f" stroke-dasharray="5,2" d="M795.9847,-2853.2417C836.6401,-2866.9833 883.8637,-2877.6693 920.2516,-2884.8235"/>
<polygon fill="#00ff7f" stroke="#00ff7f" points="919.7307,-2888.2875 930.213,-2886.7473 921.0581,-2881.4145 919.7307,-2888.2875"/>
<path fill="none" stroke="#00ff7f" stroke-dasharray="5,2" d="M402.5306,-2217.2969C414.4565,-2255.7869 454.6733,-2387.599 480.9653,-2498.2417 500.2302,-2579.3125 459.7385,-2621.6719 516.9653,-2682.2417 570.0249,-2738.4008 624.3971,-2677.8292 685.3989,-2725.2417 711.7807,-2745.7464 700.1736,-2765.4361 721.3989,-2791.2417 748.7819,-2824.5337 755.1478,-2839.4387 795.9847,-2853.2417"/>
</g>
<!-- sourcefile~schedulemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node17" class="node">
<title>sourcefile~schedulemanager.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node17"><a xlink:href="../sourcefile/schedulemanager.f90.html" xlink:title="ScheduleManager.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="1203.0723,-1341.2471 1088.7424,-1341.2471 1088.7424,-1319.2362 1203.0723,-1319.2362 1203.0723,-1341.2471"/>
<text text-anchor="middle" x="1145.9073" y="-1327.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">ScheduleManager.f90</text>
</a>
</g>
</g>
<!-- sourcefile~dataipshortcuts.f90&#45;&gt;sourcefile~schedulemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge170" class="edge">
<title>sourcefile~dataipshortcuts.f90&#45;&gt;sourcefile~schedulemanager.f90</title>
<path fill="none" stroke="#003fff" stroke-dasharray="5,2" d="M423.445,-2195.0656C442.7084,-2184.8052 468.3822,-2167.641 480.9653,-2144.2417 540.1313,-2034.2182 435.4394,-1677.8953 516.9653,-1583.2417 551.2936,-1543.3857 930.6944,-1502.3623 979.6978,-1483.2417"/>
</g>
<!-- sourcefile~dataipshortcuts.f90&#45;&gt;sourcefile~general.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge179" class="edge">
<title>sourcefile~dataipshortcuts.f90&#45;&gt;sourcefile~general.f90</title>
<path fill="none" stroke="#0000ff" stroke-dasharray="5,2" d="M453.5272,-2217.0195C495.4576,-2222.8129 554.0318,-2225.3509 601.1821,-2206.2417"/>
<path fill="none" stroke="#0000ff" stroke-dasharray="5,2" d="M601.1821,-2206.2417C655.15,-2184.3695 717.9684,-2160.0685 757.3577,-2144.9697"/>
<polygon fill="#0000ff" stroke="#0000ff" points="758.7601,-2148.1806 766.8475,-2141.3364 756.2571,-2141.6434 758.7601,-2148.1806"/>
</g>
<!-- sourcefile~inputprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node25" class="node">
<title>sourcefile~inputprocessor.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node25"><a xlink:href="../sourcefile/inputprocessor.f90.html" xlink:title="InputProcessor.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="650.7412,-2141.2471 551.623,-2141.2471 551.623,-2119.2362 650.7412,-2119.2362 650.7412,-2141.2471"/>
<text text-anchor="middle" x="601.1821" y="-2127.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">InputProcessor.f90</text>
</a>
</g>
</g>
<!-- sourcefile~dataipshortcuts.f90&#45;&gt;sourcefile~inputprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge232" class="edge">
<title>sourcefile~dataipshortcuts.f90&#45;&gt;sourcefile~inputprocessor.f90</title>
<path fill="none" stroke="#ff003f" stroke-dasharray="5,2" d="M428.4707,-2195.1906C463.7936,-2181.9073 523.1865,-2159.5723 562.2841,-2144.8695"/>
<polygon fill="#ff003f" stroke="#ff003f" points="563.6318,-2148.102 571.7598,-2141.3061 561.1678,-2141.55 563.6318,-2148.102"/>
</g>
<!-- sourcefile~outputprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node27" class="node">
<title>sourcefile~outputprocessor.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node27"><a xlink:href="../sourcefile/outputprocessor.f90.html" xlink:title="OutputProcessor.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="1537.2997,-1266.2471 1429.8483,-1266.2471 1429.8483,-1244.2362 1537.2997,-1244.2362 1537.2997,-1266.2471"/>
<text text-anchor="middle" x="1483.574" y="-1252.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">OutputProcessor.f90</text>
</a>
</g>
</g>
<!-- sourcefile~dataipshortcuts.f90&#45;&gt;sourcefile~outputprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge57" class="edge">
<title>sourcefile~dataipshortcuts.f90&#45;&gt;sourcefile~outputprocessor.f90</title>
<path fill="none" stroke="#ffbf00" stroke-dasharray="5,2" d="M1310.6583,-1407.2417C1347.8769,-1388.1529 1355.9445,-1378.7005 1382.3269,-1346.2417 1403.4016,-1320.3129 1393.1775,-1302.2406 1418.3269,-1280.2417 1422.4927,-1276.5978 1427.2461,-1273.4586 1432.2452,-1270.76"/>
<polygon fill="#ffbf00" stroke="#ffbf00" points="1433.9243,-1273.8368 1441.4355,-1266.3646 1430.904,-1267.5218 1433.9243,-1273.8368"/>
<path fill="none" stroke="#ffbf00" stroke-dasharray="5,2" d="M422.9832,-2195.2307C442.2428,-2184.9701 468.1523,-2167.7193 480.9653,-2144.2417 531.1465,-2052.2934 452.4017,-1756.7292 516.9653,-1674.2417 536.2893,-1649.553 1028.7497,-1517.3248 1052.825,-1497.2417 1078.483,-1475.8382 1061.0533,-1449.8207 1088.825,-1431.2417 1171.2491,-1376.1007 1222.4192,-1452.498 1310.6583,-1407.2417"/>
</g>
<!-- sourcefile~datasizing.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node5" class="node">
<title>sourcefile~datasizing.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node5"><a xlink:href="../sourcefile/datasizing.f90.html" xlink:title="DataSizing.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="439.3754,-3627.2471 358.7923,-3627.2471 358.7923,-3605.2362 439.3754,-3605.2362 439.3754,-3627.2471"/>
<text text-anchor="middle" x="399.0839" y="-3613.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">DataSizing.f90</text>
</a>
</g>
</g>
<!-- sourcefile~datasizing.f90&#45;&gt;sourcefile~plantchillers.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge240" class="edge">
<title>sourcefile~datasizing.f90&#45;&gt;sourcefile~plantchillers.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M405.1307,-3627.5348C420.5511,-3655.4792 463.8985,-3728.8733 516.9653,-3774.2417 623.5039,-3865.3247 655.9841,-3914.4304 795.9847,-3921.2417"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M795.9847,-3921.2417C1099.8191,-3954.0001 1178.2181,-3909.15 1483.574,-3921.2417"/>
</g>
<!-- sourcefile~datasizing.f90&#45;&gt;sourcefile~plantutilities.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge10" class="edge">
<title>sourcefile~datasizing.f90&#45;&gt;sourcefile~plantutilities.f90</title>
<path fill="none" stroke="#ff3f00" stroke-dasharray="5,2" d="M795.9847,-3807.2417C1056.7524,-3812.1972 1130.1237,-3764.7745 1382.3269,-3831.2417 1431.2433,-3844.1334 1432.9881,-3882.9693 1483.574,-3883.2417"/>
<path fill="none" stroke="#ff3f00" stroke-dasharray="5,2" d="M1483.574,-3883.2417C1568.0738,-3882.6423 1773.9854,-3812.8888 1846.3422,-3769.2417"/>
</g>
<!-- sourcefile~dataplant.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node19" class="node">
<title>sourcefile~dataplant.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node19"><a xlink:href="../sourcefile/dataplant.f90.html" xlink:title="DataPlant.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="2021.2827,-2907.2471 1946.0298,-2907.2471 1946.0298,-2885.2362 2021.2827,-2885.2362 2021.2827,-2907.2471"/>
<text text-anchor="middle" x="1983.6563" y="-2893.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">DataPlant.f90</text>
</a>
</g>
</g>
<!-- sourcefile~datasizing.f90&#45;&gt;sourcefile~dataplant.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge203" class="edge">
<title>sourcefile~datasizing.f90&#45;&gt;sourcefile~dataplant.f90</title>
<path fill="none" stroke="#3f00ff" stroke-dasharray="5,2" d="M409.9421,-3627.3962C454.5038,-3671.8231 628.8945,-3832.5674 795.9847,-3807.2417"/>
<path fill="none" stroke="#3f00ff" stroke-dasharray="5,2" d="M795.9847,-3807.2417C850.2687,-3805.5012 856.1333,-3775.3874 906.5706,-3755.2417 1124.7221,-3668.1072 1759.4341,-3602.6842 1909.8435,-3422.2417 1942.8219,-3382.6782 1974.4577,-3011.5423 1981.9762,-2917.7115"/>
<polygon fill="#3f00ff" stroke="#3f00ff" points="1985.4698,-2917.93 1982.772,-2907.6844 1978.4918,-2917.3761 1985.4698,-2917.93"/>
</g>
<!-- sourcefile~datasizing.f90&#45;&gt;sourcefile~inputprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge233" class="edge">
<title>sourcefile~datasizing.f90&#45;&gt;sourcefile~inputprocessor.f90</title>
<path fill="none" stroke="#ff003f" stroke-dasharray="5,2" d="M408.5219,-3604.92C426.6647,-3582.3588 465.9403,-3529.4579 480.9653,-3477.2417 520.4627,-3339.9775 450.7419,-2318.7958 516.9653,-2192.2417 527.5743,-2171.9677 548.149,-2156.629 566.3057,-2146.28"/>
<polygon fill="#ff003f" stroke="#ff003f" points="568.3679,-2149.1448 575.5145,-2141.3232 565.0501,-2142.981 568.3679,-2149.1448"/>
</g>
<!-- sourcefile~datasizing.f90&#45;&gt;sourcefile~branchinputmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge194" class="edge">
<title>sourcefile~datasizing.f90&#45;&gt;sourcefile~branchinputmanager.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M439.5322,-3617.7488C558.5314,-3621.2144 917.0219,-3624.7037 1202.9897,-3555.2417 1287.1109,-3534.8085 1318.1751,-3537.366 1382.3269,-3479.2417 1407.0882,-3456.8068 1395.295,-3437.4486 1418.3269,-3413.2417 1536.3134,-3289.2359 1638.8515,-3345.0444 1746.8408,-3212.2417 1812.2372,-3131.8188 1836.4027,-3005.0001 1843.6709,-2955.2546"/>
<polygon fill="#ff0000" stroke="#ff0000" points="1847.1385,-2955.7288 1845.0406,-2945.3438 1840.2044,-2954.7705 1847.1385,-2955.7288"/>
</g>
<!-- sourcefile~emsmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node6" class="node">
<title>sourcefile~emsmanager.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node6"><a xlink:href="../sourcefile/emsmanager.f90.html" xlink:title="EMSManager.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="2291.4526,-2088.2471 2198.1844,-2088.2471 2198.1844,-2066.2362 2291.4526,-2066.2362 2291.4526,-2088.2471"/>
<text text-anchor="middle" x="2244.8185" y="-2074.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">EMSManager.f90</text>
</a>
</g>
</g>
<!-- sourcefile~emsmanager.f90&#45;&gt;sourcefile~plantchillers.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge241" class="edge">
<title>sourcefile~emsmanager.f90&#45;&gt;sourcefile~plantchillers.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M2291.6715,-2077.2417C2299.8965,-2077.2417 2308.521,-2077.2417 2316.9365,-2077.2417"/>
<polygon fill="#ff0000" stroke="#ff0000" points="2317.0571,-2080.7418 2327.057,-2077.2417 2317.057,-2073.7418 2317.0571,-2080.7418"/>
</g>
<!-- sourcefile~datainterfaces.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node7" class="node">
<title>sourcefile~datainterfaces.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node7"><a xlink:href="../sourcefile/datainterfaces.f90.html" xlink:title="DataInterfaces.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="447.8836,-2529.2471 350.2841,-2529.2471 350.2841,-2507.2362 447.8836,-2507.2362 447.8836,-2529.2471"/>
<text text-anchor="middle" x="399.0839" y="-2515.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">DataInterfaces.f90</text>
</a>
</g>
</g>
<!-- sourcefile~datainterfaces.f90&#45;&gt;sourcefile~plantchillers.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge242" class="edge">
<title>sourcefile~datainterfaces.f90&#45;&gt;sourcefile~plantchillers.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M414.1876,-2529.4984C433.6397,-2544.9963 466.6446,-2574.9171 480.9653,-2609.2417 534.2764,-2737.0201 483.4861,-3096.8969 516.9653,-3231.2417 569.5949,-3442.4326 578.6832,-3511.9137 721.3989,-3676.2417 854.5557,-3829.5631 947.3529,-3802.6469 1145.9073,-3845.2417"/>
</g>
<!-- sourcefile~datainterfaces.f90&#45;&gt;sourcefile~plantutilities.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge11" class="edge">
<title>sourcefile~datainterfaces.f90&#45;&gt;sourcefile~plantutilities.f90</title>
<path fill="none" stroke="#ff3f00" stroke-dasharray="5,2" d="M1846.3422,-3769.2417C1872.8678,-3754.8648 1888.9586,-3767.0162 1909.8435,-3745.2417 1982.1098,-3669.8971 1914.3064,-3600.279 1983.6563,-3522.2417"/>
<path fill="none" stroke="#ff3f00" stroke-dasharray="5,2" d="M413.7755,-2529.2678C433.0915,-2544.7264 466.2901,-2574.836 480.9653,-2609.2417 566.2899,-2809.283 425.4271,-2899.9664 516.9653,-3097.2417 619.0371,-3317.2178 695.0822,-3360.579 906.5706,-3479.2417 1163.3047,-3623.2911 1270.0054,-3546.7721 1548.821,-3641.2417 1616.9893,-3664.3388 1783.064,-3803.5383 1846.3422,-3769.2417"/>
</g>
<!-- sourcefile~datainterfaces.f90&#45;&gt;sourcefile~emsmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge111" class="edge">
<title>sourcefile~datainterfaces.f90&#45;&gt;sourcefile~emsmanager.f90</title>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M601.1821,-2244.2417C650.1228,-2210.0381 1606.6071,-2089.651 1665.8309,-2097.2417"/>
</g>
<!-- sourcefile~reportsizingmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node8" class="node">
<title>sourcefile~reportsizingmanager.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node8"><a xlink:href="../sourcefile/reportsizingmanager.f90.html" xlink:title="ReportSizingManager.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="1549.0691,-277.2471 1418.0789,-277.2471 1418.0789,-255.2362 1549.0691,-255.2362 1549.0691,-277.2471"/>
<text text-anchor="middle" x="1483.574" y="-263.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">ReportSizingManager.f90</text>
</a>
</g>
</g>
<!-- sourcefile~datainterfaces.f90&#45;&gt;sourcefile~reportsizingmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge119" class="edge">
<title>sourcefile~datainterfaces.f90&#45;&gt;sourcefile~reportsizingmanager.f90</title>
<path fill="none" stroke="#7fff00" stroke-dasharray="5,2" d="M403.3277,-2507.0554C417.6505,-2468.6667 464.2406,-2338.4627 480.9653,-2226.2417 494.0714,-2138.3016 475.1915,-704.7285 516.9653,-626.2417 560.0295,-545.3304 611.7746,-561.8368 685.3989,-507.2417 701.6807,-495.1682 703.4779,-488.7128 721.3989,-479.2417 752.1869,-462.9705 763.6731,-468.2266 795.9847,-455.2417"/>
</g>
<!-- sourcefile~globalnames.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node9" class="node">
<title>sourcefile~globalnames.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node9"><a xlink:href="../sourcefile/globalnames.f90.html" xlink:title="GlobalNames.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="842.6086,-3013.2471 749.3609,-3013.2471 749.3609,-2991.2362 842.6086,-2991.2362 842.6086,-3013.2471"/>
<text text-anchor="middle" x="795.9847" y="-2999.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">GlobalNames.f90</text>
</a>
</g>
</g>
<!-- sourcefile~datainterfaces.f90&#45;&gt;sourcefile~globalnames.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge123" class="edge">
<title>sourcefile~datainterfaces.f90&#45;&gt;sourcefile~globalnames.f90</title>
<path fill="none" stroke="#3fff00" stroke-dasharray="5,2" d="M601.1821,-2931.2417C633.8891,-2952.3371 649.7527,-2939.6178 685.3989,-2955.2417 702.5728,-2962.7691 704.4019,-2969.3231 721.3989,-2977.2417 729.7628,-2981.1383 738.9069,-2984.7194 747.837,-2987.8802"/>
<polygon fill="#3fff00" stroke="#3fff00" points="746.8015,-2991.2249 757.396,-2991.14 749.0609,-2984.5995 746.8015,-2991.2249"/>
<path fill="none" stroke="#3fff00" stroke-dasharray="5,2" d="M413.5517,-2529.3663C432.6141,-2544.9364 465.5262,-2575.1719 480.9653,-2609.2417 508.9532,-2671.003 471.5663,-2861.8759 516.9653,-2912.2417 542.6556,-2940.7426 568.9369,-2910.4441 601.1821,-2931.2417"/>
</g>
<!-- sourcefile~outairnodemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node11" class="node">
<title>sourcefile~outairnodemanager.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node11"><a xlink:href="../sourcefile/outairnodemanager.f90.html" xlink:title="OutAirNodeManager.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="1909.0814,-2222.2471 1783.6029,-2222.2471 1783.6029,-2200.2362 1909.0814,-2200.2362 1909.0814,-2222.2471"/>
<text text-anchor="middle" x="1846.3422" y="-2208.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">OutAirNodeManager.f90</text>
</a>
</g>
</g>
<!-- sourcefile~datainterfaces.f90&#45;&gt;sourcefile~outairnodemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge138" class="edge">
<title>sourcefile~datainterfaces.f90&#45;&gt;sourcefile~outairnodemanager.f90</title>
<path fill="none" stroke="#00ff3f" stroke-dasharray="5,2" d="M795.9847,-2357.2417C827.9768,-2343.4883 843.4498,-2355.0846 870.5706,-2333.2417 895.3866,-2313.2549 881.1764,-2290.4886 906.5706,-2271.2417 973.2376,-2220.7128 1005.9619,-2235.7038 1088.825,-2224.2417 1342.9177,-2189.0939 1409.5422,-2200.5382 1665.8309,-2211.2417"/>
<path fill="none" stroke="#00ff3f" stroke-dasharray="5,2" d="M413.4159,-2507.1198C434.7312,-2491.1803 476.6195,-2462.1256 516.9653,-2447.2417 552.5636,-2434.1092 564.1927,-2441.6963 601.1821,-2433.2417"/>
<path fill="none" stroke="#00ff3f" stroke-dasharray="5,2" d="M601.1821,-2433.2417C659.7876,-2419.8463 664.5424,-2390.7705 721.3989,-2371.2417 753.2979,-2360.2852 764.9097,-2370.3539 795.9847,-2357.2417"/>
</g>
<!-- sourcefile~datainterfaces.f90&#45;&gt;sourcefile~curvemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge146" class="edge">
<title>sourcefile~datainterfaces.f90&#45;&gt;sourcefile~curvemanager.f90</title>
<path fill="none" stroke="#00ff7f" stroke-dasharray="5,2" d="M601.1821,-2739.2417C633.2819,-2761.2499 650.8839,-2745.2564 685.3989,-2763.2417 713.4975,-2777.8835 765.9684,-2843.0961 795.9847,-2853.2417"/>
</g>
<!-- sourcefile~dataenvironment.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node13" class="node">
<title>sourcefile~dataenvironment.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node13"><a xlink:href="../sourcefile/dataenvironment.f90.html" xlink:title="DataEnvironment.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="1034.8358,-1645.2471 924.5597,-1645.2471 924.5597,-1623.2362 1034.8358,-1623.2362 1034.8358,-1645.2471"/>
<text text-anchor="middle" x="979.6978" y="-1631.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">DataEnvironment.f90</text>
</a>
</g>
</g>
<!-- sourcefile~datainterfaces.f90&#45;&gt;sourcefile~dataenvironment.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge150" class="edge">
<title>sourcefile~datainterfaces.f90&#45;&gt;sourcefile~dataenvironment.f90</title>
<path fill="none" stroke="#00ffbf" stroke-dasharray="5,2" d="M795.9847,-1673.2417C843.7523,-1670.7137 897.1051,-1658.275 933.9541,-1648.115"/>
<polygon fill="#00ffbf" stroke="#00ffbf" points="935.2126,-1651.3969 943.8914,-1645.3199 933.3172,-1644.6583 935.2126,-1651.3969"/>
<path fill="none" stroke="#00ffbf" stroke-dasharray="5,2" d="M403.0932,-2507.0171C416.6625,-2468.5054 461.1179,-2337.9527 480.9653,-2226.2417 498.8628,-2125.506 454.2689,-1848.0944 516.9653,-1767.2417 597.153,-1663.8325 665.3107,-1680.1574 795.9847,-1673.2417"/>
</g>
<!-- sourcefile~psychroutines.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node15" class="node">
<title>sourcefile~psychroutines.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node15"><a xlink:href="../sourcefile/psychroutines.f90.html" xlink:title="PsychRoutines.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="1195.4562,-2255.2471 1096.3585,-2255.2471 1096.3585,-2233.2362 1195.4562,-2233.2362 1195.4562,-2255.2471"/>
<text text-anchor="middle" x="1145.9073" y="-2241.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">PsychRoutines.f90</text>
</a>
</g>
</g>
<!-- sourcefile~datainterfaces.f90&#45;&gt;sourcefile~psychroutines.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge158" class="edge">
<title>sourcefile~datainterfaces.f90&#45;&gt;sourcefile~psychroutines.f90</title>
<path fill="none" stroke="#00bfff" stroke-dasharray="5,2" d="M795.9847,-2357.2417C828.8559,-2345.7465 837.4284,-2343.9303 870.5706,-2333.2417 952.2642,-2306.8948 1047.5631,-2276.0703 1101.913,-2258.4823"/>
<polygon fill="#00bfff" stroke="#00bfff" points="1103.1357,-2261.7654 1111.5722,-2255.3563 1100.9804,-2255.1054 1103.1357,-2261.7654"/>
</g>
<!-- sourcefile~branchnodeconnections.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node16" class="node">
<title>sourcefile~branchnodeconnections.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node16"><a xlink:href="../sourcefile/branchnodeconnections.f90.html" xlink:title="BranchNodeConnections.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="1052.9524,-2711.2471 906.4431,-2711.2471 906.4431,-2689.2362 1052.9524,-2689.2362 1052.9524,-2711.2471"/>
<text text-anchor="middle" x="979.6978" y="-2697.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">BranchNodeConnections.f90</text>
</a>
</g>
</g>
<!-- sourcefile~datainterfaces.f90&#45;&gt;sourcefile~branchnodeconnections.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge164" class="edge">
<title>sourcefile~datainterfaces.f90&#45;&gt;sourcefile~branchnodeconnections.f90</title>
<path fill="none" stroke="#007fff" stroke-dasharray="5,2" d="M795.9847,-2663.2417C835.3139,-2671.1895 879.3854,-2680.0666 914.5027,-2687.133"/>
<polygon fill="#007fff" stroke="#007fff" points="914.1334,-2690.6288 924.6273,-2689.1701 915.5142,-2683.7663 914.1334,-2690.6288"/>
<path fill="none" stroke="#007fff" stroke-dasharray="5,2" d="M421.6393,-2529.2492C481.1199,-2557.6578 647.856,-2633.3071 795.9847,-2663.2417"/>
</g>
<!-- sourcefile~datainterfaces.f90&#45;&gt;sourcefile~schedulemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge174" class="edge">
<title>sourcefile~datainterfaces.f90&#45;&gt;sourcefile~schedulemanager.f90</title>
<path fill="none" stroke="#003fff" stroke-dasharray="5,2" d="M601.1821,-1597.2417C602.9676,-1593.8283 866.9229,-1532.4802 870.5706,-1531.2417 920.7428,-1514.2062 930.9534,-1504.013 979.6978,-1483.2417"/>
</g>
<!-- sourcefile~datainterfaces.f90&#45;&gt;sourcefile~general.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge183" class="edge">
<title>sourcefile~datainterfaces.f90&#45;&gt;sourcefile~general.f90</title>
<path fill="none" stroke="#0000ff" stroke-dasharray="5,2" d="M405.9856,-2507.015C434.9163,-2460.2771 547.4029,-2281.8269 601.1821,-2244.2417"/>
<path fill="none" stroke="#0000ff" stroke-dasharray="5,2" d="M601.1821,-2244.2417C633.0834,-2221.9466 650.8839,-2238.227 685.3989,-2220.2417 721.9936,-2201.1727 757.8214,-2168.7749 778.3635,-2148.4933"/>
<polygon fill="#0000ff" stroke="#0000ff" points="780.8834,-2150.923 785.4577,-2141.3665 775.9223,-2145.9846 780.8834,-2150.923"/>
</g>
<!-- sourcefile~datainterfaces.f90&#45;&gt;sourcefile~dataplant.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge204" class="edge">
<title>sourcefile~datainterfaces.f90&#45;&gt;sourcefile~dataplant.f90</title>
<path fill="none" stroke="#3f00ff" stroke-dasharray="5,2" d="M413.7075,-2529.2971C432.9464,-2544.7889 466.0578,-2574.936 480.9653,-2609.2417 554.2214,-2777.8217 426.9658,-2860.9739 516.9653,-3021.2417 562.4809,-3102.2941 628.8031,-3071.4984 685.3989,-3145.2417 712.1315,-3180.0737 688.4194,-3208.2546 721.3989,-3237.2417 852.509,-3352.4798 1312.8951,-3390.6578 1483.574,-3427.2417"/>
<path fill="none" stroke="#3f00ff" stroke-dasharray="5,2" d="M1483.574,-3427.2417C1644.316,-3442.3583 1721.7161,-3510.8811 1846.3422,-3408.2417"/>
</g>
<!-- sourcefile~nodeinputmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node23" class="node">
<title>sourcefile~nodeinputmanager.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node23"><a xlink:href="../sourcefile/nodeinputmanager.f90.html" xlink:title="NodeInputManager.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="1725.1665,-2413.2471 1606.4954,-2413.2471 1606.4954,-2391.2362 1725.1665,-2391.2362 1725.1665,-2413.2471"/>
<text text-anchor="middle" x="1665.8309" y="-2399.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">NodeInputManager.f90</text>
</a>
</g>
</g>
<!-- sourcefile~datainterfaces.f90&#45;&gt;sourcefile~nodeinputmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge219" class="edge">
<title>sourcefile~datainterfaces.f90&#45;&gt;sourcefile~nodeinputmanager.f90</title>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M601.1821,-2433.2417C658.6274,-2421.8063 664.1266,-2474.9693 721.3989,-2487.2417 794.2291,-2502.8478 1119.7929,-2480.0509 1145.9073,-2473.2417"/>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M1145.9073,-2473.2417C1217.2359,-2456.695 1237.4507,-2474.725 1310.6583,-2473.2417"/>
</g>
<!-- sourcefile~fluidproperties.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node24" class="node">
<title>sourcefile~fluidproperties.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node24"><a xlink:href="../sourcefile/fluidproperties.f90.html" xlink:title="FluidProperties.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="1029.825,-2865.2471 929.5705,-2865.2471 929.5705,-2843.2362 1029.825,-2843.2362 1029.825,-2865.2471"/>
<text text-anchor="middle" x="979.6978" y="-2851.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">FluidProperties.f90</text>
</a>
</g>
</g>
<!-- sourcefile~datainterfaces.f90&#45;&gt;sourcefile~fluidproperties.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge226" class="edge">
<title>sourcefile~datainterfaces.f90&#45;&gt;sourcefile~fluidproperties.f90</title>
<path fill="none" stroke="#ff007f" stroke-dasharray="5,2" d="M601.1821,-2739.2417C637.5587,-2764.1822 753.2186,-2766.4556 795.9847,-2777.2417"/>
<path fill="none" stroke="#ff007f" stroke-dasharray="5,2" d="M795.9847,-2777.2417C852.5359,-2791.5045 914.3057,-2820.3916 949.8767,-2838.4453"/>
<polygon fill="#ff007f" stroke="#ff007f" points="948.6944,-2841.7727 959.1887,-2843.2289 951.893,-2835.5462 948.6944,-2841.7727"/>
<path fill="none" stroke="#ff007f" stroke-dasharray="5,2" d="M411.9294,-2529.3475C429.7241,-2545.3576 461.8394,-2576.6028 480.9653,-2609.2417 506.1198,-2652.1685 480.9193,-2680.9468 516.9653,-2715.2417 545.1623,-2742.0688 569.0823,-2717.2334 601.1821,-2739.2417"/>
</g>
<!-- sourcefile~datainterfaces.f90&#45;&gt;sourcefile~inputprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge236" class="edge">
<title>sourcefile~datainterfaces.f90&#45;&gt;sourcefile~inputprocessor.f90</title>
<path fill="none" stroke="#ff003f" stroke-dasharray="5,2" d="M400.7207,-2507.0076C407.6209,-2462.8348 437.7264,-2298.3175 516.9653,-2192.2417 531.2145,-2173.1665 552.9649,-2157.3646 570.7921,-2146.4881"/>
<polygon fill="#ff003f" stroke="#ff003f" points="572.8464,-2149.3406 579.6964,-2141.258 569.3011,-2143.3047 572.8464,-2149.3406"/>
</g>
<!-- sourcefile~datainterfaces.f90&#45;&gt;sourcefile~runtimelanguageprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge30" class="edge">
<title>sourcefile~datainterfaces.f90&#45;&gt;sourcefile~runtimelanguageprocessor.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M402.1892,-2507.1699C420.2575,-2442.7907 511.2382,-2119.1872 516.9653,-2110.2417 640.4103,-1917.4247 703.2695,-1878.5304 906.5706,-1773.2417 988.7142,-1730.6999 1218.1818,-1675.579 1310.6583,-1673.2417"/>
</g>
<!-- sourcefile~datainterfaces.f90&#45;&gt;sourcefile~outputprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge64" class="edge">
<title>sourcefile~datainterfaces.f90&#45;&gt;sourcefile~outputprocessor.f90</title>
<path fill="none" stroke="#ffbf00" stroke-dasharray="5,2" d="M795.9847,-1673.2417C908.6292,-1652.9187 951.576,-1707.6313 1052.825,-1654.2417 1082.137,-1638.7851 1210.6493,-1438.415 1238.9897,-1421.2417 1266.7462,-1404.4223 1281.9807,-1422.4373 1310.6583,-1407.2417"/>
</g>
<!-- sourcefile~dataruntimelanguage.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node30" class="node">
<title>sourcefile~dataruntimelanguage.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node30"><a xlink:href="../sourcefile/dataruntimelanguage.f90.html" xlink:title="DataRuntimeLanguage.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="669.6908,-1798.2471 532.6734,-1798.2471 532.6734,-1776.2362 669.6908,-1776.2362 669.6908,-1798.2471"/>
<text text-anchor="middle" x="601.1821" y="-1784.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">DataRuntimeLanguage.f90</text>
</a>
</g>
</g>
<!-- sourcefile~datainterfaces.f90&#45;&gt;sourcefile~dataruntimelanguage.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge77" class="edge">
<title>sourcefile~datainterfaces.f90&#45;&gt;sourcefile~dataruntimelanguage.f90</title>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M402.3534,-2507.1423C413.7004,-2468.508 452.2536,-2336.2813 480.9653,-2226.2417 498.1655,-2160.321 499.461,-2143.0823 516.9653,-2077.2417 543.9586,-1975.7094 580.2954,-1855.4371 594.8081,-1807.976"/>
<polygon fill="#00ffff" stroke="#00ffff" points="598.2038,-1808.8403 597.7875,-1798.2537 591.511,-1806.7893 598.2038,-1808.8403"/>
</g>
<!-- sourcefile~dataheatbalance.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node33" class="node">
<title>sourcefile~dataheatbalance.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node33"><a xlink:href="../sourcefile/dataheatbalance.f90.html" xlink:title="DataHeatBalance.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="1201.7241,-769.2471 1090.0905,-769.2471 1090.0905,-747.2362 1201.7241,-747.2362 1201.7241,-769.2471"/>
<text text-anchor="middle" x="1145.9073" y="-755.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">DataHeatBalance.f90</text>
</a>
</g>
</g>
<!-- sourcefile~datainterfaces.f90&#45;&gt;sourcefile~dataheatbalance.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge94" class="edge">
<title>sourcefile~datainterfaces.f90&#45;&gt;sourcefile~dataheatbalance.f90</title>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M403.187,-2507.0332C417.0577,-2468.5733 462.367,-2338.1675 480.9653,-2226.2417 527.883,-1943.8879 457.0818,-1863.1326 516.9653,-1583.2417 570.1341,-1334.7349 584.4596,-1263.3215 721.3989,-1049.2417 784.9377,-949.9103 809.1712,-925.7043 906.5706,-859.2417 966.9905,-818.0128 1046.9177,-788.4853 1097.3835,-772.3809"/>
<polygon fill="#ff00bf" stroke="#ff00bf" points="1098.5771,-775.6747 1107.0693,-769.3395 1096.48,-768.9962 1098.5771,-775.6747"/>
</g>
<!-- sourcefile~sqlitefortranroutines.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node38" class="node">
<title>sourcefile~sqlitefortranroutines.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node38"><a xlink:href="../sourcefile/sqlitefortranroutines.f90.html" xlink:title="SQLiteFortranRoutines.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="1379.0561,-864.2471 1242.2606,-864.2471 1242.2606,-842.2362 1379.0561,-842.2362 1379.0561,-864.2471"/>
<text text-anchor="middle" x="1310.6583" y="-850.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">SQLiteFortranRoutines.f90</text>
</a>
</g>
</g>
<!-- sourcefile~datainterfaces.f90&#45;&gt;sourcefile~sqlitefortranroutines.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge43" class="edge">
<title>sourcefile~datainterfaces.f90&#45;&gt;sourcefile~sqlitefortranroutines.f90</title>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M403.1484,-2507.0267C416.8949,-2468.5459 461.8526,-2338.0808 480.9653,-2226.2417 501.6728,-2105.0711 463.7588,-1785.0576 516.9653,-1674.2417 538.9168,-1628.5222 578.8885,-1642.7954 601.1821,-1597.2417"/>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M601.1821,-1597.2417C618.1068,-1562.6586 701.5438,-1305.2297 721.3989,-1272.2417 739.6499,-1241.9189 1110.5402,-795.9237 1145.9073,-797.2417"/>
</g>
<!-- sourcefile~datainterfaces.f90&#45;&gt;sourcefile~branchinputmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge195" class="edge">
<title>sourcefile~datainterfaces.f90&#45;&gt;sourcefile~branchinputmanager.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M413.6093,-2529.3404C432.7369,-2544.8811 465.7227,-2575.0835 480.9653,-2609.2417 542.1676,-2746.3939 442.1494,-2815.0149 516.9653,-2945.2417 563.2722,-3025.8447 633.6984,-2991.9874 685.3989,-3069.2417 722.3293,-3124.4254 669.0945,-3173.3353 721.3989,-3214.2417 773.6226,-3255.085 804.2739,-3214.7402 870.5706,-3214.2417 1098.3763,-3212.5285 1158.7096,-3228.7583 1382.3269,-3185.2417 1427.9302,-3176.3671 1437.1825,-3161.7404 1483.574,-3159.2417"/>
</g>
<!-- sourcefile~reportsizingmanager.f90&#45;&gt;sourcefile~plantchillers.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge243" class="edge">
<title>sourcefile~reportsizingmanager.f90&#45;&gt;sourcefile~plantchillers.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1549.1206,-262.956C1583.8903,-262.0413 1627.2795,-262.2143 1665.8309,-266.2417"/>
</g>
<!-- sourcefile~globalnames.f90&#45;&gt;sourcefile~plantchillers.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge244" class="edge">
<title>sourcefile~globalnames.f90&#45;&gt;sourcefile~plantchillers.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M817.4573,-3013.4096C877.806,-3043.4352 1054.2307,-3121.8754 1202.9897,-3095.2417 1503.0906,-3041.5118 1541.9644,-2874.609 1846.3422,-2857.2417"/>
</g>
<!-- sourcefile~dataloopnode.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node10" class="node">
<title>sourcefile~dataloopnode.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node10"><a xlink:href="../sourcefile/dataloopnode.f90.html" xlink:title="DataLoopNode.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="846.1377,-3205.2471 745.8318,-3205.2471 745.8318,-3183.2362 846.1377,-3183.2362 846.1377,-3205.2471"/>
<text text-anchor="middle" x="795.9847" y="-3191.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">DataLoopNode.f90</text>
</a>
</g>
</g>
<!-- sourcefile~dataloopnode.f90&#45;&gt;sourcefile~plantchillers.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge245" class="edge">
<title>sourcefile~dataloopnode.f90&#45;&gt;sourcefile~plantchillers.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M808.0862,-3205.367C878.1324,-3269.2943 1240.4619,-3593.6415 1584.821,-3783.2417 1639.3253,-3813.2511 1786.5626,-3900.4949 1846.3422,-3883.2417"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1846.3422,-3883.2417C2073.9192,-3812.2511 2206.5491,-2881.004 2244.8185,-2857.2417"/>
</g>
<!-- sourcefile~dataloopnode.f90&#45;&gt;sourcefile~plantutilities.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge3" class="edge">
<title>sourcefile~dataloopnode.f90&#45;&gt;sourcefile~plantutilities.f90</title>
<path fill="none" stroke="#ff3f00" stroke-dasharray="5,2" d="M1145.9073,-3271.2417C1282.5907,-3312.2972 1289.4409,-3379.9531 1418.3269,-3441.2417 1488.9612,-3474.8301 1508.0892,-3483.0884 1584.821,-3498.2417 1759.0371,-3532.6465 1862.8462,-3652.3948 1983.6563,-3522.2417"/>
</g>
<!-- sourcefile~dataloopnode.f90&#45;&gt;sourcefile~emsmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge101" class="edge">
<title>sourcefile~dataloopnode.f90&#45;&gt;sourcefile~emsmanager.f90</title>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M979.6978,-3195.2417C1325.133,-3176.5049 2109.1462,-2241.7995 2229.2569,-2096.215"/>
<polygon fill="#ffff00" stroke="#ffff00" points="2231.9814,-2098.4123 2235.6358,-2088.4676 2226.5775,-2093.9629 2231.9814,-2098.4123"/>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M846.3759,-3196.9652C883.3452,-3198.3679 934.7295,-3199.0781 979.6978,-3195.2417"/>
</g>
<!-- sourcefile~dataloopnode.f90&#45;&gt;sourcefile~outairnodemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge130" class="edge">
<title>sourcefile~dataloopnode.f90&#45;&gt;sourcefile~outairnodemanager.f90</title>
<path fill="none" stroke="#00ff3f" stroke-dasharray="5,2" d="M1145.9073,-3081.2417C1192.8665,-3050.1411 1196.468,-3032.1783 1238.9897,-2995.2417 1301.0718,-2941.314 1324.4767,-2936.686 1382.3269,-2878.2417 1564.8536,-2693.8405 1609.5684,-2642.4145 1746.8408,-2422.2417 1787.776,-2356.5852 1823.0264,-2271.4181 1838.2804,-2232.4229"/>
<polygon fill="#00ff3f" stroke="#00ff3f" points="1841.6967,-2233.2924 1842.0406,-2222.7031 1835.1682,-2230.7667 1841.6967,-2233.2924"/>
</g>
<!-- sourcefile~dataloopnode.f90&#45;&gt;sourcefile~curvemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge139" class="edge">
<title>sourcefile~dataloopnode.f90&#45;&gt;sourcefile~curvemanager.f90</title>
<path fill="none" stroke="#00ff7f" stroke-dasharray="5,2" d="M804.993,-3183.0792C819.5507,-3164.8201 848.8127,-3127.1941 870.5706,-3093.2417 910.8343,-3030.4114 951.4832,-2951.6958 969.737,-2915.3454"/>
<polygon fill="#00ff7f" stroke="#00ff7f" points="972.9354,-2916.7746 974.2727,-2906.2645 966.6731,-2913.6467 972.9354,-2916.7746"/>
</g>
<!-- sourcefile~dataloopnode.f90&#45;&gt;sourcefile~branchnodeconnections.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge160" class="edge">
<title>sourcefile~dataloopnode.f90&#45;&gt;sourcefile~branchnodeconnections.f90</title>
<path fill="none" stroke="#007fff" stroke-dasharray="5,2" d="M801.954,-3182.8974C815.9568,-3155.837 851.1925,-3085.0677 870.5706,-3022.2417 895.645,-2940.9472 877.8488,-2914.3203 906.5706,-2834.2417 922.0303,-2791.1387 949.933,-2745.1779 966.4402,-2719.8515"/>
<polygon fill="#007fff" stroke="#007fff" points="969.3675,-2721.7701 971.962,-2711.4978 963.5279,-2717.9101 969.3675,-2721.7701"/>
</g>
<!-- sourcefile~dataloopnode.f90&#45;&gt;sourcefile~dataplant.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge198" class="edge">
<title>sourcefile~dataloopnode.f90&#45;&gt;sourcefile~dataplant.f90</title>
<path fill="none" stroke="#3f00ff" stroke-dasharray="5,2" d="M1846.3422,-3408.2417C1927.3948,-3346.0624 1971.1353,-3006.6795 1981.323,-2917.6403"/>
<polygon fill="#3f00ff" stroke="#3f00ff" points="1984.8091,-2917.9589 1982.4463,-2907.6309 1977.8528,-2917.1781 1984.8091,-2917.9589"/>
<path fill="none" stroke="#3f00ff" stroke-dasharray="5,2" d="M834.9335,-3205.2763C899.1181,-3222.9008 1031.4167,-3256.8778 1145.9073,-3271.2417"/>
<path fill="none" stroke="#3f00ff" stroke-dasharray="5,2" d="M1145.9073,-3271.2417C1249.2355,-3294.0229 1278.1404,-3280.7789 1382.3269,-3299.2417 1486.6232,-3317.7239 1762.3019,-3472.713 1846.3422,-3408.2417"/>
</g>
<!-- sourcefile~dataloopnode.f90&#45;&gt;sourcefile~nodeinputmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge210" class="edge">
<title>sourcefile~dataloopnode.f90&#45;&gt;sourcefile~nodeinputmanager.f90</title>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M846.1262,-3185.367C916.8076,-3171.2868 1048.0334,-3139.2913 1145.9073,-3081.2417"/>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M1145.9073,-3081.2417C1202.1073,-3041.3634 1197.2987,-3012.1103 1238.9897,-2957.2417 1399.0798,-2746.5506 1595.5512,-2492.8643 1650.7701,-2421.6543"/>
<polygon fill="#ff00bf" stroke="#ff00bf" points="1653.7033,-2423.5833 1657.0662,-2413.5363 1648.1719,-2419.2933 1653.7033,-2423.5833"/>
</g>
<!-- sourcefile~dataloopnode.f90&#45;&gt;sourcefile~branchinputmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge185" class="edge">
<title>sourcefile~dataloopnode.f90&#45;&gt;sourcefile~branchinputmanager.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M979.6978,-3195.2417C1053.4603,-3191.2407 1072.856,-3206.2147 1145.9073,-3195.2417"/>
</g>
<!-- sourcefile~outairnodemanager.f90&#45;&gt;sourcefile~plantchillers.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge246" class="edge">
<title>sourcefile~outairnodemanager.f90&#45;&gt;sourcefile~plantchillers.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1983.6563,-2211.2417C2107.2799,-2289.4204 1979.2627,-2791.3704 2109.8602,-2857.2417"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M2109.8602,-2857.2417C2163.415,-2884.2539 2191.1823,-2884.092 2244.8185,-2857.2417"/>
</g>
<!-- sourcefile~outairnodemanager.f90&#45;&gt;sourcefile~emsmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge103" class="edge">
<title>sourcefile~outairnodemanager.f90&#45;&gt;sourcefile~emsmanager.f90</title>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M1888.3089,-2200.1985C1917.3004,-2195.0639 1955.5492,-2193.467 1983.6563,-2211.2417"/>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M1983.6563,-2211.2417C2047.54,-2251.6414 2035.2274,-2085.2744 2109.8602,-2097.2417"/>
</g>
<!-- sourcefile~curvemanager.f90&#45;&gt;sourcefile~plantchillers.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge247" class="edge">
<title>sourcefile~curvemanager.f90&#45;&gt;sourcefile~plantchillers.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1145.9073,-2929.2417C1192.0313,-2922.9832 1194.0819,-2893.4837 1238.9897,-2881.2417 1422.3072,-2831.2686 1476.0803,-2847.3778 1665.8309,-2857.2417"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1011.7907,-2906.2537C1044.982,-2916.5854 1098.4994,-2930.3082 1145.9073,-2929.2417"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1665.8309,-2857.2417C1745.9949,-2854.0579 1766.2452,-2861.8119 1846.3422,-2857.2417"/>
</g>
<!-- sourcefile~curvemanager.f90&#45;&gt;sourcefile~runtimelanguageprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge21" class="edge">
<title>sourcefile~curvemanager.f90&#45;&gt;sourcefile~runtimelanguageprocessor.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1029.1303,-2887.9983C1037.8191,-2884.8959 1046.1899,-2880.4901 1052.825,-2874.2417 1198.6664,-2736.8972 1149.2019,-2642.2186 1202.9897,-2449.2417 1224.1929,-2373.1702 1204.8808,-2346.4668 1238.9897,-2275.2417 1285.7527,-2177.593 1487.3368,-1988.3581 1548.821,-1899.2417 1593.2794,-1834.803 1636.5448,-1752.3774 1655.6397,-1714.6951"/>
<polygon fill="#ff0000" stroke="#ff0000" points="1658.9961,-1715.8114 1660.3654,-1705.3054 1652.7434,-1712.6645 1658.9961,-1715.8114"/>
</g>
<!-- sourcefile~curvemanager.f90&#45;&gt;sourcefile~branchinputmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge188" class="edge">
<title>sourcefile~curvemanager.f90&#45;&gt;sourcefile~branchinputmanager.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1145.9073,-2929.2417C1375.7158,-2904.9957 1442.3063,-2874.6197 1665.8309,-2933.2417"/>
</g>
<!-- sourcefile~dataenvironment.f90&#45;&gt;sourcefile~plantchillers.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge248" class="edge">
<title>sourcefile~dataenvironment.f90&#45;&gt;sourcefile~plantchillers.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1145.9073,-1445.2417C1245.8977,-1411.2338 1285.4875,-1463.3931 1382.3269,-1421.2417 1472.5673,-1381.9626 1490.9262,-1354.8304 1548.821,-1275.2417 1692.4474,-1077.7969 1739.7304,-255.6035 1983.6563,-266.2417"/>
</g>
<!-- sourcefile~dataenvironment.f90&#45;&gt;sourcefile~outairnodemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge136" class="edge">
<title>sourcefile~dataenvironment.f90&#45;&gt;sourcefile~outairnodemanager.f90</title>
<path fill="none" stroke="#00ff3f" stroke-dasharray="5,2" d="M1034.9562,-1639.8193C1176.8107,-1657.2169 1556.0286,-1723.7111 1746.8408,-1950.2417 1794.0777,-2006.3209 1754.7695,-2043.5054 1782.8408,-2111.2417 1795.3357,-2141.392 1816.7417,-2172.5898 1831.2092,-2191.9502"/>
<polygon fill="#00ff3f" stroke="#00ff3f" points="1828.4692,-2194.1293 1837.3112,-2199.9663 1834.0391,-2189.8894 1828.4692,-2194.1293"/>
</g>
<!-- sourcefile~dataenvironment.f90&#45;&gt;sourcefile~psychroutines.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge157" class="edge">
<title>sourcefile~dataenvironment.f90&#45;&gt;sourcefile~psychroutines.f90</title>
<path fill="none" stroke="#00bfff" stroke-dasharray="5,2" d="M982.7245,-1645.3501C1002.509,-1717.9606 1113.4116,-2124.9801 1140.1206,-2223.0039"/>
<polygon fill="#00bfff" stroke="#00bfff" points="1136.8176,-2224.1954 1142.8234,-2232.9236 1143.5714,-2222.3552 1136.8176,-2224.1954"/>
</g>
<!-- sourcefile~dataenvironment.f90&#45;&gt;sourcefile~schedulemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge172" class="edge">
<title>sourcefile~dataenvironment.f90&#45;&gt;sourcefile~schedulemanager.f90</title>
<path fill="none" stroke="#003fff" stroke-dasharray="5,2" d="M1034.7269,-1623.0907C1041.6213,-1619.6428 1047.9505,-1615.1347 1052.825,-1609.2417 1125.4968,-1521.3855 1019.8782,-1446.0505 1088.825,-1355.2417 1091.2936,-1351.9902 1094.2748,-1349.1541 1097.5636,-1346.6816"/>
<polygon fill="#003fff" stroke="#003fff" points="1099.627,-1349.5195 1106.2562,-1341.2548 1095.92,-1343.5816 1099.627,-1349.5195"/>
</g>
<!-- sourcefile~dataenvironment.f90&#45;&gt;sourcefile~nodeinputmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge222" class="edge">
<title>sourcefile~dataenvironment.f90&#45;&gt;sourcefile~nodeinputmanager.f90</title>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M984.5183,-1645.6214C1014.0004,-1713.9265 1176.7445,-2072.9407 1418.3269,-2263.2417 1467.2426,-2301.7739 1494.4363,-2283.914 1548.821,-2314.2417 1585.2379,-2334.5496 1623.0295,-2364.9653 1645.4807,-2384.1961"/>
<polygon fill="#ff00bf" stroke="#ff00bf" points="1643.4508,-2387.0685 1653.2994,-2390.9745 1648.0362,-2381.7794 1643.4508,-2387.0685"/>
</g>
<!-- sourcefile~dataenvironment.f90&#45;&gt;sourcefile~runtimelanguageprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge27" class="edge">
<title>sourcefile~dataenvironment.f90&#45;&gt;sourcefile~runtimelanguageprocessor.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1145.9073,-1445.2417C1149.5266,-1444.0768 1379.2492,-1581.0094 1382.3269,-1583.2417 1431.0642,-1618.5908 1424.7734,-1660.3044 1483.574,-1673.2417"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1483.574,-1673.2417C1512.7827,-1680.3402 1545.2247,-1685.059 1574.5466,-1688.1878"/>
<polygon fill="#ff0000" stroke="#ff0000" points="1574.4745,-1691.6985 1584.7776,-1689.2295 1575.1836,-1684.7345 1574.4745,-1691.6985"/>
</g>
<!-- sourcefile~dataenvironment.f90&#45;&gt;sourcefile~outputprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge60" class="edge">
<title>sourcefile~dataenvironment.f90&#45;&gt;sourcefile~outputprocessor.f90</title>
<path fill="none" stroke="#ffbf00" stroke-dasharray="5,2" d="M1145.9073,-1445.2417C1217.4386,-1422.2184 1243.7946,-1441.5349 1310.6583,-1407.2417"/>
<path fill="none" stroke="#ffbf00" stroke-dasharray="5,2" d="M1033.0431,-1623.1095C1040.4367,-1619.6635 1047.358,-1615.1509 1052.825,-1609.2417 1096.4547,-1562.0819 1046.8379,-1517.8698 1088.825,-1469.2417 1106.8109,-1448.4109 1119.7098,-1453.6737 1145.9073,-1445.2417"/>
</g>
<!-- sourcefile~dataenvironment.f90&#45;&gt;sourcefile~dataheatbalance.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge95" class="edge">
<title>sourcefile~dataenvironment.f90&#45;&gt;sourcefile~dataheatbalance.f90</title>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M981.6215,-1623.0865C990.6461,-1570.4773 1029.3316,-1341.8336 1052.825,-1153.2417 1063.037,-1071.2648 1040.3228,-850.115 1088.825,-783.2417 1091.1871,-779.9848 1094.0675,-777.1466 1097.2657,-774.6742"/>
<polygon fill="#ff00bf" stroke="#ff00bf" points="1099.2123,-777.584 1105.7563,-769.2517 1095.4445,-771.6845 1099.2123,-777.584"/>
</g>
<!-- sourcefile~dataenvironment.f90&#45;&gt;sourcefile~sqlitefortranroutines.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge46" class="edge">
<title>sourcefile~dataenvironment.f90&#45;&gt;sourcefile~sqlitefortranroutines.f90</title>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M1033.6847,-1623.1817C1040.9029,-1619.7253 1047.6024,-1615.1906 1052.825,-1609.2417 1106.0742,-1548.5862 1044.8195,-1498.9033 1088.825,-1431.2417 1122.7444,-1379.088 1171.9588,-1404.164 1202.9897,-1350.2417 1291.1371,-1197.0684 1177.7445,-1120.0157 1238.9897,-954.2417 1250.8558,-922.1236 1275.6925,-890.8808 1292.7707,-871.8531"/>
<polygon fill="#00ffff" stroke="#00ffff" points="1295.3598,-874.2084 1299.5545,-864.4793 1290.2082,-869.469 1295.3598,-874.2084"/>
</g>
<!-- sourcefile~outputreportpredefined.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node14" class="node">
<title>sourcefile~outputreportpredefined.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node14"><a xlink:href="../sourcefile/outputreportpredefined.f90.html" xlink:title="OutputReportPredefined.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="1382.4959,-268.2471 1238.8208,-268.2471 1238.8208,-246.2362 1382.4959,-246.2362 1382.4959,-268.2471"/>
<text text-anchor="middle" x="1310.6583" y="-254.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">OutputReportPredefined.f90</text>
</a>
</g>
</g>
<!-- sourcefile~outputreportpredefined.f90&#45;&gt;sourcefile~plantchillers.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge249" class="edge">
<title>sourcefile~outputreportpredefined.f90&#45;&gt;sourcefile~plantchillers.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1665.8309,-266.2417C1806.3221,-280.9184 1842.5499,-259.7472 1983.6563,-266.2417"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1382.3956,-248.886C1394.378,-247.7853 1406.6923,-246.8345 1418.3269,-246.2417 1476.2492,-243.2905 1491.0313,-241.3384 1548.821,-246.2417 1601.3908,-250.7021 1613.3891,-260.4694 1665.8309,-266.2417"/>
</g>
<!-- sourcefile~outputreportpredefined.f90&#45;&gt;sourcefile~reportsizingmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge120" class="edge">
<title>sourcefile~outputreportpredefined.f90&#45;&gt;sourcefile~reportsizingmanager.f90</title>
<path fill="none" stroke="#7fff00" stroke-dasharray="5,2" d="M1382.4879,-260.9803C1390.9318,-261.4198 1399.5674,-261.8693 1408.0598,-262.3113"/>
<polygon fill="#7fff00" stroke="#7fff00" points="1408.1568,-265.821 1418.3252,-262.8456 1408.5207,-258.8304 1408.1568,-265.821"/>
</g>
<!-- sourcefile~outputreportpredefined.f90&#45;&gt;sourcefile~outputprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge61" class="edge">
<title>sourcefile~outputreportpredefined.f90&#45;&gt;sourcefile~outputprocessor.f90</title>
<path fill="none" stroke="#ffbf00" stroke-dasharray="5,2" d="M1311.9416,-268.3768C1319.7607,-335.5624 1362.52,-693.6439 1418.3269,-982.2417 1436.6604,-1077.0506 1465.7059,-1188.6587 1477.8947,-1234.251"/>
<polygon fill="#ffbf00" stroke="#ffbf00" points="1474.5756,-1235.3864 1480.5505,-1244.1357 1481.3358,-1233.57 1474.5756,-1235.3864"/>
</g>
<!-- sourcefile~psychroutines.f90&#45;&gt;sourcefile~plantchillers.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge250" class="edge">
<title>sourcefile~psychroutines.f90&#45;&gt;sourcefile~plantchillers.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1483.574,-2249.2417C1563.4689,-2235.8887 1587.3215,-2229.2976 1665.8309,-2249.2417"/>
</g>
<!-- sourcefile~psychroutines.f90&#45;&gt;sourcefile~outairnodemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge132" class="edge">
<title>sourcefile~psychroutines.f90&#45;&gt;sourcefile~outairnodemanager.f90</title>
<path fill="none" stroke="#00ff3f" stroke-dasharray="5,2" d="M1310.6583,-2289.2417C1388.6795,-2300.8557 1405.7723,-2262.2448 1483.574,-2249.2417"/>
<path fill="none" stroke="#00ff3f" stroke-dasharray="5,2" d="M1483.574,-2249.2417C1565.187,-2235.6016 1583.114,-2209.0874 1665.8309,-2211.2417"/>
<path fill="none" stroke="#00ff3f" stroke-dasharray="5,2" d="M1177.6257,-2255.3296C1210.4518,-2266.2266 1263.4415,-2282.2131 1310.6583,-2289.2417"/>
</g>
<!-- sourcefile~psychroutines.f90&#45;&gt;sourcefile~nodeinputmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge216" class="edge">
<title>sourcefile~psychroutines.f90&#45;&gt;sourcefile~nodeinputmanager.f90</title>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M1310.6583,-2289.2417C1427.3515,-2317.2979 1561.3936,-2364.0171 1626.3886,-2387.628"/>
<polygon fill="#ff00bf" stroke="#ff00bf" points="1625.2466,-2390.9369 1635.8405,-2391.0758 1627.6454,-2384.3608 1625.2466,-2390.9369"/>
</g>
<!-- sourcefile~psychroutines.f90&#45;&gt;sourcefile~runtimelanguageprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge22" class="edge">
<title>sourcefile~psychroutines.f90&#45;&gt;sourcefile~runtimelanguageprocessor.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1156.7667,-2232.7542C1222.3814,-2163.3438 1565.8279,-1800.0297 1648.1056,-1712.9924"/>
<polygon fill="#ff0000" stroke="#ff0000" points="1650.7052,-1715.3374 1655.0313,-1705.666 1645.6183,-1710.5286 1650.7052,-1715.3374"/>
</g>
<!-- sourcefile~branchnodeconnections.f90&#45;&gt;sourcefile~plantchillers.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge251" class="edge">
<title>sourcefile~branchnodeconnections.f90&#45;&gt;sourcefile~plantchillers.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1846.3422,-2667.2417C1927.8946,-2732.0841 1884.2016,-2826.1915 1983.6563,-2857.2417"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1004.4329,-2689.1913C1049.8057,-2669.5939 1149.8737,-2629.4758 1238.9897,-2615.2417 1372.7551,-2593.8758 1740.312,-2582.937 1846.3422,-2667.2417"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1983.6563,-2857.2417C2037.1982,-2873.9577 2059.7794,-2831.9817 2109.8602,-2857.2417"/>
</g>
<!-- sourcefile~branchnodeconnections.f90&#45;&gt;sourcefile~nodeinputmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge220" class="edge">
<title>sourcefile~branchnodeconnections.f90&#45;&gt;sourcefile~nodeinputmanager.f90</title>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M992.3774,-2689.0024C1012.2994,-2671.553 1052.4214,-2637.2487 1088.825,-2611.2417 1183.3047,-2543.7446 1194.5529,-2471.8989 1310.6583,-2473.2417"/>
</g>
<!-- sourcefile~branchnodeconnections.f90&#45;&gt;sourcefile~branchinputmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge196" class="edge">
<title>sourcefile~branchnodeconnections.f90&#45;&gt;sourcefile~branchinputmanager.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1052.954,-2694.7879C1169.3549,-2689.954 1398.701,-2696.4876 1548.821,-2805.2417 1575.8798,-2824.8444 1563.0805,-2845.8686 1584.821,-2871.2417 1614.3212,-2905.6709 1622.2197,-2920.8448 1665.8309,-2933.2417"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1665.8309,-2933.2417C1700.1711,-2942.2478 1739.4659,-2943.4792 1772.6062,-2942.0531"/>
<polygon fill="#ff0000" stroke="#ff0000" points="1772.8759,-2945.544 1782.6813,-2941.5309 1772.5135,-2938.5533 1772.8759,-2945.544"/>
</g>
<!-- sourcefile~schedulemanager.f90&#45;&gt;sourcefile~plantchillers.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge252" class="edge">
<title>sourcefile~schedulemanager.f90&#45;&gt;sourcefile~plantchillers.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1155.2961,-1341.4684C1171.1178,-1359.8814 1204.7326,-1396.8814 1238.9897,-1421.2417 1341.7437,-1494.3101 1656.7393,-1586.0425 1746.8408,-1674.2417 1934.4561,-1857.8958 1918.0421,-1955.9303 2021.469,-2197.2417 2082.4662,-2339.5579 2106.3611,-2926.5535 2244.8185,-2857.2417"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M2244.8185,-2857.2417C2311.7889,-2815.6582 2360.7082,-2220.0315 2370.0081,-2098.7157"/>
<polygon fill="#ff0000" stroke="#ff0000" points="2373.5173,-2098.7268 2370.7837,-2088.4907 2366.5373,-2098.1973 2373.5173,-2098.7268"/>
</g>
<!-- sourcefile~schedulemanager.f90&#45;&gt;sourcefile~emsmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge99" class="edge">
<title>sourcefile~schedulemanager.f90&#45;&gt;sourcefile~emsmanager.f90</title>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M1310.6583,-1332.2417C1389.1635,-1324.0897 1618.8244,-1268.839 1665.8309,-1332.2417"/>
</g>
<!-- sourcefile~schedulemanager.f90&#45;&gt;sourcefile~nodeinputmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge209" class="edge">
<title>sourcefile~schedulemanager.f90&#45;&gt;sourcefile~nodeinputmanager.f90</title>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M1154.088,-1341.3871C1166.8037,-1359.3236 1191.0837,-1396.146 1202.9897,-1431.2417 1239.902,-1540.0482 1204.1829,-1577.7434 1238.9897,-1687.2417 1291.7,-1853.0619 1329.678,-1885.5216 1418.3269,-2035.2417 1460.4903,-2106.4519 1606.8859,-2317.5962 1652.2929,-2382.8241"/>
<polygon fill="#ff00bf" stroke="#ff00bf" points="1649.4209,-2384.8246 1658.0084,-2391.0299 1655.1649,-2380.8237 1649.4209,-2384.8246"/>
</g>
<!-- sourcefile~schedulemanager.f90&#45;&gt;sourcefile~outputprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge49" class="edge">
<title>sourcefile~schedulemanager.f90&#45;&gt;sourcefile~outputprocessor.f90</title>
<path fill="none" stroke="#ffbf00" stroke-dasharray="5,2" d="M1203.2399,-1334.178C1234.9804,-1335.5445 1275.0937,-1335.9347 1310.6583,-1332.2417"/>
<path fill="none" stroke="#ffbf00" stroke-dasharray="5,2" d="M1310.6583,-1332.2417C1363.5155,-1326.753 1369.5458,-1301.3227 1418.3269,-1280.2417 1426.4105,-1276.7483 1435.1561,-1273.2259 1443.5384,-1269.9718"/>
<polygon fill="#ffbf00" stroke="#ffbf00" points="1445.062,-1273.1363 1453.1501,-1266.2928 1442.5597,-1266.5989 1445.062,-1273.1363"/>
</g>
<!-- sourcefile~schedulemanager.f90&#45;&gt;sourcefile~sqlitefortranroutines.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge35" class="edge">
<title>sourcefile~schedulemanager.f90&#45;&gt;sourcefile~sqlitefortranroutines.f90</title>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M1147.1407,-1318.9731C1152.5723,-1272.2215 1176.9073,-1089.6425 1238.9897,-954.2417 1253.2748,-923.0861 1277.5589,-891.5687 1293.8502,-872.2206"/>
<polygon fill="#00ffff" stroke="#00ffff" points="1296.6438,-874.3396 1300.4993,-864.4712 1291.3313,-869.7814 1296.6438,-874.3396"/>
</g>
<!-- sourcefile~general.f90&#45;&gt;sourcefile~plantchillers.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge253" class="edge">
<title>sourcefile~general.f90&#45;&gt;sourcefile~plantchillers.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1846.3422,-2402.2417C1866.8926,-2423.9168 1887.7018,-2404.1948 1909.8435,-2424.2417 2066.9883,-2566.5193 1920.5886,-2761.7761 2109.8602,-2857.2417"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1665.8309,-2249.2417C1767.7619,-2275.1356 1765.9442,-2334.4436 1846.3422,-2402.2417"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M979.6978,-2129.2417C1288.4074,-2152.3962 1365.7843,-2173.0198 1665.8309,-2249.2417"/>
</g>
<!-- sourcefile~general.f90&#45;&gt;sourcefile~plantutilities.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge5" class="edge">
<title>sourcefile~general.f90&#45;&gt;sourcefile~plantutilities.f90</title>
<path fill="none" stroke="#ff3f00" stroke-dasharray="5,2" d="M801.0195,-2141.6464C813.263,-2169.4666 845.4341,-2243.0888 870.5706,-2305.2417 887.3436,-2346.7151 888.2135,-2358.4446 906.5706,-2399.2417 964.3426,-2527.6351 1010.1478,-2546.0733 1052.825,-2680.2417 1088.5868,-2792.6699 1034.7679,-2838.3758 1088.825,-2943.2417 1111.8571,-2987.922 1376.9491,-3224.699 1418.3269,-3253.2417 1486.0641,-3299.9673 1510.6035,-3298.6977 1584.821,-3334.2417 1673.1923,-3376.5641 1917.7843,-3594.7782 1983.6563,-3522.2417"/>
</g>
<!-- sourcefile~general.f90&#45;&gt;sourcefile~emsmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge104" class="edge">
<title>sourcefile~general.f90&#45;&gt;sourcefile~emsmanager.f90</title>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M1665.8309,-2097.2417C1745.1386,-2109.354 1768.0693,-2079.6417 1846.3422,-2097.2417"/>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M829.5211,-2129.2199C866.3601,-2128.2932 927.2649,-2127.3372 979.6978,-2129.2417"/>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M979.6978,-2129.2417C1080.8043,-2132.9141 1318.0829,-2020.9229 1418.3269,-2007.2417 1475.7916,-1999.3989 1493.9124,-1988.5673 1548.821,-2007.2417 1610.9354,-2028.3667 1600.9746,-2087.3365 1665.8309,-2097.2417"/>
</g>
<!-- sourcefile~general.f90&#45;&gt;sourcefile~reportsizingmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge115" class="edge">
<title>sourcefile~general.f90&#45;&gt;sourcefile~reportsizingmanager.f90</title>
<path fill="none" stroke="#7fff00" stroke-dasharray="5,2" d="M829.5381,-2125.719C843.7874,-2122.2437 859.6047,-2116.1003 870.5706,-2105.2417 905.3269,-2070.8253 886.7664,-2045.9663 906.5706,-2001.2417 1017.7356,-1750.1925 1123.4217,-1722.0197 1202.9897,-1459.2417 1256.0012,-1284.1682 1170.2023,-1218.7386 1238.9897,-1049.2417 1276.9258,-955.7647 1340.7889,-965.1748 1382.3269,-873.2417 1431.5739,-764.2468 1472.1247,-381.5934 1481.5202,-287.3403"/>
<polygon fill="#7fff00" stroke="#7fff00" points="1485.0107,-287.609 1482.5101,-277.3135 1478.0445,-286.9213 1485.0107,-287.609"/>
</g>
<!-- sourcefile~general.f90&#45;&gt;sourcefile~curvemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge140" class="edge">
<title>sourcefile~general.f90&#45;&gt;sourcefile~curvemanager.f90</title>
<path fill="none" stroke="#00ff7f" stroke-dasharray="5,2" d="M802.2609,-2141.2506C817.2603,-2168.192 855.0879,-2240.0105 870.5706,-2305.2417 885.1999,-2366.878 866.8771,-2824.8709 906.5706,-2874.2417 910.4411,-2879.0559 915.3379,-2882.812 920.7568,-2885.7359"/>
<polygon fill="#00ff7f" stroke="#00ff7f" points="919.7164,-2889.1013 930.2803,-2889.9109 922.527,-2882.6903 919.7164,-2889.1013"/>
</g>
<!-- sourcefile~general.f90&#45;&gt;sourcefile~dataenvironment.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge148" class="edge">
<title>sourcefile~general.f90&#45;&gt;sourcefile~dataenvironment.f90</title>
<path fill="none" stroke="#00ffbf" stroke-dasharray="5,2" d="M829.5946,-2127.0618C844.3922,-2123.873 860.6376,-2117.583 870.5706,-2105.2417 917.1004,-2047.4305 884.9124,-1844.2212 906.5706,-1773.2417 920.3914,-1727.9469 949.1156,-1680.136 966.1613,-1654.0691"/>
<polygon fill="#00ffbf" stroke="#00ffbf" points="969.2406,-1655.7593 971.8637,-1645.4943 963.4118,-1651.883 969.2406,-1655.7593"/>
</g>
<!-- sourcefile~general.f90&#45;&gt;sourcefile~psychroutines.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge154" class="edge">
<title>sourcefile~general.f90&#45;&gt;sourcefile~psychroutines.f90</title>
<path fill="none" stroke="#00bfff" stroke-dasharray="5,2" d="M979.6978,-2129.2417C1046.0088,-2131.6502 1105.0463,-2193.2497 1131.3735,-2225.2798"/>
<polygon fill="#00bfff" stroke="#00bfff" points="1128.6479,-2227.4755 1137.6297,-2233.0949 1134.1126,-2223.1009 1128.6479,-2227.4755"/>
</g>
<!-- sourcefile~general.f90&#45;&gt;sourcefile~branchnodeconnections.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge161" class="edge">
<title>sourcefile~general.f90&#45;&gt;sourcefile~branchnodeconnections.f90</title>
<path fill="none" stroke="#007fff" stroke-dasharray="5,2" d="M802.1194,-2141.2854C816.8046,-2168.3042 853.9876,-2240.2815 870.5706,-2305.2417 891.004,-2385.2852 855.3232,-2610.4481 906.5706,-2675.2417 909.1196,-2678.4645 912.1052,-2681.274 915.3866,-2683.7229"/>
<polygon fill="#007fff" stroke="#007fff" points="913.7267,-2686.8117 924.072,-2689.0978 917.4103,-2680.8592 913.7267,-2686.8117"/>
</g>
<!-- sourcefile~general.f90&#45;&gt;sourcefile~schedulemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge167" class="edge">
<title>sourcefile~general.f90&#45;&gt;sourcefile~schedulemanager.f90</title>
<path fill="none" stroke="#003fff" stroke-dasharray="5,2" d="M829.4052,-2127.2962C844.3487,-2124.1684 860.7702,-2117.8619 870.5706,-2105.2417 937.6726,-2018.8325 836.5189,-1698.2774 906.5706,-1614.2417 928.072,-1588.4481 963.4817,-1624.6468 979.6978,-1595.2417"/>
</g>
<!-- sourcefile~general.f90&#45;&gt;sourcefile~dataplant.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge200" class="edge">
<title>sourcefile~general.f90&#45;&gt;sourcefile~dataplant.f90</title>
<path fill="none" stroke="#3f00ff" stroke-dasharray="5,2" d="M816.768,-2141.2949C863.9951,-2166.0651 983.4665,-2226.78 1088.825,-2264.2417 1153.7943,-2287.3425 1171.4685,-2289.2582 1238.9897,-2303.2417 1462.6695,-2349.5652 1567.6981,-2240.5152 1746.8408,-2382.2417 1838.8492,-2455.0329 1871.4767,-2780.502 1945.8435,-2871.2417 1948.107,-2874.0035 1950.7561,-2876.5718 1953.5829,-2878.9282"/>
<polygon fill="#3f00ff" stroke="#3f00ff" points="1951.7149,-2881.8987 1961.8477,-2884.9934 1955.8564,-2876.2552 1951.7149,-2881.8987"/>
</g>
<!-- sourcefile~general.f90&#45;&gt;sourcefile~nodeinputmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge213" class="edge">
<title>sourcefile~general.f90&#45;&gt;sourcefile~nodeinputmanager.f90</title>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M1483.574,-2477.2417C1510.9437,-2462.9029 1520.1471,-2464.7528 1548.821,-2453.2417 1577.0718,-2441.9005 1608.6971,-2428.0451 1631.9401,-2417.6396"/>
<polygon fill="#ff00bf" stroke="#ff00bf" points="1633.6675,-2420.7006 1641.3539,-2413.4088 1630.7979,-2414.3158 1633.6675,-2420.7006"/>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M816.1063,-2141.4085C876.4895,-2175.1986 1060.7479,-2280.3554 1202.9897,-2383.2417 1253.5246,-2419.7945 1248.297,-2472.2681 1310.6583,-2473.2417"/>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M1310.6583,-2473.2417C1387.5208,-2472.0331 1415.4806,-2512.9151 1483.574,-2477.2417"/>
</g>
<!-- sourcefile~general.f90&#45;&gt;sourcefile~fluidproperties.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge223" class="edge">
<title>sourcefile~general.f90&#45;&gt;sourcefile~fluidproperties.f90</title>
<path fill="none" stroke="#ff007f" stroke-dasharray="5,2" d="M802.1631,-2141.2744C816.9454,-2168.2687 854.3276,-2240.1957 870.5706,-2305.2417 915.4247,-2484.8631 853.0906,-2542.9971 906.5706,-2720.2417 919.7982,-2764.0811 948.4818,-2809.7842 965.7326,-2834.8653"/>
<polygon fill="#ff007f" stroke="#ff007f" points="962.9178,-2836.9476 971.521,-2843.1311 968.6516,-2832.9322 962.9178,-2836.9476"/>
</g>
<!-- sourcefile~general.f90&#45;&gt;sourcefile~runtimelanguageprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge20" class="edge">
<title>sourcefile~general.f90&#45;&gt;sourcefile~runtimelanguageprocessor.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1483.574,-1755.2417C1533.4027,-1741.4701 1589.6746,-1722.0249 1626.3395,-1708.8178"/>
<polygon fill="#ff0000" stroke="#ff0000" points="1627.9292,-1711.9646 1636.1393,-1705.268 1625.5451,-1705.3831 1627.9292,-1711.9646"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M979.6978,-2015.2417C1093.7845,-1925.7505 1108.4399,-1880.3384 1238.9897,-1817.2417 1339.9576,-1768.4424 1375.484,-1785.1154 1483.574,-1755.2417"/>
</g>
<!-- sourcefile~general.f90&#45;&gt;sourcefile~outputprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge52" class="edge">
<title>sourcefile~general.f90&#45;&gt;sourcefile~outputprocessor.f90</title>
<path fill="none" stroke="#ffbf00" stroke-dasharray="5,2" d="M979.6978,-2015.2417C1013.618,-1989.4534 1025.9178,-1986.2814 1052.825,-1953.2417 1073.9245,-1927.3332 1071.1722,-1915.6111 1088.825,-1887.2417 1135.3605,-1812.4554 1156.4542,-1800.0279 1202.9897,-1725.2417 1220.6425,-1696.8723 1218.0194,-1685.2549 1238.9897,-1659.2417 1291.8565,-1593.6618 1334.6051,-1604.6553 1382.3269,-1535.2417 1441.2824,-1449.4881 1470.1264,-1325.4488 1479.7587,-1276.3717"/>
<polygon fill="#ffbf00" stroke="#ffbf00" points="1483.2401,-1276.7983 1481.6651,-1266.3212 1476.3628,-1275.4937 1483.2401,-1276.7983"/>
<path fill="none" stroke="#ffbf00" stroke-dasharray="5,2" d="M829.3867,-2121.8979C842.6661,-2117.8616 857.7925,-2112.331 870.5706,-2105.2417 925.5443,-2074.7419 930.2325,-2054.0429 979.6978,-2015.2417"/>
</g>
<!-- sourcefile~general.f90&#45;&gt;sourcefile~dataheatbalance.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge88" class="edge">
<title>sourcefile~general.f90&#45;&gt;sourcefile~dataheatbalance.f90</title>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M829.5823,-2127.4315C844.5661,-2124.3345 860.9705,-2118.0149 870.5706,-2105.2417 928.2982,-2028.4333 883.9593,-1334.6265 906.5706,-1241.2417 942.9895,-1090.8304 1001.0868,-1071.0945 1052.825,-925.2417 1074.5916,-863.8803 1046.7251,-832.9067 1088.825,-783.2417 1091.6189,-779.9457 1094.9303,-777.0697 1098.5298,-774.5628"/>
<polygon fill="#ff00bf" stroke="#ff00bf" points="1100.5116,-777.4573 1107.3434,-769.3593 1096.9528,-771.4294 1100.5116,-777.4573"/>
</g>
<!-- sourcefile~general.f90&#45;&gt;sourcefile~sqlitefortranroutines.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge37" class="edge">
<title>sourcefile~general.f90&#45;&gt;sourcefile~sqlitefortranroutines.f90</title>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M829.4984,-2127.368C844.4631,-2124.2565 860.8756,-2117.943 870.5706,-2105.2417 956.4614,-1992.7167 843.4654,-1595.9573 906.5706,-1469.2417 944.5605,-1392.9576 1004.6777,-1415.5576 1052.825,-1345.2417 1080.4596,-1304.883 1069.4333,-1286.1467 1088.825,-1241.2417 1145.8983,-1109.0779 1163.7934,-1077.0022 1238.9897,-954.2417 1257.0883,-924.6952 1280.8009,-892.3244 1295.8876,-872.3935"/>
<polygon fill="#00ffff" stroke="#00ffff" points="1298.6931,-874.4865 1301.9724,-864.412 1293.1263,-870.2426 1298.6931,-874.4865"/>
</g>
<!-- sourcefile~general.f90&#45;&gt;sourcefile~branchinputmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge186" class="edge">
<title>sourcefile~general.f90&#45;&gt;sourcefile~branchinputmanager.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M801.5736,-2141.4926C826.9064,-2191.2414 936.3572,-2393.1478 1088.825,-2487.2417 1204.8242,-2558.8294 1261.1553,-2513.8071 1382.3269,-2576.2417 1575.3575,-2675.7022 1769.0313,-2858.1378 1828.1205,-2916.0772"/>
<polygon fill="#ff0000" stroke="#ff0000" points="1825.675,-2918.5812 1835.2533,-2923.1097 1830.5896,-2913.5965 1825.675,-2918.5812"/>
</g>
<!-- sourcefile~dataplant.f90&#45;&gt;sourcefile~plantchillers.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge254" class="edge">
<title>sourcefile~dataplant.f90&#45;&gt;sourcefile~plantchillers.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M2006.3278,-2885.1487C2037.4378,-2870.6218 2091.5857,-2848.0243 2109.8602,-2857.2417"/>
</g>
<!-- sourcefile~dataplant.f90&#45;&gt;sourcefile~plantutilities.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge6" class="edge">
<title>sourcefile~dataplant.f90&#45;&gt;sourcefile~plantutilities.f90</title>
<path fill="none" stroke="#ff3f00" stroke-dasharray="5,2" d="M2021.5216,-2896.2417C2032.3036,-2896.2417 2044.2624,-2896.2417 2055.8085,-2896.2417"/>
<polygon fill="#ff3f00" stroke="#ff3f00" points="2055.8088,-2899.7418 2065.8088,-2896.2417 2055.8088,-2892.7418 2055.8088,-2899.7418"/>
</g>
<!-- sourcefile~dataairsystems.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node28" class="node">
<title>sourcefile~dataairsystems.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node28"><a xlink:href="../sourcefile/dataairsystems.f90.html" xlink:title="DataAirSystems.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="2162.1429,-2069.2471 2057.5775,-2069.2471 2057.5775,-2047.2362 2162.1429,-2047.2362 2162.1429,-2069.2471"/>
<text text-anchor="middle" x="2109.8602" y="-2055.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">DataAirSystems.f90</text>
</a>
</g>
</g>
<!-- sourcefile~dataplant.f90&#45;&gt;sourcefile~dataairsystems.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge66" class="edge">
<title>sourcefile~dataplant.f90&#45;&gt;sourcefile~dataairsystems.f90</title>
<path fill="none" stroke="#7fff00" stroke-dasharray="5,2" d="M1984.0038,-2885.2002C1986.991,-2792.9659 2009.3963,-2152.3086 2057.469,-2083.2417 2059.6406,-2080.1217 2062.3097,-2077.3783 2065.2824,-2074.9684"/>
<polygon fill="#7fff00" stroke="#7fff00" points="2067.3486,-2077.7975 2073.7277,-2069.3382 2063.4657,-2071.9731 2067.3486,-2077.7975"/>
</g>
<!-- sourcefile~dataprecisionglobals.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node20" class="node">
<title>sourcefile~dataprecisionglobals.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node20"><a xlink:href="../sourcefile/dataprecisionglobals.f90.html" xlink:title="DataPrecisionGlobals.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="130.719,-981.2471 -.2403,-981.2471 -.2403,-959.2362 130.719,-959.2362 130.719,-981.2471"/>
<text text-anchor="middle" x="65.2394" y="-967.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">DataPrecisionGlobals.f90</text>
</a>
</g>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~plantchillers.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge255" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~plantchillers.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M601.1821,-3921.2417C686.8007,-3934.1016 710.1888,-3909.6241 795.9847,-3921.2417"/>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~datahvacglobals.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge2" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~datahvacglobals.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M223.8406,-3121.2417C289.0172,-3144.6197 425.0417,-2986.0715 480.9653,-2945.2417 497.3362,-2933.2893 498.9378,-2926.5083 516.9653,-2917.2417 525.1337,-2913.0429 534.1191,-2909.4362 543.0853,-2906.3753"/>
<polygon fill="#ff0000" stroke="#ff0000" points="544.3165,-2909.656 552.7673,-2903.2659 542.1761,-2902.9913 544.3165,-2909.656"/>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~plantutilities.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge8" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~plantutilities.f90</title>
<path fill="none" stroke="#ff3f00" stroke-dasharray="5,2" d="M399.0839,-3845.2417C473.9589,-3905.263 506.0446,-3908.6842 601.1821,-3921.2417"/>
<path fill="none" stroke="#ff3f00" stroke-dasharray="5,2" d="M601.1821,-3921.2417C654.5104,-3928.2806 667.9004,-3912.8415 721.3989,-3907.2417 836.0664,-3895.2392 864.4038,-3883.2417 979.6978,-3883.2417 979.6978,-3883.2417 979.6978,-3883.2417 1145.9073,-3883.2417 1295.9814,-3883.2417 1333.5231,-3885.8772 1483.574,-3883.2417"/>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~dataipshortcuts.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge13" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~dataipshortcuts.f90</title>
<path fill="none" stroke="#ff7f00" stroke-dasharray="5,2" d="M223.8406,-3121.2417C383.7998,-3178.617 266.5161,-2524.4446 317.2024,-2362.2417 333.5135,-2310.0439 366.9795,-2254.6656 385.6829,-2226.0091"/>
<polygon fill="#ff7f00" stroke="#ff7f00" points="388.8087,-2227.628 391.4137,-2217.3584 382.973,-2223.762 388.8087,-2227.628"/>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~datasizing.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge15" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~datasizing.f90</title>
<path fill="none" stroke="#ffbf00" stroke-dasharray="5,2" d="M223.8406,-3121.2417C424.3053,-3193.1459 174.3433,-3433.2935 317.2024,-3591.2417 325.459,-3600.3704 336.9422,-3606.2091 348.7004,-3609.9312"/>
<polygon fill="#ffbf00" stroke="#ffbf00" points="348.0115,-3613.3702 358.5772,-3612.5857 349.8283,-3606.6101 348.0115,-3613.3702"/>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~emsmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge106" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~emsmanager.f90</title>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M1483.574,-151.2417C1542.6528,-166.8795 1925.5895,-361.1863 1983.6563,-380.2417"/>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M1310.6583,-75.2417C1390.11,-102.3434 1404.4718,-123.1363 1483.574,-151.2417"/>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M223.8406,-265.2417C269.8957,-227.0415 265.1648,-197.7784 317.2024,-168.2417 349.6922,-149.8004 364.5145,-163.4059 399.0839,-149.2417"/>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M65.9403,-959.2175C71.4134,-876.9565 110.1395,-359.5505 223.8406,-265.2417"/>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M1983.6563,-380.2417C2159.4806,-408.6135 2234.6305,-1862.9798 2243.8413,-2056.1347"/>
<polygon fill="#ffff00" stroke="#ffff00" points="2240.3466,-2056.331 2244.3136,-2066.1551 2247.3388,-2056.0014 2240.3466,-2056.331"/>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M399.0839,-149.2417C775.2127,4.8707 925.9474,55.987 1310.6583,-75.2417"/>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~datainterfaces.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge114" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~datainterfaces.f90</title>
<path fill="none" stroke="#bfff00" stroke-dasharray="5,2" d="M223.8406,-3121.2417C332.7033,-3160.2894 266.2175,-2713.051 317.2024,-2609.2417 331.6307,-2579.8644 358.331,-2552.9009 377.3173,-2536.0779"/>
<polygon fill="#bfff00" stroke="#bfff00" points="379.6412,-2538.6955 384.9237,-2529.5115 375.067,-2533.3968 379.6412,-2538.6955"/>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~reportsizingmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge116" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~reportsizingmanager.f90</title>
<path fill="none" stroke="#7fff00" stroke-dasharray="5,2" d="M1310.6583,-75.2417C1353.6215,-89.8969 1437.1541,-201.3771 1469.9185,-246.9353"/>
<polygon fill="#7fff00" stroke="#7fff00" points="1467.1055,-249.0187 1475.7674,-255.1197 1472.8007,-244.9487 1467.1055,-249.0187"/>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~globalnames.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge124" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~globalnames.f90</title>
<path fill="none" stroke="#3fff00" stroke-dasharray="5,2" d="M223.8406,-3121.2417C297.0389,-3147.8541 321.198,-3121.2417 399.0839,-3121.2417"/>
<path fill="none" stroke="#3fff00" stroke-dasharray="5,2" d="M399.0839,-3121.2417C435.1691,-3121.2417 658.5124,-3048.1376 753.4054,-3016.5253"/>
<polygon fill="#3fff00" stroke="#3fff00" points="754.6049,-3019.8148 762.9834,-3013.3301 752.3897,-3013.1746 754.6049,-3019.8148"/>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~dataloopnode.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge126" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~dataloopnode.f90</title>
<path fill="none" stroke="#00ff00" stroke-dasharray="5,2" d="M223.8406,-3121.2417C362.274,-3171.5714 213.0234,-3335.1091 317.2024,-3439.2417 344.0238,-3466.0512 364.322,-3448.0841 399.0839,-3463.2417"/>
<path fill="none" stroke="#00ff00" stroke-dasharray="5,2" d="M399.0839,-3463.2417C463.8271,-3491.4724 629.5762,-3368.5138 685.3989,-3325.2417 727.456,-3292.6403 764.707,-3241.6802 783.3515,-3213.9062"/>
<polygon fill="#00ff00" stroke="#00ff00" points="786.3543,-3215.7103 788.9411,-3205.4361 780.5118,-3211.8547 786.3543,-3215.7103"/>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~outairnodemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge133" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~outairnodemanager.f90</title>
<path fill="none" stroke="#00ff3f" stroke-dasharray="5,2" d="M223.8406,-3121.2417C421.6123,-3188.237 210.6998,-2365.8503 317.2024,-2186.2417 339.6895,-2148.3188 368.1152,-2161.6225 399.0839,-2130.2417"/>
<path fill="none" stroke="#00ff3f" stroke-dasharray="5,2" d="M399.0839,-2130.2417C402.0405,-2127.2457 622.1895,-2092.4321 721.3989,-2077.2417 868.5216,-2054.715 906.2653,-2055.1799 1052.825,-2029.2417 1136.0673,-2014.5094 1154.904,-1998.9548 1238.9897,-1990.2417 1347.9799,-1978.948 1389.0549,-1965.8111 1483.574,-2021.2417"/>
<path fill="none" stroke="#00ff3f" stroke-dasharray="5,2" d="M1665.8309,-2211.2417C1701.2924,-2212.9161 1740.7161,-2213.1086 1773.6517,-2212.8029"/>
<polygon fill="#00ff3f" stroke="#00ff3f" points="1773.6923,-2216.3028 1783.6532,-2212.6931 1773.6154,-2209.3032 1773.6923,-2216.3028"/>
<path fill="none" stroke="#00ff3f" stroke-dasharray="5,2" d="M1483.574,-2021.2417C1509.97,-2034.7655 1525.5719,-2016.8265 1548.821,-2035.2417 1578.1194,-2058.4483 1564.9163,-2079.6072 1584.821,-2111.2417 1615.2824,-2159.6538 1608.6965,-2208.5439 1665.8309,-2211.2417"/>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~curvemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge142" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~curvemanager.f90</title>
<path fill="none" stroke="#00ff7f" stroke-dasharray="5,2" d="M399.0839,-3121.2417C526.4273,-3120.6116 559.6519,-3130.352 685.3989,-3110.2417 706.5312,-3106.8621 855.0314,-3071.9566 870.5706,-3057.2417 906.0865,-3023.6097 878.2799,-2993.1432 906.5706,-2953.2417 918.4008,-2936.5561 936.3435,-2922.2239 951.4946,-2911.981"/>
<polygon fill="#00ff7f" stroke="#00ff7f" points="953.5486,-2914.8203 960.0255,-2906.4357 949.7336,-2908.9513 953.5486,-2914.8203"/>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~dataenvironment.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge151" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~dataenvironment.f90</title>
<path fill="none" stroke="#00ffbf" stroke-dasharray="5,2" d="M223.8406,-1255.2417C348.1894,-1327.3973 764.9208,-1174.7368 870.5706,-1272.2417 925.917,-1323.3212 859.571,-1550.3911 906.5706,-1609.2417 909.2551,-1612.6031 912.4143,-1615.5147 915.8871,-1618.0364"/>
<polygon fill="#00ffbf" stroke="#00ffbf" points="914.1166,-1621.056 924.4837,-1623.241 917.742,-1615.0679 914.1166,-1621.056"/>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~outputreportpredefined.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge153" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~outputreportpredefined.f90</title>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M399.0839,-149.2417C719.7004,-56.6202 812.3805,-215.6853 1145.9073,-227.2417"/>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M1145.9073,-227.2417C1182.9473,-229.6903 1224.0225,-237.1592 1255.8938,-244.0314"/>
<polygon fill="#00ffff" stroke="#00ffff" points="1255.3828,-247.5026 1265.9015,-246.2345 1256.8878,-240.6663 1255.3828,-247.5026"/>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~psychroutines.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge155" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~psychroutines.f90</title>
<path fill="none" stroke="#00bfff" stroke-dasharray="5,2" d="M223.8406,-3121.2417C359.0352,-3170.3938 743.335,-3160.3582 870.5706,-3093.2417 895.607,-3080.035 1040.897,-2940.912 1052.825,-2915.2417 1099.2068,-2815.4224 1067.7827,-2529.2805 1088.825,-2421.2417 1100.1315,-2363.1893 1124.483,-2297.5923 1137.4225,-2264.9693"/>
<polygon fill="#00bfff" stroke="#00bfff" points="1140.7114,-2266.1714 1141.1916,-2255.5875 1134.216,-2263.5619 1140.7114,-2266.1714"/>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~schedulemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge168" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~schedulemanager.f90</title>
<path fill="none" stroke="#003fff" stroke-dasharray="5,2" d="M67.3653,-981.4596C76.4763,-1025.999 116.7523,-1191.0427 223.8406,-1255.2417"/>
<path fill="none" stroke="#003fff" stroke-dasharray="5,2" d="M223.8406,-1255.2417C251.8275,-1272.0197 484.3552,-1238.4017 516.9653,-1237.2417 607.7716,-1234.0116 630.5363,-1235.6861 721.3989,-1235.2417 787.6966,-1234.9174 814.5476,-1199.7886 870.5706,-1235.2417 902.1534,-1255.2283 875.804,-1290.0201 906.5706,-1311.2417 956.5101,-1345.688 1027.0275,-1347.1075 1078.5815,-1341.9201"/>
<polygon fill="#003fff" stroke="#003fff" points="1079.0761,-1345.3867 1088.6277,-1340.8023 1078.302,-1338.4296 1079.0761,-1345.3867"/>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~general.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge177" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~general.f90</title>
<path fill="none" stroke="#0000ff" stroke-dasharray="5,2" d="M223.8406,-3121.2417C355.3961,-3169.1003 263.3787,-2627.4714 317.2024,-2498.2417 374.3208,-2361.1014 394.685,-2314.6069 516.9653,-2230.2417 549.0005,-2208.1395 565.112,-2220.8603 601.1821,-2206.2417"/>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~dataplant.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge201" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~dataplant.f90</title>
<path fill="none" stroke="#3f00ff" stroke-dasharray="5,2" d="M399.0839,-3845.2417C535.0855,-3951.7079 1812.8726,-3622.1687 1909.8435,-3479.2417 1973.7654,-3385.0261 1982.3334,-3011.9515 1983.4796,-2917.8722"/>
<polygon fill="#3f00ff" stroke="#3f00ff" points="1986.9822,-2917.6332 1983.5878,-2907.5969 1979.9826,-2917.5594 1986.9822,-2917.6332"/>
</g>
<!-- sourcefile~databranchairloopplant.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node21" class="node">
<title>sourcefile~databranchairloopplant.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node21"><a xlink:href="../sourcefile/databranchairloopplant.f90.html" xlink:title="DataBranchAirLoopPlant.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="868.5702,-3667.2471 723.3993,-3667.2471 723.3993,-3645.2362 868.5702,-3645.2362 868.5702,-3667.2471"/>
<text text-anchor="middle" x="795.9847" y="-3653.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">DataBranchAirLoopPlant.f90</text>
</a>
</g>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~databranchairloopplant.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge207" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~databranchairloopplant.f90</title>
<path fill="none" stroke="#bf00ff" stroke-dasharray="5,2" d="M399.0839,-3845.2417C431.0251,-3870.3739 684.6132,-3722.8235 768.8734,-3672.5641"/>
<polygon fill="#bf00ff" stroke="#bf00ff" points="770.8291,-3675.4727 777.615,-3667.3362 767.2362,-3669.4651 770.8291,-3675.4727"/>
<path fill="none" stroke="#bf00ff" stroke-dasharray="5,2" d="M223.8406,-3121.2417C333.1502,-3160.983 285.4658,-3524.3455 317.2024,-3636.2417 344.4241,-3732.2192 320.5282,-3783.746 399.0839,-3845.2417"/>
</g>
<!-- sourcefile~dataglobals.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node22" class="node">
<title>sourcefile~dataglobals.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node22"><a xlink:href="../sourcefile/dataglobals.f90.html" xlink:title="DataGlobals.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="267.6355,-1457.2471 180.0456,-1457.2471 180.0456,-1435.2362 267.6355,-1435.2362 267.6355,-1457.2471"/>
<text text-anchor="middle" x="223.8406" y="-1443.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">DataGlobals.f90</text>
</a>
</g>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~dataglobals.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge208" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~dataglobals.f90</title>
<path fill="none" stroke="#ff00ff" stroke-dasharray="5,2" d="M69.0034,-981.5386C89.6757,-1043.5808 189.4691,-1343.0846 216.8684,-1425.3165"/>
<polygon fill="#ff00ff" stroke="#ff00ff" points="213.5596,-1426.4584 220.0413,-1434.8392 220.2007,-1424.2456 213.5596,-1426.4584"/>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~nodeinputmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge217" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~nodeinputmanager.f90</title>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M223.8406,-3121.2417C266.2344,-3136.2407 273.1107,-3151.4026 317.2024,-3160.2417 437.9884,-3184.4557 756.3655,-3173.4237 870.5706,-3127.2417 961.3977,-3090.5131 991.1565,-3079.3702 1052.825,-3003.2417 1079.4238,-2970.406 1066.3458,-2951.0239 1088.825,-2915.2417 1228.2305,-2693.3368 1251.4402,-2598.8543 1483.574,-2477.2417"/>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~fluidproperties.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge224" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~fluidproperties.f90</title>
<path fill="none" stroke="#ff007f" stroke-dasharray="5,2" d="M399.0839,-3121.2417C527.7463,-3123.2572 560.6514,-3109.8034 685.3989,-3078.2417 701.8905,-3074.0692 705.2173,-3070.4893 721.3989,-3065.2417 787.032,-3043.9572 822.779,-3072.0081 870.5706,-3022.2417 917.161,-2973.726 859.9557,-2923.7339 906.5706,-2875.2417 910.461,-2871.1946 915.0751,-2867.9125 920.0654,-2865.2529"/>
<polygon fill="#ff007f" stroke="#ff007f" points="921.6667,-2868.3713 929.3793,-2861.1072 918.8202,-2861.9762 921.6667,-2868.3713"/>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~inputprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge230" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~inputprocessor.f90</title>
<path fill="none" stroke="#ff003f" stroke-dasharray="5,2" d="M399.0839,-2130.2417C441.2166,-2087.5482 517.2034,-2101.8759 563.0398,-2116.1069"/>
<polygon fill="#ff003f" stroke="#ff003f" points="562.0252,-2119.4573 572.6173,-2119.2154 564.1862,-2112.7992 562.0252,-2119.4573"/>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~runtimelanguageprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge23" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~runtimelanguageprocessor.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M399.0839,-762.2417C604.3634,-805.3515 666.7226,-733.8031 870.5706,-783.2417 1028.6282,-821.5749 1056.365,-865.8652 1202.9897,-936.2417 1219.1168,-943.9823 1222.0565,-948.4741 1238.9897,-954.2417 1269.7113,-964.7056 1279.0024,-961.0854 1310.6583,-968.2417"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1310.6583,-968.2417C1386.8983,-977.9169 1429.1713,-913.9601 1483.574,-968.2417"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M223.8406,-685.2417C266.9858,-664.8673 273.2683,-719.6293 317.2024,-738.2417 352.121,-753.0346 362.508,-752.2246 399.0839,-762.2417"/>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~outputprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge54" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~outputprocessor.f90</title>
<path fill="none" stroke="#ffbf00" stroke-dasharray="5,2" d="M399.0839,-762.2417C816.8509,-848.8965 955.9923,-826.0701 1310.6583,-1063.2417"/>
<path fill="none" stroke="#ffbf00" stroke-dasharray="5,2" d="M1310.6583,-1063.2417C1381.4831,-1113.4983 1444.0753,-1197.5446 1470.3833,-1235.5348"/>
<polygon fill="#ffbf00" stroke="#ffbf00" points="1467.7408,-1237.8713 1476.2729,-1244.1524 1473.52,-1233.9215 1467.7408,-1237.8713"/>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~dataairsystems.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge67" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~dataairsystems.f90</title>
<path fill="none" stroke="#7fff00" stroke-dasharray="5,2" d="M795.9847,-265.2417C1129.5167,-237.2989 1244.032,-107.9376 1548.821,-246.2417 1568.8621,-255.3357 1566.1195,-268.64 1584.821,-280.2417 1715.6725,-361.417 1774.8088,-326.234 1909.8435,-400.2417 1945.9542,-420.0327 1963.1208,-420.5491 1983.6563,-456.2417"/>
<path fill="none" stroke="#7fff00" stroke-dasharray="5,2" d="M1983.6563,-456.2417C2080.208,-590.9731 2106.2582,-1856.1598 2109.4962,-2036.8126"/>
<polygon fill="#7fff00" stroke="#7fff00" points="2105.9985,-2036.9803 2109.6736,-2046.9173 2112.9975,-2036.8574 2105.9985,-2036.9803"/>
<path fill="none" stroke="#7fff00" stroke-dasharray="5,2" d="M223.8406,-265.2417C323.1667,-185.8711 668.8646,-267.6626 795.9847,-265.2417"/>
</g>
<!-- sourcefile~datasurfaces.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node29" class="node">
<title>sourcefile~datasurfaces.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node29"><a xlink:href="../sourcefile/datasurfaces.f90.html" xlink:title="DataSurfaces.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="647.8111,-657.2471 554.5531,-657.2471 554.5531,-635.2362 647.8111,-635.2362 647.8111,-657.2471"/>
<text text-anchor="middle" x="601.1821" y="-643.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">DataSurfaces.f90</text>
</a>
</g>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~datasurfaces.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge75" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~datasurfaces.f90</title>
<path fill="none" stroke="#00ff3f" stroke-dasharray="5,2" d="M223.8406,-685.2417C268.1368,-663.0017 269.6973,-638.3853 317.2024,-624.2417 386.9598,-603.4729 408.4797,-617.6638 480.9653,-624.2417 501.8439,-626.1364 524.5142,-629.8458 544.4829,-633.6868"/>
<polygon fill="#00ff3f" stroke="#00ff3f" points="543.8621,-637.1318 554.351,-635.6368 545.2192,-630.2646 543.8621,-637.1318"/>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~dataruntimelanguage.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge78" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~dataruntimelanguage.f90</title>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M223.8406,-1255.2417C344.5824,-1320.4858 404.8312,-1312.0533 480.9653,-1426.2417 527.4331,-1495.9356 490.6756,-1531.7097 516.9653,-1611.2417 536.5236,-1670.4096 571.4634,-1735.4291 589.5771,-1767.3341"/>
<polygon fill="#00ffff" stroke="#00ffff" points="586.6107,-1769.197 594.6228,-1776.1293 592.6825,-1765.7137 586.6107,-1769.197"/>
</g>
<!-- sourcefile~datazonecontrols.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node31" class="node">
<title>sourcefile~datazonecontrols.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node31"><a xlink:href="../sourcefile/datazonecontrols.f90.html" xlink:title="DataZoneControls.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="456.3078,-199.2471 341.8599,-199.2471 341.8599,-177.2362 456.3078,-177.2362 456.3078,-199.2471"/>
<text text-anchor="middle" x="399.0839" y="-185.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">DataZoneControls.f90</text>
</a>
</g>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~datazonecontrols.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge80" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~datazonecontrols.f90</title>
<path fill="none" stroke="#003fff" stroke-dasharray="5,2" d="M223.8406,-265.2417C260.9284,-235.5705 273.4973,-231.8362 317.2024,-213.2417 326.7378,-209.1848 337.1525,-205.4834 347.2604,-202.2448"/>
<polygon fill="#003fff" stroke="#003fff" points="348.3015,-205.5864 356.8186,-199.2849 346.2308,-198.8997 348.3015,-205.5864"/>
</g>
<!-- sourcefile~dataairloop.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node32" class="node">
<title>sourcefile~dataairloop.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node32"><a xlink:href="../sourcefile/dataairloop.f90.html" xlink:title="DataAirLoop.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="442.968,-1876.2471 355.1998,-1876.2471 355.1998,-1854.2362 442.968,-1854.2362 442.968,-1876.2471"/>
<text text-anchor="middle" x="399.0839" y="-1862.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">DataAirLoop.f90</text>
</a>
</g>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~dataairloop.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge82" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~dataairloop.f90</title>
<path fill="none" stroke="#7f00ff" stroke-dasharray="5,2" d="M223.8406,-3121.2417C329.4028,-3159.1055 294.4845,-2226.064 317.2024,-2116.2417 335.3491,-2028.5173 373.5107,-1928.4471 390.5511,-1886.009"/>
<polygon fill="#7f00ff" stroke="#7f00ff" points="393.8909,-1887.0864 394.4033,-1876.504 387.4034,-1884.4572 393.8909,-1887.0864"/>
<path fill="none" stroke="#7f00ff" stroke-dasharray="5,2" d="M65.4948,-981.6002C69.3001,-1147.7945 115.8986,-3082.5243 223.8406,-3121.2417"/>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~dataheatbalance.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge90" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~dataheatbalance.f90</title>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M223.8406,-265.2417C270.5639,-227.8618 264.6574,-333.6174 317.2024,-362.2417 390.415,-402.1248 605.2119,-411.4207 685.3989,-434.2417 770.0213,-458.325 789.4958,-470.0682 870.5706,-504.2417 952.9314,-538.9573 987.542,-528.1957 1052.825,-589.2417 1098.5001,-631.9525 1127.0597,-702.2444 1139.1765,-737.1768"/>
<polygon fill="#ff00bf" stroke="#ff00bf" points="1135.9105,-738.4458 1142.4098,-746.813 1142.5469,-736.219 1135.9105,-738.4458"/>
</g>
<!-- sourcefile~datasystemvariables.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node34" class="node">
<title>sourcefile~datasystemvariables.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node34"><a xlink:href="../sourcefile/datasystemvariables.f90.html" xlink:title="DataSystemVariables.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="463.7837,-1075.2471 334.3841,-1075.2471 334.3841,-1053.2362 463.7837,-1053.2362 463.7837,-1075.2471"/>
<text text-anchor="middle" x="399.0839" y="-1061.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">DataSystemVariables.f90</text>
</a>
</g>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~datasystemvariables.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge17" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~datasystemvariables.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M223.8406,-685.2417C259.5688,-667.3035 363.8463,-961.699 392.0057,-1043.4708"/>
<polygon fill="#ff0000" stroke="#ff0000" points="388.7708,-1044.8275 395.3252,-1053.1516 395.3923,-1042.5569 388.7708,-1044.8275"/>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~sqlitefortranroutines.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge40" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~sqlitefortranroutines.f90</title>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M795.9847,-265.2417C999.2944,-244.4352 1122.2798,-291.4822 1202.9897,-479.2417 1233.7803,-550.8713 1190.6358,-767.0799 1238.9897,-828.2417 1241.5373,-831.464 1244.5271,-834.2723 1247.8136,-836.7196"/>
<polygon fill="#00ffff" stroke="#00ffff" points="1246.1636,-839.8142 1256.5113,-842.0894 1249.841,-833.8579 1246.1636,-839.8142"/>
</g>
<!-- sourcefile~dataroomair.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node40" class="node">
<title>sourcefile~dataroomair.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node40"><a xlink:href="../sourcefile/dataroomair.f90.html" xlink:title="DataRoomAir.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="445.0438,-353.2471 353.1239,-353.2471 353.1239,-331.2362 445.0438,-331.2362 445.0438,-353.2471"/>
<text text-anchor="middle" x="399.0839" y="-339.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">DataRoomAir.f90</text>
</a>
</g>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~dataroomair.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge34" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~dataroomair.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M223.8406,-265.2417C248.4389,-245.5624 332.7172,-297.2628 374.7885,-325.4113"/>
<polygon fill="#ff0000" stroke="#ff0000" points="373.084,-328.4839 383.3275,-331.1896 377.007,-322.6865 373.084,-328.4839"/>
</g>
<!-- sourcefile~datavectortypes.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node41" class="node">
<title>sourcefile~datavectortypes.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node41"><a xlink:href="../sourcefile/datavectortypes.f90.html" xlink:title="DataVectorTypes.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="278.8255,-539.2471 168.8556,-539.2471 168.8556,-517.2362 278.8255,-517.2362 278.8255,-539.2471"/>
<text text-anchor="middle" x="223.8406" y="-525.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">DataVectorTypes.f90</text>
</a>
</g>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~datavectortypes.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge68" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~datavectortypes.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M68.7888,-959.0321C81.3789,-919.4357 125.3501,-782.5373 166.4788,-671.2417 182.758,-627.1896 203.6881,-576.301 215.2328,-548.6731"/>
<polygon fill="#ff0000" stroke="#ff0000" points="218.5296,-549.8617 219.1686,-539.2861 212.0741,-547.155 218.5296,-549.8617"/>
</g>
<!-- sourcefile~databsdfwindow.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node42" class="node">
<title>sourcefile~databsdfwindow.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node42"><a xlink:href="../sourcefile/databsdfwindow.f90.html" xlink:title="DataBSDFWindow.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="457.5516,-539.2471 340.6161,-539.2471 340.6161,-517.2362 457.5516,-517.2362 457.5516,-539.2471"/>
<text text-anchor="middle" x="399.0839" y="-525.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">DataBSDFWindow.f90</text>
</a>
</g>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~databsdfwindow.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge71" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~databsdfwindow.f90</title>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M66.9972,-959.1748C74.8953,-913.7698 111.7513,-741.5188 223.8406,-685.2417"/>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M223.8406,-685.2417C288.0588,-652.9994 258.9605,-595.3299 317.2024,-553.2417 322.7064,-549.2643 328.8537,-545.9103 335.2396,-543.0838"/>
<polygon fill="#00ffff" stroke="#00ffff" points="336.7233,-546.2604 344.719,-539.3091 334.1336,-539.757 336.7233,-546.2604"/>
</g>
<!-- sourcefile~datacomplexfenestration.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node43" class="node">
<title>sourcefile~datacomplexfenestration.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node43"><a xlink:href="../sourcefile/datacomplexfenestration.f90.html" xlink:title="DataComplexFenestration.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="475.0737,-696.2471 323.0941,-696.2471 323.0941,-674.2362 475.0737,-674.2362 475.0737,-696.2471"/>
<text text-anchor="middle" x="399.0839" y="-682.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">DataComplexFenestration.f90</text>
</a>
</g>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~datacomplexfenestration.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge84" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~datacomplexfenestration.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M223.8406,-685.2417C259.9709,-667.1016 305.8097,-667.7936 341.5433,-672.6548"/>
<polygon fill="#ff0000" stroke="#ff0000" points="341.401,-676.1728 351.8109,-674.2022 342.4442,-669.251 341.401,-676.1728"/>
</g>
<!-- sourcefile~dataequivalentlayerwindow.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node44" class="node">
<title>sourcefile~dataequivalentlayerwindow.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node44"><a xlink:href="../sourcefile/dataequivalentlayerwindow.f90.html" xlink:title="DataEquivalentLayerWindow.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="480.847,-655.2471 317.3208,-655.2471 317.3208,-633.2362 480.847,-633.2362 480.847,-655.2471"/>
<text text-anchor="middle" x="399.0839" y="-641.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">DataEquivalentLayerWindow.f90</text>
</a>
</g>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~dataequivalentlayerwindow.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge86" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~dataequivalentlayerwindow.f90</title>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M223.8406,-685.2417C249.4564,-672.3807 279.2162,-663.4722 306.8609,-657.335"/>
<polygon fill="#00ffff" stroke="#00ffff" points="307.8826,-660.6962 316.9385,-655.1971 306.4299,-653.8486 307.8826,-660.6962"/>
</g>
<!-- sourcefile~datacontaminantbalance.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node45" class="node">
<title>sourcefile~datacontaminantbalance.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node45"><a xlink:href="../sourcefile/datacontaminantbalance.f90.html" xlink:title="DataContaminantBalance.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="870.6565,-2445.2471 721.313,-2445.2471 721.313,-2423.2362 870.6565,-2423.2362 870.6565,-2445.2471"/>
<text text-anchor="middle" x="795.9847" y="-2431.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">DataContaminantBalance.f90</text>
</a>
</g>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~datacontaminantbalance.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge129" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~datacontaminantbalance.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M223.8406,-3121.2417C317.5366,-3155.3484 243.2778,-2984.1548 317.2024,-2917.2417 445.433,-2801.1732 577.3783,-2926.3215 685.3989,-2791.2417 778.0938,-2675.3266 628.3393,-2574.8641 721.3989,-2459.2417 724.0962,-2455.8904 727.259,-2452.9853 730.7319,-2450.4674"/>
<polygon fill="#ff0000" stroke="#ff0000" points="732.5818,-2453.439 739.3249,-2445.267 728.9575,-2447.4502 732.5818,-2453.439"/>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~branchinputmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge191" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~branchinputmanager.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M223.8406,-3121.2417C378.7657,-3173.7227 187.6969,-3377.3199 317.2024,-3477.2417 325.4297,-3483.5896 654.9211,-3474.4104 685.3989,-3473.2417 848.8458,-3466.974 892.9367,-3486.7367 1052.825,-3452.2417 1206.2416,-3419.1429 1240.2252,-3391.8697 1382.3269,-3325.2417 1475.6409,-3281.489 1487.6609,-3246.6176 1584.821,-3212.2417 1619.2668,-3200.0546 1634.7692,-3217.4823 1665.8309,-3198.2417"/>
</g>
<!-- sourcefile~dataerrortracking.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node48" class="node">
<title>sourcefile~dataerrortracking.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node48"><a xlink:href="../sourcefile/dataerrortracking.f90.html" xlink:title="DataErrorTracking.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="1540.9771,-3209.2471 1426.1709,-3209.2471 1426.1709,-3187.2362 1540.9771,-3187.2362 1540.9771,-3209.2471"/>
<text text-anchor="middle" x="1483.574" y="-3195.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">DataErrorTracking.f90</text>
</a>
</g>
</g>
<!-- sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~dataerrortracking.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge184" class="edge">
<title>sourcefile~dataprecisionglobals.f90&#45;&gt;sourcefile~dataerrortracking.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M399.0839,-3463.2417C499.112,-3511.2369 1283.5938,-3339.8475 1382.3269,-3289.2417 1417.4196,-3271.2549 1449.7774,-3238.0579 1468.058,-3217.1184"/>
<polygon fill="#ff0000" stroke="#ff0000" points="1470.7375,-3219.3703 1474.5672,-3209.4918 1465.4131,-3214.8259 1470.7375,-3219.3703"/>
</g>
<!-- sourcefile~databranchairloopplant.f90&#45;&gt;sourcefile~plantchillers.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge256" class="edge">
<title>sourcefile~databranchairloopplant.f90&#45;&gt;sourcefile~plantchillers.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M808.7688,-3667.3541C852.1914,-3704.114 999.4803,-3820.8316 1145.9073,-3845.2417"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1145.9073,-3845.2417C1222.474,-3852.5452 1406.6609,-3920.8275 1483.574,-3921.2417"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1483.574,-3921.2417C1645.488,-3913.2229 1694.0565,-3938.8253 1846.3422,-3883.2417"/>
</g>
<!-- sourcefile~databranchairloopplant.f90&#45;&gt;sourcefile~plantutilities.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge7" class="edge">
<title>sourcefile~databranchairloopplant.f90&#45;&gt;sourcefile~plantutilities.f90</title>
<path fill="none" stroke="#ff3f00" stroke-dasharray="5,2" d="M979.6978,-3655.2417C1033.3313,-3658.3902 1037.1304,-3692.6082 1088.825,-3707.2417 1336.9965,-3777.4933 1410.8641,-3730.3018 1665.8309,-3769.2417"/>
</g>
<!-- sourcefile~databranchairloopplant.f90&#45;&gt;sourcefile~curvemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge141" class="edge">
<title>sourcefile~databranchairloopplant.f90&#45;&gt;sourcefile~curvemanager.f90</title>
<path fill="none" stroke="#00ff7f" stroke-dasharray="5,2" d="M798.4685,-3645.1742C810.1993,-3592.9895 861.3727,-3366.3115 906.5706,-3181.2417 930.8796,-3081.7043 961.8203,-2963.2044 974.2083,-2916.0684"/>
<polygon fill="#00ff7f" stroke="#00ff7f" points="977.5936,-2916.9566 976.7535,-2906.3951 970.824,-2915.1753 977.5936,-2916.9566"/>
</g>
<!-- sourcefile~databranchairloopplant.f90&#45;&gt;sourcefile~branchinputmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge190" class="edge">
<title>sourcefile~databranchairloopplant.f90&#45;&gt;sourcefile~branchinputmanager.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M868.8963,-3653.85C902.6343,-3653.2551 943.2315,-3653.2637 979.6978,-3655.2417"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M979.6978,-3655.2417C1025.7258,-3657.7383 1339.5541,-3572.4261 1382.3269,-3555.2417 1555.6115,-3485.6227 1634.7809,-3495.6302 1746.8408,-3346.2417 1794.7199,-3282.4135 1832.885,-3031.0594 1843.4342,-2955.7056"/>
<polygon fill="#ff0000" stroke="#ff0000" points="1846.9369,-2955.9262 1844.8381,-2945.5414 1840.0027,-2954.9684 1846.9369,-2955.9262"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~plantchillers.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge257" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~plantchillers.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1983.6563,-266.2417C2074.5953,-263.8151 2111.5584,-290.7035 2162.2515,-366.2417 2261.5842,-514.2581 2357.3693,-1868.8549 2370.1665,-2055.8673"/>
<polygon fill="#ff0000" stroke="#ff0000" points="2366.689,-2056.3175 2370.8605,-2066.0565 2373.6728,-2055.8418 2366.689,-2056.3175"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M228.7246,-1434.9254C240.3873,-1407.273 269.7404,-1333.8064 281.2024,-1269.2417 290.4052,-1217.4031 284.0613,-363.1513 317.2024,-322.2417 436.7534,-174.6669 955.9843,-113.2417 1145.9073,-113.2417 1145.9073,-113.2417 1145.9073,-113.2417 1310.6583,-113.2417 1579.445,-113.2417 1669.3118,-75.28 1909.8435,-195.2417 1950.5774,-215.5571 1938.8364,-258.2952 1983.6563,-266.2417"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~datahvacglobals.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge1" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~datahvacglobals.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M224.229,-1457.371C228.9141,-1588.3142 276.5655,-2832.4552 399.0839,-2931.2417"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M399.0839,-2931.2417C410.86,-2940.7368 495.4805,-2920.6072 551.4261,-2905.8895"/>
<polygon fill="#ff0000" stroke="#ff0000" points="552.4028,-2909.2515 561.1712,-2903.3046 550.608,-2902.4855 552.4028,-2909.2515"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~plantutilities.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge9" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~plantutilities.f90</title>
<path fill="none" stroke="#ff3f00" stroke-dasharray="5,2" d="M1665.8309,-3769.2417C1705.3492,-3776.1272 1811.9177,-3789.8343 1846.3422,-3769.2417"/>
<path fill="none" stroke="#ff3f00" stroke-dasharray="5,2" d="M224.1222,-1457.4486C227.915,-1606.979 269.4889,-3203.9683 317.2024,-3289.2417 369.7706,-3383.1914 419.8227,-3379.8382 516.9653,-3426.2417 757.3829,-3541.0853 1403.3465,-3723.5074 1665.8309,-3769.2417"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~dataipshortcuts.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge12" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~dataipshortcuts.f90</title>
<path fill="none" stroke="#ff7f00" stroke-dasharray="5,2" d="M224.1696,-1457.3089C226.6976,-1536.73 244.9251,-2020.2702 317.2024,-2144.2417 328.674,-2163.918 349.0833,-2179.3946 366.6552,-2189.9638"/>
<polygon fill="#ff7f00" stroke="#ff7f00" points="365.1055,-2193.1096 375.5231,-2195.0397 368.5829,-2187.0344 365.1055,-2193.1096"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~datasizing.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge14" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~datasizing.f90</title>
<path fill="none" stroke="#ffbf00" stroke-dasharray="5,2" d="M224.1996,-1457.3024C229.468,-1619.1472 291.3295,-3503.5004 317.2024,-3553.2417 327.7747,-3573.5673 348.1822,-3589.2942 365.9779,-3599.9512"/>
<polygon fill="#ffbf00" stroke="#ffbf00" points="364.5553,-3603.1681 374.9799,-3605.0595 368.01,-3597.08 364.5553,-3603.1681"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~emsmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge107" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~emsmanager.f90</title>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M601.1821,-837.2417C606.6042,-834.3615 1478.878,-888.2866 1483.574,-892.2417"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~reportsizingmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge117" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~reportsizingmanager.f90</title>
<path fill="none" stroke="#7fff00" stroke-dasharray="5,2" d="M399.0839,-724.2417C418.0284,-692.0427 455.1924,-732.2866 480.9653,-705.2417 542.6699,-640.4918 453.8591,-570.6262 516.9653,-507.2417 605.966,-417.8485 678.8339,-502.0172 795.9847,-455.2417"/>
<path fill="none" stroke="#7fff00" stroke-dasharray="5,2" d="M228.5961,-1434.9016C239.9736,-1407.1963 268.7413,-1333.621 281.2024,-1269.2417 292.2293,-1212.2721 280.836,-793.459 317.2024,-748.2417 340.9692,-718.6904 380.005,-757.0157 399.0839,-724.2417"/>
<path fill="none" stroke="#7fff00" stroke-dasharray="5,2" d="M795.9847,-455.2417C1017.8184,-368.6868 1294.4587,-305.5036 1418.3215,-279.4331"/>
<polygon fill="#7fff00" stroke="#7fff00" points="1419.3305,-282.7978 1428.4009,-277.3227 1417.8959,-275.9464 1419.3305,-282.7978"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~globalnames.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge121" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~globalnames.f90</title>
<path fill="none" stroke="#3fff00" stroke-dasharray="5,2" d="M399.0839,-2931.2417C469.0072,-2987.6209 525.6993,-2882.5566 601.1821,-2931.2417"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~dataloopnode.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge125" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~dataloopnode.f90</title>
<path fill="none" stroke="#00ff00" stroke-dasharray="5,2" d="M223.8744,-1457.6047C224.3506,-1588.7228 231.0959,-2812.8678 317.2024,-2945.2417 414.0802,-3094.1745 630.1481,-3159.0925 735.6669,-3182.7425"/>
<polygon fill="#00ff00" stroke="#00ff00" points="735.008,-3186.1811 745.5256,-3184.9038 736.5071,-3179.3434 735.008,-3186.1811"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~outairnodemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge134" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~outairnodemanager.f90</title>
<path fill="none" stroke="#00ff3f" stroke-dasharray="5,2" d="M399.0839,-1826.2417C420.8387,-1843.0106 1355.8348,-1923.9866 1382.3269,-1931.2417 1573.869,-1983.6972 1764.9963,-2139.998 1826.1821,-2193.2436"/>
<polygon fill="#00ff3f" stroke="#00ff3f" points="1824.1149,-2196.0862 1833.9398,-2200.0513 1828.732,-2190.8247 1824.1149,-2196.0862"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~curvemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge143" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~curvemanager.f90</title>
<path fill="none" stroke="#00ff7f" stroke-dasharray="5,2" d="M399.0839,-2623.2417C463.3618,-2687.9592 441.111,-2740.5847 516.9653,-2791.2417 622.6071,-2861.7914 675.5824,-2812.7358 795.9847,-2853.2417"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~dataenvironment.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge149" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~dataenvironment.f90</title>
<path fill="none" stroke="#00ffbf" stroke-dasharray="5,2" d="M267.619,-1455.6541C318.8718,-1466.7806 406.2611,-1486.0852 480.9653,-1504.2417 645.6437,-1544.266 839.6399,-1596.2247 929.4331,-1620.5507"/>
<polygon fill="#00ffbf" stroke="#00ffbf" points="928.5176,-1623.9287 939.0851,-1623.1678 930.3496,-1617.1727 928.5176,-1623.9287"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~outputreportpredefined.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge152" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~outputreportpredefined.f90</title>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M228.6509,-1434.912C240.1501,-1407.2298 269.1675,-1333.7021 281.2024,-1269.2417 294.3759,-1198.6827 276.9093,-683.6435 317.2024,-624.2417 362.2453,-557.8375 422.927,-603.6486 480.9653,-548.2417 505.9845,-524.3568 491.3172,-502.4498 516.9653,-479.2417 628.6098,-378.2182 995.7657,-238.5425 1145.9073,-227.2417"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~psychroutines.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge156" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~psychroutines.f90</title>
<path fill="none" stroke="#00bfff" stroke-dasharray="5,2" d="M224.3362,-1457.2871C229.249,-1565.4809 270.0257,-2434.2801 317.2024,-2538.2417 338.8785,-2586.0085 361.5071,-2586.6424 399.0839,-2623.2417"/>
<path fill="none" stroke="#00bfff" stroke-dasharray="5,2" d="M399.0839,-2623.2417C436.6606,-2659.841 447.9133,-2578.9735 480.9653,-2538.2417 498.908,-2516.13 493.4315,-2501.2736 516.9653,-2485.2417 580.3882,-2442.0364 617.3983,-2482.8097 685.3989,-2447.2417 704.632,-2437.1818 702.4697,-2424.8622 721.3989,-2414.2417 781.5728,-2380.4802 804.5906,-2391.4251 870.5706,-2371.2417 951.987,-2346.3362 976.9936,-2350.9526 1052.825,-2312.2417 1079.785,-2298.479 1107.3801,-2277.2422 1125.4489,-2262.1671"/>
<polygon fill="#00bfff" stroke="#00bfff" points="1128.153,-2264.4625 1133.5093,-2255.3213 1123.6216,-2259.1271 1128.153,-2264.4625"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~branchnodeconnections.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge163" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~branchnodeconnections.f90</title>
<path fill="none" stroke="#007fff" stroke-dasharray="5,2" d="M601.1821,-2777.2417C632.2154,-2786.0633 830.4835,-2738.1111 927.0235,-2713.7559"/>
<polygon fill="#007fff" stroke="#007fff" points="928.0428,-2717.1084 936.8788,-2711.2624 926.3257,-2710.3222 928.0428,-2717.1084"/>
<path fill="none" stroke="#007fff" stroke-dasharray="5,2" d="M399.0839,-2623.2417C454.0461,-2678.5799 450.716,-2712.081 516.9653,-2753.2417 550.0242,-2773.7811 563.8,-2766.4094 601.1821,-2777.2417"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~schedulemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge169" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~schedulemanager.f90</title>
<path fill="none" stroke="#003fff" stroke-dasharray="5,2" d="M979.6978,-1483.2417C1019.5866,-1468.2583 1026.7829,-1454.9675 1052.825,-1421.2417 1073.569,-1394.3771 1062.6995,-1373.6652 1088.216,-1348.238"/>
<polygon fill="#003fff" stroke="#003fff" points="1090.8538,-1350.5745 1095.9768,-1341.3006 1086.1886,-1345.3557 1090.8538,-1350.5745"/>
<path fill="none" stroke="#003fff" stroke-dasharray="5,2" d="M266.2953,-1435.1699C282.1518,-1431.5592 300.3885,-1428.0224 317.2024,-1426.2417 389.5811,-1418.5761 408.2996,-1422.1027 480.9653,-1426.2417 592.3357,-1432.5853 875.271,-1522.4674 979.6978,-1483.2417"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~general.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge178" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~general.f90</title>
<path fill="none" stroke="#0000ff" stroke-dasharray="5,2" d="M399.0839,-1826.2417C429.921,-1847.3305 448.6613,-1826.4769 480.9653,-1845.2417 617.0617,-1924.2974 589.2273,-2019.786 721.3989,-2105.2417 730.8821,-2111.373 742.0205,-2116.1517 752.7556,-2119.8119"/>
<polygon fill="#0000ff" stroke="#0000ff" points="751.8522,-2123.1969 762.4418,-2122.8656 753.9569,-2116.5208 751.8522,-2123.1969"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~dataplant.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge202" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~dataplant.f90</title>
<path fill="none" stroke="#3f00ff" stroke-dasharray="5,2" d="M224.0875,-1457.3579C227.3516,-1602.4472 262.7605,-3120.2758 317.2024,-3195.2417 627.7826,-3622.9066 958.3831,-3367.8115 1483.574,-3427.2417"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~databranchairloopplant.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge206" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~databranchairloopplant.f90</title>
<path fill="none" stroke="#bf00ff" stroke-dasharray="5,2" d="M224.1815,-1457.4108C229.0721,-1616.9893 285.4146,-3433.5962 317.2024,-3477.2417 368.3476,-3547.4655 621.3215,-3614.9779 737.4823,-3642.8492"/>
<polygon fill="#bf00ff" stroke="#bf00ff" points="736.7431,-3646.2709 747.282,-3645.1842 738.3657,-3639.4616 736.7431,-3646.2709"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~nodeinputmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge218" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~nodeinputmanager.f90</title>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M399.0839,-2623.2417C436.9897,-2660.0117 819.048,-2574.8308 870.5706,-2563.2417 996.1758,-2534.9889 1020.4941,-2502.3349 1145.9073,-2473.2417"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~fluidproperties.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge225" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~fluidproperties.f90</title>
<path fill="none" stroke="#ff007f" stroke-dasharray="5,2" d="M601.1821,-2777.2417C684.3401,-2801.3385 712.0347,-2756.0686 795.9847,-2777.2417"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~inputprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge231" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~inputprocessor.f90</title>
<path fill="none" stroke="#ff003f" stroke-dasharray="5,2" d="M225.2211,-1457.2991C232.9128,-1517.763 271.7729,-1808.4561 317.2024,-1885.2417 382.0354,-1994.8233 513.508,-2079.9425 571.9929,-2114.0363"/>
<polygon fill="#ff003f" stroke="#ff003f" points="570.3184,-2117.1108 580.7313,-2119.066 573.8104,-2111.044 570.3184,-2117.1108"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~runtimelanguageprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge24" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~runtimelanguageprocessor.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M228.5471,-1434.8939C240.1003,-1408.1969 272.2288,-1340.5575 317.2024,-1299.2417 491.9096,-1138.7438 564.1178,-1113.4405 795.9847,-1063.2417"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M795.9847,-1063.2417C1058.0281,-1040.0077 1121.7327,-1018.2584 1382.3269,-982.2417 1427.326,-976.0224 1448.3271,-939.5841 1483.574,-968.2417"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~outputprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge55" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~outputprocessor.f90</title>
<path fill="none" stroke="#ffbf00" stroke-dasharray="5,2" d="M795.9847,-1063.2417C814.156,-1059.3076 966.6106,-1093.721 979.6978,-1101.2417"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~dataairsystems.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge65" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~dataairsystems.f90</title>
<path fill="none" stroke="#7fff00" stroke-dasharray="5,2" d="M399.0839,-800.2417C423.3722,-771.1176 445.6062,-789.9482 480.9653,-776.2417 761.3218,-667.5652 797.967,-555.4781 1088.825,-479.2417 1258.8239,-434.6834 1307.8324,-456.2417 1483.574,-456.2417 1483.574,-456.2417 1483.574,-456.2417 1665.8309,-456.2417 1807.0866,-456.2417 1907.1981,-337.4674 1983.6563,-456.2417"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~datasurfaces.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge72" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~datasurfaces.f90</title>
<path fill="none" stroke="#00ff3f" stroke-dasharray="5,2" d="M228.3089,-1434.8408C239.0486,-1407.0004 266.5073,-1333.1481 281.2024,-1269.2417 329.3676,-1059.7802 261.4293,-965.3029 399.0839,-800.2417"/>
<path fill="none" stroke="#00ff3f" stroke-dasharray="5,2" d="M399.0839,-800.2417C423.3722,-771.1176 453.551,-802.4446 480.9653,-776.2417 516.6283,-742.1546 481.3612,-705.3902 516.9653,-671.2417 524.6394,-663.8814 534.3798,-658.6758 544.4919,-654.9973"/>
<polygon fill="#00ff3f" stroke="#00ff3f" points="545.7633,-658.2663 554.2455,-651.9179 543.6557,-651.5911 545.7633,-658.2663"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~dataruntimelanguage.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge76" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~dataruntimelanguage.f90</title>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M224.9918,-1457.5496C231.035,-1510.3532 264.1568,-1733.9682 399.0839,-1826.2417"/>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M399.0839,-1826.2417C411.5009,-1834.7334 495.0234,-1815.18 550.7367,-1800.802"/>
<polygon fill="#00ffff" stroke="#00ffff" points="551.653,-1804.1802 560.4498,-1798.2753 549.8907,-1797.4056 551.653,-1804.1802"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~datazonecontrols.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge79" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~datazonecontrols.f90</title>
<path fill="none" stroke="#003fff" stroke-dasharray="5,2" d="M228.7409,-1434.9283C240.4397,-1407.2823 269.8669,-1333.8287 281.2024,-1269.2417 291.3497,-1211.4246 281.4782,-259.8202 317.2024,-213.2417 321.3959,-207.7741 326.7558,-203.4669 332.7221,-200.0792"/>
<polygon fill="#003fff" stroke="#003fff" points="334.3053,-203.2019 341.8322,-195.7455 331.2983,-196.8807 334.3053,-203.2019"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~dataairloop.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge81" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~dataairloop.f90</title>
<path fill="none" stroke="#7f00ff" stroke-dasharray="5,2" d="M224.979,-1457.2534C231.1516,-1514.9318 262.3681,-1781.8004 317.2024,-1840.2417 324.7553,-1848.2914 334.817,-1853.7747 345.2963,-1857.503"/>
<polygon fill="#7f00ff" stroke="#7f00ff" points="344.3913,-1860.8862 354.9775,-1860.457 346.4343,-1854.1909 344.3913,-1860.8862"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~dataheatbalance.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge91" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~dataheatbalance.f90</title>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M601.1821,-837.2417C643.7335,-810.2629 745.8857,-726.5854 795.9847,-721.2417"/>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M228.0719,-1435.2302C238.517,-1407.6669 265.7929,-1333.3119 281.2024,-1269.2417 304.8839,-1170.7776 264.2872,-1130.5897 317.2024,-1044.2417 398.8101,-911.0727 469.2754,-920.8742 601.1821,-837.2417"/>
</g>
<!-- sourcefile~sortandstringutilities.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node36" class="node">
<title>sourcefile~sortandstringutilities.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node36"><a xlink:href="../sourcefile/sortandstringutilities.f90.html" xlink:title="SortAndStringUtilities.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="463.3044,-1457.2471 334.8633,-1457.2471 334.8633,-1435.2362 463.3044,-1435.2362 463.3044,-1457.2471"/>
<text text-anchor="middle" x="399.0839" y="-1443.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">SortAndStringUtilities.f90</text>
</a>
</g>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~sortandstringutilities.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge31" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~sortandstringutilities.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M267.6098,-1446.2417C284.8758,-1446.2417 305.2027,-1446.2417 324.6437,-1446.2417"/>
<polygon fill="#ff0000" stroke="#ff0000" points="324.7084,-1449.7418 334.7083,-1446.2417 324.7083,-1442.7418 324.7084,-1449.7418"/>
</g>
<!-- sourcefile~dataoutputs.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node37" class="node">
<title>sourcefile~dataoutputs.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node37"><a xlink:href="../sourcefile/dataoutputs.f90.html" xlink:title="DataOutputs.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="443.5485,-1535.2471 354.6193,-1535.2471 354.6193,-1513.2362 443.5485,-1513.2362 443.5485,-1535.2471"/>
<text text-anchor="middle" x="399.0839" y="-1521.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">DataOutputs.f90</text>
</a>
</g>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~dataoutputs.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge32" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~dataoutputs.f90</title>
<path fill="none" stroke="#7fff00" stroke-dasharray="5,2" d="M240.8033,-1457.3895C259.0764,-1469.0308 289.2956,-1487.2343 317.2024,-1499.2417 326.5207,-1503.251 336.6903,-1506.8995 346.5949,-1510.0945"/>
<polygon fill="#7fff00" stroke="#7fff00" points="345.7816,-1513.5069 356.37,-1513.135 347.8608,-1506.8228 345.7816,-1513.5069"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~sqlitefortranroutines.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge42" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~sqlitefortranroutines.f90</title>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M399.0839,-724.2417C418.5802,-692.3738 452.0485,-728.8952 480.9653,-705.2417 510.8312,-680.8118 487.9228,-651.6448 516.9653,-626.2417 653.1469,-507.1256 728.5145,-540.3372 906.5706,-508.2417 1011.4608,-489.3347 1065.6109,-423.1566 1145.9073,-493.2417"/>
</g>
<!-- sourcefile~dataglobalconstants.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node39" class="node">
<title>sourcefile~dataglobalconstants.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node39"><a xlink:href="../sourcefile/dataglobalconstants.f90.html" xlink:title="DataGlobalConstants.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="860.8052,-1303.2471 731.1643,-1303.2471 731.1643,-1281.2362 860.8052,-1281.2362 860.8052,-1303.2471"/>
<text text-anchor="middle" x="795.9847" y="-1289.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">DataGlobalConstants.f90</text>
</a>
</g>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~dataglobalconstants.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge47" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~dataglobalconstants.f90</title>
<path fill="none" stroke="#7f00ff" stroke-dasharray="5,2" d="M231.6714,-1435.2136C246.1585,-1415.7084 279.1587,-1375.2952 317.2024,-1355.2417 446.6748,-1286.9944 622.2093,-1282.5297 720.7774,-1286.5942"/>
<polygon fill="#7f00ff" stroke="#7f00ff" points="720.7992,-1290.0987 730.9475,-1287.0553 721.1163,-1283.1059 720.7992,-1290.0987"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~dataroomair.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge33" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~dataroomair.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M228.7095,-1434.9227C240.3386,-1407.2643 269.6227,-1333.7854 281.2024,-1269.2417 298.1697,-1174.6684 272.9766,-490.5416 317.2024,-405.2417 327.7479,-384.9021 348.1553,-369.1752 365.9577,-358.5217"/>
<polygon fill="#ff0000" stroke="#ff0000" points="367.9909,-361.3924 374.9637,-353.4155 364.5384,-355.303 367.9909,-361.3924"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~databsdfwindow.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge69" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~databsdfwindow.f90</title>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M228.6622,-1434.9141C240.1863,-1407.2365 269.2548,-1333.7183 281.2024,-1269.2417 308.6924,-1120.8882 246.9923,-724.7894 317.2024,-591.2417 327.8637,-570.9626 348.2713,-555.2358 366.0449,-544.5672"/>
<polygon fill="#00ffff" stroke="#00ffff" points="368.0735,-547.4399 375.0337,-539.452 364.6113,-541.356 368.0735,-547.4399"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~datacomplexfenestration.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge83" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~datacomplexfenestration.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M228.6155,-1434.9053C240.036,-1407.2082 268.8919,-1333.65 281.2024,-1269.2417 292.8869,-1208.1085 278.5822,-759.0502 317.2024,-710.2417 319.7243,-707.0545 322.6416,-704.263 325.841,-701.819"/>
<polygon fill="#ff0000" stroke="#ff0000" points="327.7512,-704.7521 334.3108,-696.4321 323.9945,-698.8455 327.7512,-704.7521"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~dataequivalentlayerwindow.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge85" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~dataequivalentlayerwindow.f90</title>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M228.6353,-1434.9091C240.0997,-1407.2204 269.0458,-1333.6792 281.2024,-1269.2417 293.666,-1203.1769 274.4268,-717.1083 317.2024,-665.2417 318.2237,-664.0033 319.3072,-662.8325 320.4457,-661.7256"/>
<polygon fill="#00ffff" stroke="#00ffff" points="322.9426,-664.2173 328.6822,-655.3118 318.6418,-658.6943 322.9426,-664.2173"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~datacontaminantbalance.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge127" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~datacontaminantbalance.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M399.0839,-2623.2417C448.7355,-2673.4749 624.7211,-2521.3922 685.3989,-2485.2417 702.3544,-2475.14 703.8424,-2468.2583 721.3989,-2459.2417 729.1664,-2455.2525 737.7064,-2451.6965 746.1486,-2448.6062"/>
<polygon fill="#ff0000" stroke="#ff0000" points="747.2999,-2451.9115 755.5921,-2445.3167 744.9972,-2445.301 747.2999,-2451.9115"/>
</g>
<!-- sourcefile~databranchnodeconnections.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node46" class="node">
<title>sourcefile~databranchnodeconnections.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node46"><a xlink:href="../sourcefile/databranchnodeconnections.f90.html" xlink:title="DataBranchNodeConnections.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="685.6163,-2673.2471 516.748,-2673.2471 516.748,-2651.2362 685.6163,-2651.2362 685.6163,-2673.2471"/>
<text text-anchor="middle" x="601.1821" y="-2659.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">DataBranchNodeConnections.f90</text>
</a>
</g>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~databranchnodeconnections.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge159" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~databranchnodeconnections.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M399.0839,-2623.2417C426.9282,-2651.4121 468.549,-2662.4993 506.796,-2666.0156"/>
<polygon fill="#ff0000" stroke="#ff0000" points="506.721,-2669.5198 516.9564,-2666.7837 507.2487,-2662.5397 506.721,-2669.5198"/>
</g>
<!-- sourcefile~dataglobals.f90&#45;&gt;sourcefile~branchinputmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge192" class="edge">
<title>sourcefile~dataglobals.f90&#45;&gt;sourcefile~branchinputmanager.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M224.0799,-1457.4358C227.1828,-1600.4205 260.3442,-3066.2682 317.2024,-3135.2417 444.1928,-3289.291 1007.2484,-3324.5235 1202.9897,-3285.2417 1287.6957,-3268.2427 1309.1915,-3256.2338 1382.3269,-3210.2417 1400.4487,-3198.8455 1399.5918,-3188.5988 1418.3269,-3178.2417 1444.7599,-3163.6291 1453.4104,-3160.7873 1483.574,-3159.2417"/>
</g>
<!-- sourcefile~nodeinputmanager.f90&#45;&gt;sourcefile~plantchillers.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge258" class="edge">
<title>sourcefile~nodeinputmanager.f90&#45;&gt;sourcefile~plantchillers.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1694.5239,-2391.1932C1734.8711,-2377.7532 1807.7462,-2361.5335 1846.3422,-2402.2417"/>
</g>
<!-- sourcefile~nodeinputmanager.f90&#45;&gt;sourcefile~outairnodemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge135" class="edge">
<title>sourcefile~nodeinputmanager.f90&#45;&gt;sourcefile~outairnodemanager.f90</title>
<path fill="none" stroke="#00ff3f" stroke-dasharray="5,2" d="M1676.3162,-2391.1471C1706.1015,-2359.6311 1791.4611,-2269.3117 1828.6587,-2229.9526"/>
<polygon fill="#00ff3f" stroke="#00ff3f" points="1831.503,-2232.0387 1835.8279,-2222.3668 1826.4155,-2227.2306 1831.503,-2232.0387"/>
</g>
<!-- sourcefile~nodeinputmanager.f90&#45;&gt;sourcefile~branchinputmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge193" class="edge">
<title>sourcefile~nodeinputmanager.f90&#45;&gt;sourcefile~branchinputmanager.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1674.808,-2413.5057C1692.1258,-2435.9265 1729.9269,-2488.3744 1746.8408,-2539.2417 1793.6712,-2680.0805 1718.4586,-2737.5122 1782.8408,-2871.2417 1791.5993,-2889.4341 1807.8406,-2905.3975 1821.705,-2916.7036"/>
<polygon fill="#ff0000" stroke="#ff0000" points="1819.9023,-2919.7359 1829.9422,-2923.1197 1824.2038,-2914.2135 1819.9023,-2919.7359"/>
</g>
<!-- sourcefile~fluidproperties.f90&#45;&gt;sourcefile~plantchillers.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge259" class="edge">
<title>sourcefile~fluidproperties.f90&#45;&gt;sourcefile~plantchillers.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1846.3422,-2857.2417C1907.3332,-2855.1044 1925.4009,-2839.0541 1983.6563,-2857.2417"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1030.0604,-2844.7538C1076.3845,-2834.9406 1146.2793,-2817.3532 1202.9897,-2791.2417 1220.4568,-2783.1992 1220.5852,-2772.8141 1238.9897,-2767.2417 1370.784,-2727.3376 1412.6008,-2747.0893 1548.821,-2767.2417 1617.1519,-2777.3505 1777.3099,-2859.6607 1846.3422,-2857.2417"/>
</g>
<!-- sourcefile~fluidproperties.f90&#45;&gt;sourcefile~plantutilities.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge4" class="edge">
<title>sourcefile~fluidproperties.f90&#45;&gt;sourcefile~plantutilities.f90</title>
<path fill="none" stroke="#ff3f00" stroke-dasharray="5,2" d="M1983.6563,-3522.2417C2181.1856,-3339.4667 1900.2515,-3139.6615 2057.469,-2921.2417 2059.721,-2918.113 2062.4697,-2915.3611 2065.5163,-2912.9433"/>
<polygon fill="#ff3f00" stroke="#ff3f00" points="2067.6931,-2915.7015 2074.1403,-2907.2942 2063.8574,-2909.846 2067.6931,-2915.7015"/>
<path fill="none" stroke="#ff3f00" stroke-dasharray="5,2" d="M1029.943,-2862.8324C1038.163,-2865.8144 1046.1585,-2869.8312 1052.825,-2875.2417 1079.3769,-2896.7911 1067.2932,-2916.6754 1088.825,-2943.2417 1148.8773,-3017.3352 1334.946,-3171.941 1418.3269,-3218.2417 1471.7133,-3247.8867 1493.1017,-3236.2559 1548.821,-3261.2417 1717.9931,-3337.102 1753.6782,-3370.3099 1909.8435,-3470.2417 1943.6444,-3491.8712 1954.2021,-3549.4958 1983.6563,-3522.2417"/>
</g>
<!-- sourcefile~fluidproperties.f90&#45;&gt;sourcefile~nodeinputmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge212" class="edge">
<title>sourcefile~fluidproperties.f90&#45;&gt;sourcefile~nodeinputmanager.f90</title>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M1026.3044,-2843.1079C1035.6193,-2839.5999 1044.9496,-2835.0649 1052.825,-2829.2417 1131.3662,-2771.1666 1212.9801,-2472.6062 1310.6583,-2473.2417"/>
</g>
<!-- sourcefile~inputprocessor.f90&#45;&gt;sourcefile~plantchillers.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge260" class="edge">
<title>sourcefile~inputprocessor.f90&#45;&gt;sourcefile~plantchillers.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M795.9847,-2319.2417C913.3499,-2375.9488 1252.7361,-2317.2594 1382.3269,-2303.2417 1414.2077,-2299.7932 1634.5506,-2242.1832 1665.8309,-2249.2417"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M611.1129,-2141.4349C644.1856,-2178.4507 751.0363,-2295.8828 795.9847,-2319.2417"/>
</g>
<!-- sourcefile~inputprocessor.f90&#45;&gt;sourcefile~emsmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge113" class="edge">
<title>sourcefile~inputprocessor.f90&#45;&gt;sourcefile~emsmanager.f90</title>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M650.9121,-2122.4348C690.5714,-2115.6955 747.3356,-2104.8971 795.9847,-2091.2417"/>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M795.9847,-2091.2417C856.996,-2074.1163 849.3821,-2028.5387 906.5706,-2001.2417 1003.0097,-1955.2097 1277.0378,-1912.9751 1382.3269,-1931.2417 1598.1319,-1968.6816 1632.6489,-2049.192 1846.3422,-2097.2417"/>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M1846.3422,-2097.2417C1962.9971,-2107.6594 1994.2183,-2078.6987 2109.8602,-2097.2417"/>
</g>
<!-- sourcefile~inputprocessor.f90&#45;&gt;sourcefile~globalnames.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge122" class="edge">
<title>sourcefile~inputprocessor.f90&#45;&gt;sourcefile~globalnames.f90</title>
<path fill="none" stroke="#3fff00" stroke-dasharray="5,2" d="M615.0953,-2141.3936C634.9,-2158.2224 670.471,-2192.2109 685.3989,-2230.2417 715.7608,-2307.5926 671.2579,-2910.978 721.3989,-2977.2417 726.2082,-2983.5973 732.7008,-2988.3544 739.8595,-2991.9115"/>
<polygon fill="#3fff00" stroke="#3fff00" points="738.6297,-2995.1907 749.2067,-2995.8054 741.3216,-2988.729 738.6297,-2995.1907"/>
</g>
<!-- sourcefile~inputprocessor.f90&#45;&gt;sourcefile~outairnodemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge137" class="edge">
<title>sourcefile~inputprocessor.f90&#45;&gt;sourcefile~outairnodemanager.f90</title>
<path fill="none" stroke="#00ff3f" stroke-dasharray="5,2" d="M795.9847,-2091.2417C907.0912,-2062.9639 938.7467,-2078.6624 1052.825,-2067.2417 1244.3999,-2048.0626 1306.4729,-1945.717 1483.574,-2021.2417"/>
</g>
<!-- sourcefile~inputprocessor.f90&#45;&gt;sourcefile~curvemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge147" class="edge">
<title>sourcefile~inputprocessor.f90&#45;&gt;sourcefile~curvemanager.f90</title>
<path fill="none" stroke="#00ff7f" stroke-dasharray="5,2" d="M795.9847,-2549.2417C811.8956,-2580.2174 848.4242,-2546.3681 870.5706,-2573.2417 956.255,-2677.2161 819.2506,-2771.637 906.5706,-2874.2417 910.5192,-2878.8815 915.4189,-2882.5311 920.7987,-2885.3966"/>
<polygon fill="#00ff7f" stroke="#00ff7f" points="919.658,-2888.7177 930.2227,-2889.5153 922.4613,-2882.3035 919.658,-2888.7177"/>
</g>
<!-- sourcefile~inputprocessor.f90&#45;&gt;sourcefile~branchnodeconnections.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge165" class="edge">
<title>sourcefile~inputprocessor.f90&#45;&gt;sourcefile~branchnodeconnections.f90</title>
<path fill="none" stroke="#007fff" stroke-dasharray="5,2" d="M795.9847,-2473.2417C821.2998,-2508.1319 847.5093,-2498.8225 870.5706,-2535.2417 904.9413,-2589.5211 862.9408,-2628.0819 906.5706,-2675.2417 909.7311,-2678.658 913.3778,-2681.6075 917.3208,-2684.1539"/>
<polygon fill="#007fff" stroke="#007fff" points="915.9018,-2687.3675 926.3524,-2689.1095 919.2691,-2681.2306 915.9018,-2687.3675"/>
</g>
<!-- sourcefile~inputprocessor.f90&#45;&gt;sourcefile~schedulemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge173" class="edge">
<title>sourcefile~inputprocessor.f90&#45;&gt;sourcefile~schedulemanager.f90</title>
<path fill="none" stroke="#003fff" stroke-dasharray="5,2" d="M605.7817,-2119.2108C620.5683,-2084.1749 668.9861,-1972.7043 721.3989,-1887.2417 779.3723,-1792.7122 812.6568,-1781.8077 870.5706,-1687.2417 889.4634,-1656.392 878.5197,-1637.0845 906.5706,-1614.2417 932.6091,-1593.0375 963.4817,-1624.6468 979.6978,-1595.2417"/>
<path fill="none" stroke="#003fff" stroke-dasharray="5,2" d="M979.6978,-1595.2417C1006.4207,-1547.9206 1029.7976,-1546.4671 1052.825,-1497.2417 1080.6882,-1437.6786 1044.7009,-1399.6615 1087.7638,-1348.8733"/>
<polygon fill="#003fff" stroke="#003fff" points="1090.5401,-1351.0238 1094.7079,-1341.2832 1085.3754,-1346.2987 1090.5401,-1351.0238"/>
</g>
<!-- sourcefile~inputprocessor.f90&#45;&gt;sourcefile~general.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge182" class="edge">
<title>sourcefile~inputprocessor.f90&#45;&gt;sourcefile~general.f90</title>
<path fill="none" stroke="#0000ff" stroke-dasharray="5,2" d="M650.8431,-2130.2417C682.1022,-2130.2417 722.077,-2130.2417 752.1568,-2130.2417"/>
<polygon fill="#0000ff" stroke="#0000ff" points="752.3532,-2133.7418 762.3532,-2130.2417 752.3531,-2126.7418 752.3532,-2133.7418"/>
</g>
<!-- sourcefile~inputprocessor.f90&#45;&gt;sourcefile~dataplant.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge205" class="edge">
<title>sourcefile~inputprocessor.f90&#45;&gt;sourcefile~dataplant.f90</title>
<path fill="none" stroke="#3f00ff" stroke-dasharray="5,2" d="M614.2255,-2141.3447C633.2725,-2158.3683 668.2862,-2192.8928 685.3989,-2230.2417 727.4003,-2321.9106 653.3819,-2379.8039 721.3989,-2454.2417 744.4739,-2479.4949 776.2623,-2445.2916 795.9847,-2473.2417"/>
<path fill="none" stroke="#3f00ff" stroke-dasharray="5,2" d="M795.9847,-2473.2417C898.198,-2618.095 1387.5754,-2663.5539 1548.821,-2737.2417 1657.8304,-2787.0579 1669.1457,-2833.3191 1782.8408,-2871.2417 1833.2284,-2888.0483 1894.141,-2893.7232 1935.5728,-2895.5529"/>
<polygon fill="#3f00ff" stroke="#3f00ff" points="1935.5416,-2899.0542 1945.6683,-2895.9397 1935.8097,-2892.0593 1935.5416,-2899.0542"/>
</g>
<!-- sourcefile~inputprocessor.f90&#45;&gt;sourcefile~nodeinputmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge221" class="edge">
<title>sourcefile~inputprocessor.f90&#45;&gt;sourcefile~nodeinputmanager.f90</title>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M795.9847,-2319.2417C837.1832,-2341.0645 1159.4495,-2404.5746 1202.9897,-2421.2417 1252.6192,-2440.2396 1257.5235,-2474.0772 1310.6583,-2473.2417"/>
</g>
<!-- sourcefile~inputprocessor.f90&#45;&gt;sourcefile~fluidproperties.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge227" class="edge">
<title>sourcefile~inputprocessor.f90&#45;&gt;sourcefile~fluidproperties.f90</title>
<path fill="none" stroke="#ff007f" stroke-dasharray="5,2" d="M795.9847,-2549.2417C811.8956,-2580.2174 847.3886,-2547.2562 870.5706,-2573.2417 924.8817,-2634.1211 873.8981,-2678.4853 906.5706,-2753.2417 920.3907,-2784.863 945.3545,-2816.2662 962.2249,-2835.4617"/>
<polygon fill="#ff007f" stroke="#ff007f" points="959.8355,-2838.0395 969.1204,-2843.1426 965.0444,-2833.3632 959.8355,-2838.0395"/>
<path fill="none" stroke="#ff007f" stroke-dasharray="5,2" d="M614.3228,-2141.3007C633.4938,-2158.2682 668.6639,-2192.722 685.3989,-2230.2417 732.3817,-2335.5761 665.2722,-2386.482 721.3989,-2487.2417 742.3759,-2524.9 776.2891,-2510.8977 795.9847,-2549.2417"/>
</g>
<!-- sourcefile~inputprocessor.f90&#45;&gt;sourcefile~runtimelanguageprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge29" class="edge">
<title>sourcefile~inputprocessor.f90&#45;&gt;sourcefile~runtimelanguageprocessor.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M649.5969,-2119.2174C661.6381,-2115.5788 674.2761,-2110.9591 685.3989,-2105.2417 703.4265,-2095.975 705.0326,-2089.2002 721.3989,-2077.2417 977.7843,-1889.9058 994.5835,-1703.6535 1310.6583,-1673.2417"/>
</g>
<!-- sourcefile~inputprocessor.f90&#45;&gt;sourcefile~outputprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge63" class="edge">
<title>sourcefile~inputprocessor.f90&#45;&gt;sourcefile~outputprocessor.f90</title>
<path fill="none" stroke="#ffbf00" stroke-dasharray="5,2" d="M650.813,-2124.4526C663.5365,-2120.7638 676.2073,-2114.8112 685.3989,-2105.2417 730.5006,-2058.2858 686.5901,-2018.2631 721.3989,-1963.2417 726.3861,-1955.3586 1231.7447,-1541.1174 1238.9897,-1535.2417 1302.2097,-1483.9706 1328.4534,-1482.2592 1382.3269,-1421.2417 1423.6324,-1374.4588 1458.0819,-1308.6727 1474.0359,-1275.7289"/>
<polygon fill="#ffbf00" stroke="#ffbf00" points="1477.2359,-1277.1496 1478.3804,-1266.6168 1470.9174,-1274.137 1477.2359,-1277.1496"/>
</g>
<!-- sourcefile~inputprocessor.f90&#45;&gt;sourcefile~dataheatbalance.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge96" class="edge">
<title>sourcefile~inputprocessor.f90&#45;&gt;sourcefile~dataheatbalance.f90</title>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M604.6436,-2119.2087C617.3468,-2078.3177 661.882,-1931.367 685.3989,-1807.2417 710.3969,-1675.299 670.8127,-1631.6395 721.3989,-1507.2417 762.5028,-1406.1621 827.4922,-1412.4957 870.5706,-1312.2417 910.5516,-1219.1959 871.9054,-1182.3959 906.5706,-1087.2417 960.4934,-939.226 970.5749,-887.3246 1088.825,-783.2417 1092.784,-779.757 1097.3052,-776.6928 1102.0309,-774.0155"/>
<polygon fill="#ff00bf" stroke="#ff00bf" points="1103.9358,-776.9742 1111.2767,-769.3346 1100.774,-770.7289 1103.9358,-776.9742"/>
</g>
<!-- sourcefile~inputprocessor.f90&#45;&gt;sourcefile~sqlitefortranroutines.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge41" class="edge">
<title>sourcefile~inputprocessor.f90&#45;&gt;sourcefile~sqlitefortranroutines.f90</title>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M604.1577,-2119.1015C615.1646,-2077.8365 654.5315,-1929.7462 685.3989,-1807.2417 701.9392,-1741.5977 694.9059,-1721.538 721.3989,-1659.2417 769.8133,-1545.3989 811.6316,-1533.009 870.5706,-1424.2417 888.9535,-1390.3174 889.3183,-1379.7547 906.5706,-1345.2417 982.1822,-1193.9805 976.5949,-1137.7387 1088.825,-1011.2417 1145.9251,-946.8829 1233.9293,-894.1895 1280.0558,-869.0942"/>
<polygon fill="#00ffff" stroke="#00ffff" points="1281.8163,-872.1215 1288.9691,-864.3056 1278.5035,-865.955 1281.8163,-872.1215"/>
</g>
<!-- sourcefile~inputprocessor.f90&#45;&gt;sourcefile~dataglobalconstants.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge48" class="edge">
<title>sourcefile~inputprocessor.f90&#45;&gt;sourcefile~dataglobalconstants.f90</title>
<path fill="none" stroke="#7f00ff" stroke-dasharray="5,2" d="M604.7779,-2119.233C617.95,-2078.4268 663.9139,-1931.7348 685.3989,-1807.2417 716.8091,-1625.2378 656.0921,-1566.0046 721.3989,-1393.2417 733.6732,-1360.7713 759.5391,-1329.6145 777.337,-1310.7021"/>
<polygon fill="#7f00ff" stroke="#7f00ff" points="779.9799,-1313.0037 784.4075,-1303.3784 774.9439,-1308.1418 779.9799,-1313.0037"/>
</g>
<!-- sourcefile~inputprocessor.f90&#45;&gt;sourcefile~branchinputmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge197" class="edge">
<title>sourcefile~inputprocessor.f90&#45;&gt;sourcefile~branchinputmanager.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M795.9847,-2473.2417C821.2998,-2508.1319 848.6027,-2498.1527 870.5706,-2535.2417 913.2583,-2607.3128 849.5664,-2658.8656 906.5706,-2720.2417 1107.9059,-2937.0183 1265.3248,-2810.6374 1548.821,-2895.2417 1601.2157,-2910.8779 1612.9415,-2919.3708 1665.8309,-2933.2417"/>
</g>
<!-- sourcefile~runtimelanguageprocessor.f90&#45;&gt;sourcefile~emsmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge98" class="edge">
<title>sourcefile~runtimelanguageprocessor.f90&#45;&gt;sourcefile~emsmanager.f90</title>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M1697.4381,-1683.1529C1737.1474,-1671.4407 1805.0755,-1659.0786 1846.3422,-1694.2417"/>
</g>
<!-- sourcefile~outputprocessor.f90&#45;&gt;sourcefile~emsmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge100" class="edge">
<title>sourcefile~outputprocessor.f90&#45;&gt;sourcefile~emsmanager.f90</title>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M1537.3519,-1262.9867C1579.369,-1272.0488 1635.5536,-1291.4035 1665.8309,-1332.2417"/>
</g>
<!-- sourcefile~outputprocessor.f90&#45;&gt;sourcefile~nodeinputmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge211" class="edge">
<title>sourcefile~outputprocessor.f90&#45;&gt;sourcefile~nodeinputmanager.f90</title>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M1484.4004,-1266.3378C1492.1391,-1369.7391 1552.3394,-2163.1833 1584.821,-2263.2417 1599.8645,-2309.5825 1632.0186,-2357.3068 1650.9812,-2383.014"/>
<polygon fill="#ff00bf" stroke="#ff00bf" points="1648.2863,-2385.254 1657.0887,-2391.1504 1653.8846,-2381.0517 1648.2863,-2385.254"/>
</g>
<!-- sourcefile~outputprocessor.f90&#45;&gt;sourcefile~runtimelanguageprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge18" class="edge">
<title>sourcefile~outputprocessor.f90&#45;&gt;sourcefile~runtimelanguageprocessor.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1488.2624,-1266.5346C1512.6347,-1325.2399 1624.9711,-1595.8231 1657.1783,-1673.4001"/>
<polygon fill="#ff0000" stroke="#ff0000" points="1654.1066,-1675.1298 1661.1735,-1683.0234 1660.5716,-1672.4457 1654.1066,-1675.1298"/>
</g>
<!-- sourcefile~dataairsystems.f90&#45;&gt;sourcefile~emsmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge102" class="edge">
<title>sourcefile~dataairsystems.f90&#45;&gt;sourcefile~emsmanager.f90</title>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M2162.4251,-2065.642C2170.7387,-2066.8124 2179.3702,-2068.0276 2187.78,-2069.2116"/>
<polygon fill="#ffff00" stroke="#ffff00" points="2187.5016,-2072.7068 2197.8919,-2070.6352 2188.4775,-2065.7752 2187.5016,-2072.7068"/>
</g>
<!-- sourcefile~datasurfaces.f90&#45;&gt;sourcefile~emsmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge105" class="edge">
<title>sourcefile~datasurfaces.f90&#45;&gt;sourcefile~emsmanager.f90</title>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M619.071,-635.1597C642.1781,-621.1071 683.8931,-596.6185 721.3989,-579.2417 879.6752,-505.9107 918.3534,-478.2317 1088.825,-441.2417 1478.3854,-356.7124 1600.3853,-270.6703 1983.6563,-380.2417"/>
</g>
<!-- sourcefile~datasurfaces.f90&#45;&gt;sourcefile~general.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge176" class="edge">
<title>sourcefile~datasurfaces.f90&#45;&gt;sourcefile~general.f90</title>
<path fill="none" stroke="#0000ff" stroke-dasharray="5,2" d="M608.6966,-657.6245C626.1807,-684.8423 669.3204,-756.4075 685.3989,-823.2417 702.0644,-892.5155 678.9786,-2047.9956 721.3989,-2105.2417 728.8311,-2115.2714 740.4648,-2121.326 752.352,-2124.9655"/>
<polygon fill="#0000ff" stroke="#0000ff" points="751.7569,-2128.4253 762.3103,-2127.4889 753.4764,-2121.6397 751.7569,-2128.4253"/>
</g>
<!-- sourcefile~datasurfaces.f90&#45;&gt;sourcefile~dataheatbalance.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge89" class="edge">
<title>sourcefile~datasurfaces.f90&#45;&gt;sourcefile~dataheatbalance.f90</title>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M795.9847,-721.2417C878.8931,-712.3984 899.1963,-661.5273 979.6978,-683.2417"/>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M642.6736,-657.3418C656.4054,-661.3371 671.6785,-666.1305 685.3989,-671.2417 735.9451,-690.0714 742.3494,-726.9626 795.9847,-721.2417"/>
</g>
<!-- sourcefile~datasurfaces.f90&#45;&gt;sourcefile~sqlitefortranroutines.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge38" class="edge">
<title>sourcefile~datasurfaces.f90&#45;&gt;sourcefile~sqlitefortranroutines.f90</title>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M648.2134,-636.5296C702.2226,-625.0796 793.3261,-604.8552 870.5706,-583.2417 901.5659,-574.569 1120.3964,-473.6172 1145.9073,-493.2417"/>
</g>
<!-- sourcefile~datasurfaces.f90&#45;&gt;sourcefile~datacontaminantbalance.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge128" class="edge">
<title>sourcefile~datasurfaces.f90&#45;&gt;sourcefile~datacontaminantbalance.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M608.7182,-657.6194C626.2487,-684.8261 669.4815,-756.3689 685.3989,-823.2417 725.2373,-990.6122 647.1337,-2216.0493 721.3989,-2371.2417 730.8442,-2390.9796 749.73,-2406.8312 766.1332,-2417.6969"/>
<polygon fill="#ff0000" stroke="#ff0000" points="764.5854,-2420.8578 774.915,-2423.2135 768.309,-2414.9303 764.5854,-2420.8578"/>
</g>
<!-- sourcefile~dataruntimelanguage.f90&#45;&gt;sourcefile~emsmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge108" class="edge">
<title>sourcefile~dataruntimelanguage.f90&#45;&gt;sourcefile~emsmanager.f90</title>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M669.8074,-1795.9157C746.3652,-1803.5994 873.4295,-1810.3774 979.6978,-1787.2417"/>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M979.6978,-1787.2417C1197.5667,-1735.3611 1259.6131,-1793.2417 1483.574,-1793.2417 1483.574,-1793.2417 1483.574,-1793.2417 1665.8309,-1793.2417 1807.0866,-1793.2417 1881.4292,-1695.7593 1983.6563,-1793.2417"/>
</g>
<!-- sourcefile~dataruntimelanguage.f90&#45;&gt;sourcefile~general.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge180" class="edge">
<title>sourcefile~dataruntimelanguage.f90&#45;&gt;sourcefile~general.f90</title>
<path fill="none" stroke="#0000ff" stroke-dasharray="5,2" d="M614.1989,-1798.4959C633.2121,-1815.7408 668.183,-1850.6751 685.3989,-1888.2417 726.1281,-1977.1161 657.9791,-2030.841 721.3989,-2105.2417 729.3586,-2114.5795 740.9179,-2120.4423 752.5698,-2124.119"/>
<polygon fill="#0000ff" stroke="#0000ff" points="751.7375,-2127.5193 762.3022,-2126.7216 753.5459,-2120.757 751.7375,-2127.5193"/>
</g>
<!-- sourcefile~dataruntimelanguage.f90&#45;&gt;sourcefile~runtimelanguageprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge26" class="edge">
<title>sourcefile~dataruntimelanguage.f90&#45;&gt;sourcefile~runtimelanguageprocessor.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1310.6583,-1673.2417C1387.5097,-1673.2417 1408.8963,-1655.0929 1483.574,-1673.2417"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M622.2691,-1776.0776C645.7934,-1764.1137 685.2987,-1745.4678 721.3989,-1735.2417 864.6016,-1694.6765 915.8783,-1745.5354 1052.825,-1687.2417 1071.4754,-1679.3028 1069.6523,-1665.82 1088.825,-1659.2417 1136.8185,-1642.7747 1152.3558,-1655.9636 1202.9897,-1659.2417 1251.1445,-1662.3593 1262.4028,-1673.2417 1310.6583,-1673.2417"/>
</g>
<!-- sourcefile~datazonecontrols.f90&#45;&gt;sourcefile~emsmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge109" class="edge">
<title>sourcefile~datazonecontrols.f90&#45;&gt;sourcefile~emsmanager.f90</title>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M456.4299,-182.248C651.1768,-162.5226 1286.0262,-103.543 1483.574,-151.2417"/>
</g>
<!-- sourcefile~dataairloop.f90&#45;&gt;sourcefile~emsmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge110" class="edge">
<title>sourcefile~dataairloop.f90&#45;&gt;sourcefile~emsmanager.f90</title>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M443.0536,-1864.9099C527.3205,-1863.3495 716.8435,-1855.3592 870.5706,-1816.2417 887.3686,-1811.9672 889.9708,-1806.231 906.5706,-1801.2417 938.2613,-1791.7166 947.1487,-1793.2073 979.6978,-1787.2417"/>
</g>
<!-- sourcefile~dataheatbalance.f90&#45;&gt;sourcefile~emsmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge112" class="edge">
<title>sourcefile~dataheatbalance.f90&#45;&gt;sourcefile~emsmanager.f90</title>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M2109.8602,-2097.2417C2139.9011,-2102.0587 2173.7725,-2097.0066 2200.0674,-2090.7765"/>
<polygon fill="#ffff00" stroke="#ffff00" points="2201.2656,-2094.0843 2210.1116,-2088.2535 2199.5602,-2087.2952 2201.2656,-2094.0843"/>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M1310.6583,-814.2417C1340.1966,-828.8497 1351.8909,-820.6102 1382.3269,-833.2417 1430.4303,-853.2055 1443.7385,-858.6914 1483.574,-892.2417"/>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M1665.8309,-1332.2417C1771.3266,-1477.8175 1709.5004,-1577.6399 1846.3422,-1694.2417"/>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M1983.6563,-1793.2417C2031.003,-1838.3909 2013.7658,-2029.557 2057.469,-2078.2417 2074.0149,-2096.6735 2085.4037,-2093.3201 2109.8602,-2097.2417"/>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M1188.08,-769.248C1222.1082,-778.9073 1270.7164,-794.4886 1310.6583,-814.2417"/>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M1846.3422,-1694.2417C1871.036,-1715.2831 1883.273,-1711.6262 1909.8435,-1730.2417 1945.167,-1754.9896 1952.4429,-1763.477 1983.6563,-1793.2417"/>
<path fill="none" stroke="#ffff00" stroke-dasharray="5,2" d="M1483.574,-892.2417C1514.1709,-918.0111 1527.723,-920.2548 1548.821,-954.2417 1641.5745,-1103.6581 1562.6339,-1189.8379 1665.8309,-1332.2417"/>
</g>
<!-- sourcefile~dataheatbalance.f90&#45;&gt;sourcefile~runtimelanguageprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge28" class="edge">
<title>sourcefile~dataheatbalance.f90&#45;&gt;sourcefile~runtimelanguageprocessor.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1483.574,-968.2417C1498.0428,-980.0056 1633.1556,-1554.6201 1660.8753,-1673.0372"/>
<polygon fill="#ff0000" stroke="#ff0000" points="1657.529,-1674.0988 1663.2149,-1683.0386 1664.345,-1672.5042 1657.529,-1674.0988"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1310.6583,-814.2417C1340.1966,-828.8497 1356.8261,-812.3703 1382.3269,-833.2417 1410.3211,-856.1538 1396.8823,-877.108 1418.3269,-906.2417 1442.0407,-938.458 1452.5355,-943.0058 1483.574,-968.2417"/>
</g>
<!-- sourcefile~dataheatbalance.f90&#45;&gt;sourcefile~outputprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge62" class="edge">
<title>sourcefile~dataheatbalance.f90&#45;&gt;sourcefile~outputprocessor.f90</title>
<path fill="none" stroke="#ffbf00" stroke-dasharray="5,2" d="M1154.8819,-769.3522C1171.4716,-789.8852 1208.0664,-835.1546 1238.9897,-873.2417 1302.5771,-951.5599 1327.8758,-964.3172 1382.3269,-1049.2417 1423.4178,-1113.3291 1459.5637,-1196.4845 1475.2621,-1234.5599"/>
<polygon fill="#ffbf00" stroke="#ffbf00" points="1472.116,-1236.1139 1479.1347,-1244.0504 1478.5971,-1233.4692 1472.116,-1236.1139"/>
</g>
<!-- sourcefile~dataheatbalance.f90&#45;&gt;sourcefile~sqlitefortranroutines.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge44" class="edge">
<title>sourcefile~dataheatbalance.f90&#45;&gt;sourcefile~sqlitefortranroutines.f90</title>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M1178.5234,-769.3108C1186.9495,-773.0074 1195.6936,-777.644 1202.9897,-783.2417 1223.3106,-798.8321 1218.0826,-813.4467 1238.9897,-828.2417 1244.4824,-832.1286 1250.6353,-835.4596 1256.9665,-838.3017"/>
<polygon fill="#00ffff" stroke="#00ffff" points="1255.7331,-841.5786 1266.3139,-842.1239 1258.3825,-835.0993 1255.7331,-841.5786"/>
</g>
<!-- sourcefile~datasystemvariables.f90&#45;&gt;sourcefile~curvemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge145" class="edge">
<title>sourcefile~datasystemvariables.f90&#45;&gt;sourcefile~curvemanager.f90</title>
<path fill="none" stroke="#00ff7f" stroke-dasharray="5,2" d="M402.3722,-1075.3686C415.2129,-1119.3777 462.1889,-1285.7339 480.9653,-1426.2417 493.2215,-1517.9573 478.7623,-2173.9653 516.9653,-2258.2417 559.7208,-2352.5608 633.3631,-2329.7074 685.3989,-2419.2417 718.5476,-2476.2782 696.2566,-2502.251 721.3989,-2563.2417 752.0539,-2637.6049 842.8662,-2825.1361 906.5706,-2874.2417 910.9513,-2877.6185 915.8555,-2880.4525 920.9948,-2882.8309"/>
<polygon fill="#00ff7f" stroke="#00ff7f" points="919.8536,-2886.1446 930.4369,-2886.6388 922.4718,-2879.6526 919.8536,-2886.1446"/>
</g>
<!-- sourcefile~datasystemvariables.f90&#45;&gt;sourcefile~schedulemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge171" class="edge">
<title>sourcefile~datasystemvariables.f90&#45;&gt;sourcefile~schedulemanager.f90</title>
<path fill="none" stroke="#003fff" stroke-dasharray="5,2" d="M601.1821,-1025.2417C658.3303,-1014.1537 666.9123,-1056.7463 721.3989,-1077.2417 786.586,-1101.7621 808.6556,-1093.3491 870.5706,-1125.2417 975.8391,-1179.4658 1083.5646,-1273.0116 1126.5184,-1312.175"/>
<polygon fill="#003fff" stroke="#003fff" points="1124.2655,-1314.858 1133.9983,-1319.0443 1129.0004,-1309.7024 1124.2655,-1314.858"/>
</g>
<!-- sourcefile~datasystemvariables.f90&#45;&gt;sourcefile~inputprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge235" class="edge">
<title>sourcefile~datasystemvariables.f90&#45;&gt;sourcefile~inputprocessor.f90</title>
<path fill="none" stroke="#ff003f" stroke-dasharray="5,2" d="M402.5648,-1075.4707C415.3188,-1117.0902 459.8472,-1266.6756 480.9653,-1393.2417 511.3622,-1575.4175 485.5551,-1625.2378 516.9653,-1807.2417 536.9816,-1923.2245 578.2445,-2058.475 594.4436,-2109.421"/>
<polygon fill="#ff003f" stroke="#ff003f" points="591.2028,-2110.7772 597.5864,-2119.233 597.8692,-2108.6419 591.2028,-2110.7772"/>
</g>
<!-- sourcefile~datasystemvariables.f90&#45;&gt;sourcefile~runtimelanguageprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge25" class="edge">
<title>sourcefile~datasystemvariables.f90&#45;&gt;sourcefile~runtimelanguageprocessor.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M601.1821,-1025.2417C912.4541,-968.8503 1001.6777,-900.4097 1310.6583,-968.2417"/>
</g>
<!-- sourcefile~datasystemvariables.f90&#45;&gt;sourcefile~outputprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge56" class="edge">
<title>sourcefile~datasystemvariables.f90&#45;&gt;sourcefile~outputprocessor.f90</title>
<path fill="none" stroke="#ffbf00" stroke-dasharray="5,2" d="M1145.9073,-1255.2417C1241.181,-1259.057 1351.6969,-1258.0242 1419.6272,-1256.7636"/>
<polygon fill="#ffbf00" stroke="#ffbf00" points="1419.8137,-1260.2608 1429.7443,-1256.5683 1419.6785,-1253.2621 1419.8137,-1260.2608"/>
<path fill="none" stroke="#ffbf00" stroke-dasharray="5,2" d="M979.6978,-1101.2417C1012.341,-1120.1087 1024.0429,-1119.8872 1052.825,-1144.2417 1101.9742,-1185.8302 1081.6014,-1252.0799 1145.9073,-1255.2417"/>
<path fill="none" stroke="#ffbf00" stroke-dasharray="5,2" d="M601.1821,-1025.2417C769.9822,-994.4436 831.1396,-1015.3787 979.6978,-1101.2417"/>
</g>
<!-- sourcefile~datasystemvariables.f90&#45;&gt;sourcefile~sqlitefortranroutines.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge45" class="edge">
<title>sourcefile~datasystemvariables.f90&#45;&gt;sourcefile~sqlitefortranroutines.f90</title>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M456.5841,-1053.1775C497.0302,-1045.3871 552.4214,-1034.7023 601.1821,-1025.2417"/>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M1145.9073,-797.2417C1152.2378,-798.2882 1222.7431,-822.6154 1269.4454,-838.8582"/>
<polygon fill="#00ffff" stroke="#00ffff" points="1268.4234,-842.2084 1279.0182,-842.1902 1270.7246,-835.5974 1268.4234,-842.2084"/>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M601.1821,-1025.2417C666.704,-1012.529 663.3469,-968.1763 721.3989,-935.2417 893.953,-837.3468 950.1745,-764.8852 1145.9073,-797.2417"/>
</g>
<!-- sourcefile~datastringglobals.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_node35" class="node">
<title>sourcefile~datastringglobals.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~EfferentGraph_node35"><a xlink:href="../sourcefile/datastringglobals.f90.html" xlink:title="DataStringGlobals.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="281.0645,-1094.2471 166.6166,-1094.2471 166.6166,-1072.2362 281.0645,-1072.2362 281.0645,-1094.2471"/>
<text text-anchor="middle" x="223.8406" y="-1080.0917" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">DataStringGlobals.f90</text>
</a>
</g>
</g>
<!-- sourcefile~datastringglobals.f90&#45;&gt;sourcefile~schedulemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge166" class="edge">
<title>sourcefile~datastringglobals.f90&#45;&gt;sourcefile~schedulemanager.f90</title>
<path fill="none" stroke="#003fff" stroke-dasharray="5,2" d="M281.0823,-1092.7301C333.224,-1101.4461 412.3302,-1114.8521 480.9653,-1127.2417 654.4156,-1158.5519 728.7573,-1096.5787 870.5706,-1201.2417 898.0848,-1221.5481 879.6975,-1248.0941 906.5706,-1269.2417 955.7736,-1307.9616 1026.7109,-1322.3568 1078.5821,-1327.579"/>
<polygon fill="#003fff" stroke="#003fff" points="1078.4123,-1331.078 1088.6901,-1328.5056 1079.0514,-1324.1072 1078.4123,-1331.078"/>
</g>
<!-- sourcefile~datastringglobals.f90&#45;&gt;sourcefile~general.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge181" class="edge">
<title>sourcefile~datastringglobals.f90&#45;&gt;sourcefile~general.f90</title>
<path fill="none" stroke="#0000ff" stroke-dasharray="5,2" d="M240.1301,-1094.435C282.7117,-1124.1567 399.6604,-1208.7849 480.9653,-1296.2417 587.5959,-1410.9403 632.5972,-1435.8042 685.3989,-1583.2417 724.6024,-1692.709 650.2814,-2013.251 721.3989,-2105.2417 729.0341,-2115.1178 740.7258,-2121.1285 752.6037,-2124.775"/>
<polygon fill="#0000ff" stroke="#0000ff" points="751.9848,-2128.2292 762.5401,-2127.315 753.7184,-2121.4473 751.9848,-2128.2292"/>
</g>
<!-- sourcefile~datastringglobals.f90&#45;&gt;sourcefile~inputprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge234" class="edge">
<title>sourcefile~datastringglobals.f90&#45;&gt;sourcefile~inputprocessor.f90</title>
<path fill="none" stroke="#ff003f" stroke-dasharray="5,2" d="M233.4806,-1094.3354C276.5932,-1144.1946 450.9215,-1348.491 480.9653,-1426.2417 542.2714,-1584.8965 487.4134,-1639.7411 516.9653,-1807.2417 537.4147,-1923.149 578.4235,-2058.4438 594.4991,-2109.4114"/>
<polygon fill="#ff003f" stroke="#ff003f" points="591.254,-2110.7564 597.6171,-2119.2276 597.9255,-2108.6373 591.254,-2110.7564"/>
</g>
<!-- sourcefile~datastringglobals.f90&#45;&gt;sourcefile~outputprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge50" class="edge">
<title>sourcefile~datastringglobals.f90&#45;&gt;sourcefile~outputprocessor.f90</title>
<path fill="none" stroke="#ffbf00" stroke-dasharray="5,2" d="M246.3281,-1072.107C264.9152,-1063.3324 292.2151,-1051.419 317.2024,-1044.2417 403.692,-1019.3987 427.3362,-1019.2575 516.9653,-1011.2417 607.4733,-1003.1473 630.5322,-1008.9084 721.3989,-1008.2417 852.9111,-1007.2768 1197.33,-996.5103 1310.6583,-1063.2417"/>
</g>
<!-- sourcefile~datastringglobals.f90&#45;&gt;sourcefile~datasystemvariables.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge16" class="edge">
<title>sourcefile~datastringglobals.f90&#45;&gt;sourcefile~datasystemvariables.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M281.2218,-1077.0204C294.877,-1075.5399 309.649,-1073.9383 323.9664,-1072.386"/>
<polygon fill="#ff0000" stroke="#ff0000" points="324.7243,-1075.8244 334.2888,-1071.2668 323.9697,-1068.8652 324.7243,-1075.8244"/>
</g>
<!-- sourcefile~datastringglobals.f90&#45;&gt;sourcefile~sqlitefortranroutines.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge36" class="edge">
<title>sourcefile~datastringglobals.f90&#45;&gt;sourcefile~sqlitefortranroutines.f90</title>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M1145.9073,-493.2417C1202.8596,-545.4555 1186.1484,-771.8711 1238.9897,-828.2417 1242.3074,-831.7809 1246.1528,-834.8192 1250.3057,-837.4275"/>
<polygon fill="#00ffff" stroke="#00ffff" points="1248.7254,-840.5515 1259.1912,-842.2 1252.0377,-834.3848 1248.7254,-840.5515"/>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M225.7495,-1071.9629C233.5065,-1025.8514 263.1114,-847.1072 281.2024,-699.2417 286.3126,-657.4737 287.0283,-351.5709 317.2024,-322.2417 362.5557,-278.1583 537.9344,-303.2417 601.1821,-303.2417 601.1821,-303.2417 601.1821,-303.2417 795.9847,-303.2417 913.8446,-303.2417 954.8379,-303.7476 1052.825,-369.2417 1110.1165,-407.5351 1095.1128,-446.6732 1145.9073,-493.2417"/>
</g>
<!-- sourcefile~sortandstringutilities.f90&#45;&gt;sourcefile~inputprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge228" class="edge">
<title>sourcefile~sortandstringutilities.f90&#45;&gt;sourcefile~inputprocessor.f90</title>
<path fill="none" stroke="#ff003f" stroke-dasharray="5,2" d="M424.6359,-1457.2523C443.5025,-1466.8056 468.057,-1482.5292 480.9653,-1504.2417 550.2673,-1620.8108 491.7989,-1673.9834 516.9653,-1807.2417 538.8069,-1922.8947 578.9989,-2058.3387 594.6775,-2109.3788"/>
<polygon fill="#ff003f" stroke="#ff003f" points="591.419,-2110.689 597.7159,-2119.2096 598.1069,-2108.622 591.419,-2110.689"/>
</g>
<!-- sourcefile~sortandstringutilities.f90&#45;&gt;sourcefile~outputprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge51" class="edge">
<title>sourcefile~sortandstringutilities.f90&#45;&gt;sourcefile~outputprocessor.f90</title>
<path fill="none" stroke="#ffbf00" stroke-dasharray="5,2" d="M463.5009,-1440.0568C559.1577,-1428.3339 741.342,-1396.0502 870.5706,-1312.2417 891.4825,-1298.6797 885.084,-1281.8734 906.5706,-1269.2417 935.0973,-1252.4711 946.9741,-1260.16 979.6978,-1255.2417"/>
</g>
<!-- sourcefile~dataoutputs.f90&#45;&gt;sourcefile~inputprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge229" class="edge">
<title>sourcefile~dataoutputs.f90&#45;&gt;sourcefile~inputprocessor.f90</title>
<path fill="none" stroke="#ff003f" stroke-dasharray="5,2" d="M402.7642,-1535.2773C426.8451,-1607.4848 561.9434,-2012.5827 594.2444,-2109.4385"/>
<polygon fill="#ff003f" stroke="#ff003f" points="590.9484,-2110.6187 597.4323,-2118.9978 597.5888,-2108.4041 590.9484,-2110.6187"/>
</g>
<!-- sourcefile~dataoutputs.f90&#45;&gt;sourcefile~outputprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge53" class="edge">
<title>sourcefile~dataoutputs.f90&#45;&gt;sourcefile~outputprocessor.f90</title>
<path fill="none" stroke="#ffbf00" stroke-dasharray="5,2" d="M433.1096,-1513.1218C486.8357,-1495.4987 594.5538,-1459.9017 685.3989,-1428.2417 768.0439,-1399.4394 788.5789,-1391.8542 870.5706,-1361.2417 931.9927,-1338.3091 1080.4229,-1252.022 1145.9073,-1255.2417"/>
</g>
<!-- sourcefile~sqlitefortranroutines.f90&#45;&gt;sourcefile~reportsizingmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge118" class="edge">
<title>sourcefile~sqlitefortranroutines.f90&#45;&gt;sourcefile~reportsizingmanager.f90</title>
<path fill="none" stroke="#7fff00" stroke-dasharray="5,2" d="M1363.6926,-842.1176C1370.7503,-838.6698 1377.2784,-834.1545 1382.3269,-828.2417 1454.1662,-744.1024 1477.6991,-379.4965 1482.5512,-287.4224"/>
<polygon fill="#7fff00" stroke="#7fff00" points="1486.0502,-287.5288 1483.0629,-277.3638 1479.0592,-287.173 1486.0502,-287.5288"/>
</g>
<!-- sourcefile~sqlitefortranroutines.f90&#45;&gt;sourcefile~outputprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge58" class="edge">
<title>sourcefile~sqlitefortranroutines.f90&#45;&gt;sourcefile~outputprocessor.f90</title>
<path fill="none" stroke="#ffbf00" stroke-dasharray="5,2" d="M1328.2263,-864.3952C1344.5166,-875.61 1368.2925,-894.3439 1382.3269,-916.2417 1450.698,-1022.9206 1474.6237,-1177.7974 1481.3376,-1233.9248"/>
<polygon fill="#ffbf00" stroke="#ffbf00" points="1477.8837,-1234.5296 1482.4891,-1244.0711 1484.839,-1233.7402 1477.8837,-1234.5296"/>
</g>
<!-- sourcefile~dataglobalconstants.f90&#45;&gt;sourcefile~outputprocessor.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge59" class="edge">
<title>sourcefile~dataglobalconstants.f90&#45;&gt;sourcefile~outputprocessor.f90</title>
<path fill="none" stroke="#ffbf00" stroke-dasharray="5,2" d="M844.1042,-1281.1909C881.031,-1273.0417 933.3676,-1262.205 979.6978,-1255.2417"/>
<path fill="none" stroke="#ffbf00" stroke-dasharray="5,2" d="M979.6978,-1255.2417C1052.7482,-1244.2623 1072.0956,-1252.2858 1145.9073,-1255.2417"/>
</g>
<!-- sourcefile~dataroomair.f90&#45;&gt;sourcefile~sqlitefortranroutines.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge39" class="edge">
<title>sourcefile~dataroomair.f90&#45;&gt;sourcefile~sqlitefortranroutines.f90</title>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M445.435,-336.9282C574.1932,-324.8833 940.2428,-309.4743 1145.9073,-493.2417"/>
</g>
<!-- sourcefile~datavectortypes.f90&#45;&gt;sourcefile~datasurfaces.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge73" class="edge">
<title>sourcefile~datavectortypes.f90&#45;&gt;sourcefile~datasurfaces.f90</title>
<path fill="none" stroke="#00ff3f" stroke-dasharray="5,2" d="M399.0839,-419.2417C509.0983,-416.5738 573.9932,-568.9143 594.2673,-625.4688"/>
<polygon fill="#00ff3f" stroke="#00ff3f" points="591.041,-626.8471 597.6314,-635.1427 597.6526,-624.5479 591.041,-626.8471"/>
</g>
<!-- sourcefile~datavectortypes.f90&#45;&gt;sourcefile~dataheatbalance.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge92" class="edge">
<title>sourcefile~datavectortypes.f90&#45;&gt;sourcefile~dataheatbalance.f90</title>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M233.1919,-517.1993C257.4524,-489.8475 325.6555,-421.0224 399.0839,-419.2417"/>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M399.0839,-419.2417C554.5742,-415.471 921.3876,-586.0811 1052.825,-669.2417 1083.7405,-688.802 1113.1626,-719.7168 1130.3706,-739.4804"/>
<polygon fill="#ff00bf" stroke="#ff00bf" points="1127.8102,-741.8718 1136.9664,-747.2023 1133.1328,-737.3253 1127.8102,-741.8718"/>
</g>
<!-- sourcefile~datavectortypes.f90&#45;&gt;sourcefile~databsdfwindow.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge70" class="edge">
<title>sourcefile~datavectortypes.f90&#45;&gt;sourcefile~databsdfwindow.f90</title>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M278.8078,-528.2417C295.1003,-528.2417 313.1505,-528.2417 330.2066,-528.2417"/>
<polygon fill="#00ffff" stroke="#00ffff" points="330.6733,-531.7418 340.6733,-528.2417 330.6733,-524.7418 330.6733,-531.7418"/>
</g>
<!-- sourcefile~databsdfwindow.f90&#45;&gt;sourcefile~datasurfaces.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge74" class="edge">
<title>sourcefile~databsdfwindow.f90&#45;&gt;sourcefile~datasurfaces.f90</title>
<path fill="none" stroke="#00ff3f" stroke-dasharray="5,2" d="M445.7129,-539.2963C457.5486,-542.9529 470.008,-547.5736 480.9653,-553.2417 520.4166,-573.6494 559.9625,-607.428 582.4218,-628.1708"/>
<polygon fill="#00ff3f" stroke="#00ff3f" points="580.2024,-630.8876 589.8914,-635.1741 584.9902,-625.7811 580.2024,-630.8876"/>
</g>
<!-- sourcefile~databsdfwindow.f90&#45;&gt;sourcefile~dataheatbalance.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge87" class="edge">
<title>sourcefile~databsdfwindow.f90&#45;&gt;sourcefile~dataheatbalance.f90</title>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M979.6978,-683.2417C1012.724,-692.1502 1021.4421,-693.6325 1052.825,-707.2417 1075.9645,-717.2762 1100.9696,-731.1598 1119.2304,-741.908"/>
<polygon fill="#ff00bf" stroke="#ff00bf" points="1117.4845,-744.9419 1127.8668,-747.0535 1121.0674,-738.9283 1117.4845,-744.9419"/>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M440.6418,-539.2568C535.9741,-564.5422 777.7323,-628.7636 979.6978,-683.2417"/>
</g>
<!-- sourcefile~datacomplexfenestration.f90&#45;&gt;sourcefile~dataheatbalance.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge93" class="edge">
<title>sourcefile~datacomplexfenestration.f90&#45;&gt;sourcefile~dataheatbalance.f90</title>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M475.2604,-680.1678C513.2734,-678.9209 559.8489,-679.3362 601.1821,-685.2417"/>
</g>
<!-- sourcefile~dataequivalentlayerwindow.f90&#45;&gt;sourcefile~dataheatbalance.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge97" class="edge">
<title>sourcefile~dataequivalentlayerwindow.f90&#45;&gt;sourcefile~dataheatbalance.f90</title>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M445.7768,-655.3247C486.5667,-664.6194 547.4885,-677.5702 601.1821,-685.2417"/>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M601.1821,-685.2417C688.342,-697.6947 708.4364,-730.5799 795.9847,-721.2417"/>
</g>
<!-- sourcefile~datacontaminantbalance.f90&#45;&gt;sourcefile~outairnodemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge131" class="edge">
<title>sourcefile~datacontaminantbalance.f90&#45;&gt;sourcefile~outairnodemanager.f90</title>
<path fill="none" stroke="#00ff3f" stroke-dasharray="5,2" d="M1145.9073,-2435.2417C1339.1353,-2411.2883 1381.0491,-2362.0515 1548.821,-2263.2417 1566.2868,-2252.9552 1566.7909,-2244.5034 1584.821,-2235.2417 1618.2231,-2218.0837 1628.2924,-2210.264 1665.8309,-2211.2417"/>
<path fill="none" stroke="#00ff3f" stroke-dasharray="5,2" d="M870.678,-2439.5539C941.7223,-2443.4037 1051.4687,-2446.2223 1145.9073,-2435.2417"/>
</g>
<!-- sourcefile~datacontaminantbalance.f90&#45;&gt;sourcefile~nodeinputmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge214" class="edge">
<title>sourcefile~datacontaminantbalance.f90&#45;&gt;sourcefile~nodeinputmanager.f90</title>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M1145.9073,-2435.2417C1220.4817,-2425.9971 1235.5223,-2472.0687 1310.6583,-2473.2417"/>
</g>
<!-- sourcefile~databranchnodeconnections.f90&#45;&gt;sourcefile~branchnodeconnections.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge162" class="edge">
<title>sourcefile~databranchnodeconnections.f90&#45;&gt;sourcefile~branchnodeconnections.f90</title>
<path fill="none" stroke="#007fff" stroke-dasharray="5,2" d="M685.8085,-2655.591C720.2905,-2654.7104 760.3483,-2656.0401 795.9847,-2663.2417"/>
</g>
<!-- sourcefile~branchinputmanager.f90&#45;&gt;sourcefile~dataplant.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge199" class="edge">
<title>sourcefile~branchinputmanager.f90&#45;&gt;sourcefile~dataplant.f90</title>
<path fill="none" stroke="#3f00ff" stroke-dasharray="5,2" d="M1886.4282,-2923.1484C1901.8991,-2918.867 1919.7258,-2913.9337 1935.8555,-2909.47"/>
<polygon fill="#3f00ff" stroke="#3f00ff" points="1936.9388,-2912.8018 1945.6431,-2906.7614 1935.0718,-2906.0554 1936.9388,-2912.8018"/>
</g>
<!-- sourcefile~dataerrortracking.f90&#45;&gt;sourcefile~nodeinputmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge215" class="edge">
<title>sourcefile~dataerrortracking.f90&#45;&gt;sourcefile~nodeinputmanager.f90</title>
<path fill="none" stroke="#ff00bf" stroke-dasharray="5,2" d="M1486.1504,-3186.9892C1505.9968,-3100.3107 1634.5019,-2539.0699 1661.0405,-2423.1639"/>
<polygon fill="#ff00bf" stroke="#ff00bf" points="1664.4631,-2423.8972 1663.2833,-2413.3683 1657.6396,-2422.3348 1664.4631,-2423.8972"/>
</g>
<!-- sourcefile~dataerrortracking.f90&#45;&gt;sourcefile~branchinputmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~EfferentGraph_edge189" class="edge">
<title>sourcefile~dataerrortracking.f90&#45;&gt;sourcefile~branchinputmanager.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1522.3503,-3209.3245C1561.6015,-3218.1518 1622.523,-3225.068 1665.8309,-3198.2417"/>
</g>
</g>
</svg>
</div>
                <script>var pansourcefileplantchillersf90EfferentGraph = svgPanZoom('#sourcefileplantchillersf90EfferentGraph', {
                    zoomEnabled: true,
                    controlIconsEnabled: true,
                    fit: true,
                    center: true,});
                    </script>
                <div><a type="button" class="graph-help" data-toggle="modal" href="#graph-help-text">Help</a></div>
                <div class="modal fade" id="graph-help-text" tabindex="-1" role="dialog">
                  <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="-graph-help-label">Graph Key</h4>
                      </div>
                      <div class="modal-body">

    <p>Nodes of different colours represent the following: </p>
    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: Graph Key Pages: 1 -->
<svg width="186pt" height="31pt"
 viewBox="0.00 0.00 186.41 30.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 26.5)">
<title>Graph Key</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-26.5 182.4064,-26.5 182.4064,4 -4,4"/>
<!-- Source File -->
<g id="node1" class="node">
<title>Source File</title>
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="65.1576,-22.2554 -.0526,-22.2554 -.0526,-.2446 65.1576,-.2446 65.1576,-22.2554"/>
<text text-anchor="middle" x="32.5525" y="-8.1" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">Source File</text>
</g>
<!-- This Page&#39;s Entity -->
<g id="node2" class="node">
<title>This Page&#39;s Entity</title>
<polygon fill="none" stroke="#000000" points="178.2607,-22.2554 82.8443,-22.2554 82.8443,-.2446 178.2607,-.2446 178.2607,-22.2554"/>
<text text-anchor="middle" x="130.5525" y="-8.1" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#000000">This Page&#39;s Entity</text>
</g>
</g>
</svg>


    <p>Solid arrows point from a file to a file which depends upon it. A file
    is dependent upon another if the latter must be compiled before the former
    can be. Where possible, edges connecting nodes are given different colours to make them easier to distinguish in large graphs.
    </p>

                      </div>
                    </div>
                  </div>
                </div>


      <h3>Files Dependent On This One</h3>

                <div class="depgraph"><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: sourcefile~~plantchillers.f90~~AfferentGraph Pages: 1 -->
<svg id="sourcefileplantchillersf90AfferentGraph" width="641pt" height="66pt"
 viewBox="0.00 0.00 641.00 66.20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="sourcefile~~plantchillers.f90~~AfferentGraph" class="graph" transform="scale(.3908 .3908) rotate(0) translate(4 165.422)">
<title>sourcefile~~plantchillers.f90~~AfferentGraph</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-165.422 1636.3882,-165.422 1636.3882,4 -4,4"/>
<!-- sourcefile~plantchillers.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_node1" class="node">
<title>sourcefile~plantchillers.f90</title>
<polygon fill="none" stroke="#000000" points="88.6809,-30.0054 -.2277,-30.0054 -.2277,-7.9946 88.6809,-7.9946 88.6809,-30.0054"/>
<text text-anchor="middle" x="44.2266" y="-15.85" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#000000">PlantChillers.f90</text>
</g>
<!-- sourcefile~plantloopequipment.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_node2" class="node">
<title>sourcefile~plantloopequipment.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~AfferentGraph_node2"><a xlink:href="../sourcefile/plantloopequipment.f90.html" xlink:title="PlantLoopEquipment.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="251.4572,-70.0054 124.4518,-70.0054 124.4518,-47.9946 251.4572,-47.9946 251.4572,-70.0054"/>
<text text-anchor="middle" x="187.9545" y="-55.85" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">PlantLoopEquipment.f90</text>
</a>
</g>
</g>
<!-- sourcefile~plantchillers.f90&#45;&gt;sourcefile~plantloopequipment.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_edge20" class="edge">
<title>sourcefile~plantchillers.f90&#45;&gt;sourcefile~plantloopequipment.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M83.8813,-30.0361C100.7072,-34.7188 120.5034,-40.2281 138.2883,-45.1777"/>
<polygon fill="#ff0000" stroke="#ff0000" points="137.3579,-48.5517 147.9302,-47.8611 139.2347,-41.808 137.3579,-48.5517"/>
</g>
<!-- sourcefile~costestimatemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_node3" class="node">
<title>sourcefile~costestimatemanager.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~AfferentGraph_node3"><a xlink:href="../sourcefile/costestimatemanager.f90.html" xlink:title="CostEstimateManager.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="1209.293,-88.0054 1076.6594,-88.0054 1076.6594,-65.9946 1209.293,-65.9946 1209.293,-88.0054"/>
<text text-anchor="middle" x="1142.9762" y="-73.85" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">CostEstimateManager.f90</text>
</a>
</g>
</g>
<!-- sourcefile~plantchillers.f90&#45;&gt;sourcefile~costestimatemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_edge21" class="edge">
<title>sourcefile~plantchillers.f90&#45;&gt;sourcefile~costestimatemanager.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M88.584,-14.3764C146.4599,-8.7523 250.9122,0 340.452,0 340.452,0 340.452,0 766.2089,0 890.2942,0 1032.7966,-40.5863 1101.5692,-62.8266"/>
<polygon fill="#ff0000" stroke="#ff0000" points="1100.5774,-66.1846 1111.17,-65.9678 1102.7542,-59.5316 1100.5774,-66.1846"/>
</g>
<!-- sourcefile~plantmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_node4" class="node">
<title>sourcefile~plantmanager.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~AfferentGraph_node4"><a xlink:href="../sourcefile/plantmanager.f90.html" xlink:title="PlantManager.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="523.9186,-109.0054 429.2911,-109.0054 429.2911,-86.9946 523.9186,-86.9946 523.9186,-109.0054"/>
<text text-anchor="middle" x="476.6049" y="-94.85" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">PlantManager.f90</text>
</a>
</g>
</g>
<!-- sourcefile~plantloopequipment.f90&#45;&gt;sourcefile~plantmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_edge16" class="edge">
<title>sourcefile~plantloopequipment.f90&#45;&gt;sourcefile~plantmanager.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M251.6682,-62.5201C292.4047,-65.3544 346.2603,-70.1856 393.4482,-78 403.9944,-79.7465 415.1854,-82.0923 425.8245,-84.5624"/>
<polygon fill="#ff0000" stroke="#ff0000" points="425.2768,-88.03 435.8167,-86.9531 426.9057,-81.2222 425.2768,-88.03"/>
</g>
<!-- sourcefile~plantloopsolver.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_node5" class="node">
<title>sourcefile~plantloopsolver.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~AfferentGraph_node5"><a xlink:href="../sourcefile/plantloopsolver.f90.html" xlink:title="PlantLoopSolver.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="393.4445,-109.0054 287.4596,-109.0054 287.4596,-86.9946 393.4445,-86.9946 393.4445,-109.0054"/>
<text text-anchor="middle" x="340.452" y="-94.85" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">PlantLoopSolver.f90</text>
</a>
</g>
</g>
<!-- sourcefile~plantloopequipment.f90&#45;&gt;sourcefile~plantloopsolver.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_edge17" class="edge">
<title>sourcefile~plantloopequipment.f90&#45;&gt;sourcefile~plantloopsolver.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M231.2462,-70.0715C248.787,-74.5574 269.2093,-79.7802 287.6157,-84.4875"/>
<polygon fill="#ff0000" stroke="#ff0000" points="286.7607,-87.8815 297.3161,-86.9683 288.4952,-81.0997 286.7607,-87.8815"/>
</g>
<!-- sourcefile~simulationmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_node6" class="node">
<title>sourcefile~simulationmanager.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~AfferentGraph_node6"><a xlink:href="../sourcefile/simulationmanager.f90.html" xlink:title="SimulationManager.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="1499.9708,-117.0054 1380.1603,-117.0054 1380.1603,-94.9946 1499.9708,-94.9946 1499.9708,-117.0054"/>
<text text-anchor="middle" x="1440.0656" y="-102.85" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">SimulationManager.f90</text>
</a>
</g>
</g>
<!-- sourcefile~costestimatemanager.f90&#45;&gt;sourcefile~simulationmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_edge19" class="edge">
<title>sourcefile~costestimatemanager.f90&#45;&gt;sourcefile~simulationmanager.f90</title>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M1209.6631,-83.1222C1248.8922,-86.7659 1299.4576,-91.5357 1344.3633,-96 1352.727,-96.8315 1361.4997,-97.7224 1370.1977,-98.6172"/>
<polygon fill="#00ffff" stroke="#00ffff" points="1370.038,-102.1193 1380.3449,-99.6662 1370.7579,-95.1564 1370.038,-102.1193"/>
</g>
<!-- sourcefile~sizingmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_node13" class="node">
<title>sourcefile~sizingmanager.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~AfferentGraph_node13"><a xlink:href="../sourcefile/sizingmanager.f90.html" xlink:title="SizingManager.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="1344.3527,-127.0054 1245.3951,-127.0054 1245.3951,-104.9946 1344.3527,-104.9946 1344.3527,-127.0054"/>
<text text-anchor="middle" x="1294.8739" y="-112.85" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">SizingManager.f90</text>
</a>
</g>
</g>
<!-- sourcefile~costestimatemanager.f90&#45;&gt;sourcefile~sizingmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_edge18" class="edge">
<title>sourcefile~costestimatemanager.f90&#45;&gt;sourcefile~sizingmanager.f90</title>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M1186.0977,-88.0715C1203.489,-92.5368 1223.724,-97.7321 1241.9918,-102.4224"/>
<polygon fill="#00ffff" stroke="#00ffff" points="1241.3514,-105.8715 1251.9077,-104.9683 1243.0923,-99.0914 1241.3514,-105.8715"/>
</g>
<!-- sourcefile~plantmanager.f90&#45;&gt;sourcefile~simulationmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_edge12" class="edge">
<title>sourcefile~plantmanager.f90&#45;&gt;sourcefile~simulationmanager.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M494.6848,-109.0394C511.0497,-118.4502 536.1388,-131.4607 559.7615,-138 648.5639,-162.5827 674.2424,-151.3126 766.2089,-157"/>
</g>
<!-- sourcefile~utilityroutines.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_node7" class="node">
<title>sourcefile~utilityroutines.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~AfferentGraph_node7"><a xlink:href="../sourcefile/utilityroutines.f90.html" xlink:title="UtilityRoutines.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="1632.1991,-67.0054 1535.9569,-67.0054 1535.9569,-44.9946 1632.1991,-44.9946 1632.1991,-67.0054"/>
<text text-anchor="middle" x="1584.078" y="-52.85" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">UtilityRoutines.f90</text>
</a>
</g>
</g>
<!-- sourcefile~plantmanager.f90&#45;&gt;sourcefile~utilityroutines.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_edge13" class="edge">
<title>sourcefile~plantmanager.f90&#45;&gt;sourcefile~utilityroutines.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M508.7278,-86.8551C561.6894,-69.5035 670.9617,-38 766.2089,-38 766.2089,-38 766.2089,-38 1294.8739,-38 1374.9573,-38 1467.2741,-44.9604 1525.6424,-50.2247"/>
<polygon fill="#ff0000" stroke="#ff0000" points="1525.5014,-53.7263 1535.7789,-51.1527 1526.1396,-46.7554 1525.5014,-53.7263"/>
</g>
<!-- sourcefile~hvacmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_node8" class="node">
<title>sourcefile~hvacmanager.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~AfferentGraph_node8"><a xlink:href="../sourcefile/hvacmanager.f90.html" xlink:title="HVACManager.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="658.4299,-129.0054 559.8718,-129.0054 559.8718,-106.9946 658.4299,-106.9946 658.4299,-129.0054"/>
<text text-anchor="middle" x="609.1509" y="-114.85" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">HVACManager.f90</text>
</a>
</g>
</g>
<!-- sourcefile~plantmanager.f90&#45;&gt;sourcefile~hvacmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_edge14" class="edge">
<title>sourcefile~plantmanager.f90&#45;&gt;sourcefile~hvacmanager.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M524.0826,-105.164C532.4116,-106.4207 541.1723,-107.7426 549.7762,-109.0409"/>
<polygon fill="#ff0000" stroke="#ff0000" points="549.3588,-112.5175 559.7691,-110.5487 550.4033,-105.5958 549.3588,-112.5175"/>
</g>
<!-- sourcefile~plantloopsolver.f90&#45;&gt;sourcefile~plantmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_edge15" class="edge">
<title>sourcefile~plantloopsolver.f90&#45;&gt;sourcefile~plantmanager.f90</title>
<path fill="none" stroke="#00ffff" stroke-dasharray="5,2" d="M393.4821,-98C401.8693,-98 410.5773,-98 419.0615,-98"/>
<polygon fill="#00ffff" stroke="#00ffff" points="419.2629,-101.5001 429.2629,-98 419.2629,-94.5001 419.2629,-101.5001"/>
</g>
<!-- sourcefile~simulationmanager.f90&#45;&gt;sourcefile~utilityroutines.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_edge2" class="edge">
<title>sourcefile~simulationmanager.f90&#45;&gt;sourcefile~utilityroutines.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1472.0266,-94.9034C1492.8155,-87.6856 1520.1342,-78.2008 1542.5923,-70.4035"/>
<polygon fill="#ff0000" stroke="#ff0000" points="1543.9075,-73.6519 1552.2063,-67.0656 1541.6115,-67.0391 1543.9075,-73.6519"/>
</g>
<!-- sourcefile~energyplus.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_node9" class="node">
<title>sourcefile~energyplus.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~AfferentGraph_node9"><a xlink:href="../sourcefile/energyplus.f90.html" xlink:title="EnergyPlus.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="1625.7865,-117.0054 1542.3695,-117.0054 1542.3695,-94.9946 1625.7865,-94.9946 1625.7865,-117.0054"/>
<text text-anchor="middle" x="1584.078" y="-102.85" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">EnergyPlus.f90</text>
</a>
</g>
</g>
<!-- sourcefile~simulationmanager.f90&#45;&gt;sourcefile~energyplus.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_edge1" class="edge">
<title>sourcefile~simulationmanager.f90&#45;&gt;sourcefile~energyplus.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1499.8887,-106C1510.5533,-106 1521.5851,-106 1532.0115,-106"/>
<polygon fill="#ff0000" stroke="#ff0000" points="1532.2,-109.5001 1542.1999,-106 1532.1999,-102.5001 1532.2,-109.5001"/>
</g>
<!-- sourcefile~hvacmanager.f90&#45;&gt;sourcefile~simulationmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_edge11" class="edge">
<title>sourcefile~hvacmanager.f90&#45;&gt;sourcefile~simulationmanager.f90</title>
<path fill="none" stroke="#0000ff" stroke-dasharray="5,2" d="M639.6242,-129.0708C670.8949,-139.5937 721.2022,-154.2167 766.2089,-157"/>
<path fill="none" stroke="#0000ff" stroke-dasharray="5,2" d="M766.2089,-157C850.942,-162.24 872.4374,-152.6835 957.2227,-157"/>
</g>
<!-- sourcefile~heatbalanceairmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_node10" class="node">
<title>sourcefile~heatbalanceairmanager.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~AfferentGraph_node10"><a xlink:href="../sourcefile/heatbalanceairmanager.f90.html" xlink:title="HeatBalanceAirManager.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="838.0464,-129.0054 694.3713,-129.0054 694.3713,-106.9946 838.0464,-106.9946 838.0464,-129.0054"/>
<text text-anchor="middle" x="766.2089" y="-114.85" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">HeatBalanceAirManager.f90</text>
</a>
</g>
</g>
<!-- sourcefile~hvacmanager.f90&#45;&gt;sourcefile~heatbalanceairmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_edge10" class="edge">
<title>sourcefile~hvacmanager.f90&#45;&gt;sourcefile~heatbalanceairmanager.f90</title>
<path fill="none" stroke="#0000ff" stroke-dasharray="5,2" d="M658.845,-118C666.9838,-118 675.6024,-118 684.2766,-118"/>
<polygon fill="#0000ff" stroke="#0000ff" points="684.4593,-121.5001 694.4593,-118 684.4593,-114.5001 684.4593,-121.5001"/>
</g>
<!-- sourcefile~heatbalanceairmanager.f90&#45;&gt;sourcefile~simulationmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_edge9" class="edge">
<title>sourcefile~heatbalanceairmanager.f90&#45;&gt;sourcefile~simulationmanager.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M803.4725,-129.0797C841.663,-139.6095 902.9697,-154.2379 957.2227,-157"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M957.2227,-157C1039.673,-161.1976 1060.5319,-152.6844 1142.9762,-157"/>
</g>
<!-- sourcefile~heatbalancesurfacemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_node11" class="node">
<title>sourcefile~heatbalancesurfacemanager.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~AfferentGraph_node11"><a xlink:href="../sourcefile/heatbalancesurfacemanager.f90.html" xlink:title="HeatBalanceSurfaceManager.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="1040.4134,-129.0054 874.0319,-129.0054 874.0319,-106.9946 1040.4134,-106.9946 1040.4134,-129.0054"/>
<text text-anchor="middle" x="957.2227" y="-114.85" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">HeatBalanceSurfaceManager.f90</text>
</a>
</g>
</g>
<!-- sourcefile~heatbalanceairmanager.f90&#45;&gt;sourcefile~heatbalancesurfacemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_edge8" class="edge">
<title>sourcefile~heatbalanceairmanager.f90&#45;&gt;sourcefile~heatbalancesurfacemanager.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M837.8788,-118C846.3245,-118 855.036,-118 863.7252,-118"/>
<polygon fill="#ff0000" stroke="#ff0000" points="863.8982,-121.5001 873.8982,-118 863.8981,-114.5001 863.8982,-121.5001"/>
</g>
<!-- sourcefile~heatbalancesurfacemanager.f90&#45;&gt;sourcefile~simulationmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_edge7" class="edge">
<title>sourcefile~heatbalancesurfacemanager.f90&#45;&gt;sourcefile~simulationmanager.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1142.9762,-157C1210.394,-160.529 1227.736,-164.0795 1294.8739,-157"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M993.4365,-129.0786C1030.5566,-139.6076 1090.1605,-154.2354 1142.9762,-157"/>
</g>
<!-- sourcefile~heatbalancemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_node12" class="node">
<title>sourcefile~heatbalancemanager.f90</title>
<g id="a_sourcefile~~plantchillers.f90~~AfferentGraph_node12"><a xlink:href="../sourcefile/heatbalancemanager.f90.html" xlink:title="HeatBalanceManager.f90">
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="1207.9815,-129.0054 1077.9709,-129.0054 1077.9709,-106.9946 1207.9815,-106.9946 1207.9815,-129.0054"/>
<text text-anchor="middle" x="1142.9762" y="-114.85" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">HeatBalanceManager.f90</text>
</a>
</g>
</g>
<!-- sourcefile~heatbalancesurfacemanager.f90&#45;&gt;sourcefile~heatbalancemanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_edge6" class="edge">
<title>sourcefile~heatbalancesurfacemanager.f90&#45;&gt;sourcefile~heatbalancemanager.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1040.5908,-118C1049.5332,-118 1058.5945,-118 1067.4384,-118"/>
<polygon fill="#ff0000" stroke="#ff0000" points="1067.7002,-121.5001 1077.7002,-118 1067.7002,-114.5001 1067.7002,-121.5001"/>
</g>
<!-- sourcefile~heatbalancemanager.f90&#45;&gt;sourcefile~simulationmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_edge5" class="edge">
<title>sourcefile~heatbalancemanager.f90&#45;&gt;sourcefile~simulationmanager.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1294.8739,-157C1336.1707,-152.6453 1380.8427,-134.7785 1409.5682,-121.4125"/>
<polygon fill="#ff0000" stroke="#ff0000" points="1411.1467,-124.5375 1418.6707,-117.0783 1408.1373,-118.2174 1411.1467,-124.5375"/>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1175.0936,-129.0684C1212.4271,-141.4324 1271.859,-159.4269 1294.8739,-157"/>
</g>
<!-- sourcefile~heatbalancemanager.f90&#45;&gt;sourcefile~sizingmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_edge4" class="edge">
<title>sourcefile~heatbalancemanager.f90&#45;&gt;sourcefile~sizingmanager.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1208.276,-117.1402C1217.1763,-117.023 1226.2757,-116.9032 1235.072,-116.7874"/>
<polygon fill="#ff0000" stroke="#ff0000" points="1235.2759,-120.2851 1245.2289,-116.6537 1235.1836,-113.2857 1235.2759,-120.2851"/>
</g>
<!-- sourcefile~sizingmanager.f90&#45;&gt;sourcefile~simulationmanager.f90 -->
<g id="sourcefile~~plantchillers.f90~~AfferentGraph_edge3" class="edge">
<title>sourcefile~sizingmanager.f90&#45;&gt;sourcefile~simulationmanager.f90</title>
<path fill="none" stroke="#ff0000" stroke-dasharray="5,2" d="M1344.4345,-112.5865C1352.7009,-112.0172 1361.4118,-111.4172 1370.0732,-110.8207"/>
<polygon fill="#ff0000" stroke="#ff0000" points="1370.4528,-114.3029 1380.1887,-110.124 1369.9718,-107.3195 1370.4528,-114.3029"/>
</g>
</g>
</svg>
</div>
                <script>var pansourcefileplantchillersf90AfferentGraph = svgPanZoom('#sourcefileplantchillersf90AfferentGraph', {
                    zoomEnabled: true,
                    controlIconsEnabled: true,
                    fit: true,
                    center: true,});
                    </script>
                <div><a type="button" class="graph-help" data-toggle="modal" href="#graph-help-text">Help</a></div>
                <div class="modal fade" id="graph-help-text" tabindex="-1" role="dialog">
                  <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="-graph-help-label">Graph Key</h4>
                      </div>
                      <div class="modal-body">

    <p>Nodes of different colours represent the following: </p>
    <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: Graph Key Pages: 1 -->
<svg width="186pt" height="31pt"
 viewBox="0.00 0.00 186.41 30.50" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 26.5)">
<title>Graph Key</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-26.5 182.4064,-26.5 182.4064,4 -4,4"/>
<!-- Source File -->
<g id="node1" class="node">
<title>Source File</title>
<polygon fill="#f0ad4e" stroke="#f0ad4e" points="65.1576,-22.2554 -.0526,-22.2554 -.0526,-.2446 65.1576,-.2446 65.1576,-22.2554"/>
<text text-anchor="middle" x="32.5525" y="-8.1" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#ffffff">Source File</text>
</g>
<!-- This Page&#39;s Entity -->
<g id="node2" class="node">
<title>This Page&#39;s Entity</title>
<polygon fill="none" stroke="#000000" points="178.2607,-22.2554 82.8443,-22.2554 82.8443,-.2446 178.2607,-.2446 178.2607,-22.2554"/>
<text text-anchor="middle" x="130.5525" y="-8.1" font-family="Helvetica,sans-Serif" font-size="10.50" fill="#000000">This Page&#39;s Entity</text>
</g>
</g>
</svg>


    <p>Solid arrows point from a file to a file which depends upon it. A file
    is dependent upon another if the latter must be compiled before the former
    can be. Where possible, edges connecting nodes are given different colours to make them easier to distinguish in large graphs.
    </p>

                      </div>
                    </div>
                  </div>
                </div>


      <br>

    <section class="visible-xs visible-sm hidden-md">


<div class="panel panel-primary">
  <div class="panel-heading text-left"><h3 class="panel-title"><a data-toggle="collapse" href="#mods-1">Modules</a></h3></div>
  <div id="mods-1" class="panel-collapse collapse">
    <div class="list-group">

      <a class="list-group-item" href="../module/plantchillers.html">PlantChillers</a>

    </div>
  </div>
</div>


<div class="panel panel-primary">
  <div class="panel-heading text-left"><h3 class="panel-title">Source Code</h3></div>
  <div class="list-group">
    <a class="list-group-item" href="../sourcefile/plantchillers.f90.html#src">PlantChillers.f90</a>
  </div>
</div>


    </section>
    <br class="visible-xs visible-sm hidden-md">

    <section>
      <h2><span class="anchor" id="src"></span>Source Code</h2>
    <div class="hl"><pre><span></span><a name="ln-1"></a><span class="k">MODULE </span><span class="n">PlantChillers</span>
<a name="ln-2"></a>
<a name="ln-3"></a>          <span class="c">! MODULE INFORMATION:</span>
<a name="ln-4"></a>          <span class="c">!       AUTHOR         Dan Fisher / Brandon Anderson</span>
<a name="ln-5"></a>          <span class="c">!       DATE WRITTEN   September 2000</span>
<a name="ln-6"></a>          <span class="c">!       MODIFIED       Richard Liesen Nov-Dec 2001; Jan 2002</span>
<a name="ln-7"></a>          <span class="c">!                      Chandan Sharma, FSEC, February 2010, Added basin heater</span>
<a name="ln-8"></a>          <span class="c">!       RE-ENGINEERED  Edwin: Merged Four Chiller Modules Into One</span>
<a name="ln-9"></a>
<a name="ln-10"></a>          <span class="c">! PURPOSE OF THIS MODULE:</span>
<a name="ln-11"></a>          <span class="c">! This module simulates the performance of the Electric vapor</span>
<a name="ln-12"></a>          <span class="c">! compression Chillers, Gas Turbine Chillers, Engine Drivent chillers, and</span>
<a name="ln-13"></a>          <span class="c">! Constant COP chillers</span>
<a name="ln-14"></a>
<a name="ln-15"></a>          <span class="c">! METHODOLOGY EMPLOYED:</span>
<a name="ln-16"></a>          <span class="c">! Called by plantloopequipment, model accepts inputs, and calculates a</span>
<a name="ln-17"></a>          <span class="c">! thermal response using new plant routines such as SetComponentFlowRate</span>
<a name="ln-18"></a>
<a name="ln-19"></a>          <span class="c">! REFERENCES:</span>
<a name="ln-20"></a>          <span class="c">! 1. BLAST Users Manual</span>
<a name="ln-21"></a>
<a name="ln-22"></a>          <span class="c">! USE STATEMENTS:</span>
<a name="ln-23"></a><span class="k">USE </span><span class="n">DataPrecisionGlobals</span>
<a name="ln-24"></a><span class="k">USE </span><span class="n">DataLoopNode</span>
<a name="ln-25"></a><span class="k">USE </span><span class="n">DataGlobals</span> <span class="p">,</span>    <span class="n">ONLY</span> <span class="p">:</span> <span class="n">MaxNameLength</span><span class="p">,</span> <span class="n">NumOfTimeStepInHour</span><span class="p">,</span> <span class="n">InitConvTemp</span><span class="p">,</span> <span class="n">WarmupFlag</span>
<a name="ln-26"></a><span class="k">USE </span><span class="n">DataInterfaces</span>
<a name="ln-27"></a><span class="k">USE </span><span class="n">DataHVACGlobals</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">SmallWaterVolFlow</span>
<a name="ln-28"></a><span class="k">USE </span><span class="n">DataPlant</span><span class="p">,</span>       <span class="n">ONLY</span><span class="p">:</span> <span class="n">DeltaTemptol</span><span class="p">,</span> <span class="n">TypeOf_Chiller_EngineDriven</span><span class="p">,</span> <span class="n">TypeOf_Chiller_Electric</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-29"></a>                                         <span class="n">TypeOf_Chiller_CombTurbine</span><span class="p">,</span>  <span class="n">TypeOf_Chiller_ConstCOP</span>
<a name="ln-30"></a><span class="k">USE </span><span class="n">General</span><span class="p">,</span>         <span class="n">ONLY</span><span class="p">:</span> <span class="n">TrimSigDigits</span>
<a name="ln-31"></a>
<a name="ln-32"></a><span class="k">IMPLICIT NONE</span>
<a name="ln-33"></a><span class="k">PRIVATE</span>
<a name="ln-34"></a>
<a name="ln-35"></a>          <span class="c">!MODULE PARAMETER DEFINITIONS:</span>
<a name="ln-36"></a><span class="c">! Parameters for use in Chillers</span>
<a name="ln-37"></a><span class="kt">INTEGER</span><span class="p">,</span> <span class="k">PARAMETER</span> <span class="kd">::</span> <span class="n">AirCooled</span> <span class="o">=</span> <span class="mi">1</span>
<a name="ln-38"></a><span class="kt">INTEGER</span><span class="p">,</span> <span class="k">PARAMETER</span> <span class="kd">::</span> <span class="n">WaterCooled</span> <span class="o">=</span> <span class="mi">2</span>
<a name="ln-39"></a><span class="kt">INTEGER</span><span class="p">,</span> <span class="k">PARAMETER</span> <span class="kd">::</span> <span class="n">EvapCooled</span> <span class="o">=</span> <span class="mi">3</span>
<a name="ln-40"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span> <span class="k">PARAMETER</span>   <span class="kd">::</span> <span class="n">KJtoJ</span> <span class="o">=</span> <span class="mi">100</span><span class="mf">0.d0</span>        <span class="c">!convert Kjoules to joules</span>
<a name="ln-41"></a>
<a name="ln-42"></a><span class="c">!chiller flow modes</span>
<a name="ln-43"></a><span class="kt">INTEGER</span><span class="p">,</span> <span class="k">PARAMETER</span> <span class="kd">::</span> <span class="n">FlowModeNotSet</span>           <span class="o">=</span> <span class="mi">200</span>
<a name="ln-44"></a><span class="kt">INTEGER</span><span class="p">,</span> <span class="k">PARAMETER</span> <span class="kd">::</span> <span class="n">ConstantFlow</span>             <span class="o">=</span> <span class="mi">201</span>
<a name="ln-45"></a><span class="kt">INTEGER</span><span class="p">,</span> <span class="k">PARAMETER</span> <span class="kd">::</span> <span class="n">NotModulated</span>             <span class="o">=</span> <span class="mi">202</span>
<a name="ln-46"></a><span class="kt">INTEGER</span><span class="p">,</span> <span class="k">PARAMETER</span> <span class="kd">::</span> <span class="n">LeavingSetpointModulated</span> <span class="o">=</span> <span class="mi">203</span>
<a name="ln-47"></a>
<a name="ln-48"></a>          <span class="c">! MODULE VARIABLE DECLARATIONS:</span>
<a name="ln-49"></a><span class="kt">INTEGER</span><span class="p">,</span> <span class="k">SAVE</span> <span class="p">,</span><span class="k">PUBLIC</span>    <span class="kd">::</span> <span class="n">NumElectricChillers</span>    <span class="o">=</span><span class="mi">0</span>   <span class="c">! number of Electric chillers specified in input</span>
<a name="ln-50"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">CondMassFlowRate</span>       <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! Kg/s - condenser mass flow rate, water side</span>
<a name="ln-51"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">EvapMassFlowRate</span>       <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! Kg/s - evaporator mass flow rate, water side</span>
<a name="ln-52"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">CondOutletTemp</span>         <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! C - condenser outlet temperature, air or water side</span>
<a name="ln-53"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">CondOutletHumRat</span>       <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! kg/kg - condenser outlet humditiy ratio, air side</span>
<a name="ln-54"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">EvapOutletTemp</span>         <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! C - evaporator outlet temperature, water side</span>
<a name="ln-55"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">Power</span>                  <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! W - rate of chiller energy use</span>
<a name="ln-56"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">QEvaporator</span>            <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! W - rate of heat transfer to the evaporator coil</span>
<a name="ln-57"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">QCondenser</span>             <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! W - rate of heat transfer to the condenser coil</span>
<a name="ln-58"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">Energy</span>                 <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! J - chiller energy use</span>
<a name="ln-59"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">EvaporatorEnergy</span>       <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! J - rate of heat transfer to the evaporator coil</span>
<a name="ln-60"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">CondenserEnergy</span>        <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! J - rate of heat transfer to the condenser coil</span>
<a name="ln-61"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">QHeatRecovered</span>         <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! W - rate of heat transfer to the Heat Recovery coil</span>
<a name="ln-62"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">HeatRecOutletTemp</span>      <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! C - Heat Rec outlet temperature, water side</span>
<a name="ln-63"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">AvgCondSinkTemp</span>        <span class="o">=</span><span class="mf">0.d0</span><span class="c">!  condenser temperature value for use in curves [C]</span>
<a name="ln-64"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">ChillerCyclingRatio</span>    <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! Cycling ratio for chiller when load is below MinPLR</span>
<a name="ln-65"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">BasinHeaterPower</span>       <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! Basin heater power (W)</span>
<a name="ln-66"></a>
<a name="ln-67"></a><span class="c">!engine driven:</span>
<a name="ln-68"></a><span class="kt">INTEGER</span>                  <span class="kd">::</span> <span class="n">NumEngineDrivenChillers</span> <span class="o">=</span><span class="mi">0</span>   <span class="c">! number of EngineDriven chillers specified in input</span>
<a name="ln-69"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">HeatRecInletTemp</span>        <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! Inlet Temperature of the heat recovery fluid</span>
<a name="ln-70"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">HeatRecMdotActual</span>       <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! reporting: Heat Recovery Loop Mass flow rate</span>
<a name="ln-71"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">HeatRecMdotDesign</span>       <span class="o">=</span><span class="mf">0.0d0</span>
<a name="ln-72"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">QTotalHeatRecovered</span>     <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! total heat recovered (W)</span>
<a name="ln-73"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">QJacketRecovered</span>        <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! heat recovered from jacket (W)</span>
<a name="ln-74"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">QLubeOilRecovered</span>       <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! heat recovered from lube (W)</span>
<a name="ln-75"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">QExhaustRecovered</span>       <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! exhaust gas heat recovered (W)</span>
<a name="ln-76"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">FuelEnergyUseRate</span>       <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! Fuel Energy used (W)</span>
<a name="ln-77"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">TotalHeatEnergyRec</span>      <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! total heat recovered (J)</span>
<a name="ln-78"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">JacketEnergyRec</span>         <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! heat recovered from jacket (J)</span>
<a name="ln-79"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">LubeOilEnergyRec</span>        <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! heat recovered from lube (J)</span>
<a name="ln-80"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">ExhaustEnergyRec</span>        <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! exhaust gas heat recovered (J)</span>
<a name="ln-81"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">FuelEnergy</span>              <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! Fuel Energy used (J)</span>
<a name="ln-82"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">FuelMdot</span>                <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! Fuel Amount used (Kg/s)</span>
<a name="ln-83"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">ExhaustStackTemp</span>        <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! Exhaust Stack Temperature (C)</span>
<a name="ln-84"></a>
<a name="ln-85"></a><span class="c">!gas turbine</span>
<a name="ln-86"></a><span class="kt">INTEGER</span>                  <span class="kd">::</span> <span class="n">NumGTChillers</span>    <span class="o">=</span><span class="mi">0</span>   <span class="c">! number of GT chillers specified in input</span>
<a name="ln-87"></a>
<a name="ln-88"></a><span class="c">! const COP</span>
<a name="ln-89"></a><span class="kt">INTEGER</span>                  <span class="kd">::</span> <span class="n">NumConstCOPChillers</span> <span class="o">=</span><span class="mi">0</span>
<a name="ln-90"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">EvapInletTemp</span>       <span class="o">=</span><span class="mf">0.0d0</span>
<a name="ln-91"></a><span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">CondInletTemp</span>       <span class="o">=</span><span class="mf">0.0d0</span>
<a name="ln-92"></a>
<a name="ln-93"></a><span class="k">TYPE </span><span class="n">BaseChillerSpecs</span>
<a name="ln-94"></a>  <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="n">MaxNameLength</span><span class="p">)</span> <span class="kd">::</span> <span class="n">Name</span>     <span class="o">=</span><span class="s1">&#39; &#39;</span> <span class="c">! user identifier</span>
<a name="ln-95"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">CondenserType</span>       <span class="o">=</span><span class="mi">0</span>    <span class="c">! Type of Condenser - Air or Water Cooled</span>
<a name="ln-96"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">NomCap</span>            <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! design nominal capacity of chiller</span>
<a name="ln-97"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">COP</span>               <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! COP</span>
<a name="ln-98"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">FlowMode</span>          <span class="o">=</span> <span class="n">FlowModeNotSet</span> <span class="c">! one of 3 modes for componet flow during operation</span>
<a name="ln-99"></a>  <span class="kt">LOGICAL</span>           <span class="kd">::</span> <span class="n">ModulatedFlowSetToLoop</span><span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span> <span class="c">! True if the setpoint is missing at the outlet node</span>
<a name="ln-100"></a>  <span class="kt">LOGICAL</span>           <span class="kd">::</span> <span class="n">ModulatedFlowErrDone</span>  <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>  <span class="c">! true if setpoint warning issued</span>
<a name="ln-101"></a>  <span class="kt">LOGICAL</span>           <span class="kd">::</span> <span class="n">HRSPErrDone</span>          <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>  <span class="c">! TRUE if set point warning issued for heat recovery loop</span>
<a name="ln-102"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">EvapInletNodeNum</span>  <span class="o">=</span><span class="mi">0</span>   <span class="c">! Node number on the inlet side of the plant</span>
<a name="ln-103"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">EvapOutletNodeNum</span> <span class="o">=</span><span class="mi">0</span>   <span class="c">! Node number on the outlet side of the plant</span>
<a name="ln-104"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">CondInletNodeNum</span>  <span class="o">=</span><span class="mi">0</span>   <span class="c">! Node number on the inlet side of the condenser</span>
<a name="ln-105"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">CondOutletNodeNum</span> <span class="o">=</span><span class="mi">0</span>   <span class="c">! Node number on the outlet side of the condenser</span>
<a name="ln-106"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">EvapVolFlowRate</span>     <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! m**3/s - design nominal water volumetric flow rate through the evaporator</span>
<a name="ln-107"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">EvapMassFlowRateMax</span> <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! kg/s - design water mass flow rate through evaporator</span>
<a name="ln-108"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">CondVolFlowRate</span>     <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! m**3/s - design nominal water volumetric flow rate through the condenser</span>
<a name="ln-109"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">CondMassFlowRateMax</span> <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! kg/s - design water mass flow rate through condenser</span>
<a name="ln-110"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">CWLoopNum</span>     <span class="o">=</span> <span class="mi">0</span>  <span class="c">! chilled water plant loop index number</span>
<a name="ln-111"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">CWLoopSideNum</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c">! chilled water plant loop side index</span>
<a name="ln-112"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">CWBranchNum</span>   <span class="o">=</span> <span class="mi">0</span>  <span class="c">! chilled water plant loop branch index</span>
<a name="ln-113"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">CWCompNum</span>     <span class="o">=</span> <span class="mi">0</span>  <span class="c">! chilled water plant loop component index</span>
<a name="ln-114"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">CDLoopNum</span>     <span class="o">=</span> <span class="mi">0</span>  <span class="c">! condenser water plant loop index number</span>
<a name="ln-115"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">CDLoopSideNum</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c">! condenser water plant loop side index</span>
<a name="ln-116"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">CDBranchNum</span>   <span class="o">=</span> <span class="mi">0</span>  <span class="c">! condenser water plant loop branch index</span>
<a name="ln-117"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">CDCompNum</span>     <span class="o">=</span> <span class="mi">0</span>  <span class="c">! condenser water plant loop component index</span>
<a name="ln-118"></a>
<a name="ln-119"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">SizFac</span>                    <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! sizing factor</span>
<a name="ln-120"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">BasinHeaterPowerFTempDiff</span> <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! Basin heater capacity per degree C below setpoint (W/C)</span>
<a name="ln-121"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">BasinHeaterSetPointTemp</span>   <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! Setpoint temperature for basin heater operation (C)</span>
<a name="ln-122"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">BasinHeaterSchedulePtr</span>  <span class="o">=</span> <span class="mi">0</span>   <span class="c">! Pointer to basin heater schedule</span>
<a name="ln-123"></a>
<a name="ln-124"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">ErrCount1</span> <span class="o">=</span> <span class="mi">0</span>      <span class="c">! for recurring error messages</span>
<a name="ln-125"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">ErrCount2</span> <span class="o">=</span> <span class="mi">0</span>      <span class="c">! for recurring error messages</span>
<a name="ln-126"></a>  <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">220</span><span class="p">)</span><span class="kd">::</span> <span class="n">MsgBuffer1</span>    <span class="o">=</span> <span class="s1">&#39; &#39;</span> <span class="c">!- buffer to print warning messages on following time step</span>
<a name="ln-127"></a>  <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span><span class="kd">::</span> <span class="n">MsgBuffer2</span>    <span class="o">=</span> <span class="s1">&#39; &#39;</span> <span class="c">!- buffer to print warning messages on following time step</span>
<a name="ln-128"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">MsgDataLast</span>   <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! value of data when warning occurred (passed to Recurring Warn)</span>
<a name="ln-129"></a>  <span class="kt">LOGICAL</span>           <span class="kd">::</span> <span class="n">PrintMessage</span>  <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span> <span class="c">! logical to determine if message is valid</span>
<a name="ln-130"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">MsgErrorCount</span> <span class="o">=</span> <span class="mi">0</span>   <span class="c">! number of occurrences of warning</span>
<a name="ln-131"></a>
<a name="ln-132"></a>  <span class="kt">LOGICAL</span>           <span class="kd">::</span> <span class="n">CheckEquipName</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-133"></a>  <span class="kt">LOGICAL</span>           <span class="kd">::</span> <span class="n">PossibleSubCooling</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span> <span class="c">! flag to indicate chiller is doing less cooling that requested</span>
<a name="ln-134"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">CondMassFlowIndex</span> <span class="o">=</span> <span class="mi">0</span>
<a name="ln-135"></a><span class="k">END TYPE</span>
<a name="ln-136"></a>
<a name="ln-137"></a><span class="k">TYPE</span><span class="p">,</span> <span class="k">PUBLIC</span>             <span class="kd">::</span> <span class="n">ElectricChillerSpecs</span>
<a name="ln-138"></a>  <span class="k">TYPE</span><span class="p">(</span><span class="n">BaseChillerSpecs</span><span class="p">)</span> <span class="kd">::</span> <span class="n">Base</span>
<a name="ln-139"></a>
<a name="ln-140"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">MinPartLoadRat</span>      <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! (Electric MIN) min allowed operating frac full load</span>
<a name="ln-141"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">MaxPartLoadRat</span>      <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! (Electric MAX) max allowed operating frac full load</span>
<a name="ln-142"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">OptPartLoadRat</span>      <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! (Electric BEST) optimal operating frac full load</span>
<a name="ln-143"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">TempDesCondIn</span>       <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! C - (Electric ADJTC(1)The design secondary loop fluid</span>
<a name="ln-144"></a>                                                <span class="c">! temperature at the chiller condenser side inlet</span>
<a name="ln-145"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">TempRiseCoef</span>        <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! (Electric ADJTC(2)) correction factor for off ChillDesign oper.</span>
<a name="ln-146"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">TempDesEvapOut</span>      <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! C - (Electric ADJTC(3)The design primary loop fluid</span>
<a name="ln-147"></a>                                                <span class="c">! temperature at the chiller evaporator side outlet</span>
<a name="ln-148"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">DIMENSION</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="kd">::</span> <span class="n">CapRatCoef</span>          <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! (Electric RCAVC() ) coeff of cap ratio poly fit</span>
<a name="ln-149"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">DIMENSION</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="kd">::</span> <span class="n">PowerRatCoef</span>        <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! (Electric ADJEC() ) coeff of power rat poly fit</span>
<a name="ln-150"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">DIMENSION</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="kd">::</span> <span class="n">FullLoadCoef</span>        <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! (Electric RPWRC() ) coeff of full load poly. fit</span>
<a name="ln-151"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">TempLowLimitEvapOut</span> <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! C - low temperature shut off</span>
<a name="ln-152"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">DesignHeatRecVolFlowRate</span> <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! m3/s, Design Water mass flow rate through heat recovery loop</span>
<a name="ln-153"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">DesignHeatRecMassFlowRate</span> <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! kg/s, Design Water mass flow rate through heat recovery loop</span>
<a name="ln-154"></a>  <span class="kt">LOGICAL</span>           <span class="kd">::</span> <span class="n">HeatRecActive</span> <span class="o">=</span> <span class="p">.</span><span class="n">False</span><span class="p">.</span>    <span class="c">! True entered Heat Rec Vol Flow Rate &gt;0</span>
<a name="ln-155"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">HeatRecInletNodeNum</span> <span class="o">=</span> <span class="mi">0</span>    <span class="c">! Node number on the heat recovery inlet side of the condenser</span>
<a name="ln-156"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">HeatRecOutletNodeNum</span> <span class="o">=</span> <span class="mi">0</span>   <span class="c">! Node number on the heat recovery outlet side of the condenser</span>
<a name="ln-157"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">HeatRecCapacityFraction</span>   <span class="o">=</span> <span class="mf">0.d0</span> <span class="c">! user input for heat recovery capacity fraction []</span>
<a name="ln-158"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">HeatRecMaxCapacityLimit</span>   <span class="o">=</span> <span class="mf">0.d0</span> <span class="c">! Capacity limit for Heat recovery, one time calc [W]</span>
<a name="ln-159"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">HeatRecSetpointNodeNum</span>    <span class="o">=</span> <span class="mi">0</span>    <span class="c">! index for system node with the heat recover leaving setpoint</span>
<a name="ln-160"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">HeatRecInletLimitSchedNum</span> <span class="o">=</span> <span class="mi">0</span>    <span class="c">! index for schedule for the inlet high limit for heat recovery operation</span>
<a name="ln-161"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">HRLoopNum</span>     <span class="o">=</span> <span class="mi">0</span>  <span class="c">! heat recovery water plant loop side index</span>
<a name="ln-162"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">HRLoopSideNum</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c">! heat recovery water plant loop side index</span>
<a name="ln-163"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">HRBranchNum</span>   <span class="o">=</span> <span class="mi">0</span>  <span class="c">! heat recovery water plant loop branch index</span>
<a name="ln-164"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">HRCompNum</span>     <span class="o">=</span> <span class="mi">0</span>  <span class="c">! heat recovery water plant loop component index</span>
<a name="ln-165"></a><span class="k">END TYPE </span><span class="n">ElectricChillerSpecs</span>
<a name="ln-166"></a>
<a name="ln-167"></a><span class="k">TYPE </span><span class="n">EngineDrivenChillerSpecs</span>
<a name="ln-168"></a>  <span class="k">TYPE</span><span class="p">(</span><span class="n">BaseChillerSpecs</span><span class="p">)</span> <span class="kd">::</span> <span class="n">Base</span>
<a name="ln-169"></a>  <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="n">MaxNameLength</span><span class="p">)</span> <span class="kd">::</span> <span class="n">FuelType</span>  <span class="o">=</span><span class="s1">&#39; &#39;</span>  <span class="c">! Type of Fuel - DIESEL, GASOLINE, GAS</span>
<a name="ln-170"></a>
<a name="ln-171"></a>
<a name="ln-172"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">MinPartLoadRat</span>       <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! (EngineDriven MIN) min allowed operating frac full load</span>
<a name="ln-173"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">MaxPartLoadRat</span>       <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! (EngineDriven MAX) max allowed operating frac full load</span>
<a name="ln-174"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">OptPartLoadRat</span>       <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! (EngineDriven BEST) optimal operating frac full load</span>
<a name="ln-175"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">TempDesCondIn</span>        <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! C - (EngineDriven ADJTC(1)The design secondary loop fluid</span>
<a name="ln-176"></a>                                                 <span class="c">! temperature at the chiller condenser side inlet</span>
<a name="ln-177"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">TempRiseCoef</span>         <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! (EngineDriven ADJTC(2)) correction factor for off ChillDesign oper.</span>
<a name="ln-178"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">TempDesEvapOut</span>       <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! C - (EngineDriven ADJTC(3)The design primary loop fluid</span>
<a name="ln-179"></a>                                                 <span class="c">! temperature at the chiller evaporator side outlet</span>
<a name="ln-180"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">DIMENSION</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="kd">::</span> <span class="n">CapRatCoef</span>           <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! (EngineDriven RCAVC() ) coeff of cap ratio poly fit</span>
<a name="ln-181"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">DIMENSION</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="kd">::</span> <span class="n">PowerRatCoef</span>         <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! (EngineDriven ADJEC() ) coeff of power rat poly fit</span>
<a name="ln-182"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">DIMENSION</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="kd">::</span> <span class="n">FullLoadCoef</span>         <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! (EngineDriven RPWRC() ) coeff of full load poly. fit</span>
<a name="ln-183"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">TempLowLimitEvapOut</span>  <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! C - low temperature shut off</span>
<a name="ln-184"></a>
<a name="ln-185"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">ClngLoadtoFuelCurve</span>   <span class="o">=</span><span class="mi">0</span>   <span class="c">!Coeff of Shaft Power to Fuel Energy Input Coeff Poly Fit</span>
<a name="ln-186"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">RecJacHeattoFuelCurve</span> <span class="o">=</span><span class="mi">0</span>   <span class="c">!Curve Index for Ratio of Recoverable Jacket Heat to</span>
<a name="ln-187"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">RecLubeHeattoFuelCurve</span><span class="o">=</span><span class="mi">0</span>   <span class="c">!Curve Index for Ratio of Recoverable Lube Oil Heat to</span>
<a name="ln-188"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">TotExhausttoFuelCurve</span> <span class="o">=</span><span class="mi">0</span>   <span class="c">!Curve Index for Total Exhaust heat Input to Fuel Energy Input Coeffs Poly Fit</span>
<a name="ln-189"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">ExhaustTemp</span>           <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">!(TEXDC) Exhaust Gas Temp to Fuel Energy Input</span>
<a name="ln-190"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">ExhaustTempCurve</span>      <span class="o">=</span><span class="mi">0</span>   <span class="c">!Curve Index for Exhaust Gas Temp to Fuel Energy Input Coeffs Poly Fit</span>
<a name="ln-191"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">UA</span>                    <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">!(UACDC) exhaust gas Heat Exchanger UA to Capacity</span>
<a name="ln-192"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">DIMENSION</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="kd">::</span> <span class="n">UACoef</span>                <span class="o">=</span><span class="mf">0.0d0</span>   <span class="c">!Heat Exchanger UA Coeffs Poly Fit</span>
<a name="ln-193"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">MaxExhaustperPowerOutput</span> <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">!MAX EXHAUST FLOW PER W DSL POWER OUTPUT COEFF</span>
<a name="ln-194"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">DesignMinExitGasTemp</span>     <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">!Steam Saturation Temperature</span>
<a name="ln-195"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">FuelHeatingValue</span>         <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! Heating Value of Fuel in kJ/kg</span>
<a name="ln-196"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">DesignHeatRecVolFlowRate</span> <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! m3/s, Design Water mass flow rate through heat recovery loop</span>
<a name="ln-197"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">DesignHeatRecMassFlowRate</span><span class="o">=</span><span class="mf">0.0d0</span> <span class="c">! kg/s, Design Water mass flow rate through heat recovery loop</span>
<a name="ln-198"></a>  <span class="kt">LOGICAL</span>           <span class="kd">::</span> <span class="n">HeatRecActive</span>        <span class="o">=</span><span class="p">.</span><span class="n">false</span><span class="p">.</span> <span class="c">! True entered Heat Rec Vol Flow Rate &gt;0</span>
<a name="ln-199"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">HeatRecInletNodeNum</span>  <span class="o">=</span><span class="mi">0</span>  <span class="c">! Node number on the heat recovery inlet side of the condenser</span>
<a name="ln-200"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">HeatRecOutletNodeNum</span> <span class="o">=</span><span class="mi">0</span>  <span class="c">! Node number on the heat recovery outlet side of the condenser</span>
<a name="ln-201"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">HeatRecMaxTemp</span>       <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">!Max Temp that can be produced in heat recovery</span>
<a name="ln-202"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">HRLoopNum</span>     <span class="o">=</span> <span class="mi">0</span>  <span class="c">! heat recovery water plant loop side index</span>
<a name="ln-203"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">HRLoopSideNum</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c">! heat recovery water plant loop side index</span>
<a name="ln-204"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">HRBranchNum</span>   <span class="o">=</span> <span class="mi">0</span>  <span class="c">! heat recovery water plant loop branch index</span>
<a name="ln-205"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">HRCompNum</span>     <span class="o">=</span> <span class="mi">0</span>  <span class="c">! heat recovery water plant loop component index</span>
<a name="ln-206"></a><span class="k">END TYPE </span><span class="n">EngineDrivenChillerSpecs</span>
<a name="ln-207"></a>
<a name="ln-208"></a><span class="k">TYPE </span><span class="n">GTChillerSpecs</span>
<a name="ln-209"></a>  <span class="k">TYPE</span><span class="p">(</span><span class="n">BaseChillerSpecs</span><span class="p">)</span> <span class="kd">::</span> <span class="n">Base</span>
<a name="ln-210"></a>
<a name="ln-211"></a>  <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="n">MaxNameLength</span><span class="p">)</span> <span class="kd">::</span> <span class="n">FuelType</span> <span class="o">=</span><span class="s1">&#39; &#39;</span>  <span class="c">! Type of Fuel - DIESEL, GASOLINE, GAS</span>
<a name="ln-212"></a>
<a name="ln-213"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">MinPartLoadRat</span>      <span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">! (GT MIN) min allowed operating frac full load</span>
<a name="ln-214"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">MaxPartLoadRat</span>      <span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">! (GT MAX) max allowed operating frac full load</span>
<a name="ln-215"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">OptPartLoadRat</span>      <span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">! (GT BEST) optimal operating frac full load</span>
<a name="ln-216"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">TempDesCondIn</span>       <span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">! C - (GT ADJTC(1)The design secondary loop fluid</span>
<a name="ln-217"></a>                                                 <span class="c">! temperature at the chiller condenser side inlet</span>
<a name="ln-218"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">TempRiseCoef</span>        <span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">! (GT ADJTC(2)) correction factor for off ChillDesign oper.</span>
<a name="ln-219"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">TempDesEvapOut</span>      <span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">! C - (GT ADJTC(3)The design primary loop fluid</span>
<a name="ln-220"></a>                                                 <span class="c">! temperature at the chiller evaporator side outlet</span>
<a name="ln-221"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">DIMENSION</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="kd">::</span> <span class="n">CapRatCoef</span>     <span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">! (GT RCAVC() ) coeff of cap ratio poly fit</span>
<a name="ln-222"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">DIMENSION</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="kd">::</span> <span class="n">PowerRatCoef</span>   <span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">! (GT ADJEC() ) coeff of power rat poly fit</span>
<a name="ln-223"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">DIMENSION</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="kd">::</span> <span class="n">FullLoadCoef</span>   <span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">! (GT RPWRC() ) coeff of full load poly. fit</span>
<a name="ln-224"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">TempLowLimitEvapOut</span> <span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">! C - low temperature shut off</span>
<a name="ln-225"></a>
<a name="ln-226"></a>  <span class="c">! &quot;special&quot; GT chiller input parameters</span>
<a name="ln-227"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">FuelEnergyIn</span>            <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">!(EFUEL) Amount of Fuel Energy Required to run gas turbine</span>
<a name="ln-228"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">DIMENSION</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="kd">::</span> <span class="n">PLBasedFuelInputCoef</span>    <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">!(FUL1GC) Part Load Ratio Based Fuel Input Coefficients Poly Fit</span>
<a name="ln-229"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">DIMENSION</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="kd">::</span> <span class="n">TempBasedFuelInputCoef</span>  <span class="o">=</span><span class="mf">0.0d0</span> <span class="c">!(FUL2GC) Ambient Temperature Based Fuel Input Coeff Poly Fit</span>
<a name="ln-230"></a>
<a name="ln-231"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">ExhaustFlow</span>             <span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">!(FEX) Exhaust Gas Flow Rate cubic meters per second</span>
<a name="ln-232"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">DIMENSION</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="kd">::</span> <span class="n">ExhaustFlowCoef</span>    <span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">!(FEXGC) Exhaust Gas Flow Rate Input Coef Poly Fit</span>
<a name="ln-233"></a>
<a name="ln-234"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">ExhaustTemp</span>             <span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">!(TEX) Exhaust Gas Temperature in C</span>
<a name="ln-235"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">DIMENSION</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="kd">::</span> <span class="n">PLBasedExhaustTempCoef</span>  <span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">!(TEX1GC) Part Load Ratio Based Exhaust Temperature Input Coeffs Poly Fit</span>
<a name="ln-236"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">DIMENSION</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="kd">::</span> <span class="n">TempBasedExhaustTempCoef</span><span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">!(TEX2GC) Ambient Temperature Based Exhaust Gas Temp to</span>
<a name="ln-237"></a>                                                          <span class="c">! Fuel Energy Input Coeffs Poly Fit</span>
<a name="ln-238"></a>
<a name="ln-239"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">HeatRecLubeEnergy</span>       <span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">!(ELUBE) Recoverable Lube Oil Energy</span>
<a name="ln-240"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">HeatRecLubeRate</span>         <span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">!(ELUBE) Recoverable Lube Oil Rate of Rwecovery (W)</span>
<a name="ln-241"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">DIMENSION</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="kd">::</span> <span class="n">HeatRecLubeEnergyCoef</span>   <span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">!(ELUBEGC)  Recoverable Lube Oil Energy Input Coef Poly Fit</span>
<a name="ln-242"></a>
<a name="ln-243"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">UAtoCapRat</span>              <span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">!(UACGC) Heat Exchanger UA to Capacity</span>
<a name="ln-244"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">DIMENSION</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="kd">::</span> <span class="n">UAtoCapCoef</span>        <span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">!Heat Exchanger UA to Capacity Coeffs Poly Fit</span>
<a name="ln-245"></a>
<a name="ln-246"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">GTEngineCapacity</span>        <span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">! Capacity of GT Unit attached to Chiller</span>
<a name="ln-247"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">MaxExhaustperGTPower</span>    <span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">!Max Exhaust Flow per KW Power Out</span>
<a name="ln-248"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">DesignSteamSatTemp</span>      <span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">!Steam Saturation Temperature</span>
<a name="ln-249"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">ExhaustStackTemp</span>        <span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">!Temperature of Exhaust Gases</span>
<a name="ln-250"></a>
<a name="ln-251"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">HeatRecInletNodeNum</span>     <span class="o">=</span><span class="mi">0</span>    <span class="c">! Node number on the heat recovery inlet side of the condenser</span>
<a name="ln-252"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">HeatRecOutletNodeNum</span>    <span class="o">=</span><span class="mi">0</span>    <span class="c">! Node number on the heat recovery outlet side of the condenser</span>
<a name="ln-253"></a>
<a name="ln-254"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">HeatRecInletTemp</span>        <span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">!Inlet Temperature of the heat recovery fluid</span>
<a name="ln-255"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">HeatRecOutletTemp</span>       <span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">!Outlet Temperature of the heat recovery fluid</span>
<a name="ln-256"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">HeatRecMdot</span>             <span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">! reporting: Heat Recovery Loop Mass flow rate</span>
<a name="ln-257"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">DesignHeatRecVolFlowRate</span><span class="o">=</span><span class="mf">0.0d0</span>    <span class="c">! m3/s, Design Water mass flow rate through heat recovery loop</span>
<a name="ln-258"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">DesignHeatRecMassFlowRate</span><span class="o">=</span><span class="mf">0.0d0</span>   <span class="c">! kg/s, Design Water mass flow rate through heat recovery loop</span>
<a name="ln-259"></a>  <span class="kt">LOGICAL</span>           <span class="kd">::</span> <span class="n">HeatRecActive</span>        <span class="o">=</span><span class="p">.</span><span class="n">false</span><span class="p">.</span> <span class="c">! True entered Heat Rec Vol Flow Rate &gt;0</span>
<a name="ln-260"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">FuelHeatingValue</span>        <span class="o">=</span><span class="mf">0.0d0</span>   <span class="c">!Heating Value of Fuel in kJ/kg</span>
<a name="ln-261"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">HeatRecMaxTemp</span>          <span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">!Max Temp that can be produced in heat recovery</span>
<a name="ln-262"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">HRLoopNum</span>     <span class="o">=</span> <span class="mi">0</span>  <span class="c">! heat recovery water plant loop side index</span>
<a name="ln-263"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">HRLoopSideNum</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c">! heat recovery water plant loop side index</span>
<a name="ln-264"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">HRBranchNum</span>   <span class="o">=</span> <span class="mi">0</span>  <span class="c">! heat recovery water plant loop branch index</span>
<a name="ln-265"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">HRCompNum</span>     <span class="o">=</span> <span class="mi">0</span>  <span class="c">! heat recovery water plant loop component index</span>
<a name="ln-266"></a><span class="k">END TYPE </span><span class="n">GTChillerSpecs</span>
<a name="ln-267"></a>
<a name="ln-268"></a>  <span class="c">! DERIVED TYPE DEFINITIONS</span>
<a name="ln-269"></a><span class="k">TYPE </span><span class="n">ConstCOPChillerSpecs</span>
<a name="ln-270"></a>   <span class="k">TYPE</span><span class="p">(</span><span class="n">BaseChillerSpecs</span><span class="p">)</span> <span class="kd">::</span> <span class="n">Base</span>
<a name="ln-271"></a><span class="k">END TYPE </span><span class="n">ConstCOPChillerSpecs</span>
<a name="ln-272"></a>
<a name="ln-273"></a><span class="k">TYPE </span><span class="n">BaseReportVars</span>
<a name="ln-274"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">Power</span>          <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">!</span>
<a name="ln-275"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">QEvap</span>          <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">!</span>
<a name="ln-276"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">QCond</span>          <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">!</span>
<a name="ln-277"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">Energy</span>         <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">!</span>
<a name="ln-278"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">EvapEnergy</span>     <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">!</span>
<a name="ln-279"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">CondEnergy</span>     <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">!</span>
<a name="ln-280"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">CondInletTemp</span>  <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">!</span>
<a name="ln-281"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">EvapInletTemp</span>  <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">!</span>
<a name="ln-282"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">CondOutletTemp</span> <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">!</span>
<a name="ln-283"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">!</span>
<a name="ln-284"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">Evapmdot</span>       <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">!</span>
<a name="ln-285"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">Condmdot</span>       <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">!</span>
<a name="ln-286"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">BasinHeaterPower</span>       <span class="o">=</span> <span class="mf">0.0d0</span>  <span class="c">! Basin heater power (W)</span>
<a name="ln-287"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">BasinHeaterConsumption</span> <span class="o">=</span> <span class="mf">0.0d0</span>  <span class="c">! Basin heater energy consumption (J)</span>
<a name="ln-288"></a><span class="k">END TYPE </span><span class="n">BaseReportVars</span>
<a name="ln-289"></a>
<a name="ln-290"></a><span class="k">TYPE </span><span class="n">ElectricReportVars</span>
<a name="ln-291"></a>  <span class="k">TYPE</span><span class="p">(</span><span class="n">BaseReportVars</span><span class="p">)</span> <span class="kd">::</span> <span class="n">Base</span>
<a name="ln-292"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">ActualCOP</span>          <span class="o">=</span> <span class="mf">0.d0</span> <span class="c">!</span>
<a name="ln-293"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">QHeatRecovery</span>      <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-294"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">EnergyHeatRecovery</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-295"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">HeatRecInletTemp</span>   <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-296"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">HeatRecOutletTemp</span>  <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-297"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">HeatRecMassFlow</span>    <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-298"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">ChillerCondAvgTemp</span> <span class="o">=</span> <span class="mf">0.d0</span> <span class="c">! the effective condenser temperature for chiller performance [C]</span>
<a name="ln-299"></a><span class="k">END TYPE </span><span class="n">ElectricReportVars</span>
<a name="ln-300"></a>
<a name="ln-301"></a><span class="k">TYPE </span><span class="n">EngineDrivenReportVars</span>
<a name="ln-302"></a>  <span class="k">TYPE</span><span class="p">(</span><span class="n">BaseReportVars</span><span class="p">)</span> <span class="kd">::</span> <span class="n">Base</span>
<a name="ln-303"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">QJacketRecovered</span>       <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! reporting: Heat Recovered from Jacket (W)</span>
<a name="ln-304"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">QLubeOilRecovered</span>      <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! reporting: Heat Recovered from Lubricant (W)</span>
<a name="ln-305"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">QExhaustRecovered</span>      <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! reporting: exhaust gas heat recovered (W)</span>
<a name="ln-306"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">QTotalHeatRecovered</span>    <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! reporting: Total Heat Recovered (W)</span>
<a name="ln-307"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">TotalHeatEnergyRec</span>     <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! reporting: total heat recovered (J)</span>
<a name="ln-308"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">JacketEnergyRec</span>        <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! reporting: heat recovered from jacket (J)</span>
<a name="ln-309"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">LubeOilEnergyRec</span>       <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! reporting: heat recovered from lube (J)</span>
<a name="ln-310"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">ExhaustEnergyRec</span>       <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! reporting: exhaust gas heat recovered (J)</span>
<a name="ln-311"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">FuelEnergy</span>             <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! reporting: Fuel Energy used (J)</span>
<a name="ln-312"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">FuelEnergyUseRate</span>      <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! reporting: Fuel Energy used (W)</span>
<a name="ln-313"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">FuelMdot</span>               <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! reporting: Fuel used (Kg/s)</span>
<a name="ln-314"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">ExhaustStackTemp</span>       <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! reporting: Exhaust Stack Temperature (C)</span>
<a name="ln-315"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">HeatRecInletTemp</span>       <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! reporting: Heat Recovery Loop Inlet Temperature (C)</span>
<a name="ln-316"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">HeatRecOutletTemp</span>      <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! reporting: Heat Recovery Loop Outlet Temperature (C)</span>
<a name="ln-317"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">HeatRecMdot</span>            <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! reporting: Heat Recovery Loop Mass flow rate (kg/s)</span>
<a name="ln-318"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">FuelCOP</span>                <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! reporting: Fuel COP [delivered cooling rate/fuel energy input rate] (W/W)</span>
<a name="ln-319"></a><span class="k">END TYPE </span><span class="n">EngineDrivenReportVars</span>
<a name="ln-320"></a>
<a name="ln-321"></a><span class="k">TYPE </span><span class="n">GasTurbineReportVars</span>
<a name="ln-322"></a>  <span class="k">TYPE</span><span class="p">(</span><span class="n">BaseReportVars</span><span class="p">)</span> <span class="kd">::</span> <span class="n">Base</span>
<a name="ln-323"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">HeatRecLubeEnergy</span>    <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! reporting: Heat Recovered from Lubricant(J)</span>
<a name="ln-324"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">HeatRecLubeRate</span>      <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! reporting: Recoverable Lube Oil Rate of Rwecovery (W)</span>
<a name="ln-325"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">FuelEnergyUsed</span>       <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! reporting: Fuel Energy used</span>
<a name="ln-326"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">FuelEnergyUsedRate</span>   <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! reporting: Fuel energy used rate (fuel consumption rate)</span>
<a name="ln-327"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">FuelMassUsed</span>         <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! reporting: Fuel Amount used</span>
<a name="ln-328"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">FuelMassUsedRate</span>     <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! reporting: Fuel amount used (fuel Mass consumption rate)</span>
<a name="ln-329"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">ExhaustStackTemp</span>     <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! reporting: Exhaust Stack Temperature</span>
<a name="ln-330"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">HeatRecInletTemp</span>     <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! reporting: Heat Recovery Loop Inlet Temperature</span>
<a name="ln-331"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">HeatRecOutletTemp</span>    <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! reporting: Heat Recovery Loop Outlet Temperature</span>
<a name="ln-332"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">HeatRecMdot</span>          <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! reporting: Heat Recovery Loop Mass flow rate</span>
<a name="ln-333"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">FuelCOP</span>              <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">! reporting: Fuel coefficient of performance (Qevap/FuelEnergyUsedRate)</span>
<a name="ln-334"></a><span class="k">END TYPE </span><span class="n">GasTurbineReportVars</span>
<a name="ln-335"></a>
<a name="ln-336"></a><span class="k">TYPE </span><span class="n">ConstCOPReportVars</span>
<a name="ln-337"></a>    <span class="k">TYPE</span><span class="p">(</span><span class="n">BaseReportVars</span><span class="p">)</span> <span class="kd">::</span> <span class="n">Base</span>
<a name="ln-338"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">ActualCOP</span>      <span class="o">=</span> <span class="mf">0.0d0</span> <span class="c">!</span>
<a name="ln-339"></a><span class="k">END TYPE </span><span class="n">ConstCOPReportVars</span>
<a name="ln-340"></a>
<a name="ln-341"></a><span class="k">TYPE</span> <span class="p">(</span><span class="n">ElectricChillerSpecs</span><span class="p">),</span> <span class="k">ALLOCATABLE</span><span class="p">,</span> <span class="k">PUBLIC</span><span class="p">,</span> <span class="k">DIMENSION</span><span class="p">(:)</span>  <span class="kd">::</span> <span class="n">ElectricChiller</span>  <span class="c">!dimension to number of machines</span>
<a name="ln-342"></a><span class="k">TYPE</span><span class="p">(</span><span class="n">ElectricReportVars</span><span class="p">),</span> <span class="k">ALLOCATABLE</span><span class="p">,</span> <span class="k">DIMENSION</span><span class="p">(:)</span> <span class="kd">::</span><span class="n">ElectricChillerReport</span>
<a name="ln-343"></a>
<a name="ln-344"></a><span class="k">TYPE</span> <span class="p">(</span><span class="n">EngineDrivenChillerSpecs</span><span class="p">),</span> <span class="k">ALLOCATABLE</span><span class="p">,</span> <span class="k">DIMENSION</span><span class="p">(:)</span>  <span class="kd">::</span> <span class="n">EngineDrivenChiller</span>  <span class="c">!dimension to number of machines</span>
<a name="ln-345"></a><span class="k">TYPE</span><span class="p">(</span><span class="n">EngineDrivenReportVars</span><span class="p">),</span> <span class="k">ALLOCATABLE</span><span class="p">,</span> <span class="k">DIMENSION</span><span class="p">(:)</span> <span class="kd">::</span><span class="n">EngineDrivenChillerReport</span>
<a name="ln-346"></a>
<a name="ln-347"></a><span class="k">TYPE</span> <span class="p">(</span><span class="n">GTChillerSpecs</span><span class="p">),</span> <span class="k">ALLOCATABLE</span><span class="p">,</span> <span class="k">DIMENSION</span><span class="p">(:)</span>  <span class="kd">::</span> <span class="n">GTChiller</span>  <span class="c">!dimension to number of machines</span>
<a name="ln-348"></a><span class="k">TYPE</span> <span class="p">(</span><span class="n">GasTurbineReportVars</span><span class="p">),</span> <span class="k">ALLOCATABLE</span><span class="p">,</span> <span class="k">DIMENSION</span><span class="p">(:)</span> <span class="kd">::</span><span class="n">GTChillerReport</span>
<a name="ln-349"></a>
<a name="ln-350"></a><span class="k">TYPE</span> <span class="p">(</span><span class="n">ConstCOPChillerSpecs</span><span class="p">),</span> <span class="k">ALLOCATABLE</span><span class="p">,</span> <span class="k">DIMENSION</span><span class="p">(:)</span>  <span class="kd">::</span> <span class="n">ConstCOPChiller</span>         <span class="c">!dimension to number of machines</span>
<a name="ln-351"></a><span class="k">TYPE</span> <span class="p">(</span><span class="n">ConstCOPReportVars</span><span class="p">),</span> <span class="k">ALLOCATABLE</span><span class="p">,</span><span class="k">DIMENSION</span><span class="p">(:)</span> <span class="kd">::</span> <span class="n">ConstCOPChillerReport</span>
<a name="ln-352"></a>
<a name="ln-353"></a><span class="kt">LOGICAL</span>     <span class="kd">::</span> <span class="n">GetEngineDrivenInput</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span><span class="c">! then TRUE, calls subroutine to read input file.</span>
<a name="ln-354"></a><span class="kt">LOGICAL</span>     <span class="kd">::</span> <span class="n">GetElectricInput</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span><span class="c">! then TRUE, calls subroutine to read input file.</span>
<a name="ln-355"></a><span class="kt">LOGICAL</span>     <span class="kd">::</span> <span class="n">GetGasTurbineInput</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span><span class="c">! then TRUE, calls subroutine to read input file.</span>
<a name="ln-356"></a><span class="kt">LOGICAL</span>     <span class="kd">::</span> <span class="n">GetConstCOPInput</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-357"></a>
<a name="ln-358"></a><span class="c">!Merged routines</span>
<a name="ln-359"></a><span class="k">PUBLIC     </span><span class="n">SimChiller</span>
<a name="ln-360"></a>
<a name="ln-361"></a>
<a name="ln-362"></a>          <span class="c">! Electric Chiller</span>
<a name="ln-363"></a><span class="k">PRIVATE    </span><span class="n">CalcElectricChillerModel</span>
<a name="ln-364"></a><span class="k">PRIVATE    </span><span class="n">GetElectricChillerInput</span>
<a name="ln-365"></a><span class="k">PRIVATE    </span><span class="n">InitElectricChiller</span>
<a name="ln-366"></a><span class="k">PRIVATE    </span><span class="n">SizeElectricChiller</span>
<a name="ln-367"></a><span class="k">PRIVATE    </span><span class="n">UpdateElectricChillerRecords</span>
<a name="ln-368"></a><span class="k">PRIVATE    </span><span class="n">CalcElectricChillerHeatRecovery</span>
<a name="ln-369"></a>
<a name="ln-370"></a>          <span class="c">! Engine Driven Chiller</span>
<a name="ln-371"></a><span class="k">PRIVATE    </span><span class="n">CalcEngineDrivenChillerModel</span>
<a name="ln-372"></a><span class="k">PRIVATE    </span><span class="n">CalcEngineChillerHeatRec</span>
<a name="ln-373"></a><span class="k">PRIVATE    </span><span class="n">GetEngineDrivenChillerInput</span>
<a name="ln-374"></a><span class="k">PRIVATE    </span><span class="n">InitEngineDrivenChiller</span>
<a name="ln-375"></a><span class="k">PRIVATE    </span><span class="n">SizeEngineDrivenChiller</span>
<a name="ln-376"></a><span class="k">PRIVATE    </span><span class="n">UpdateEngineDrivenChiller</span>
<a name="ln-377"></a>
<a name="ln-378"></a>          <span class="c">! Gas Turbine Chiller</span>
<a name="ln-379"></a><span class="k">PRIVATE    </span><span class="n">CalcGTChillerModel</span>
<a name="ln-380"></a><span class="k">PRIVATE    </span><span class="n">GetGTChillerInput</span>
<a name="ln-381"></a><span class="k">PRIVATE    </span><span class="n">InitGTChiller</span>
<a name="ln-382"></a><span class="k">PRIVATE    </span><span class="n">SizeGTChiller</span>
<a name="ln-383"></a><span class="k">PRIVATE    </span><span class="n">UpdateGTChillerRecords</span>
<a name="ln-384"></a>
<a name="ln-385"></a>          <span class="c">! Const COP</span>
<a name="ln-386"></a><span class="k">PRIVATE    </span><span class="n">CalcConstCOPChillerModel</span>
<a name="ln-387"></a><span class="k">PRIVATE    </span><span class="n">GetConstCOPChillerInput</span>
<a name="ln-388"></a><span class="k">PRIVATE    </span><span class="n">InitConstCOPChiller</span>
<a name="ln-389"></a><span class="k">PRIVATE    </span><span class="n">UpdateConstCOPChillerRecords</span>
<a name="ln-390"></a><span class="k">PRIVATE    </span><span class="n">SizeConstCOPChiller</span>
<a name="ln-391"></a>
<a name="ln-392"></a><span class="k">CONTAINS</span>
<a name="ln-393"></a>          <span class="c">! MODULE SUBROUTINES:</span>
<a name="ln-394"></a>
<a name="ln-395"></a><span class="c">! Beginning of Electric Chiller Module Driver Subroutines</span>
<a name="ln-396"></a><span class="c">!*************************************************************************</span>
<a name="ln-397"></a>
<a name="ln-398"></a><span class="k">SUBROUTINE </span><span class="n">SimChiller</span><span class="p">(</span><span class="n">LoopNum</span><span class="p">,</span> <span class="n">LoopSide</span><span class="p">,</span> <span class="n">ChillerType</span><span class="p">,</span><span class="n">ChillerName</span><span class="p">,</span><span class="n">EquipFlowCtrl</span><span class="p">,</span><span class="n">CompIndex</span><span class="p">,</span><span class="n">RunFlag</span><span class="p">,</span><span class="n">FirstHVACIteration</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-399"></a>                              <span class="n">InitLoopEquip</span><span class="p">,</span><span class="n">MyLoad</span><span class="p">,</span><span class="n">MaxCap</span><span class="p">,</span><span class="n">MinCap</span><span class="p">,</span><span class="n">OptCap</span><span class="p">,</span><span class="n">GetSizingFactor</span><span class="p">,</span><span class="n">SizingFactor</span><span class="p">,</span><span class="n">TempCondInDesign</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-400"></a>                              <span class="n">TempEvapOutDesign</span><span class="p">)</span>
<a name="ln-401"></a>          <span class="c">! SUBROUTINE INFORMATION:</span>
<a name="ln-402"></a>          <span class="c">!       AUTHOR         Dan Fisher</span>
<a name="ln-403"></a>          <span class="c">!       DATE WRITTEN   Sept. 1998</span>
<a name="ln-404"></a>          <span class="c">!       MODIFIED       April 1999, May 200-Taecheol Kim</span>
<a name="ln-405"></a>          <span class="c">!       RE-ENGINEERED  na</span>
<a name="ln-406"></a>
<a name="ln-407"></a>          <span class="c">! PURPOSE OF THIS SUBROUTINE: This is the Electric chiller model driver.  It</span>
<a name="ln-408"></a>               <span class="c">! gets the input for the models, initializes simulation variables, call</span>
<a name="ln-409"></a>               <span class="c">! the appropriate model and sets up reporting variables.</span>
<a name="ln-410"></a>
<a name="ln-411"></a>          <span class="c">! METHODOLOGY EMPLOYED: na</span>
<a name="ln-412"></a>
<a name="ln-413"></a>          <span class="c">! REFERENCES: na</span>
<a name="ln-414"></a>
<a name="ln-415"></a>          <span class="c">! USE STATEMENTS:</span>
<a name="ln-416"></a>  <span class="k">USE </span><span class="n">InputProcessor</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">FindItemInList</span>
<a name="ln-417"></a>  <span class="k">USE </span><span class="n">PlantUtilities</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">UpdateChillerComponentCondenserSide</span><span class="p">,</span> <span class="n">UpdateComponentHeatRecoverySide</span>
<a name="ln-418"></a>
<a name="ln-419"></a>  <span class="k">IMPLICIT NONE</span>
<a name="ln-420"></a>
<a name="ln-421"></a>
<a name="ln-422"></a>          <span class="c">! SUBROUTINE ARGUMENT DEFINITIONS:</span>
<a name="ln-423"></a>  <span class="kt">INTEGER</span><span class="p">,</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span>      <span class="kd">::</span> <span class="n">LoopNum</span>  <span class="c">! Flow control mode for the equipment</span>
<a name="ln-424"></a>  <span class="kt">INTEGER</span><span class="p">,</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span>      <span class="kd">::</span> <span class="n">LoopSide</span>            <span class="c">! chiller number pointer</span>
<a name="ln-425"></a>  <span class="kt">INTEGER</span><span class="p">,</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span>  <span class="kd">::</span> <span class="n">ChillerType</span>   <span class="c">! type of chiller</span>
<a name="ln-426"></a>  <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span>  <span class="kd">::</span> <span class="n">ChillerName</span>   <span class="c">! user specified name of chiller</span>
<a name="ln-427"></a>  <span class="kt">INTEGER</span><span class="p">,</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span>       <span class="kd">::</span> <span class="n">EquipFlowCtrl</span>  <span class="c">! Flow control mode for the equipment</span>
<a name="ln-428"></a>  <span class="kt">INTEGER</span><span class="p">,</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">INOUT</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">CompIndex</span>            <span class="c">! chiller number pointer</span>
<a name="ln-429"></a>  <span class="kt">LOGICAL</span> <span class="p">,</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span>      <span class="kd">::</span> <span class="n">RunFlag</span>             <span class="c">! simulate chiller when TRUE</span>
<a name="ln-430"></a>  <span class="kt">LOGICAL</span> <span class="p">,</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span>      <span class="kd">::</span> <span class="n">FirstHVACIteration</span>      <span class="c">! initialize variables when TRUE</span>
<a name="ln-431"></a>  <span class="kt">LOGICAL</span><span class="p">,</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">INOUT</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">InitLoopEquip</span>            <span class="c">! If not zero, calculate the max load for operating conditions</span>
<a name="ln-432"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">INOUT</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">MyLoad</span>              <span class="c">! loop demand component will meet</span>
<a name="ln-433"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">MinCap</span>           <span class="c">! W - minimum operating capacity of chiller</span>
<a name="ln-434"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">MaxCap</span>           <span class="c">! W - maximum operating capacity of chiller</span>
<a name="ln-435"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">OptCap</span>           <span class="c">! W - optimal operating capacity of chiller</span>
<a name="ln-436"></a>  <span class="kt">LOGICAL</span><span class="p">,</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">GetSizingFactor</span>  <span class="c">! TRUE when just the sizing factor is requested</span>
<a name="ln-437"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">INOUT</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">SizingFactor</span>     <span class="c">! sizing factor</span>
<a name="ln-438"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">INOUT</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">TempCondInDesign</span>     <span class="c">!design condenser inlet temperature, water side</span>
<a name="ln-439"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">INOUT</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">TempEvapOutDesign</span>    <span class="c">!design evaporator outlet temperature, water side</span>
<a name="ln-440"></a>          <span class="c">! SUBROUTINE PARAMETER DEFINITIONS:</span>
<a name="ln-441"></a>          <span class="c">! na</span>
<a name="ln-442"></a>
<a name="ln-443"></a>          <span class="c">! INTERFACE BLOCK SPECIFICATIONS</span>
<a name="ln-444"></a>          <span class="c">! na</span>
<a name="ln-445"></a>
<a name="ln-446"></a>          <span class="c">! DERIVED TYPE DEFINITIONS</span>
<a name="ln-447"></a>          <span class="c">! na</span>
<a name="ln-448"></a>
<a name="ln-449"></a>          <span class="c">! SUBROUTINE LOCAL VARIABLE DECLARATIONS:</span>
<a name="ln-450"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">ChillNum</span>            <span class="c">! chiller number pointer</span>
<a name="ln-451"></a>
<a name="ln-452"></a>  <span class="k">SELECT CASE</span> <span class="p">(</span><span class="n">ChillerType</span><span class="p">)</span>
<a name="ln-453"></a>
<a name="ln-454"></a>  <span class="k">CASE</span> <span class="p">(</span><span class="n">TypeOf_Chiller_Electric</span><span class="p">)</span>
<a name="ln-455"></a>
<a name="ln-456"></a>            <span class="c">!Get chiller data from input file</span>
<a name="ln-457"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">GetElectricInput</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-458"></a><span class="k">        CALL </span><span class="n">GetElectricChillerInput</span>
<a name="ln-459"></a>        <span class="n">GetElectricInput</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-460"></a>      <span class="k">END IF</span>
<a name="ln-461"></a>
<a name="ln-462"></a>        <span class="c">! Find the correct Chiller</span>
<a name="ln-463"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">CompIndex</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-464"></a><span class="k">        </span><span class="n">ChillNum</span> <span class="o">=</span> <span class="n">FindItemInList</span><span class="p">(</span><span class="n">ChillerName</span><span class="p">,</span><span class="n">ElectricChiller</span><span class="p">%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span><span class="n">NumElectricChillers</span><span class="p">)</span>
<a name="ln-465"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">ChillNum</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-466"></a><span class="k">          CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;SimElectricChiller: Specified Chiller not one of Valid Electric Chillers=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ChillerName</span><span class="p">))</span>
<a name="ln-467"></a>        <span class="n">ENDIF</span>
<a name="ln-468"></a>        <span class="n">CompIndex</span><span class="o">=</span><span class="n">ChillNum</span>
<a name="ln-469"></a>      <span class="k">ELSE</span>
<a name="ln-470"></a><span class="k">        </span><span class="n">ChillNum</span><span class="o">=</span><span class="n">CompIndex</span>
<a name="ln-471"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">ChillNum</span> <span class="o">&gt;</span> <span class="n">NumElectricChillers</span> <span class="p">.</span><span class="nb">or</span><span class="p">.</span> <span class="n">ChillNum</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-472"></a><span class="k">          CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;SimElectricChiller:  Invalid CompIndex passed=&#39;</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-473"></a>                              <span class="nb">TRIM</span><span class="p">(</span><span class="n">TrimSigDigits</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">))</span><span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-474"></a>                              <span class="s1">&#39;, Number of Units=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">TrimSigDigits</span><span class="p">(</span><span class="n">NumElectricChillers</span><span class="p">))</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-475"></a>                              <span class="s1">&#39;, Entered Unit name=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ChillerName</span><span class="p">))</span>
<a name="ln-476"></a>        <span class="n">ENDIF</span>
<a name="ln-477"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CheckEquipName</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-478"></a><span class="k">          IF</span> <span class="p">(</span><span class="n">ChillerName</span> <span class="o">/=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-479"></a><span class="k">            CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;SimElectricChiller: Invalid CompIndex passed=&#39;</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-480"></a>                                <span class="nb">TRIM</span><span class="p">(</span><span class="n">TrimSigDigits</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">))</span><span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-481"></a>                                <span class="s1">&#39;, Unit name=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ChillerName</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;, stored Unit Name for that index=&#39;</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-482"></a>                                <span class="nb">TRIM</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">))</span>
<a name="ln-483"></a>          <span class="n">ENDIF</span>
<a name="ln-484"></a>          <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CheckEquipName</span><span class="o">=</span><span class="p">.</span><span class="n">false</span><span class="p">.</span>
<a name="ln-485"></a>        <span class="n">ENDIF</span>
<a name="ln-486"></a>      <span class="n">ENDIF</span>
<a name="ln-487"></a>
<a name="ln-488"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">InitLoopEquip</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-489"></a><span class="k">        </span><span class="n">TempEvapOutDesign</span>  <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">TempDesEvapOut</span>
<a name="ln-490"></a>        <span class="n">TempCondInDesign</span>   <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">TempDesCondIn</span>
<a name="ln-491"></a>        <span class="k">CALL </span><span class="n">InitElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">,</span><span class="n">RunFlag</span><span class="p">,</span><span class="n">MyLoad</span><span class="p">)</span>
<a name="ln-492"></a>        <span class="k">CALL </span><span class="n">SizeElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)</span>
<a name="ln-493"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">LoopNum</span> <span class="o">==</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)</span> <span class="k">THEN</span> <span class="c">! chilled water loop</span>
<a name="ln-494"></a>          <span class="n">MinCap</span> <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span><span class="o">*</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">MinPartLoadRat</span>
<a name="ln-495"></a>          <span class="n">MaxCap</span> <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span><span class="o">*</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">MaxPartLoadRat</span>
<a name="ln-496"></a>          <span class="n">OptCap</span> <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span><span class="o">*</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">OptPartLoadRat</span>
<a name="ln-497"></a>        <span class="k">ELSE</span>
<a name="ln-498"></a><span class="k">          </span><span class="n">MinCap</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-499"></a>          <span class="n">MaxCap</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-500"></a>          <span class="n">OptCap</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-501"></a>        <span class="n">ENDIF</span>
<a name="ln-502"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">GetSizingFactor</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-503"></a><span class="k">          </span><span class="n">SizingFactor</span> <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">SizFac</span>
<a name="ln-504"></a>        <span class="k">END IF</span>
<a name="ln-505"></a><span class="k">        RETURN</span>
<a name="ln-506"></a><span class="k">      END IF</span>
<a name="ln-507"></a>
<a name="ln-508"></a>        <span class="c">! calculate model depending on where called from</span>
<a name="ln-509"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">LoopNum</span> <span class="o">==</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)</span> <span class="k">THEN</span> <span class="c">! chilled water loop</span>
<a name="ln-510"></a>
<a name="ln-511"></a>        <span class="k">CALL </span><span class="n">InitElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">,</span><span class="n">RunFlag</span><span class="p">,</span><span class="n">MyLoad</span><span class="p">)</span>
<a name="ln-512"></a>        <span class="k">CALL </span><span class="n">CalcElectricChillerModel</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">,</span><span class="n">MyLoad</span><span class="p">,</span><span class="n">EquipFlowCtrl</span><span class="p">,</span><span class="n">Runflag</span><span class="p">)</span>
<a name="ln-513"></a>        <span class="k">CALL </span><span class="n">UpdateElectricChillerRecords</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">,</span><span class="n">RunFlag</span><span class="p">,</span><span class="n">ChillNum</span><span class="p">)</span>
<a name="ln-514"></a>
<a name="ln-515"></a>      <span class="n">ELSEIF</span> <span class="p">(</span><span class="n">LoopNum</span> <span class="o">==</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)</span> <span class="k">THEN</span> <span class="c">! condenser loop</span>
<a name="ln-516"></a>        <span class="k">CALL </span><span class="n">UpdateChillerComponentCondenserSide</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-517"></a>                                         <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-518"></a>                                         <span class="n">TypeOf_Chiller_Electric</span><span class="p">,</span>                     <span class="p">&amp;</span>
<a name="ln-519"></a>                                         <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-520"></a>                                         <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletNodeNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-521"></a>                                         <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QCond</span><span class="p">,</span>             <span class="p">&amp;</span>
<a name="ln-522"></a>                                         <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletTemp</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-523"></a>                                         <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletTemp</span><span class="p">,</span>    <span class="p">&amp;</span>
<a name="ln-524"></a>                                         <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Condmdot</span><span class="p">,</span>          <span class="p">&amp;</span>
<a name="ln-525"></a>                                         <span class="n">FirstHVACIteration</span><span class="p">)</span>
<a name="ln-526"></a>      <span class="n">ELSEIF</span> <span class="p">(</span><span class="n">LoopNum</span> <span class="o">==</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">)</span> <span class="k">THEN</span>  <span class="c">! heat recovery loop</span>
<a name="ln-527"></a>        <span class="k">CALL </span><span class="n">UpdateComponentHeatRecoverySide</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">,</span>               <span class="p">&amp;</span>
<a name="ln-528"></a>                                        <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopSideNum</span><span class="p">,</span>           <span class="p">&amp;</span>
<a name="ln-529"></a>                                        <span class="n">TypeOf_Chiller_Electric</span><span class="p">,</span>                           <span class="p">&amp;</span>
<a name="ln-530"></a>                                        <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-531"></a>                                        <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecOutletNodeNum</span><span class="p">,</span>    <span class="p">&amp;</span>
<a name="ln-532"></a>                                        <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">QHeatRecovery</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-533"></a>                                        <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecInletTemp</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-534"></a>                                        <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecOutletTemp</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-535"></a>                                        <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecMassFlow</span> <span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-536"></a>                                        <span class="n">FirstHVACIteration</span><span class="p">)</span>
<a name="ln-537"></a>      <span class="n">ENDIF</span>
<a name="ln-538"></a>
<a name="ln-539"></a>  <span class="k">CASE</span> <span class="p">(</span><span class="n">TypeOf_Chiller_EngineDriven</span><span class="p">)</span>
<a name="ln-540"></a>
<a name="ln-541"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">GetEngineDrivenInput</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-542"></a><span class="k">        CALL </span><span class="n">GetEngineDrivenChillerInput</span>
<a name="ln-543"></a>        <span class="n">GetEngineDrivenInput</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-544"></a>      <span class="k">END IF</span>
<a name="ln-545"></a>
<a name="ln-546"></a>        <span class="c">! Find the correct Chiller</span>
<a name="ln-547"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">CompIndex</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-548"></a><span class="k">        </span><span class="n">ChillNum</span> <span class="o">=</span> <span class="n">FindItemInList</span><span class="p">(</span><span class="n">ChillerName</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span><span class="n">NumEngineDrivenChillers</span><span class="p">)</span>
<a name="ln-549"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">ChillNum</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-550"></a><span class="k">          CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;SimEngineDrivenChiller: Specified Chiller not one of Valid EngineDriven Chillers=&#39;</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-551"></a>             <span class="nb">TRIM</span><span class="p">(</span><span class="n">ChillerName</span><span class="p">))</span>
<a name="ln-552"></a>        <span class="n">ENDIF</span>
<a name="ln-553"></a>        <span class="n">CompIndex</span><span class="o">=</span><span class="n">ChillNum</span>
<a name="ln-554"></a>      <span class="k">ELSE</span>
<a name="ln-555"></a><span class="k">        </span><span class="n">ChillNum</span><span class="o">=</span><span class="n">CompIndex</span>
<a name="ln-556"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">ChillNum</span> <span class="o">&gt;</span> <span class="n">NumEngineDrivenChillers</span> <span class="p">.</span><span class="nb">or</span><span class="p">.</span> <span class="n">ChillNum</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-557"></a><span class="k">          CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;SimEngineDrivenChiller:  Invalid CompIndex passed=&#39;</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-558"></a>                              <span class="nb">TRIM</span><span class="p">(</span><span class="n">TrimSigDigits</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">))</span><span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-559"></a>                              <span class="s1">&#39;, Number of Units=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">TrimSigDigits</span><span class="p">(</span><span class="n">NumEngineDrivenChillers</span><span class="p">))</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-560"></a>                              <span class="s1">&#39;, Entered Unit name=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ChillerName</span><span class="p">))</span>
<a name="ln-561"></a>        <span class="n">ENDIF</span>
<a name="ln-562"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CheckEquipName</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-563"></a><span class="k">          IF</span> <span class="p">(</span><span class="n">ChillerName</span> <span class="o">/=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-564"></a><span class="k">            CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;SimEngineDrivenChiller: Invalid CompIndex passed=&#39;</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-565"></a>                                <span class="nb">TRIM</span><span class="p">(</span><span class="n">TrimSigDigits</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">))</span><span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-566"></a>                                <span class="s1">&#39;, Unit name=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ChillerName</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;, stored Unit Name for that index=&#39;</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-567"></a>                                <span class="nb">TRIM</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">))</span>
<a name="ln-568"></a>          <span class="n">ENDIF</span>
<a name="ln-569"></a>          <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CheckEquipName</span><span class="o">=</span><span class="p">.</span><span class="n">false</span><span class="p">.</span>
<a name="ln-570"></a>        <span class="n">ENDIF</span>
<a name="ln-571"></a>      <span class="n">ENDIF</span>
<a name="ln-572"></a>
<a name="ln-573"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">InitLoopEquip</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-574"></a><span class="k">        </span><span class="n">TempEvapOutDesign</span>  <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">TempDesEvapOut</span>
<a name="ln-575"></a>        <span class="n">TempCondInDesign</span>   <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">TempDesCondIn</span>
<a name="ln-576"></a>        <span class="k">CALL </span><span class="n">InitEngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">,</span> <span class="n">RunFlag</span><span class="p">,</span> <span class="n">MyLoad</span><span class="p">)</span>
<a name="ln-577"></a>        <span class="k">CALL </span><span class="n">SizeEngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)</span>
<a name="ln-578"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">LoopNum</span> <span class="o">==</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-579"></a><span class="k">          </span><span class="n">MinCap</span> <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span><span class="o">*</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">MinPartLoadRat</span>
<a name="ln-580"></a>          <span class="n">MaxCap</span> <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span><span class="o">*</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">MaxPartLoadRat</span>
<a name="ln-581"></a>          <span class="n">OptCap</span> <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span><span class="o">*</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">OptPartLoadRat</span>
<a name="ln-582"></a>        <span class="k">ELSE</span>
<a name="ln-583"></a><span class="k">          </span><span class="n">MinCap</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-584"></a>          <span class="n">MaxCap</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-585"></a>          <span class="n">OptCap</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-586"></a>        <span class="n">ENDIF</span>
<a name="ln-587"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">GetSizingFactor</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-588"></a><span class="k">          </span><span class="n">SizingFactor</span> <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">SizFac</span>
<a name="ln-589"></a>        <span class="k">END IF</span>
<a name="ln-590"></a><span class="k">        RETURN</span>
<a name="ln-591"></a><span class="k">      END IF</span>
<a name="ln-592"></a>
<a name="ln-593"></a>      <span class="c">! calculate model depending on where called from</span>
<a name="ln-594"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">LoopNum</span> <span class="o">==</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)</span> <span class="k">THEN</span> <span class="c">! chilled water loop</span>
<a name="ln-595"></a>        <span class="k">CALL </span><span class="n">InitEngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">,</span> <span class="n">RunFlag</span><span class="p">,</span> <span class="n">MyLoad</span><span class="p">)</span>
<a name="ln-596"></a>        <span class="k">CALL </span><span class="n">CalcEngineDrivenChillerModel</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">,</span><span class="n">MyLoad</span><span class="p">,</span><span class="n">Runflag</span><span class="p">,</span><span class="n">EquipFlowCtrl</span><span class="p">)</span>
<a name="ln-597"></a>        <span class="k">CALL </span><span class="n">UpdateEngineDrivenChiller</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">,</span><span class="n">RunFlag</span><span class="p">,</span><span class="n">ChillNum</span><span class="p">)</span>
<a name="ln-598"></a>      <span class="n">ELSEIF</span> <span class="p">(</span><span class="n">LoopNum</span> <span class="o">==</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)</span> <span class="k">THEN</span> <span class="c">! condenser loop</span>
<a name="ln-599"></a>        <span class="k">CALL </span><span class="n">UpdateChillerComponentCondenserSide</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-600"></a>                                         <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-601"></a>                                         <span class="n">TypeOf_Chiller_EngineDriven</span><span class="p">,</span>                     <span class="p">&amp;</span>
<a name="ln-602"></a>                                         <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-603"></a>                                         <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletNodeNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-604"></a>                                         <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QCond</span><span class="p">,</span>             <span class="p">&amp;</span>
<a name="ln-605"></a>                                         <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletTemp</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-606"></a>                                         <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletTemp</span><span class="p">,</span>    <span class="p">&amp;</span>
<a name="ln-607"></a>                                         <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Condmdot</span><span class="p">,</span>          <span class="p">&amp;</span>
<a name="ln-608"></a>                                         <span class="n">FirstHVACIteration</span><span class="p">)</span>
<a name="ln-609"></a>      <span class="n">ELSEIF</span> <span class="p">(</span><span class="n">LoopNum</span> <span class="o">==</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">)</span> <span class="k">THEN</span>  <span class="c">! heat recovery loop</span>
<a name="ln-610"></a>        <span class="k">CALL </span><span class="n">UpdateComponentHeatRecoverySide</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">,</span>             <span class="p">&amp;</span>
<a name="ln-611"></a>                                        <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopSideNum</span><span class="p">,</span>              <span class="p">&amp;</span>
<a name="ln-612"></a>                                        <span class="n">TypeOf_Chiller_EngineDriven</span><span class="p">,</span>                              <span class="p">&amp;</span>
<a name="ln-613"></a>                                        <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span><span class="p">,</span>        <span class="p">&amp;</span>
<a name="ln-614"></a>                                        <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecOutletNodeNum</span><span class="p">,</span>       <span class="p">&amp;</span>
<a name="ln-615"></a>                                        <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">QTotalHeatRecovered</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-616"></a>                                        <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecInletTemp</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-617"></a>                                        <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecOutletTemp</span><span class="p">,</span>    <span class="p">&amp;</span>
<a name="ln-618"></a>                                        <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecMdot</span> <span class="p">,</span>         <span class="p">&amp;</span>
<a name="ln-619"></a>                                        <span class="n">FirstHVACIteration</span><span class="p">)</span>
<a name="ln-620"></a>      <span class="n">ENDIF</span>
<a name="ln-621"></a>
<a name="ln-622"></a>  <span class="k">CASE</span> <span class="p">(</span><span class="n">TypeOf_Chiller_CombTurbine</span><span class="p">)</span>
<a name="ln-623"></a>
<a name="ln-624"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">GetGasTurbineInput</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-625"></a><span class="k">        CALL </span><span class="n">GetGTChillerInput</span>
<a name="ln-626"></a>        <span class="n">GetGasTurbineInput</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-627"></a>      <span class="k">END IF</span>
<a name="ln-628"></a>
<a name="ln-629"></a><span class="k">      IF</span> <span class="p">(</span><span class="n">CompIndex</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-630"></a><span class="k">        </span><span class="n">ChillNum</span> <span class="o">=</span> <span class="n">FindItemInList</span><span class="p">(</span><span class="n">ChillerName</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span><span class="n">NumGTChillers</span><span class="p">)</span>
<a name="ln-631"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">ChillNum</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-632"></a><span class="k">          CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;SimGTChiller: Specified Chiller not one of Valid Gas Turbine Chillers=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ChillerName</span><span class="p">))</span>
<a name="ln-633"></a>        <span class="n">ENDIF</span>
<a name="ln-634"></a>        <span class="n">CompIndex</span><span class="o">=</span><span class="n">ChillNum</span>
<a name="ln-635"></a>      <span class="k">ELSE</span>
<a name="ln-636"></a><span class="k">        </span><span class="n">ChillNum</span><span class="o">=</span><span class="n">CompIndex</span>
<a name="ln-637"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">ChillNum</span> <span class="o">&gt;</span> <span class="n">NumGTChillers</span> <span class="p">.</span><span class="nb">or</span><span class="p">.</span> <span class="n">ChillNum</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-638"></a><span class="k">          CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;SimGTChiller:  Invalid CompIndex passed=&#39;</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-639"></a>                              <span class="nb">TRIM</span><span class="p">(</span><span class="n">TrimSigDigits</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">))</span><span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-640"></a>                              <span class="s1">&#39;, Number of Units=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">TrimSigDigits</span><span class="p">(</span><span class="n">NumGTChillers</span><span class="p">))</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-641"></a>                              <span class="s1">&#39;, Entered Unit name=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ChillerName</span><span class="p">))</span>
<a name="ln-642"></a>        <span class="n">ENDIF</span>
<a name="ln-643"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CheckEquipName</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-644"></a><span class="k">          IF</span> <span class="p">(</span><span class="n">ChillerName</span> <span class="o">/=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-645"></a><span class="k">            CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;SimGTChiller: Invalid CompIndex passed=&#39;</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-646"></a>                                <span class="nb">TRIM</span><span class="p">(</span><span class="n">TrimSigDigits</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">))</span><span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-647"></a>                                <span class="s1">&#39;, Unit name=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ChillerName</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;, stored Unit Name for that index=&#39;</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-648"></a>                                <span class="nb">TRIM</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">))</span>
<a name="ln-649"></a>          <span class="n">ENDIF</span>
<a name="ln-650"></a>          <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CheckEquipName</span><span class="o">=</span><span class="p">.</span><span class="n">false</span><span class="p">.</span>
<a name="ln-651"></a>        <span class="n">ENDIF</span>
<a name="ln-652"></a>      <span class="n">ENDIF</span>
<a name="ln-653"></a>
<a name="ln-654"></a>
<a name="ln-655"></a>
<a name="ln-656"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">InitLoopEquip</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-657"></a><span class="k">        </span><span class="n">TempEvapOutDesign</span>  <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">TempDesEvapOut</span>
<a name="ln-658"></a>        <span class="n">TempCondInDesign</span>   <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">TempDesCondIn</span>
<a name="ln-659"></a>        <span class="k">CALL </span><span class="n">InitGTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">,</span><span class="n">RunFlag</span><span class="p">,</span> <span class="n">MyLoad</span><span class="p">)</span>
<a name="ln-660"></a>        <span class="k">CALL </span><span class="n">SizeGTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)</span>
<a name="ln-661"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">LoopNum</span> <span class="o">==</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-662"></a><span class="k">          </span><span class="n">MinCap</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span><span class="o">*</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">MinPartLoadRat</span>
<a name="ln-663"></a>          <span class="n">MaxCap</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span><span class="o">*</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">MaxPartLoadRat</span>
<a name="ln-664"></a>          <span class="n">OptCap</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span><span class="o">*</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">OptPartLoadRat</span>
<a name="ln-665"></a>        <span class="k">ELSE</span>
<a name="ln-666"></a><span class="k">          </span><span class="n">MinCap</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-667"></a>          <span class="n">MaxCap</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-668"></a>          <span class="n">OptCap</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-669"></a>        <span class="n">ENDIF</span>
<a name="ln-670"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">GetSizingFactor</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-671"></a><span class="k">          </span><span class="n">SizingFactor</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">SizFac</span>
<a name="ln-672"></a>        <span class="k">END IF</span>
<a name="ln-673"></a><span class="k">        RETURN</span>
<a name="ln-674"></a><span class="k">      END IF</span>
<a name="ln-675"></a>
<a name="ln-676"></a>        <span class="c">! calculate model depending on where called from</span>
<a name="ln-677"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">LoopNum</span> <span class="o">==</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)</span> <span class="k">THEN</span> <span class="c">! chilled water loop</span>
<a name="ln-678"></a>
<a name="ln-679"></a>        <span class="k">CALL </span><span class="n">InitGTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">,</span><span class="n">RunFlag</span><span class="p">,</span> <span class="n">MyLoad</span><span class="p">)</span>
<a name="ln-680"></a>        <span class="k">CALL </span><span class="n">CalcGTChillerModel</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">,</span><span class="n">MyLoad</span><span class="p">,</span><span class="n">Runflag</span><span class="p">,</span><span class="n">EquipFlowCtrl</span><span class="p">)</span>
<a name="ln-681"></a>        <span class="k">CALL </span><span class="n">UpdateGTChillerRecords</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">,</span><span class="n">RunFlag</span><span class="p">,</span><span class="n">ChillNum</span><span class="p">)</span>
<a name="ln-682"></a>
<a name="ln-683"></a>      <span class="n">ELSEIF</span> <span class="p">(</span><span class="n">LoopNum</span> <span class="o">==</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)</span> <span class="k">THEN</span> <span class="c">! condenser loop</span>
<a name="ln-684"></a>        <span class="k">CALL </span><span class="n">UpdateChillerComponentCondenserSide</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-685"></a>                                         <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-686"></a>                                         <span class="n">TypeOf_Chiller_CombTurbine</span><span class="p">,</span>                     <span class="p">&amp;</span>
<a name="ln-687"></a>                                         <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-688"></a>                                         <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletNodeNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-689"></a>                                         <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QCond</span><span class="p">,</span>             <span class="p">&amp;</span>
<a name="ln-690"></a>                                         <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletTemp</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-691"></a>                                         <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletTemp</span><span class="p">,</span>    <span class="p">&amp;</span>
<a name="ln-692"></a>                                         <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Condmdot</span><span class="p">,</span>          <span class="p">&amp;</span>
<a name="ln-693"></a>                                         <span class="n">FirstHVACIteration</span><span class="p">)</span>
<a name="ln-694"></a>      <span class="n">ELSEIF</span> <span class="p">(</span><span class="n">LoopNum</span> <span class="o">==</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">)</span> <span class="k">THEN</span>  <span class="c">! heat recovery loop</span>
<a name="ln-695"></a>        <span class="k">CALL </span><span class="n">UpdateComponentHeatRecoverySide</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">,</span>               <span class="p">&amp;</span>
<a name="ln-696"></a>                                        <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopSideNum</span><span class="p">,</span>           <span class="p">&amp;</span>
<a name="ln-697"></a>                                        <span class="n">TypeOf_Chiller_CombTurbine</span><span class="p">,</span>                           <span class="p">&amp;</span>
<a name="ln-698"></a>                                        <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-699"></a>                                        <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecOutletNodeNum</span><span class="p">,</span>    <span class="p">&amp;</span>
<a name="ln-700"></a>                                        <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecLubeRate</span><span class="p">,</span>      <span class="p">&amp;</span>
<a name="ln-701"></a>                                        <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecInletTemp</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-702"></a>                                        <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecOutletTemp</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-703"></a>                                        <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecMdot</span> <span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-704"></a>                                        <span class="n">FirstHVACIteration</span><span class="p">)</span>
<a name="ln-705"></a>      <span class="n">ENDIF</span>
<a name="ln-706"></a>
<a name="ln-707"></a>  <span class="k">CASE</span> <span class="p">(</span><span class="n">TypeOf_Chiller_ConstCOP</span><span class="p">)</span>
<a name="ln-708"></a>
<a name="ln-709"></a>            <span class="c">!GET INPUT</span>
<a name="ln-710"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">GetConstCOPInput</span><span class="p">)</span>  <span class="k">THEN</span>
<a name="ln-711"></a><span class="k">        CALL </span><span class="n">GetConstCOPChillerInput</span>
<a name="ln-712"></a>        <span class="n">GetConstCOPInput</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-713"></a>      <span class="k">END IF</span>
<a name="ln-714"></a>
<a name="ln-715"></a>        <span class="c">! Find the correct Chiller</span>
<a name="ln-716"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">CompIndex</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-717"></a><span class="k">        </span><span class="n">ChillNum</span> <span class="o">=</span> <span class="n">FindItemInList</span><span class="p">(</span><span class="n">ChillerName</span><span class="p">,</span><span class="n">ConstCOPChiller</span><span class="p">%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span><span class="n">NumConstCOPChillers</span><span class="p">)</span>
<a name="ln-718"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">ChillNum</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-719"></a><span class="k">          CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;SimConstCOPChiller: Specified Chiller not one of Valid Constant COP Chillers=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ChillerName</span><span class="p">))</span>
<a name="ln-720"></a>        <span class="n">ENDIF</span>
<a name="ln-721"></a>        <span class="n">CompIndex</span><span class="o">=</span><span class="n">ChillNum</span>
<a name="ln-722"></a>      <span class="k">ELSE</span>
<a name="ln-723"></a><span class="k">        </span><span class="n">ChillNum</span><span class="o">=</span><span class="n">CompIndex</span>
<a name="ln-724"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">ChillNum</span> <span class="o">&gt;</span> <span class="n">NumConstCOPChillers</span> <span class="p">.</span><span class="nb">or</span><span class="p">.</span> <span class="n">ChillNum</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-725"></a><span class="k">          CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;SimConstCOPChiller:  Invalid CompIndex passed=&#39;</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-726"></a>                              <span class="nb">TRIM</span><span class="p">(</span><span class="n">TrimSigDigits</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">))</span><span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-727"></a>                              <span class="s1">&#39;, Number of Units=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">TrimSigDigits</span><span class="p">(</span><span class="n">NumConstCOPChillers</span><span class="p">))</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-728"></a>                              <span class="s1">&#39;, Entered Unit name=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ChillerName</span><span class="p">))</span>
<a name="ln-729"></a>        <span class="n">ENDIF</span>
<a name="ln-730"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CheckEquipName</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-731"></a><span class="k">          IF</span> <span class="p">(</span><span class="n">ChillerName</span> <span class="o">/=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-732"></a><span class="k">            CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;SimConstCOPChiller: Invalid CompIndex passed=&#39;</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-733"></a>                                <span class="nb">TRIM</span><span class="p">(</span><span class="n">TrimSigDigits</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">))</span><span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-734"></a>                                <span class="s1">&#39;, Unit name=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ChillerName</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;, stored Unit Name for that index=&#39;</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-735"></a>                                <span class="nb">TRIM</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">))</span>
<a name="ln-736"></a>          <span class="n">ENDIF</span>
<a name="ln-737"></a>          <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CheckEquipName</span><span class="o">=</span><span class="p">.</span><span class="n">false</span><span class="p">.</span>
<a name="ln-738"></a>        <span class="n">ENDIF</span>
<a name="ln-739"></a>      <span class="n">ENDIF</span>
<a name="ln-740"></a>
<a name="ln-741"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">InitLoopEquip</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-742"></a><span class="k">        </span><span class="n">TempEvapOutDesign</span>  <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-743"></a>        <span class="n">TempCondInDesign</span>   <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-744"></a>        <span class="k">CALL </span><span class="n">InitConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">,</span><span class="n">RunFlag</span><span class="p">,</span><span class="n">MyLoad</span><span class="p">)</span>
<a name="ln-745"></a>        <span class="k">CALL </span><span class="n">SizeConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)</span>
<a name="ln-746"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">LoopNum</span> <span class="o">==</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-747"></a><span class="k">          </span><span class="n">MinCap</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-748"></a>          <span class="n">MaxCap</span> <span class="o">=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span>
<a name="ln-749"></a>          <span class="n">OptCap</span> <span class="o">=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span>
<a name="ln-750"></a>        <span class="k">ELSE</span>
<a name="ln-751"></a><span class="k">          </span><span class="n">MinCap</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-752"></a>          <span class="n">MaxCap</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-753"></a>          <span class="n">OptCap</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-754"></a>        <span class="n">ENDIF</span>
<a name="ln-755"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">GetSizingFactor</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-756"></a><span class="k">          </span><span class="n">SizingFactor</span> <span class="o">=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">SizFac</span>
<a name="ln-757"></a>        <span class="k">END IF</span>
<a name="ln-758"></a><span class="k">        RETURN</span>
<a name="ln-759"></a><span class="k">      END IF</span>
<a name="ln-760"></a>
<a name="ln-761"></a><span class="k">      IF</span> <span class="p">(</span><span class="n">LoopNum</span> <span class="o">==</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-762"></a>     <span class="c">! Calculate Load</span>
<a name="ln-763"></a>       <span class="c">! IF MinPlr, MaxPlr, OptPlr are not defined, assume min = 0, max=opt=Nomcap</span>
<a name="ln-764"></a>        <span class="k">CALL </span><span class="n">InitConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">,</span><span class="n">RunFlag</span><span class="p">,</span><span class="n">MyLoad</span><span class="p">)</span>
<a name="ln-765"></a>        <span class="k">CALL </span><span class="n">CalcConstCOPChillerModel</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">,</span><span class="n">MyLoad</span><span class="p">,</span><span class="n">Runflag</span><span class="p">,</span><span class="n">EquipFlowCtrl</span><span class="p">)</span>
<a name="ln-766"></a>        <span class="k">CALL </span><span class="n">UpdateConstCOPChillerRecords</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">,</span><span class="n">RunFlag</span><span class="p">,</span><span class="n">ChillNum</span><span class="p">)</span>
<a name="ln-767"></a>      <span class="n">ELSEIF</span> <span class="p">(</span><span class="n">LoopNum</span> <span class="o">==</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-768"></a><span class="k">        CALL </span><span class="n">UpdateChillerComponentCondenserSide</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-769"></a>                                         <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-770"></a>                                         <span class="n">TypeOf_Chiller_ConstCOP</span><span class="p">,</span>                     <span class="p">&amp;</span>
<a name="ln-771"></a>                                         <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-772"></a>                                         <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletNodeNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-773"></a>                                         <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QCond</span><span class="p">,</span>        <span class="p">&amp;</span>
<a name="ln-774"></a>                                         <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletTemp</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-775"></a>                                         <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletTemp</span><span class="p">,</span>    <span class="p">&amp;</span>
<a name="ln-776"></a>                                         <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Condmdot</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-777"></a>                                         <span class="n">FirstHVACIteration</span><span class="p">)</span>
<a name="ln-778"></a>      <span class="n">ENDIF</span>
<a name="ln-779"></a>
<a name="ln-780"></a>  <span class="k">END SELECT</span>
<a name="ln-781"></a>
<a name="ln-782"></a><span class="k">RETURN</span>
<a name="ln-783"></a><span class="k">END SUBROUTINE </span><span class="n">SimChiller</span>
<a name="ln-784"></a>
<a name="ln-785"></a><span class="k">SUBROUTINE </span><span class="n">GetElectricChillerInput</span>
<a name="ln-786"></a>            <span class="c">! SUBROUTINE INFORMATION:</span>
<a name="ln-787"></a>            <span class="c">!       AUTHOR:          Dan Fisher / Brandon Anderson</span>
<a name="ln-788"></a>            <span class="c">!       DATE WRITTEN:    September 2000</span>
<a name="ln-789"></a>
<a name="ln-790"></a>            <span class="c">! PURPOSE OF THIS SUBROUTINE:</span>
<a name="ln-791"></a>            <span class="c">! This routine will get the input</span>
<a name="ln-792"></a>            <span class="c">! required by the Electric Chiller model.</span>
<a name="ln-793"></a>
<a name="ln-794"></a>
<a name="ln-795"></a>            <span class="c">! METHODOLOGY EMPLOYED:</span>
<a name="ln-796"></a>            <span class="c">! EnergyPlus input processor</span>
<a name="ln-797"></a>
<a name="ln-798"></a>            <span class="c">! REFERENCES: na</span>
<a name="ln-799"></a>
<a name="ln-800"></a>            <span class="c">! USE STATEMENTS:</span>
<a name="ln-801"></a>  <span class="k">USE </span><span class="n">InputProcessor</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">GetNumObjectsFound</span><span class="p">,</span> <span class="n">GetObjectItem</span><span class="p">,</span> <span class="n">VerifyName</span>
<a name="ln-802"></a>  <span class="k">USE </span><span class="n">DataIPShortCuts</span>  <span class="c">! Data for field names, blank numerics</span>
<a name="ln-803"></a>  <span class="k">USE </span><span class="n">BranchNodeConnections</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">TestCompSet</span>
<a name="ln-804"></a>  <span class="k">USE </span><span class="n">NodeInputManager</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">GetOnlySingleNode</span>
<a name="ln-805"></a>  <span class="k">USE </span><span class="n">GlobalNames</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">VerifyUniqueChillerName</span>
<a name="ln-806"></a>  <span class="k">USE </span><span class="n">OutAirNodeManager</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">CheckAndAddAirNodeNumber</span>
<a name="ln-807"></a>  <span class="k">USE </span><span class="n">General</span><span class="p">,</span>           <span class="n">ONLY</span><span class="p">:</span> <span class="n">RoundSigDigits</span>
<a name="ln-808"></a>  <span class="k">USE </span><span class="n">PlantUtilities</span><span class="p">,</span>    <span class="n">ONLY</span><span class="p">:</span> <span class="n">RegisterPlantCompDesignFlow</span>
<a name="ln-809"></a>  <span class="k">USE </span><span class="n">ScheduleManager</span><span class="p">,</span>    <span class="n">ONLY</span><span class="p">:</span> <span class="n">GetScheduleIndex</span>
<a name="ln-810"></a>  <span class="k">USE </span><span class="n">DataSizing</span><span class="p">,</span>        <span class="n">ONLY</span><span class="p">:</span> <span class="n">Autosize</span>
<a name="ln-811"></a>  <span class="k">USE </span><span class="n">DataGlobals</span><span class="p">,</span>       <span class="n">ONLY</span><span class="p">:</span> <span class="n">AnyEnergyManagementSystemInModel</span>
<a name="ln-812"></a>
<a name="ln-813"></a>  <span class="k">IMPLICIT NONE</span> <span class="c">!</span>
<a name="ln-814"></a>
<a name="ln-815"></a>            <span class="c">! PARAMETERS</span>
<a name="ln-816"></a>  <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span> <span class="k">PARAMETER</span> <span class="kd">::</span> <span class="n">RoutineName</span><span class="o">=</span><span class="s1">&#39;GetElectricChillerInput: &#39;</span> <span class="c">! include trailing blank space</span>
<a name="ln-817"></a>            <span class="c">!LOCAL VARIABLES</span>
<a name="ln-818"></a>  <span class="kt">INTEGER</span>                     <span class="kd">::</span> <span class="n">ChillerNum</span> <span class="c">!chiller counter</span>
<a name="ln-819"></a>  <span class="kt">INTEGER</span>                     <span class="kd">::</span> <span class="n">NumAlphas</span>  <span class="c">! Number of elements in the alpha array</span>
<a name="ln-820"></a>  <span class="kt">INTEGER</span>                     <span class="kd">::</span> <span class="n">NumNums</span>    <span class="c">! Number of elements in the numeric array</span>
<a name="ln-821"></a>  <span class="kt">INTEGER</span>                     <span class="kd">::</span> <span class="n">IOStat</span>     <span class="c">! IO Status when calling get input subroutine</span>
<a name="ln-822"></a><span class="c">!  CHARACTER(len=MaxNameLength),DIMENSION(9)   :: AlphArray !character string data</span>
<a name="ln-823"></a><span class="c">!  REAL(r64),                        DIMENSION(22)  :: NumArray  !numeric data</span>
<a name="ln-824"></a>  <span class="kt">LOGICAL</span><span class="p">,</span> <span class="k">SAVE</span> <span class="kd">::</span> <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">false</span><span class="p">.</span>
<a name="ln-825"></a>  <span class="kt">LOGICAL</span>       <span class="kd">::</span> <span class="n">IsNotOK</span>               <span class="c">! Flag to verify name</span>
<a name="ln-826"></a>  <span class="kt">LOGICAL</span>       <span class="kd">::</span> <span class="n">IsBlank</span>               <span class="c">! Flag for blank name</span>
<a name="ln-827"></a>  <span class="kt">LOGICAL</span>       <span class="kd">::</span> <span class="n">errflag</span>
<a name="ln-828"></a>  <span class="kt">LOGICAL</span>       <span class="kd">::</span> <span class="n">Okay</span>
<a name="ln-829"></a><span class="c">!  CHARACTER(len=MaxNameLength) :: cCurrentModuleObject  ! for ease in renaming.</span>
<a name="ln-830"></a>
<a name="ln-831"></a>         <span class="c">!FLOW</span>
<a name="ln-832"></a>  <span class="n">cCurrentModuleObject</span> <span class="o">=</span> <span class="s1">&#39;Chiller:Electric&#39;</span>
<a name="ln-833"></a>  <span class="n">NumElectricChillers</span> <span class="o">=</span> <span class="n">GetNumObjectsFound</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span>
<a name="ln-834"></a>
<a name="ln-835"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">NumElectricChillers</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-836"></a><span class="k">    CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;No &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39; Equipment specified in input file&#39;</span><span class="p">)</span>
<a name="ln-837"></a>    <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-838"></a>  <span class="n">ENDIF</span>
<a name="ln-839"></a>
<a name="ln-840"></a>            <span class="c">!See if load distribution manager has already gotten the input</span>
<a name="ln-841"></a>    <span class="k">IF</span> <span class="p">(</span><span class="nb">ALLOCATED</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">))</span><span class="k">RETURN</span>
<a name="ln-842"></a>
<a name="ln-843"></a>         <span class="c">!ALLOCATE ARRAYS</span>
<a name="ln-844"></a>  <span class="k">ALLOCATE</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">NumElectricChillers</span><span class="p">))</span>
<a name="ln-845"></a>  <span class="k">ALLOCATE</span> <span class="p">(</span><span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">NumElectricChillers</span><span class="p">))</span>
<a name="ln-846"></a>
<a name="ln-847"></a>         <span class="c">!LOAD ARRAYS WITH Electric CURVE FIT CHILLER DATA</span>
<a name="ln-848"></a>  <span class="k">DO </span><span class="n">ChillerNum</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">,</span> <span class="n">NumElectricChillers</span>
<a name="ln-849"></a>    <span class="k">CALL </span><span class="n">GetObjectItem</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">,</span><span class="n">ChillerNum</span><span class="p">,</span><span class="n">cAlphaArgs</span><span class="p">,</span><span class="n">NumAlphas</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-850"></a>                    <span class="n">rNumericArgs</span><span class="p">,</span><span class="n">NumNums</span><span class="p">,</span><span class="n">IOSTAT</span><span class="p">,</span><span class="n">AlphaBlank</span><span class="o">=</span><span class="n">lAlphaFieldBlanks</span><span class="p">,</span> <span class="n">NumBlank</span><span class="o">=</span><span class="n">lNumericFieldBlanks</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-851"></a>                    <span class="n">NumericFieldNames</span><span class="o">=</span><span class="n">cNumericFieldNames</span><span class="p">,</span><span class="n">AlphaFieldnames</span><span class="o">=</span><span class="n">cAlphaFieldNames</span><span class="p">)</span>
<a name="ln-852"></a>
<a name="ln-853"></a>    <span class="n">IsNotOK</span><span class="o">=</span><span class="p">.</span><span class="n">false</span><span class="p">.</span>
<a name="ln-854"></a>    <span class="n">IsBlank</span><span class="o">=</span><span class="p">.</span><span class="n">false</span><span class="p">.</span>
<a name="ln-855"></a>    <span class="k">CALL </span><span class="n">VerifyName</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="n">ElectricChiller</span><span class="p">%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span><span class="n">ChillerNum</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">IsNotOK</span><span class="p">,</span><span class="n">IsBlank</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39; Name&#39;</span><span class="p">)</span>
<a name="ln-856"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">IsNotOK</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-857"></a><span class="k">      </span><span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-858"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">IsBlank</span><span class="p">)</span> <span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">=</span><span class="s1">&#39;xxxxx&#39;</span>
<a name="ln-859"></a>    <span class="n">ENDIF</span>
<a name="ln-860"></a>    <span class="k">CALL </span><span class="n">VerifyUniqueChillerName</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="n">errflag</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39; Name&#39;</span><span class="p">)</span>
<a name="ln-861"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">errflag</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-862"></a><span class="k">      </span><span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-863"></a>    <span class="n">ENDIF</span>
<a name="ln-864"></a>    <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span>                <span class="o">=</span> <span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a name="ln-865"></a>
<a name="ln-866"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;AIRCOOLED&#39;</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-867"></a><span class="k">      </span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span>       <span class="o">=</span> <span class="n">AirCooled</span>
<a name="ln-868"></a>    <span class="n">ELSEIF</span> <span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;WATERCOOLED&#39;</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-869"></a><span class="k">      </span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span>       <span class="o">=</span> <span class="n">WaterCooled</span>
<a name="ln-870"></a>    <span class="n">ELSEIF</span> <span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;EVAPORATIVELYCOOLED&#39;</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-871"></a><span class="k">      </span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span>       <span class="o">=</span> <span class="n">EvapCooled</span>
<a name="ln-872"></a>    <span class="k">ELSE</span>
<a name="ln-873"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">2</span><span class="p">)))</span>
<a name="ln-874"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-875"></a>      <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-876"></a>    <span class="n">ENDIF</span>
<a name="ln-877"></a>
<a name="ln-878"></a>
<a name="ln-879"></a>    <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span>              <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a name="ln-880"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-881"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cNumericFieldNames</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">RoundSigDigits</span><span class="p">(</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="mi">2</span><span class="p">)))</span>
<a name="ln-882"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-883"></a>      <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-884"></a>    <span class="n">ENDIF</span>
<a name="ln-885"></a>    <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">COP</span>                 <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<a name="ln-886"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-887"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cNumericFieldNames</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">RoundSigDigits</span><span class="p">(</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span><span class="mi">3</span><span class="p">)))</span>
<a name="ln-888"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-889"></a>      <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-890"></a>    <span class="n">ENDIF</span>
<a name="ln-891"></a>    <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletNodeNum</span>    <span class="o">=</span> <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-892"></a>               <span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-893"></a>               <span class="n">NodeType_Water</span><span class="p">,</span><span class="n">NodeConnectionType_Inlet</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-894"></a>    <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span>   <span class="o">=</span> <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-895"></a>               <span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-896"></a>               <span class="n">NodeType_Water</span><span class="p">,</span><span class="n">NodeConnectionType_Outlet</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-897"></a>    <span class="k">CALL </span><span class="n">TestCompSet</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span><span class="s1">&#39;Chilled Water Nodes&#39;</span><span class="p">)</span>
<a name="ln-898"></a>
<a name="ln-899"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">AirCooled</span> <span class="p">.</span><span class="nb">or</span><span class="p">.</span>   <span class="p">&amp;</span>
<a name="ln-900"></a>       <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-901"></a>      <span class="c">! Connection not required for air or evap cooled condenser</span>
<a name="ln-902"></a>       <span class="c">!If the condenser inlet is blank for air cooled and evap cooled condensers then supply a generic name</span>
<a name="ln-903"></a>      <span class="c">!  since it is not used elsewhere for connection</span>
<a name="ln-904"></a>      <span class="c">! for transition purposes, add this node if not there.</span>
<a name="ln-905"></a>      <span class="k">IF</span><span class="p">(</span><span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span><span class="k">THEN</span>
<a name="ln-906"></a><span class="k">        IF</span> <span class="p">(</span><span class="nb">LEN_TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">MaxNameLength</span> <span class="o">-</span> <span class="mi">21</span><span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span> <span class="c">! protect against long name leading to &gt; 100 chars</span>
<a name="ln-907"></a>          <span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">=</span> <span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39; CONDENSER INLET NODE&#39;</span>
<a name="ln-908"></a>        <span class="k">ELSE</span>
<a name="ln-909"></a><span class="k">          </span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">=</span> <span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)(</span><span class="mi">1</span><span class="p">:</span><span class="mi">79</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39; CONDENSER INLET NODE&#39;</span>
<a name="ln-910"></a>        <span class="n">ENDIF</span>
<a name="ln-911"></a>      <span class="k">End If</span>
<a name="ln-912"></a><span class="k">      IF</span><span class="p">(</span><span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="p">)</span><span class="k">THEN</span>
<a name="ln-913"></a><span class="k">        IF</span> <span class="p">(</span><span class="nb">LEN_TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">MaxNameLength</span> <span class="o">-</span> <span class="mi">22</span><span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span> <span class="c">! protect against long name leading to &gt; 100 chars</span>
<a name="ln-914"></a>          <span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">=</span> <span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39; CONDENSER OUTLET NODE&#39;</span>
<a name="ln-915"></a>        <span class="k">ELSE</span>
<a name="ln-916"></a><span class="k">          </span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">=</span> <span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)(</span><span class="mi">1</span><span class="p">:</span><span class="mi">78</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39; CONDENSER OUTLET NODE&#39;</span>
<a name="ln-917"></a>        <span class="n">ENDIF</span>
<a name="ln-918"></a>      <span class="k">END IF</span>
<a name="ln-919"></a>
<a name="ln-920"></a><span class="k">      </span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span>    <span class="o">=</span> <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-921"></a>               <span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-922"></a>               <span class="n">NodeType_Air</span><span class="p">,</span><span class="n">NodeConnectionType_OutsideAirReference</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-923"></a>      <span class="k">CALL </span><span class="n">CheckAndAddAirNodeNumber</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span><span class="p">,</span><span class="n">Okay</span><span class="p">)</span>
<a name="ln-924"></a>      <span class="k">IF</span> <span class="p">(.</span><span class="nb">not</span><span class="p">.</span> <span class="n">Okay</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-925"></a><span class="k">        CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;, Adding OutdoorAir:Node=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">)))</span>
<a name="ln-926"></a>      <span class="n">ENDIF</span>
<a name="ln-927"></a>
<a name="ln-928"></a>      <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletNodeNum</span>   <span class="o">=</span> <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-929"></a>               <span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-930"></a>               <span class="n">NodeType_Air</span><span class="p">,</span><span class="n">NodeConnectionType_Outlet</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-931"></a>    <span class="n">ELSEIF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-932"></a><span class="k">      </span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span>    <span class="o">=</span> <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-933"></a>               <span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-934"></a>               <span class="n">NodeType_Water</span><span class="p">,</span><span class="n">NodeConnectionType_Inlet</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-935"></a>      <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletNodeNum</span>   <span class="o">=</span> <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-936"></a>               <span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-937"></a>               <span class="n">NodeType_Water</span><span class="p">,</span><span class="n">NodeConnectionType_Outlet</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-938"></a>      <span class="k">CALL </span><span class="n">TestCompSet</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span><span class="s1">&#39;Condenser Water Nodes&#39;</span><span class="p">)</span>
<a name="ln-939"></a>      <span class="c">!Condenser Inlet node name is necessary for Water Cooled</span>
<a name="ln-940"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-941"></a><span class="k">        CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid, &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;is blank &#39;</span><span class="p">)</span>
<a name="ln-942"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-943"></a>        <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-944"></a>      <span class="n">ElseIf</span> <span class="p">(</span> <span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="p">)</span> <span class="k">Then</span>
<a name="ln-945"></a><span class="k">        CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid, &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;is blank &#39;</span><span class="p">)</span>
<a name="ln-946"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-947"></a>        <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-948"></a>      <span class="n">ENDIF</span>
<a name="ln-949"></a>    <span class="k">ELSE</span>
<a name="ln-950"></a><span class="k">      </span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span>    <span class="o">=</span> <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-951"></a>               <span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-952"></a>               <span class="n">NodeType_Unknown</span><span class="p">,</span><span class="n">NodeConnectionType_Inlet</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-953"></a>      <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletNodeNum</span>   <span class="o">=</span> <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-954"></a>               <span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-955"></a>               <span class="n">NodeType_Unknown</span><span class="p">,</span><span class="n">NodeConnectionType_Outlet</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-956"></a>      <span class="k">CALL </span><span class="n">TestCompSet</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span><span class="s1">&#39;Condenser (unknown?) Nodes&#39;</span><span class="p">)</span>
<a name="ln-957"></a>      <span class="c">!Condenser Inlet node name is necessary</span>
<a name="ln-958"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-959"></a><span class="k">        CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid, &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;is blank &#39;</span><span class="p">)</span>
<a name="ln-960"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-961"></a>        <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-962"></a>      <span class="n">ElseIf</span> <span class="p">(</span> <span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="p">)</span> <span class="k">Then</span>
<a name="ln-963"></a><span class="k">        CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid, &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;is blank &#39;</span><span class="p">)</span>
<a name="ln-964"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-965"></a>        <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-966"></a>      <span class="n">ENDIF</span>
<a name="ln-967"></a>    <span class="n">ENDIF</span>
<a name="ln-968"></a>
<a name="ln-969"></a>
<a name="ln-970"></a>    <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">MinPartLoadRat</span>      <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<a name="ln-971"></a>    <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">MaxPartLoadRat</span>      <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<a name="ln-972"></a>    <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">OptPartLoadRat</span>      <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<a name="ln-973"></a>    <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempDesCondIn</span>       <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<a name="ln-974"></a>    <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempRiseCoef</span>        <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<a name="ln-975"></a>    <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempDesEvapOut</span>      <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<a name="ln-976"></a>    <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapVolFlowRate</span>     <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
<a name="ln-977"></a>    <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span>     <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<a name="ln-978"></a>    <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">CapRatCoef</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>       <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>
<a name="ln-979"></a>    <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">CapRatCoef</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>       <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
<a name="ln-980"></a>    <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">CapRatCoef</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>       <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span>
<a name="ln-981"></a>    <span class="k">IF</span> <span class="p">((</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="o">+</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">+</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">13</span><span class="p">))</span> <span class="o">==</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-982"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;: Sum of Capacity Ratio Coef = 0.0, chiller=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-983"></a>      <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-984"></a>    <span class="n">ENDIF</span>
<a name="ln-985"></a>    <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">PowerRatCoef</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>     <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span>
<a name="ln-986"></a>    <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">PowerRatCoef</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>     <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
<a name="ln-987"></a>    <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">PowerRatCoef</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>     <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
<a name="ln-988"></a>    <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FullLoadCoef</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>     <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">17</span><span class="p">)</span>
<a name="ln-989"></a>    <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FullLoadCoef</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>     <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span>
<a name="ln-990"></a>    <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FullLoadCoef</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>     <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">19</span><span class="p">)</span>
<a name="ln-991"></a>    <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempLowLimitEvapOut</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<a name="ln-992"></a>    <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">SizFac</span>              <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">22</span><span class="p">)</span>
<a name="ln-993"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">SizFac</span> <span class="o">&lt;=</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">SizFac</span> <span class="o">=</span> <span class="mf">1.0d0</span>
<a name="ln-994"></a>
<a name="ln-995"></a>    <span class="k">SELECT CASE</span> <span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">7</span><span class="p">)))</span>
<a name="ln-996"></a>    <span class="k">CASE</span> <span class="p">(</span> <span class="s1">&#39;CONSTANTFLOW&#39;</span> <span class="p">)</span>
<a name="ln-997"></a>      <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">=</span> <span class="n">ConstantFlow</span>
<a name="ln-998"></a>    <span class="k">CASE</span> <span class="p">(</span> <span class="s1">&#39;VARIABLEFLOW&#39;</span> <span class="p">)</span>
<a name="ln-999"></a>      <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">=</span> <span class="n">LeavingSetpointModulated</span>
<a name="ln-1000"></a>      <span class="k">CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="n">RoutineName</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&quot;&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;&quot;,&#39;</span><span class="p">)</span>
<a name="ln-1001"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">7</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">7</span><span class="p">)))</span>
<a name="ln-1002"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Key choice is now called &quot;LeavingSetpointModulated&quot; and the simulation continues&#39;</span><span class="p">)</span>
<a name="ln-1003"></a>    <span class="k">CASE</span> <span class="p">(</span><span class="s1">&#39;LEAVINGSETPOINTMODULATED&#39;</span><span class="p">)</span>
<a name="ln-1004"></a>      <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">=</span> <span class="n">LeavingSetpointModulated</span>
<a name="ln-1005"></a>    <span class="k">CASE</span> <span class="p">(</span><span class="s1">&#39;NOTMODULATED&#39;</span><span class="p">)</span>
<a name="ln-1006"></a>      <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">=</span> <span class="n">NotModulated</span>
<a name="ln-1007"></a>    <span class="k">CASE </span><span class="n">DEFAULT</span>
<a name="ln-1008"></a>      <span class="k">CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="n">RoutineName</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&quot;&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;&quot;,&#39;</span><span class="p">)</span>
<a name="ln-1009"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">7</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">7</span><span class="p">)))</span>
<a name="ln-1010"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Available choices are ConstantFlow, NotModulated, or LeavingSetpointModulated&#39;</span><span class="p">)</span>
<a name="ln-1011"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Flow mode NotModulated is assumed and the simulation continues.&#39;</span><span class="p">)</span>
<a name="ln-1012"></a>      <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">=</span> <span class="n">NotModulated</span>
<a name="ln-1013"></a>    <span class="k">END SELECT</span>
<a name="ln-1014"></a>
<a name="ln-1015"></a>   <span class="c">! These are the Heat Recovery Inputs</span>
<a name="ln-1016"></a>    <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">DesignHeatRecVolFlowRate</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">21</span><span class="p">)</span>
<a name="ln-1017"></a>    <span class="k">IF</span> <span class="p">((</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">DesignHeatRecVolFlowRate</span> <span class="o">&gt;</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="p">&amp;</span>
<a name="ln-1018"></a>        <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">DesignHeatRecVolFlowRate</span> <span class="o">==</span> <span class="n">Autosize</span> <span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1019"></a><span class="k">      </span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1020"></a>      <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span>   <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-1021"></a>               <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-1022"></a>               <span class="n">NodeType_Water</span><span class="p">,</span><span class="n">NodeConnectionType_Inlet</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-1023"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1024"></a><span class="k">        CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">8</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">8</span><span class="p">)))</span>
<a name="ln-1025"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-1026"></a>        <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1027"></a>      <span class="n">ENDIF</span>
<a name="ln-1028"></a>      <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecOutletNodeNum</span>   <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-1029"></a>               <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">9</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-1030"></a>               <span class="n">NodeType_Water</span><span class="p">,</span><span class="n">NodeConnectionType_Outlet</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-1031"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecOutletNodeNum</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1032"></a><span class="k">        CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">9</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">9</span><span class="p">)))</span>
<a name="ln-1033"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-1034"></a>        <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1035"></a>      <span class="n">ENDIF</span>
<a name="ln-1036"></a>
<a name="ln-1037"></a>      <span class="k">CALL </span><span class="n">TestCompSet</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">9</span><span class="p">),</span><span class="s1">&#39;Heat Recovery Nodes&#39;</span><span class="p">)</span>
<a name="ln-1038"></a>      <span class="k">IF</span> <span class="p">(</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">DesignHeatRecVolFlowRate</span> <span class="o">&gt;</span> <span class="mf">0.d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1039"></a><span class="k">        CALL </span><span class="n">RegisterPlantCompDesignFlow</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1040"></a>                                <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">DesignHeatRecVolFlowRate</span> <span class="p">)</span>
<a name="ln-1041"></a>      <span class="n">ENDIF</span>
<a name="ln-1042"></a>      <span class="c">! Condenser flow rate must be specified for heat reclaim</span>
<a name="ln-1043"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">AirCooled</span> <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-1044"></a>          <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1045"></a><span class="k">        IF</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span> <span class="p">.</span><span class="n">LE</span><span class="p">.</span> <span class="mf">0.0d0</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-1046"></a><span class="k">          CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cNumericFieldNames</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">RoundSigDigits</span><span class="p">(</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span><span class="mi">6</span><span class="p">)))</span>
<a name="ln-1047"></a>          <span class="k">CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Condenser fluid flow rate must be specified for Heat Reclaim applications.&#39;</span><span class="p">)</span>
<a name="ln-1048"></a>          <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-1049"></a>          <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1050"></a>        <span class="k">END IF</span>
<a name="ln-1051"></a><span class="k">      END IF</span>
<a name="ln-1052"></a>
<a name="ln-1053"></a><span class="k">      IF</span><span class="p">(</span><span class="n">NumNums</span> <span class="o">&gt;</span> <span class="mi">24</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1054"></a><span class="k">        IF</span> <span class="p">(</span> <span class="p">.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">lNumericFieldBlanks</span><span class="p">(</span><span class="mi">25</span><span class="p">))</span> <span class="k">THEN</span>
<a name="ln-1055"></a><span class="k">          </span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecCapacityFraction</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
<a name="ln-1056"></a>        <span class="k">ELSE</span>
<a name="ln-1057"></a><span class="k">          </span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecCapacityFraction</span> <span class="o">=</span> <span class="mf">1.d0</span>
<a name="ln-1058"></a>        <span class="n">ENDIF</span>
<a name="ln-1059"></a>      <span class="k">ELSE</span>
<a name="ln-1060"></a><span class="k">        </span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecCapacityFraction</span> <span class="o">=</span> <span class="mf">1.d0</span>
<a name="ln-1061"></a>      <span class="n">ENDIF</span>
<a name="ln-1062"></a>
<a name="ln-1063"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">NumAlphas</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1064"></a><span class="k">        IF</span> <span class="p">(</span> <span class="p">.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">11</span><span class="p">))</span> <span class="k">THEN</span>
<a name="ln-1065"></a><span class="k">          </span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecInletLimitSchedNum</span> <span class="o">=</span> <span class="n">GetScheduleIndex</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">11</span><span class="p">))</span>
<a name="ln-1066"></a>          <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecInletLimitSchedNum</span>  <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1067"></a><span class="k">            CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="n">RoutineName</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&quot;&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span>
<a name="ln-1068"></a>            <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">11</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">11</span><span class="p">)))</span>
<a name="ln-1069"></a>            <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">True</span><span class="p">.</span>
<a name="ln-1070"></a>          <span class="n">ENDIF</span>
<a name="ln-1071"></a>        <span class="k">ELSE</span>
<a name="ln-1072"></a><span class="k">          </span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecInletLimitSchedNum</span> <span class="o">=</span> <span class="mi">0</span>
<a name="ln-1073"></a>        <span class="n">ENDIF</span>
<a name="ln-1074"></a>      <span class="k">ELSE</span>
<a name="ln-1075"></a><span class="k">        </span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecInletLimitSchedNum</span> <span class="o">=</span> <span class="mi">0</span>
<a name="ln-1076"></a>      <span class="n">ENDIF</span>
<a name="ln-1077"></a>
<a name="ln-1078"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">NumAlphas</span> <span class="o">&gt;</span> <span class="mi">11</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1079"></a><span class="k">        IF</span><span class="p">(</span> <span class="p">.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">12</span><span class="p">))</span> <span class="k">THEN</span>
<a name="ln-1080"></a><span class="k">          </span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecSetpointNodeNum</span> <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-1081"></a>              <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">12</span><span class="p">),</span> <span class="n">ErrorsFound</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-1082"></a>                           <span class="n">NodeType_Water</span><span class="p">,</span><span class="n">NodeConnectionType_Sensor</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-1083"></a>        <span class="k">ELSE</span>
<a name="ln-1084"></a><span class="k">          </span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecSetpointNodeNum</span> <span class="o">=</span> <span class="mi">0</span>
<a name="ln-1085"></a>        <span class="n">ENDIF</span>
<a name="ln-1086"></a>      <span class="k">ELSE</span>
<a name="ln-1087"></a><span class="k">        </span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecSetpointNodeNum</span> <span class="o">=</span> <span class="mi">0</span>
<a name="ln-1088"></a>      <span class="n">ENDIf</span>
<a name="ln-1089"></a>
<a name="ln-1090"></a>    <span class="k">ELSE</span>
<a name="ln-1091"></a><span class="k">      </span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="o">=</span><span class="p">.</span><span class="n">false</span><span class="p">.</span>
<a name="ln-1092"></a>      <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">DesignHeatRecMassFlowRate</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-1093"></a>      <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span>   <span class="o">=</span> <span class="mi">0</span>
<a name="ln-1094"></a>      <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecOutletNodeNum</span>   <span class="o">=</span> <span class="mi">0</span>
<a name="ln-1095"></a>      <span class="c">! if heat recovery is not used, don&#39;t care about condenser flow rate for air/evap-cooled equip.</span>
<a name="ln-1096"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">AirCooled</span> <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-1097"></a>          <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1098"></a><span class="k">        </span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span> <span class="o">=</span> <span class="mf">0.0011d0</span>  <span class="c">! set to avoid errors in calc routine</span>
<a name="ln-1099"></a>      <span class="k">END IF</span>
<a name="ln-1100"></a><span class="k">      IF</span> <span class="p">((.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">8</span><span class="p">))</span>  <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">(.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">9</span><span class="p">)))</span> <span class="k">THEN</span>
<a name="ln-1101"></a><span class="k">        CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="s1">&#39;Since Design Heat Flow Rate = 0.0, Heat Recovery inactive for &#39;</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-1102"></a>                             <span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-1103"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;However, Node names were specified for Heat Recovery inlet or outlet nodes&#39;</span><span class="p">)</span>
<a name="ln-1104"></a>      <span class="k">END IF</span>
<a name="ln-1105"></a>
<a name="ln-1106"></a><span class="k">    END IF</span>
<a name="ln-1107"></a>    <span class="c">!   Basin heater power as a function of temperature must be greater than or equal to 0</span>
<a name="ln-1108"></a>    <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPowerFTempDiff</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">23</span><span class="p">)</span>
<a name="ln-1109"></a>    <span class="k">IF</span><span class="p">(</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">23</span><span class="p">)</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1110"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;, &quot;&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span><span class="o">//</span><span class="p">&amp;</span>
<a name="ln-1111"></a>                     <span class="s1">&#39;&quot; TRIM(cNumericFieldNames(23)) must be &gt;= 0&#39;</span><span class="p">)</span>
<a name="ln-1112"></a>      <span class="n">ErrorsFound</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-1113"></a>    <span class="k">END IF</span>
<a name="ln-1114"></a>
<a name="ln-1115"></a><span class="k">    </span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSetPointTemp</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>
<a name="ln-1116"></a>
<a name="ln-1117"></a>    <span class="k">IF</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPowerFTempDiff</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1118"></a><span class="k">      IF</span><span class="p">(</span><span class="n">NumNums</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="mi">24</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1119"></a><span class="k">        </span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSetPointTemp</span> <span class="o">=</span> <span class="mf">2.0d0</span>
<a name="ln-1120"></a>      <span class="n">ENDIF</span>
<a name="ln-1121"></a>      <span class="k">IF</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSetPointTemp</span> <span class="o">&lt;</span> <span class="mf">2.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1122"></a><span class="k">        CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;:&quot;&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span><span class="o">//</span><span class="p">&amp;</span>
<a name="ln-1123"></a>           <span class="s1">&#39;&quot;, &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cNumericFieldNames</span><span class="p">(</span><span class="mi">24</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39; is less than 2 deg C. Freezing could occur.&#39;</span><span class="p">)</span>
<a name="ln-1124"></a>      <span class="k">END IF</span>
<a name="ln-1125"></a><span class="k">    END IF</span>
<a name="ln-1126"></a>
<a name="ln-1127"></a><span class="k">    IF</span><span class="p">(.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span><span class="k">THEN</span>
<a name="ln-1128"></a><span class="k">      </span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSchedulePtr</span>   <span class="o">=</span> <span class="n">GetScheduleIndex</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<a name="ln-1129"></a>      <span class="k">IF</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSchedulePtr</span> <span class="p">.</span><span class="n">EQ</span><span class="p">.</span> <span class="mi">0</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-1130"></a><span class="k">        CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;, &quot;&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span><span class="o">//</span><span class="p">&amp;</span>
<a name="ln-1131"></a>                       <span class="s1">&#39;&quot; TRIM(cAlphaFieldNames(10)) &quot;&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span> <span class="p">&amp;</span>
<a name="ln-1132"></a>                       <span class="o">//</span><span class="s1">&#39;&quot; was not found. Basin heater operation will not be modeled and the simulation continues&#39;</span><span class="p">)</span>
<a name="ln-1133"></a>      <span class="k">END IF</span>
<a name="ln-1134"></a><span class="k">    END IF</span>
<a name="ln-1135"></a>
<a name="ln-1136"></a><span class="k">  END DO</span>
<a name="ln-1137"></a>
<a name="ln-1138"></a><span class="k">  IF</span> <span class="p">(</span><span class="n">ErrorsFound</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1139"></a><span class="k">    CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;Errors found in processing input for &#39;</span><span class="o">//</span> <span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span> <span class="p">)</span>
<a name="ln-1140"></a>  <span class="n">ENDIF</span>
<a name="ln-1141"></a>
<a name="ln-1142"></a>  <span class="k">DO </span><span class="n">ChillerNum</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">NumElectricChillers</span>
<a name="ln-1143"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Electric Power [W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1144"></a>          <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Power</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1145"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Electric Energy [J]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1146"></a>          <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Energy</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Sum&#39;</span><span class="p">,</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-1147"></a>                              <span class="n">ResourceTypeKey</span><span class="o">=</span><span class="s1">&#39;ELECTRICITY&#39;</span><span class="p">,</span><span class="n">EndUseKey</span><span class="o">=</span><span class="s1">&#39;Cooling&#39;</span><span class="p">,</span><span class="n">GroupKey</span><span class="o">=</span><span class="s1">&#39;Plant&#39;</span><span class="p">)</span>
<a name="ln-1148"></a>
<a name="ln-1149"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Evaporator Cooling Rate [W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1150"></a>          <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QEvap</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1151"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Evaporator Cooling Energy [J]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1152"></a>          <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapEnergy</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Sum&#39;</span><span class="p">,</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-1153"></a>                              <span class="n">ResourceTypeKey</span><span class="o">=</span><span class="s1">&#39;ENERGYTRANSFER&#39;</span><span class="p">,</span><span class="n">EndUseKey</span><span class="o">=</span><span class="s1">&#39;CHILLERS&#39;</span><span class="p">,</span><span class="n">GroupKey</span><span class="o">=</span><span class="s1">&#39;Plant&#39;</span><span class="p">)</span>
<a name="ln-1154"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Evaporator Inlet Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1155"></a>          <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1156"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Evaporator Outlet Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1157"></a>          <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1158"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Evaporator Mass Flow Rate [kg/s]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1159"></a>          <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Evapmdot</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1160"></a>
<a name="ln-1161"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Condenser Heat Transfer Rate [W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1162"></a>          <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QCond</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1163"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Condenser Heat Transfer Energy [J]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1164"></a>          <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondEnergy</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Sum&#39;</span><span class="p">,</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-1165"></a>                              <span class="n">ResourceTypeKey</span><span class="o">=</span><span class="s1">&#39;ENERGYTRANSFER&#39;</span><span class="p">,</span><span class="n">EndUseKey</span><span class="o">=</span><span class="s1">&#39;HEATREJECTION&#39;</span><span class="p">,</span><span class="n">GroupKey</span><span class="o">=</span><span class="s1">&#39;Plant&#39;</span><span class="p">)</span>
<a name="ln-1166"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller COP [W/W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1167"></a>          <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">ActualCOP</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1168"></a>
<a name="ln-1169"></a>        <span class="c">!Condenser mass flow and outlet temp are valid for water cooled</span>
<a name="ln-1170"></a>     <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-1171"></a><span class="k">       CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Condenser Inlet Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1172"></a>            <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1173"></a>       <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Condenser Outlet Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1174"></a>            <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1175"></a>       <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Condenser Mass Flow Rate [kg/s]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1176"></a>            <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Condmdot</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1177"></a>     <span class="n">ELSEIF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">AirCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1178"></a><span class="k">       CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Condenser Inlet Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1179"></a>            <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1180"></a>     <span class="n">ELSEIF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1181"></a><span class="k">       CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Condenser Inlet Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1182"></a>            <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1183"></a>       <span class="k">IF</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPowerFTempDiff</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="mf">0.0d0</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-1184"></a><span class="k">         CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Basin Heater Electric Power [W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1185"></a>          <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPower</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1186"></a>         <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Basin Heater Electric Energy [J]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1187"></a>          <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterConsumption</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Sum&#39;</span><span class="p">,</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1188"></a>          <span class="n">ResourceTypeKey</span><span class="o">=</span><span class="s1">&#39;Electric&#39;</span><span class="p">,</span><span class="n">EndUseKey</span><span class="o">=</span><span class="s1">&#39;CHILLERS&#39;</span><span class="p">,</span><span class="n">GroupKey</span><span class="o">=</span><span class="s1">&#39;Plant&#39;</span><span class="p">)</span>
<a name="ln-1189"></a>       <span class="k">END IF</span>
<a name="ln-1190"></a><span class="k">     </span><span class="n">ENDIF</span>
<a name="ln-1191"></a>
<a name="ln-1192"></a>     <span class="c">!If heat recovery is active then setup report variables</span>
<a name="ln-1193"></a>     <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1194"></a><span class="k">         CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Total Recovered Heat Rate [W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1195"></a>           <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">QHeatRecovery</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1196"></a>         <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Total Recovered Heat Energy [J]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1197"></a>           <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">EnergyHeatRecovery</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Sum&#39;</span><span class="p">,</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-1198"></a>                               <span class="n">ResourceTypeKey</span><span class="o">=</span><span class="s1">&#39;ENERGYTRANSFER&#39;</span><span class="p">,</span><span class="n">EndUseKey</span><span class="o">=</span><span class="s1">&#39;HEATRECOVERY&#39;</span><span class="p">,</span><span class="n">GroupKey</span><span class="o">=</span><span class="s1">&#39;Plant&#39;</span><span class="p">)</span>
<a name="ln-1199"></a>         <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Heat Recovery Inlet Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1200"></a>           <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecInletTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1201"></a>
<a name="ln-1202"></a>         <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Heat Recovery Outlet Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1203"></a>           <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecOutletTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1204"></a>
<a name="ln-1205"></a>         <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Heat Recovery Mass Flow Rate [kg/s]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1206"></a>           <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecMassFlow</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1207"></a>
<a name="ln-1208"></a>         <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Effective Heat Rejection Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1209"></a>           <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">ChillerCondAvgTemp</span><span class="p">,</span> <span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1210"></a>
<a name="ln-1211"></a>     <span class="n">ENDIF</span>
<a name="ln-1212"></a>     <span class="k">IF</span> <span class="p">(</span><span class="n">AnyEnergyManagementSystemInModel</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1213"></a><span class="k">       CALL </span><span class="n">SetupEMSInternalVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Nominal Capacity&#39;</span><span class="p">,</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="s1">&#39;[W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1214"></a>                                     <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span>  <span class="p">)</span>
<a name="ln-1215"></a>     <span class="n">ENDIF</span>
<a name="ln-1216"></a>  <span class="k">END DO</span>
<a name="ln-1217"></a>
<a name="ln-1218"></a>
<a name="ln-1219"></a>
<a name="ln-1220"></a><span class="k">RETURN</span>
<a name="ln-1221"></a><span class="k">END SUBROUTINE </span><span class="n">GetElectricChillerInput</span>
<a name="ln-1222"></a>
<a name="ln-1223"></a>
<a name="ln-1224"></a><span class="k">SUBROUTINE </span><span class="n">GetEngineDrivenChillerInput</span>
<a name="ln-1225"></a>            <span class="c">! SUBROUTINE INFORMATION:</span>
<a name="ln-1226"></a>            <span class="c">!       AUTHOR:          Dan Fisher / Brandon Anderson</span>
<a name="ln-1227"></a>            <span class="c">!       DATE WRITTEN:    September 2000</span>
<a name="ln-1228"></a>            <span class="c">!</span>
<a name="ln-1229"></a>            <span class="c">! PURPOSE OF THIS SUBROUTINE:</span>
<a name="ln-1230"></a>            <span class="c">! This routine will get the input</span>
<a name="ln-1231"></a>            <span class="c">! required by the EngineDriven Chiller model.</span>
<a name="ln-1232"></a>
<a name="ln-1233"></a>
<a name="ln-1234"></a>            <span class="c">! METHODOLOGY EMPLOYED:</span>
<a name="ln-1235"></a>
<a name="ln-1236"></a>            <span class="c">! REFERENCES: na</span>
<a name="ln-1237"></a>
<a name="ln-1238"></a>            <span class="c">! USE STATEMENTS:</span>
<a name="ln-1239"></a>  <span class="k">USE </span><span class="n">InputProcessor</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">GetNumObjectsFound</span><span class="p">,</span> <span class="n">GetObjectItem</span><span class="p">,</span> <span class="n">VerifyName</span>
<a name="ln-1240"></a>  <span class="k">USE </span><span class="n">DataIPShortCuts</span>  <span class="c">! Data for field names, blank numerics</span>
<a name="ln-1241"></a>  <span class="k">USE </span><span class="n">CurveManager</span><span class="p">,</span>   <span class="n">ONLY</span> <span class="p">:</span> <span class="n">GetCurveIndex</span>
<a name="ln-1242"></a>  <span class="k">USE </span><span class="n">BranchNodeConnections</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">TestCompSet</span>
<a name="ln-1243"></a>  <span class="k">USE </span><span class="n">NodeInputManager</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">GetOnlySingleNode</span>
<a name="ln-1244"></a>  <span class="k">USE </span><span class="n">GlobalNames</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">VerifyUniqueChillerName</span>
<a name="ln-1245"></a>  <span class="k">USE </span><span class="n">OutAirNodeManager</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">CheckAndAddAirNodeNumber</span>
<a name="ln-1246"></a>  <span class="k">USE </span><span class="n">General</span><span class="p">,</span>           <span class="n">ONLY</span><span class="p">:</span> <span class="n">RoundSigDigits</span>
<a name="ln-1247"></a>  <span class="k">USE </span><span class="n">PlantUtilities</span><span class="p">,</span>    <span class="n">ONLY</span><span class="p">:</span> <span class="n">RegisterPlantCompDesignFlow</span>
<a name="ln-1248"></a>  <span class="k">USE </span><span class="n">ScheduleManager</span><span class="p">,</span>   <span class="n">ONLY</span><span class="p">:</span> <span class="n">GetScheduleIndex</span>
<a name="ln-1249"></a>  <span class="k">USE </span><span class="n">DataGlobals</span><span class="p">,</span>       <span class="n">ONLY</span><span class="p">:</span> <span class="n">AnyEnergyManagementSystemInModel</span>
<a name="ln-1250"></a>
<a name="ln-1251"></a>  <span class="k">IMPLICIT NONE</span> <span class="c">!</span>
<a name="ln-1252"></a>
<a name="ln-1253"></a>            <span class="c">! PARAMETERS</span>
<a name="ln-1254"></a>  <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span> <span class="k">PARAMETER</span> <span class="kd">::</span> <span class="n">RoutineName</span><span class="o">=</span><span class="s1">&#39;GetEngineDrivenChillerInput: &#39;</span> <span class="c">! include trailing blank space</span>
<a name="ln-1255"></a>            <span class="c">!LOCAL VARIABLES</span>
<a name="ln-1256"></a>  <span class="kt">INTEGER</span>                     <span class="kd">::</span> <span class="n">ChillerNum</span> <span class="c">!chiller counter</span>
<a name="ln-1257"></a>  <span class="kt">INTEGER</span>                     <span class="kd">::</span> <span class="n">NumAlphas</span>  <span class="c">! Number of elements in the alpha array</span>
<a name="ln-1258"></a>  <span class="kt">INTEGER</span>                     <span class="kd">::</span> <span class="n">NumNums</span>    <span class="c">! Number of elements in the numeric array</span>
<a name="ln-1259"></a>  <span class="kt">INTEGER</span>                     <span class="kd">::</span> <span class="n">IOStat</span>     <span class="c">! IO Status when calling get input subroutine</span>
<a name="ln-1260"></a>  <span class="kt">LOGICAL</span><span class="p">,</span> <span class="k">SAVE</span> <span class="kd">::</span> <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">false</span><span class="p">.</span>
<a name="ln-1261"></a>  <span class="kt">LOGICAL</span>       <span class="kd">::</span> <span class="n">IsNotOK</span>               <span class="c">! Flag to verify name</span>
<a name="ln-1262"></a>  <span class="kt">LOGICAL</span>       <span class="kd">::</span> <span class="n">IsBlank</span>               <span class="c">! Flag for blank name</span>
<a name="ln-1263"></a>  <span class="kt">LOGICAL</span>       <span class="kd">::</span> <span class="n">errflag</span>
<a name="ln-1264"></a>  <span class="kt">LOGICAL</span>       <span class="kd">::</span> <span class="n">Okay</span>
<a name="ln-1265"></a>
<a name="ln-1266"></a>         <span class="c">!FLOW</span>
<a name="ln-1267"></a>  <span class="n">cCurrentModuleObject</span> <span class="o">=</span> <span class="s1">&#39;Chiller:EngineDriven&#39;</span>
<a name="ln-1268"></a>  <span class="n">NumEngineDrivenChillers</span> <span class="o">=</span> <span class="n">GetNumObjectsFound</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span>
<a name="ln-1269"></a>
<a name="ln-1270"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">NumEngineDrivenChillers</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1271"></a><span class="k">    CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;No &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39; equipment specified in input file&#39;</span><span class="p">)</span>
<a name="ln-1272"></a>    <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1273"></a>  <span class="n">ENDIF</span>
<a name="ln-1274"></a>            <span class="c">!See if load distribution manager has already gotten the input</span>
<a name="ln-1275"></a>  <span class="k">IF</span> <span class="p">(</span><span class="nb">ALLOCATED</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">))</span><span class="k">RETURN</span>
<a name="ln-1276"></a>
<a name="ln-1277"></a>         <span class="c">!ALLOCATE ARRAYS</span>
<a name="ln-1278"></a>  <span class="k">ALLOCATE</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">NumEngineDrivenChillers</span><span class="p">))</span>
<a name="ln-1279"></a>  <span class="k">ALLOCATE</span> <span class="p">(</span><span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">NumEngineDrivenChillers</span><span class="p">))</span>
<a name="ln-1280"></a>
<a name="ln-1281"></a>         <span class="c">!LOAD ARRAYS WITH EngineDriven CURVE FIT CHILLER DATA</span>
<a name="ln-1282"></a>  <span class="k">DO </span><span class="n">ChillerNum</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">,</span> <span class="n">NumEngineDrivenChillers</span>
<a name="ln-1283"></a>    <span class="k">CALL </span><span class="n">GetObjectItem</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">,</span><span class="n">ChillerNum</span><span class="p">,</span><span class="n">cAlphaArgs</span><span class="p">,</span><span class="n">NumAlphas</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1284"></a>                    <span class="n">rNumericArgs</span><span class="p">,</span><span class="n">NumNums</span><span class="p">,</span><span class="n">IOSTAT</span><span class="p">,</span><span class="n">AlphaBlank</span><span class="o">=</span><span class="n">lAlphaFieldBlanks</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1285"></a>                    <span class="n">AlphaFieldnames</span><span class="o">=</span><span class="n">cAlphaFieldNames</span><span class="p">,</span><span class="n">NumericFieldNames</span><span class="o">=</span><span class="n">cNumericFieldNames</span><span class="p">)</span>
<a name="ln-1286"></a>
<a name="ln-1287"></a>    <span class="n">IsNotOK</span><span class="o">=</span><span class="p">.</span><span class="n">false</span><span class="p">.</span>
<a name="ln-1288"></a>    <span class="n">IsBlank</span><span class="o">=</span><span class="p">.</span><span class="n">false</span><span class="p">.</span>
<a name="ln-1289"></a>    <span class="k">CALL </span><span class="n">VerifyName</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="n">EngineDrivenChiller</span><span class="p">%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span><span class="n">ChillerNum</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">IsNotOK</span><span class="p">,</span><span class="n">IsBlank</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39; Name&#39;</span><span class="p">)</span>
<a name="ln-1290"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">IsNotOK</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1291"></a><span class="k">      </span><span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1292"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">IsBlank</span><span class="p">)</span> <span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">=</span><span class="s1">&#39;xxxxx&#39;</span>
<a name="ln-1293"></a>    <span class="n">ENDIF</span>
<a name="ln-1294"></a>    <span class="k">CALL </span><span class="n">VerifyUniqueChillerName</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="n">errflag</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39; Name&#39;</span><span class="p">)</span>
<a name="ln-1295"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">errflag</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1296"></a><span class="k">      </span><span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1297"></a>    <span class="n">ENDIF</span>
<a name="ln-1298"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span>                <span class="o">=</span> <span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a name="ln-1299"></a>
<a name="ln-1300"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span>              <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a name="ln-1301"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1302"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cNumericFieldNames</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">RoundSigDigits</span><span class="p">(</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="mi">2</span><span class="p">)))</span>
<a name="ln-1303"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-1304"></a>      <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1305"></a>    <span class="n">ENDIF</span>
<a name="ln-1306"></a>
<a name="ln-1307"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">COP</span>                 <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<a name="ln-1308"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1309"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cNumericFieldNames</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">RoundSigDigits</span><span class="p">(</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span><span class="mi">2</span><span class="p">)))</span>
<a name="ln-1310"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-1311"></a>      <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1312"></a>    <span class="n">ENDIF</span>
<a name="ln-1313"></a>
<a name="ln-1314"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;AIRCOOLED&#39;</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1315"></a><span class="k">      </span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span>       <span class="o">=</span> <span class="n">AirCooled</span>
<a name="ln-1316"></a>    <span class="n">ELSEIF</span> <span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;WATERCOOLED&#39;</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1317"></a><span class="k">      </span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span>       <span class="o">=</span> <span class="n">WaterCooled</span>
<a name="ln-1318"></a>    <span class="n">ELSEIF</span> <span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;EVAPORATIVELYCOOLED&#39;</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1319"></a><span class="k">      </span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span>       <span class="o">=</span> <span class="n">EvapCooled</span>
<a name="ln-1320"></a>    <span class="k">ELSE</span>
<a name="ln-1321"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">2</span><span class="p">)))</span>
<a name="ln-1322"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-1323"></a>      <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1324"></a>    <span class="n">ENDIF</span>
<a name="ln-1325"></a>
<a name="ln-1326"></a>
<a name="ln-1327"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletNodeNum</span>    <span class="o">=</span>   <span class="p">&amp;</span>
<a name="ln-1328"></a>               <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-1329"></a>               <span class="n">NodeType_Water</span><span class="p">,</span><span class="n">NodeConnectionType_Inlet</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-1330"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span>   <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-1331"></a>               <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-1332"></a>               <span class="n">NodeType_Water</span><span class="p">,</span><span class="n">NodeConnectionType_Outlet</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-1333"></a>    <span class="k">CALL </span><span class="n">TestCompSet</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span><span class="s1">&#39;Chilled Water Nodes&#39;</span><span class="p">)</span>
<a name="ln-1334"></a>
<a name="ln-1335"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">AirCooled</span> <span class="p">.</span><span class="nb">or</span><span class="p">.</span>  <span class="p">&amp;</span>
<a name="ln-1336"></a>        <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1337"></a>      <span class="c">! Connection not required for air or evap cooled condenser</span>
<a name="ln-1338"></a>       <span class="c">!If the condenser inlet is blank for air cooled and evap cooled condensers then supply a generic name</span>
<a name="ln-1339"></a>      <span class="c">!  since it is not used elsewhere for connection</span>
<a name="ln-1340"></a>      <span class="k">IF</span><span class="p">(</span><span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span><span class="k">THEN</span>
<a name="ln-1341"></a><span class="k">        IF</span> <span class="p">(</span><span class="nb">LEN_TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">MaxNameLength</span> <span class="o">-</span> <span class="mi">21</span><span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span> <span class="c">! protect against long name leading to &gt; 100 chars</span>
<a name="ln-1342"></a>          <span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">=</span> <span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39; CONDENSER INLET NODE&#39;</span>
<a name="ln-1343"></a>        <span class="k">ELSE</span>
<a name="ln-1344"></a><span class="k">          </span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">=</span> <span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)(</span><span class="mi">1</span><span class="p">:</span><span class="mi">79</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39; CONDENSER INLET NODE&#39;</span>
<a name="ln-1345"></a>        <span class="n">ENDIF</span>
<a name="ln-1346"></a>      <span class="k">End If</span>
<a name="ln-1347"></a><span class="k">      IF</span><span class="p">(</span><span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="p">)</span><span class="k">THEN</span>
<a name="ln-1348"></a><span class="k">        IF</span> <span class="p">(</span><span class="nb">LEN_TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">MaxNameLength</span> <span class="o">-</span> <span class="mi">22</span><span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span> <span class="c">! protect against long name leading to &gt; 100 chars</span>
<a name="ln-1349"></a>          <span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">=</span> <span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39; CONDENSER OUTLET NODE&#39;</span>
<a name="ln-1350"></a>        <span class="k">ELSE</span>
<a name="ln-1351"></a><span class="k">          </span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">=</span> <span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)(</span><span class="mi">1</span><span class="p">:</span><span class="mi">78</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39; CONDENSER OUTLET NODE&#39;</span>
<a name="ln-1352"></a>        <span class="n">ENDIF</span>
<a name="ln-1353"></a>      <span class="k">END IF</span>
<a name="ln-1354"></a>
<a name="ln-1355"></a><span class="k">      </span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span>    <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-1356"></a>               <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-1357"></a>               <span class="n">NodeType_Air</span><span class="p">,</span><span class="n">NodeConnectionType_OutsideAirReference</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-1358"></a>      <span class="k">CALL </span><span class="n">CheckAndAddAirNodeNumber</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span><span class="p">,</span><span class="n">Okay</span><span class="p">)</span>
<a name="ln-1359"></a>      <span class="k">IF</span> <span class="p">(.</span><span class="nb">not</span><span class="p">.</span> <span class="n">Okay</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1360"></a><span class="k">        CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;, Adding OutdoorAir:Node=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">)))</span>
<a name="ln-1361"></a>      <span class="n">ENDIF</span>
<a name="ln-1362"></a>
<a name="ln-1363"></a>      <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletNodeNum</span>   <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-1364"></a>               <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-1365"></a>               <span class="n">NodeType_Air</span><span class="p">,</span><span class="n">NodeConnectionType_Outlet</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-1366"></a>      <span class="c">!CALL TestCompSet(TRIM(cCurrentModuleObject),cAlphaArgs(1),cAlphaArgs(5),cAlphaArgs(6),&#39;Condenser (Air) Nodes&#39;)</span>
<a name="ln-1367"></a>    <span class="n">ELSEIF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1368"></a><span class="k">      </span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span>    <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-1369"></a>               <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-1370"></a>               <span class="n">NodeType_Water</span><span class="p">,</span><span class="n">NodeConnectionType_Inlet</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-1371"></a>      <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletNodeNum</span>   <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-1372"></a>               <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-1373"></a>               <span class="n">NodeType_Water</span><span class="p">,</span><span class="n">NodeConnectionType_Outlet</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-1374"></a>      <span class="k">CALL </span><span class="n">TestCompSet</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span><span class="s1">&#39;Condenser Water Nodes&#39;</span><span class="p">)</span>
<a name="ln-1375"></a>      <span class="c">!Condenser Inlet node name is necessary for Water Cooled</span>
<a name="ln-1376"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1377"></a><span class="k">        CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid, &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39; is blank &#39;</span><span class="p">)</span>
<a name="ln-1378"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-1379"></a>        <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1380"></a>      <span class="n">ELSEIF</span> <span class="p">(</span> <span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1381"></a><span class="k">        CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid, &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39; is blank &#39;</span><span class="p">)</span>
<a name="ln-1382"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-1383"></a>        <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1384"></a>      <span class="n">ENDIF</span>
<a name="ln-1385"></a>    <span class="k">ELSE</span>
<a name="ln-1386"></a><span class="k">      </span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span>    <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-1387"></a>               <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-1388"></a>               <span class="n">NodeType_Unknown</span><span class="p">,</span><span class="n">NodeConnectionType_Inlet</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-1389"></a>      <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletNodeNum</span>   <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-1390"></a>               <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-1391"></a>               <span class="n">NodeType_Unknown</span><span class="p">,</span><span class="n">NodeConnectionType_Outlet</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-1392"></a>     <span class="k">CALL </span><span class="n">TestCompSet</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span><span class="s1">&#39;Condenser (unknown?) Nodes&#39;</span><span class="p">)</span>
<a name="ln-1393"></a>      <span class="c">!Condenser Inlet node name is necessary for Water Cooled</span>
<a name="ln-1394"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1395"></a><span class="k">        CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid, &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39; is blank &#39;</span><span class="p">)</span>
<a name="ln-1396"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-1397"></a>        <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1398"></a>      <span class="n">ELSEIF</span> <span class="p">(</span> <span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1399"></a><span class="k">        CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid, &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39; is blank &#39;</span><span class="p">)</span>
<a name="ln-1400"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-1401"></a>        <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1402"></a>      <span class="n">ENDIF</span>
<a name="ln-1403"></a>    <span class="n">ENDIF</span>
<a name="ln-1404"></a>
<a name="ln-1405"></a>
<a name="ln-1406"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">MinPartLoadRat</span>      <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<a name="ln-1407"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">MaxPartLoadRat</span>      <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<a name="ln-1408"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">OptPartLoadRat</span>      <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<a name="ln-1409"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempDesCondIn</span>       <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<a name="ln-1410"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempRiseCoef</span>        <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<a name="ln-1411"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempDesEvapOut</span>      <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<a name="ln-1412"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapVolFlowRate</span>     <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
<a name="ln-1413"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span>     <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<a name="ln-1414"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">CapRatCoef</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>       <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>
<a name="ln-1415"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">CapRatCoef</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>       <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
<a name="ln-1416"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">CapRatCoef</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>       <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span>
<a name="ln-1417"></a>    <span class="k">IF</span> <span class="p">((</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="o">+</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">+</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">13</span><span class="p">))</span> <span class="o">==</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1418"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;: Sum of Capacity Ratio Coef = 0.0, chiller=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-1419"></a>      <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1420"></a>    <span class="n">ENDIF</span>
<a name="ln-1421"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">PowerRatCoef</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>     <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span>
<a name="ln-1422"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">PowerRatCoef</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>     <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
<a name="ln-1423"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">PowerRatCoef</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>     <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
<a name="ln-1424"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FullLoadCoef</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>     <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">17</span><span class="p">)</span>
<a name="ln-1425"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FullLoadCoef</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>     <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span>
<a name="ln-1426"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FullLoadCoef</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>     <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">19</span><span class="p">)</span>
<a name="ln-1427"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempLowLimitEvapOut</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<a name="ln-1428"></a>
<a name="ln-1429"></a>
<a name="ln-1430"></a><span class="c">!Load Special EngineDriven Chiller Curve Fit Inputs</span>
<a name="ln-1431"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">ClngLoadtoFuelCurve</span> <span class="o">=</span> <span class="n">GetCurveIndex</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">7</span><span class="p">))</span> <span class="c">! convert curve name to number</span>
<a name="ln-1432"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">ClngLoadtoFuelCurve</span> <span class="p">.</span><span class="n">EQ</span><span class="p">.</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1433"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">7</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">7</span><span class="p">)))</span>
<a name="ln-1434"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-1435"></a>      <span class="n">ErrorsFound</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-1436"></a>    <span class="k">END IF</span>
<a name="ln-1437"></a>
<a name="ln-1438"></a><span class="k">    </span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">RecJacHeattoFuelCurve</span> <span class="o">=</span> <span class="n">GetCurveIndex</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">8</span><span class="p">))</span> <span class="c">! convert curve name to number</span>
<a name="ln-1439"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">RecJacHeattoFuelCurve</span> <span class="p">.</span><span class="n">EQ</span><span class="p">.</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1440"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">8</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">8</span><span class="p">)))</span>
<a name="ln-1441"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-1442"></a>      <span class="n">ErrorsFound</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-1443"></a>    <span class="k">END IF</span>
<a name="ln-1444"></a>
<a name="ln-1445"></a><span class="k">    </span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">RecLubeHeattoFuelCurve</span> <span class="o">=</span> <span class="n">GetCurveIndex</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">9</span><span class="p">))</span> <span class="c">! convert curve name to number</span>
<a name="ln-1446"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">RecLubeHeattoFuelCurve</span> <span class="p">.</span><span class="n">EQ</span><span class="p">.</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1447"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">9</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">9</span><span class="p">)))</span>
<a name="ln-1448"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-1449"></a>      <span class="n">ErrorsFound</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-1450"></a>    <span class="k">END IF</span>
<a name="ln-1451"></a>
<a name="ln-1452"></a><span class="k">    </span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TotExhausttoFuelCurve</span> <span class="o">=</span> <span class="n">GetCurveIndex</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span> <span class="c">! convert curve name to number</span>
<a name="ln-1453"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TotExhausttoFuelCurve</span> <span class="p">.</span><span class="n">EQ</span><span class="p">.</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1454"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">10</span><span class="p">)))</span>
<a name="ln-1455"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-1456"></a>      <span class="n">ErrorsFound</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-1457"></a>    <span class="k">END IF</span>
<a name="ln-1458"></a>
<a name="ln-1459"></a><span class="k">    </span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">ExhaustTempCurve</span> <span class="o">=</span> <span class="n">GetCurveIndex</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">11</span><span class="p">))</span> <span class="c">! convert curve name to number</span>
<a name="ln-1460"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">ExhaustTempCurve</span> <span class="p">.</span><span class="n">EQ</span><span class="p">.</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1461"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">11</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">11</span><span class="p">)))</span>
<a name="ln-1462"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-1463"></a>      <span class="n">ErrorsFound</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-1464"></a>    <span class="k">END IF</span>
<a name="ln-1465"></a>
<a name="ln-1466"></a><span class="k">    </span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">UACoef</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">21</span><span class="p">)</span>
<a name="ln-1467"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">UACoef</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">22</span><span class="p">)</span>
<a name="ln-1468"></a>
<a name="ln-1469"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">MaxExhaustperPowerOutput</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">23</span><span class="p">)</span>
<a name="ln-1470"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">DesignMinExitGasTemp</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>
<a name="ln-1471"></a>
<a name="ln-1472"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelType</span> <span class="o">=</span> <span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">12</span><span class="p">))</span>
<a name="ln-1473"></a>
<a name="ln-1474"></a>    <span class="k">SELECT CASE</span> <span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">12</span><span class="p">))</span>
<a name="ln-1475"></a>
<a name="ln-1476"></a>    <span class="k">CASE</span> <span class="p">(</span><span class="s1">&#39;Gas&#39;</span><span class="p">,</span><span class="s1">&#39;NATURALGAS&#39;</span><span class="p">,</span><span class="s1">&#39;NATURAL GAS&#39;</span><span class="p">)</span>
<a name="ln-1477"></a>      <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelType</span> <span class="o">=</span> <span class="s1">&#39;Gas&#39;</span>
<a name="ln-1478"></a>
<a name="ln-1479"></a>    <span class="k">CASE</span> <span class="p">(</span><span class="s1">&#39;DIESEL&#39;</span><span class="p">)</span>
<a name="ln-1480"></a>      <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelType</span> <span class="o">=</span> <span class="s1">&#39;Diesel&#39;</span>
<a name="ln-1481"></a>
<a name="ln-1482"></a>    <span class="k">CASE</span> <span class="p">(</span><span class="s1">&#39;GASOLINE&#39;</span><span class="p">)</span>
<a name="ln-1483"></a>      <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelType</span> <span class="o">=</span> <span class="s1">&#39;Gasoline&#39;</span>
<a name="ln-1484"></a>
<a name="ln-1485"></a>    <span class="k">CASE</span> <span class="p">(</span><span class="s1">&#39;FUEL OIL #1&#39;</span><span class="p">,</span><span class="s1">&#39;FUELOIL#1&#39;</span><span class="p">,</span><span class="s1">&#39;FUEL OIL&#39;</span><span class="p">,</span><span class="s1">&#39;DISTILLATE OIL&#39;</span><span class="p">)</span>
<a name="ln-1486"></a>       <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelType</span> <span class="o">=</span> <span class="s1">&#39;FuelOil#1&#39;</span>
<a name="ln-1487"></a>
<a name="ln-1488"></a>    <span class="k">CASE</span> <span class="p">(</span><span class="s1">&#39;FUEL OIL #2&#39;</span><span class="p">,</span><span class="s1">&#39;FUELOIL#2&#39;</span><span class="p">,</span><span class="s1">&#39;RESIDUAL OIL&#39;</span><span class="p">)</span>
<a name="ln-1489"></a>       <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelType</span> <span class="o">=</span> <span class="s1">&#39;FuelOil#2&#39;</span>
<a name="ln-1490"></a>
<a name="ln-1491"></a>    <span class="k">CASE</span> <span class="p">(</span><span class="s1">&#39;Propane&#39;</span><span class="p">,</span><span class="s1">&#39;LPG&#39;</span><span class="p">,</span><span class="s1">&#39;PROPANEGAS&#39;</span><span class="p">,</span><span class="s1">&#39;PROPANE GAS&#39;</span><span class="p">)</span>
<a name="ln-1492"></a>       <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelType</span> <span class="o">=</span> <span class="s1">&#39;Propane&#39;</span>
<a name="ln-1493"></a>
<a name="ln-1494"></a>    <span class="k">CASE</span> <span class="p">(</span><span class="s1">&#39;OTHERFUEL1&#39;</span><span class="p">)</span>
<a name="ln-1495"></a>       <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelType</span> <span class="o">=</span> <span class="s1">&#39;OtherFuel1&#39;</span>
<a name="ln-1496"></a>
<a name="ln-1497"></a>    <span class="k">CASE</span> <span class="p">(</span><span class="s1">&#39;OTHERFUEL2&#39;</span><span class="p">)</span>
<a name="ln-1498"></a>       <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelType</span> <span class="o">=</span> <span class="s1">&#39;OtherFuel2&#39;</span>
<a name="ln-1499"></a>
<a name="ln-1500"></a>    <span class="k">CASE </span><span class="n">DEFAULT</span>
<a name="ln-1501"></a>      <span class="k">CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">12</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">12</span><span class="p">)))</span>
<a name="ln-1502"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-1503"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Valid choices are Electricity, NaturalGas, PropaneGas, Diesel, Gasoline, FuelOil#1, FuelOil#2,&#39;</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-1504"></a>       <span class="s1">&#39;OtherFuel1 or OtherFuel2&#39;</span><span class="p">)</span>
<a name="ln-1505"></a>      <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1506"></a>    <span class="k">END SELECT</span>
<a name="ln-1507"></a>
<a name="ln-1508"></a>
<a name="ln-1509"></a><span class="k">    </span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelHeatingValue</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
<a name="ln-1510"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">DesignHeatRecVolFlowRate</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">26</span><span class="p">)</span>
<a name="ln-1511"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">DesignHeatRecVolFlowRate</span> <span class="o">&gt;</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1512"></a><span class="k">      </span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1513"></a>      <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span>   <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-1514"></a>               <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">13</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-1515"></a>               <span class="n">NodeType_Water</span><span class="p">,</span><span class="n">NodeConnectionType_Inlet</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-1516"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1517"></a><span class="k">        CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">13</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">13</span><span class="p">)))</span>
<a name="ln-1518"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-1519"></a>        <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1520"></a>      <span class="n">ENDIF</span>
<a name="ln-1521"></a>      <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecOutletNodeNum</span>   <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-1522"></a>               <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">14</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-1523"></a>               <span class="n">NodeType_Water</span><span class="p">,</span><span class="n">NodeConnectionType_Outlet</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-1524"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecOutletNodeNum</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1525"></a><span class="k">        CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">14</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">14</span><span class="p">)))</span>
<a name="ln-1526"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-1527"></a>        <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1528"></a>      <span class="n">ENDIF</span>
<a name="ln-1529"></a>      <span class="k">CALL </span><span class="n">TestCompSet</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">13</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">14</span><span class="p">),</span><span class="s1">&#39;Heat Recovery Nodes&#39;</span><span class="p">)</span>
<a name="ln-1530"></a>        <span class="k">CALL </span><span class="n">RegisterPlantCompDesignFlow</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1531"></a>                                <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">DesignHeatRecVolFlowRate</span><span class="p">)</span>
<a name="ln-1532"></a>      <span class="c">! Condenser flow rate must be specified for heat reclaim</span>
<a name="ln-1533"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">AirCooled</span> <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-1534"></a>          <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1535"></a><span class="k">        IF</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span> <span class="p">.</span><span class="n">LE</span><span class="p">.</span> <span class="mf">0.0d0</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-1536"></a><span class="k">          CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cNumericFieldNames</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">RoundSigDigits</span><span class="p">(</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span><span class="mi">6</span><span class="p">)))</span>
<a name="ln-1537"></a>          <span class="k">CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Condenser fluid flow rate must be specified for Heat Reclaim applications.&#39;</span><span class="p">)</span>
<a name="ln-1538"></a>          <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-1539"></a>          <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1540"></a>        <span class="k">END IF</span>
<a name="ln-1541"></a><span class="k">      END IF</span>
<a name="ln-1542"></a>
<a name="ln-1543"></a><span class="k">      ELSE</span>
<a name="ln-1544"></a>
<a name="ln-1545"></a>
<a name="ln-1546"></a>
<a name="ln-1547"></a><span class="k">      </span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="o">=</span><span class="p">.</span><span class="n">false</span><span class="p">.</span>
<a name="ln-1548"></a>      <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">DesignHeatRecMassFlowRate</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-1549"></a>      <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span>   <span class="o">=</span> <span class="mi">0</span>
<a name="ln-1550"></a>      <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecOutletNodeNum</span>   <span class="o">=</span> <span class="mi">0</span>
<a name="ln-1551"></a>      <span class="c">! if heat recovery is not used, don&#39;t care about condenser flow rate for air/evap-cooled equip.</span>
<a name="ln-1552"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">AirCooled</span> <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-1553"></a>          <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1554"></a><span class="k">        </span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span> <span class="o">=</span> <span class="mf">0.0011d0</span>  <span class="c">! set to avoid errors in calc routine</span>
<a name="ln-1555"></a>      <span class="k">END IF</span>
<a name="ln-1556"></a><span class="k">      IF</span> <span class="p">((.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">13</span><span class="p">))</span>  <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">(.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">14</span><span class="p">)))</span> <span class="k">THEN</span>
<a name="ln-1557"></a><span class="k">        CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="s1">&#39;Since Design Heat Flow Rate = 0.0, Heat Recovery inactive for &#39;</span><span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-1558"></a>                    <span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="p">)</span>
<a name="ln-1559"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;However, Node names were specified for Heat Recovery inlet or outlet nodes&#39;</span><span class="p">)</span>
<a name="ln-1560"></a>      <span class="n">ENDIF</span>
<a name="ln-1561"></a>    <span class="n">ENDIF</span>
<a name="ln-1562"></a>
<a name="ln-1563"></a>    <span class="k">SELECT CASE</span> <span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">15</span><span class="p">)))</span>
<a name="ln-1564"></a>    <span class="k">CASE</span> <span class="p">(</span> <span class="s1">&#39;CONSTANTFLOW&#39;</span> <span class="p">)</span>
<a name="ln-1565"></a>      <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">=</span> <span class="n">ConstantFlow</span>
<a name="ln-1566"></a>    <span class="k">CASE</span> <span class="p">(</span> <span class="s1">&#39;VARIABLEFLOW&#39;</span> <span class="p">)</span>
<a name="ln-1567"></a>      <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">=</span> <span class="n">LeavingSetpointModulated</span>
<a name="ln-1568"></a>      <span class="k">CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="n">RoutineName</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&quot;&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;&quot;,&#39;</span><span class="p">)</span>
<a name="ln-1569"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">15</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">15</span><span class="p">)))</span>
<a name="ln-1570"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Key choice is now called &quot;LeavingSetpointModulated&quot; and the simulation continues&#39;</span><span class="p">)</span>
<a name="ln-1571"></a>    <span class="k">CASE</span> <span class="p">(</span><span class="s1">&#39;LEAVINGSETPOINTMODULATED&#39;</span><span class="p">)</span>
<a name="ln-1572"></a>      <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">=</span> <span class="n">LeavingSetpointModulated</span>
<a name="ln-1573"></a>    <span class="k">CASE</span> <span class="p">(</span><span class="s1">&#39;NOTMODULATED&#39;</span><span class="p">)</span>
<a name="ln-1574"></a>      <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">=</span> <span class="n">NotModulated</span>
<a name="ln-1575"></a>    <span class="k">CASE </span><span class="n">DEFAULT</span>
<a name="ln-1576"></a>      <span class="k">CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="n">RoutineName</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&quot;&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;&quot;,&#39;</span><span class="p">)</span>
<a name="ln-1577"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">15</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">15</span><span class="p">)))</span>
<a name="ln-1578"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Available choices are ConstantFlow, NotModulated, or LeavingSetpointModulated&#39;</span><span class="p">)</span>
<a name="ln-1579"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Flow mode NotModulated is assumed and the simulation continues.&#39;</span><span class="p">)</span>
<a name="ln-1580"></a>      <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">=</span> <span class="n">NotModulated</span>
<a name="ln-1581"></a>    <span class="k">END SELECT</span>
<a name="ln-1582"></a>
<a name="ln-1583"></a><span class="k">    </span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecMaxTemp</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">27</span><span class="p">)</span>
<a name="ln-1584"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">SizFac</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">28</span><span class="p">)</span>
<a name="ln-1585"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">SizFac</span> <span class="o">&lt;=</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">SizFac</span> <span class="o">=</span> <span class="mf">1.0d0</span>
<a name="ln-1586"></a>
<a name="ln-1587"></a>    <span class="c">!   Basin heater power as a function of temperature must be greater than or equal to 0</span>
<a name="ln-1588"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPowerFTempDiff</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">29</span><span class="p">)</span>
<a name="ln-1589"></a>    <span class="k">IF</span><span class="p">(</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">29</span><span class="p">)</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1590"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;, &quot;&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span><span class="o">//</span><span class="p">&amp;</span>
<a name="ln-1591"></a>                     <span class="s1">&#39;&quot; TRIM(cNumericFieldNames(29)) must be &gt;= 0&#39;</span><span class="p">)</span>
<a name="ln-1592"></a>      <span class="n">ErrorsFound</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-1593"></a>    <span class="k">END IF</span>
<a name="ln-1594"></a>
<a name="ln-1595"></a><span class="k">    </span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSetPointTemp</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<a name="ln-1596"></a>
<a name="ln-1597"></a>    <span class="k">IF</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPowerFTempDiff</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1598"></a><span class="k">      IF</span><span class="p">(</span><span class="n">NumNums</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="mi">30</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1599"></a><span class="k">        </span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSetPointTemp</span> <span class="o">=</span> <span class="mf">2.0d0</span>
<a name="ln-1600"></a>      <span class="n">ENDIF</span>
<a name="ln-1601"></a>      <span class="k">IF</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSetPointTemp</span> <span class="o">&lt;</span> <span class="mf">2.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1602"></a><span class="k">        CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;:&quot;&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span><span class="o">//</span><span class="p">&amp;</span>
<a name="ln-1603"></a>           <span class="s1">&#39;&quot;, &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cNumericFieldNames</span><span class="p">(</span><span class="mi">30</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39; is less than 2 deg C. Freezing could occur.&#39;</span><span class="p">)</span>
<a name="ln-1604"></a>      <span class="k">END IF</span>
<a name="ln-1605"></a><span class="k">    END IF</span>
<a name="ln-1606"></a>
<a name="ln-1607"></a><span class="k">    IF</span><span class="p">(.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">16</span><span class="p">))</span><span class="k">THEN</span>
<a name="ln-1608"></a><span class="k">      </span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSchedulePtr</span>   <span class="o">=</span> <span class="n">GetScheduleIndex</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">16</span><span class="p">))</span>
<a name="ln-1609"></a>      <span class="k">IF</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSchedulePtr</span> <span class="p">.</span><span class="n">EQ</span><span class="p">.</span> <span class="mi">0</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-1610"></a><span class="k">        CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;, &quot;&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span><span class="o">//</span><span class="p">&amp;</span>
<a name="ln-1611"></a>                       <span class="s1">&#39;&quot; TRIM(cAlphaFieldNames(16)) &quot;&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">16</span><span class="p">))</span> <span class="p">&amp;</span>
<a name="ln-1612"></a>                       <span class="o">//</span><span class="s1">&#39;&quot; was not found. Basin heater operation will not be modeled and the simulation continues&#39;</span><span class="p">)</span>
<a name="ln-1613"></a>      <span class="k">END IF</span>
<a name="ln-1614"></a><span class="k">    END IF</span>
<a name="ln-1615"></a>
<a name="ln-1616"></a>
<a name="ln-1617"></a><span class="k">  END DO</span>
<a name="ln-1618"></a>
<a name="ln-1619"></a><span class="k">  IF</span> <span class="p">(</span><span class="n">ErrorsFound</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1620"></a><span class="k">    CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;Errors found in processing input for &#39;</span><span class="o">//</span> <span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span> <span class="p">)</span>
<a name="ln-1621"></a>  <span class="n">ENDIF</span>
<a name="ln-1622"></a>
<a name="ln-1623"></a>  <span class="k">DO </span><span class="n">ChillerNum</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">NumEngineDrivenChillers</span>
<a name="ln-1624"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Drive Shaft Power [W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1625"></a>          <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Power</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1626"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Drive Shaft Energy [J]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1627"></a>          <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Energy</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Sum&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1628"></a>
<a name="ln-1629"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Evaporator Cooling Rate [W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1630"></a>          <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QEvap</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1631"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Evaporator Cooling Energy [J]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1632"></a>          <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapEnergy</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Sum&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-1633"></a>                              <span class="n">ResourceTypeKey</span><span class="o">=</span><span class="s1">&#39;ENERGYTRANSFER&#39;</span><span class="p">,</span><span class="n">EndUseKey</span><span class="o">=</span><span class="s1">&#39;CHILLERS&#39;</span><span class="p">,</span><span class="n">GroupKey</span><span class="o">=</span><span class="s1">&#39;Plant&#39;</span><span class="p">)</span>
<a name="ln-1634"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Evaporator Inlet Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1635"></a>          <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1636"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Evaporator Outlet Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1637"></a>          <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1638"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Evaporator Mass Flow Rate [kg/s]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1639"></a>          <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Evapmdot</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1640"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Condenser Heat Transfer Rate [W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1641"></a>          <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QCond</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1642"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Condenser Heat Transfer Energy [J]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1643"></a>          <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondEnergy</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Sum&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-1644"></a>                              <span class="n">ResourceTypeKey</span><span class="o">=</span><span class="s1">&#39;ENERGYTRANSFER&#39;</span><span class="p">,</span><span class="n">EndUseKey</span><span class="o">=</span><span class="s1">&#39;HEATREJECTION&#39;</span><span class="p">,</span><span class="n">GroupKey</span><span class="o">=</span><span class="s1">&#39;Plant&#39;</span><span class="p">)</span>
<a name="ln-1645"></a>
<a name="ln-1646"></a>       <span class="c">!Condenser mass flow and outlet temp are valid for Water Cooled</span>
<a name="ln-1647"></a>     <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-1648"></a><span class="k">       CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Condenser Inlet Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1649"></a>            <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1650"></a>       <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Condenser Outlet Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1651"></a>            <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1652"></a>       <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Condenser Mass Flow Rate [kg/s]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1653"></a>            <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Condmdot</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1654"></a>     <span class="n">ELSEIF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">AirCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1655"></a><span class="k">       CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Condenser Inlet Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1656"></a>            <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1657"></a>     <span class="n">ELSEIF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1658"></a><span class="k">       CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Condenser Inlet Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1659"></a>            <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1660"></a>       <span class="k">IF</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPowerFTempDiff</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="mf">0.0d0</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-1661"></a><span class="k">         CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Basin Heater Electric Power [W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1662"></a>          <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPower</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1663"></a>         <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Basin Heater Electric Energy [J]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1664"></a>          <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterConsumption</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Sum&#39;</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-1665"></a>             <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1666"></a>          <span class="n">ResourceTypeKey</span><span class="o">=</span><span class="s1">&#39;Electric&#39;</span><span class="p">,</span><span class="n">EndUseKey</span><span class="o">=</span><span class="s1">&#39;CHILLERS&#39;</span><span class="p">,</span><span class="n">GroupKey</span><span class="o">=</span><span class="s1">&#39;Plant&#39;</span><span class="p">)</span>
<a name="ln-1667"></a>       <span class="k">END IF</span>
<a name="ln-1668"></a><span class="k">     End IF</span>
<a name="ln-1669"></a>
<a name="ln-1670"></a>
<a name="ln-1671"></a>
<a name="ln-1672"></a><span class="k">     CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller &#39;</span> <span class="o">//</span> <span class="nb">TRIM</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelType</span><span class="p">)</span> <span class="o">//</span><span class="s1">&#39; Rate [W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1673"></a>          <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelEnergyUseRate</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1674"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller &#39;</span> <span class="o">//</span> <span class="nb">TRIM</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelType</span><span class="p">)</span> <span class="o">//</span><span class="s1">&#39; Energy [J]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1675"></a>          <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelEnergy</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Sum&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-1676"></a>                              <span class="n">ResourceTypeKey</span><span class="o">=</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelType</span><span class="p">,</span><span class="n">EndUseKey</span><span class="o">=</span><span class="s1">&#39;Cooling&#39;</span><span class="p">,</span><span class="n">GroupKey</span><span class="o">=</span><span class="s1">&#39;Plant&#39;</span><span class="p">)</span>
<a name="ln-1677"></a>
<a name="ln-1678"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller COP [W/W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1679"></a>          <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelCOP</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1680"></a>
<a name="ln-1681"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller &#39;</span> <span class="o">//</span> <span class="nb">TRIM</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelType</span><span class="p">)</span> <span class="o">//</span><span class="s1">&#39; Mass Flow Rate [kg/s]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1682"></a>          <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelMdot</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1683"></a>
<a name="ln-1684"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Exhaust Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1685"></a>          <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">ExhaustStackTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1686"></a>
<a name="ln-1687"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Heat Recovery Mass Flow Rate [kg/s]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1688"></a>          <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecMdot</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1689"></a>
<a name="ln-1690"></a>     <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1691"></a>  <span class="c">! need to only report if heat recovery active</span>
<a name="ln-1692"></a>       <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Jacket Recovered Heat Rate [W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1693"></a>            <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">QJacketRecovered</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1694"></a>       <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Jacket Recovered Heat Energy [J]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1695"></a>            <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">JacketEnergyRec</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Sum&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-1696"></a>                                <span class="n">ResourceTypeKey</span><span class="o">=</span><span class="s1">&#39;ENERGYTRANSFER&#39;</span><span class="p">,</span><span class="n">EndUseKey</span><span class="o">=</span><span class="s1">&#39;HEATRECOVERY&#39;</span><span class="p">,</span><span class="n">GroupKey</span><span class="o">=</span><span class="s1">&#39;Plant&#39;</span><span class="p">)</span>
<a name="ln-1697"></a>
<a name="ln-1698"></a>       <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Lube Recovered Heat Rate [W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1699"></a>            <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">QLubeOilRecovered</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1700"></a>       <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Lube Recovered Heat Energy [J]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1701"></a>            <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">LubeOilEnergyRec</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Sum&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-1702"></a>                                <span class="n">ResourceTypeKey</span><span class="o">=</span><span class="s1">&#39;ENERGYTRANSFER&#39;</span><span class="p">,</span><span class="n">EndUseKey</span><span class="o">=</span><span class="s1">&#39;HEATRECOVERY&#39;</span><span class="p">,</span><span class="n">GroupKey</span><span class="o">=</span><span class="s1">&#39;Plant&#39;</span><span class="p">)</span>
<a name="ln-1703"></a>
<a name="ln-1704"></a>       <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Exhaust Recovered Heat Rate [W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1705"></a>            <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">QExhaustRecovered</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1706"></a>       <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Exhaust Recovered Heat Energy [J]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1707"></a>            <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">ExhaustEnergyRec</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Sum&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-1708"></a>                                <span class="n">ResourceTypeKey</span><span class="o">=</span><span class="s1">&#39;ENERGYTRANSFER&#39;</span><span class="p">,</span><span class="n">EndUseKey</span><span class="o">=</span><span class="s1">&#39;HEATRECOVERY&#39;</span><span class="p">,</span><span class="n">GroupKey</span><span class="o">=</span><span class="s1">&#39;Plant&#39;</span><span class="p">)</span>
<a name="ln-1709"></a>
<a name="ln-1710"></a>       <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Total Recovered Heat Rate [W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1711"></a>            <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">QTotalHEatRecovered</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1712"></a>       <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Total Recovered Heat Energy [J]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1713"></a>            <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TotalHeatEnergyRec</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Sum&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1714"></a>
<a name="ln-1715"></a>       <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Heat Recovery Inlet Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1716"></a>          <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecInletTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1717"></a>
<a name="ln-1718"></a>       <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Heat Recovery Outlet Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1719"></a>          <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecOutletTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-1720"></a>
<a name="ln-1721"></a>
<a name="ln-1722"></a>     <span class="n">ENDIF</span>
<a name="ln-1723"></a>     <span class="k">IF</span> <span class="p">(</span><span class="n">AnyEnergyManagementSystemInModel</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1724"></a><span class="k">       CALL </span><span class="n">SetupEMSInternalVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Nominal Capacity&#39;</span><span class="p">,</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="s1">&#39;[W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1725"></a>                                     <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span>  <span class="p">)</span>
<a name="ln-1726"></a>     <span class="n">ENDIF</span>
<a name="ln-1727"></a>  <span class="k">END DO</span>
<a name="ln-1728"></a>
<a name="ln-1729"></a><span class="k">RETURN</span>
<a name="ln-1730"></a><span class="k">END SUBROUTINE </span><span class="n">GetEngineDrivenChillerInput</span>
<a name="ln-1731"></a>
<a name="ln-1732"></a><span class="k">SUBROUTINE </span><span class="n">GetGTChillerInput</span>
<a name="ln-1733"></a>            <span class="c">! SUBROUTINE INFORMATION:</span>
<a name="ln-1734"></a>            <span class="c">!       AUTHOR:          Dan Fisher / Brandon Anderson</span>
<a name="ln-1735"></a>            <span class="c">!       DATE WRITTEN:    September 2000</span>
<a name="ln-1736"></a>
<a name="ln-1737"></a>            <span class="c">! PURPOSE OF THIS SUBROUTINE:</span>
<a name="ln-1738"></a>            <span class="c">! This routine will get the input</span>
<a name="ln-1739"></a>            <span class="c">! required by the GT Chiller model.</span>
<a name="ln-1740"></a>
<a name="ln-1741"></a>
<a name="ln-1742"></a>            <span class="c">! METHODOLOGY EMPLOYED:</span>
<a name="ln-1743"></a>            <span class="c">! EnergyPlus input processor</span>
<a name="ln-1744"></a>
<a name="ln-1745"></a>            <span class="c">! REFERENCES: na</span>
<a name="ln-1746"></a>
<a name="ln-1747"></a>            <span class="c">! USE STATEMENTS:</span>
<a name="ln-1748"></a>  <span class="k">USE </span><span class="n">InputProcessor</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">GetNumObjectsFound</span><span class="p">,</span> <span class="n">GetObjectItem</span><span class="p">,</span> <span class="n">VerifyName</span>
<a name="ln-1749"></a>  <span class="k">USE </span><span class="n">DataIPShortCuts</span>  <span class="c">! Data for field names, blank numerics</span>
<a name="ln-1750"></a>  <span class="k">USE </span><span class="n">BranchNodeConnections</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">TestCompSet</span>
<a name="ln-1751"></a>  <span class="k">USE </span><span class="n">NodeInputManager</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">GetOnlySingleNode</span>
<a name="ln-1752"></a>  <span class="k">USE </span><span class="n">GlobalNames</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">VerifyUniqueChillerName</span>
<a name="ln-1753"></a>  <span class="k">USE </span><span class="n">OutAirNodeManager</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">CheckAndAddAirNodeNumber</span>
<a name="ln-1754"></a>  <span class="k">USE </span><span class="n">General</span><span class="p">,</span>           <span class="n">ONLY</span><span class="p">:</span> <span class="n">RoundSigDigits</span>
<a name="ln-1755"></a>  <span class="k">USE </span><span class="n">PlantUtilities</span><span class="p">,</span>    <span class="n">ONLY</span><span class="p">:</span> <span class="n">RegisterPlantCompDesignFlow</span>
<a name="ln-1756"></a>  <span class="k">USE </span><span class="n">ScheduleManager</span><span class="p">,</span>   <span class="n">ONLY</span><span class="p">:</span> <span class="n">GetScheduleIndex</span>
<a name="ln-1757"></a>  <span class="k">USE </span><span class="n">DataGlobals</span><span class="p">,</span>       <span class="n">ONLY</span><span class="p">:</span> <span class="n">AnyEnergyManagementSystemInModel</span>
<a name="ln-1758"></a>
<a name="ln-1759"></a>  <span class="k">IMPLICIT NONE</span> <span class="c">!</span>
<a name="ln-1760"></a>
<a name="ln-1761"></a>            <span class="c">! PARAMETERS</span>
<a name="ln-1762"></a>  <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span> <span class="k">PARAMETER</span> <span class="kd">::</span> <span class="n">RoutineName</span><span class="o">=</span><span class="s1">&#39;GetGTChillerInput: &#39;</span> <span class="c">! include trailing blank space</span>
<a name="ln-1763"></a>            <span class="c">!LOCAL VARIABLES</span>
<a name="ln-1764"></a>  <span class="kt">INTEGER</span>                     <span class="kd">::</span> <span class="n">ChillerNum</span> <span class="c">!chiller counter</span>
<a name="ln-1765"></a>  <span class="kt">INTEGER</span>                     <span class="kd">::</span> <span class="n">NumAlphas</span>  <span class="c">! Number of elements in the alpha array</span>
<a name="ln-1766"></a>  <span class="kt">INTEGER</span>                     <span class="kd">::</span> <span class="n">NumNums</span>    <span class="c">! Number of elements in the numeric array</span>
<a name="ln-1767"></a>  <span class="kt">INTEGER</span>                     <span class="kd">::</span> <span class="n">IOStat</span>     <span class="c">! IO Status when calling get input subroutine</span>
<a name="ln-1768"></a>  <span class="kt">LOGICAL</span><span class="p">,</span> <span class="k">SAVE</span> <span class="kd">::</span> <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">false</span><span class="p">.</span>
<a name="ln-1769"></a>  <span class="kt">LOGICAL</span>       <span class="kd">::</span> <span class="n">IsNotOK</span>               <span class="c">! Flag to verify name</span>
<a name="ln-1770"></a>  <span class="kt">LOGICAL</span>       <span class="kd">::</span> <span class="n">IsBlank</span>               <span class="c">! Flag for blank name</span>
<a name="ln-1771"></a>  <span class="kt">LOGICAL</span>       <span class="kd">::</span> <span class="n">errflag</span>
<a name="ln-1772"></a>  <span class="kt">LOGICAL</span>       <span class="kd">::</span> <span class="n">Okay</span>
<a name="ln-1773"></a>
<a name="ln-1774"></a>         <span class="c">!FLOW</span>
<a name="ln-1775"></a>  <span class="n">cCurrentModuleObject</span> <span class="o">=</span> <span class="s1">&#39;Chiller:CombustionTurbine&#39;</span>
<a name="ln-1776"></a>  <span class="n">NumGTChillers</span> <span class="o">=</span> <span class="n">GetNumObjectsFound</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span>
<a name="ln-1777"></a>
<a name="ln-1778"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">NumGTChillers</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1779"></a><span class="k">    CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;No &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39; equipment specified in input file&#39;</span><span class="p">)</span>
<a name="ln-1780"></a>    <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1781"></a>  <span class="n">ENDIF</span>
<a name="ln-1782"></a>            <span class="c">!See if load distribution manager has already gotten the input</span>
<a name="ln-1783"></a>  <span class="k">IF</span> <span class="p">(</span><span class="nb">ALLOCATED</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">))</span><span class="k">RETURN</span>
<a name="ln-1784"></a>
<a name="ln-1785"></a>         <span class="c">!ALLOCATE ARRAYS</span>
<a name="ln-1786"></a>  <span class="k">ALLOCATE</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">NumGTChillers</span><span class="p">))</span>
<a name="ln-1787"></a>  <span class="k">ALLOCATE</span> <span class="p">(</span><span class="n">GTChillerReport</span><span class="p">(</span><span class="n">NumGTChillers</span><span class="p">))</span>
<a name="ln-1788"></a>
<a name="ln-1789"></a>  <span class="k">DO </span><span class="n">ChillerNum</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">,</span> <span class="n">NumGTChillers</span>
<a name="ln-1790"></a>    <span class="k">CALL </span><span class="n">GetObjectItem</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">,</span><span class="n">ChillerNum</span><span class="p">,</span><span class="n">cAlphaArgs</span><span class="p">,</span><span class="n">NumAlphas</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1791"></a>                    <span class="n">rNumericArgs</span><span class="p">,</span><span class="n">NumNums</span><span class="p">,</span><span class="n">IOSTAT</span><span class="p">,</span><span class="n">AlphaBlank</span><span class="o">=</span><span class="n">lAlphaFieldBlanks</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1792"></a>                    <span class="n">AlphaFieldnames</span><span class="o">=</span><span class="n">cAlphaFieldNames</span><span class="p">,</span><span class="n">NumericFieldNames</span><span class="o">=</span><span class="n">cNumericFieldNames</span><span class="p">)</span>
<a name="ln-1793"></a>
<a name="ln-1794"></a>    <span class="n">IsNotOK</span><span class="o">=</span><span class="p">.</span><span class="n">false</span><span class="p">.</span>
<a name="ln-1795"></a>    <span class="n">IsBlank</span><span class="o">=</span><span class="p">.</span><span class="n">false</span><span class="p">.</span>
<a name="ln-1796"></a>    <span class="k">CALL </span><span class="n">VerifyName</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="n">GTChiller</span><span class="p">%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span><span class="n">ChillerNum</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">IsNotOK</span><span class="p">,</span><span class="n">IsBlank</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39; Name&#39;</span><span class="p">)</span>
<a name="ln-1797"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">IsNotOK</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1798"></a><span class="k">      </span><span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1799"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">IsBlank</span><span class="p">)</span> <span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">=</span><span class="s1">&#39;xxxxx&#39;</span>
<a name="ln-1800"></a>    <span class="n">ENDIF</span>
<a name="ln-1801"></a>    <span class="k">CALL </span><span class="n">VerifyUniqueChillerName</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="n">errflag</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39; Name&#39;</span><span class="p">)</span>
<a name="ln-1802"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">errflag</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1803"></a><span class="k">      </span><span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1804"></a>    <span class="n">ENDIF</span>
<a name="ln-1805"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span>                <span class="o">=</span> <span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a name="ln-1806"></a>
<a name="ln-1807"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span>              <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a name="ln-1808"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1809"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cNumericFieldNames</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">RoundSigDigits</span><span class="p">(</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="mi">2</span><span class="p">)))</span>
<a name="ln-1810"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-1811"></a>      <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1812"></a>    <span class="n">ENDIF</span>
<a name="ln-1813"></a>
<a name="ln-1814"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">COP</span>                 <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<a name="ln-1815"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1816"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cNumericFieldNames</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">RoundSigDigits</span><span class="p">(</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span><span class="mi">2</span><span class="p">)))</span>
<a name="ln-1817"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-1818"></a>      <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1819"></a>    <span class="n">ENDIF</span>
<a name="ln-1820"></a>
<a name="ln-1821"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;AIRCOOLED&#39;</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1822"></a><span class="k">      </span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span>       <span class="o">=</span> <span class="n">AirCooled</span>
<a name="ln-1823"></a>    <span class="n">ELSEIF</span> <span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;WATERCOOLED&#39;</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1824"></a><span class="k">      </span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span>       <span class="o">=</span> <span class="n">WaterCooled</span>
<a name="ln-1825"></a>    <span class="n">ELSEIF</span> <span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;EVAPORATIVELYCOOLED&#39;</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1826"></a><span class="k">      </span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span>       <span class="o">=</span> <span class="n">EvapCooled</span>
<a name="ln-1827"></a>    <span class="k">ELSE</span>
<a name="ln-1828"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">2</span><span class="p">)))</span>
<a name="ln-1829"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-1830"></a>      <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1831"></a>    <span class="n">ENDIF</span>
<a name="ln-1832"></a>
<a name="ln-1833"></a>
<a name="ln-1834"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletNodeNum</span>    <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-1835"></a>               <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-1836"></a>               <span class="n">NodeType_Water</span><span class="p">,</span><span class="n">NodeConnectionType_Inlet</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-1837"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span>   <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-1838"></a>               <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-1839"></a>               <span class="n">NodeType_Water</span><span class="p">,</span><span class="n">NodeConnectionType_Outlet</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-1840"></a>    <span class="k">CALL </span><span class="n">TestCompSet</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span><span class="s1">&#39;Chilled Water Nodes&#39;</span><span class="p">)</span>
<a name="ln-1841"></a>
<a name="ln-1842"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">AirCooled</span> <span class="p">.</span><span class="nb">or</span><span class="p">.</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1843"></a>      <span class="c">! Connection not required for air or evap cooled condenser</span>
<a name="ln-1844"></a>      <span class="c">! If the condenser inlet is blank for air cooled and evap cooled condensers then supply a generic name</span>
<a name="ln-1845"></a>      <span class="c">! since it is not used elsewhere for connection</span>
<a name="ln-1846"></a>      <span class="k">IF</span><span class="p">(</span><span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span><span class="k">THEN</span>
<a name="ln-1847"></a><span class="k">        IF</span> <span class="p">(</span><span class="nb">LEN_TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">MaxNameLength</span> <span class="o">-</span> <span class="mi">21</span><span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span> <span class="c">! protect against long name leading to &gt; 100 chars</span>
<a name="ln-1848"></a>          <span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">=</span> <span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39; CONDENSER INLET NODE&#39;</span>
<a name="ln-1849"></a>        <span class="k">ELSE</span>
<a name="ln-1850"></a><span class="k">          </span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">=</span> <span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)(</span><span class="mi">1</span><span class="p">:</span><span class="mi">79</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39; CONDENSER INLET NODE&#39;</span>
<a name="ln-1851"></a>        <span class="n">ENDIF</span>
<a name="ln-1852"></a>      <span class="k">End If</span>
<a name="ln-1853"></a><span class="k">      IF</span><span class="p">(</span><span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="p">)</span><span class="k">THEN</span>
<a name="ln-1854"></a><span class="k">        IF</span> <span class="p">(</span><span class="nb">LEN_TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">MaxNameLength</span> <span class="o">-</span> <span class="mi">22</span><span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span> <span class="c">! protect against long name leading to &gt; 100 chars</span>
<a name="ln-1855"></a>          <span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">=</span> <span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39; CONDENSER OUTLET NODE&#39;</span>
<a name="ln-1856"></a>        <span class="k">ELSE</span>
<a name="ln-1857"></a><span class="k">          </span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">=</span> <span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)(</span><span class="mi">1</span><span class="p">:</span><span class="mi">78</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39; CONDENSER OUTLET NODE&#39;</span>
<a name="ln-1858"></a>        <span class="n">ENDIF</span>
<a name="ln-1859"></a>      <span class="k">END IF</span>
<a name="ln-1860"></a>
<a name="ln-1861"></a><span class="k">      </span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span>    <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-1862"></a>               <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-1863"></a>               <span class="n">NodeType_Air</span><span class="p">,</span><span class="n">NodeConnectionType_OutsideAirReference</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-1864"></a>      <span class="k">CALL </span><span class="n">CheckAndAddAirNodeNumber</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span><span class="p">,</span><span class="n">Okay</span><span class="p">)</span>
<a name="ln-1865"></a>      <span class="k">IF</span> <span class="p">(.</span><span class="nb">not</span><span class="p">.</span> <span class="n">Okay</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1866"></a><span class="k">        CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;, Adding OutdoorAir:Node=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">)))</span>
<a name="ln-1867"></a>      <span class="n">ENDIF</span>
<a name="ln-1868"></a>
<a name="ln-1869"></a>      <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletNodeNum</span>   <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-1870"></a>               <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-1871"></a>               <span class="n">NodeType_Air</span><span class="p">,</span><span class="n">NodeConnectionType_Outlet</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-1872"></a>    <span class="k">ELSE</span> <span class="c">! WaterCooled CondenserType</span>
<a name="ln-1873"></a>      <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span>    <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-1874"></a>               <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-1875"></a>               <span class="n">NodeType_Unknown</span><span class="p">,</span><span class="n">NodeConnectionType_Inlet</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-1876"></a>      <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletNodeNum</span>   <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-1877"></a>               <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-1878"></a>               <span class="n">NodeType_Unknown</span><span class="p">,</span><span class="n">NodeConnectionType_Outlet</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-1879"></a>      <span class="k">CALL </span><span class="n">TestCompSet</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span><span class="s1">&#39;Condenser (unknown?) Nodes&#39;</span><span class="p">)</span>
<a name="ln-1880"></a>      <span class="c">!Condenser Inlet node name is necessary for Water Cooled</span>
<a name="ln-1881"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1882"></a><span class="k">        CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid, &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39; is blank &#39;</span><span class="p">)</span>
<a name="ln-1883"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-1884"></a>        <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1885"></a>      <span class="n">ELSEIF</span> <span class="p">(</span> <span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1886"></a><span class="k">        CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid, &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39; is blank &#39;</span><span class="p">)</span>
<a name="ln-1887"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-1888"></a>        <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1889"></a>      <span class="n">ENDIF</span>
<a name="ln-1890"></a>    <span class="n">ENDIF</span>
<a name="ln-1891"></a>
<a name="ln-1892"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">MinPartLoadRat</span>      <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<a name="ln-1893"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">MaxPartLoadRat</span>      <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<a name="ln-1894"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">OptPartLoadRat</span>      <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<a name="ln-1895"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempDesCondIn</span>       <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<a name="ln-1896"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempRiseCoef</span>        <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<a name="ln-1897"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempDesEvapOut</span>      <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
<a name="ln-1898"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapVolFlowRate</span>     <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
<a name="ln-1899"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span>     <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<a name="ln-1900"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">CapRatCoef</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>       <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>
<a name="ln-1901"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">CapRatCoef</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>       <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
<a name="ln-1902"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">CapRatCoef</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>       <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span>
<a name="ln-1903"></a>    <span class="k">IF</span> <span class="p">((</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="o">+</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">+</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">13</span><span class="p">))</span> <span class="o">==</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1904"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;: Sum of Capacity Ratio Coef = 0.0, chiller=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-1905"></a>      <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1906"></a>    <span class="n">ENDIF</span>
<a name="ln-1907"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">PowerRatCoef</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>     <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">14</span><span class="p">)</span>
<a name="ln-1908"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">PowerRatCoef</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>     <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
<a name="ln-1909"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">PowerRatCoef</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>     <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
<a name="ln-1910"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FullLoadCoef</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>     <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">17</span><span class="p">)</span>
<a name="ln-1911"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FullLoadCoef</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>     <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">18</span><span class="p">)</span>
<a name="ln-1912"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FullLoadCoef</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>     <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">19</span><span class="p">)</span>
<a name="ln-1913"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempLowLimitEvapOut</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<a name="ln-1914"></a>
<a name="ln-1915"></a>
<a name="ln-1916"></a>    <span class="c">!Load Special GT Chiller Input</span>
<a name="ln-1917"></a>
<a name="ln-1918"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">PLBasedFuelInputCoef</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">21</span><span class="p">)</span>
<a name="ln-1919"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">PLBasedFuelInputCoef</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">22</span><span class="p">)</span>
<a name="ln-1920"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">PLBasedFuelInputCoef</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">23</span><span class="p">)</span>
<a name="ln-1921"></a>
<a name="ln-1922"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempBasedFuelInputCoef</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>
<a name="ln-1923"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempBasedFuelInputCoef</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
<a name="ln-1924"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempBasedFuelInputCoef</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">26</span><span class="p">)</span>
<a name="ln-1925"></a>
<a name="ln-1926"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">ExhaustFlowCoef</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">27</span><span class="p">)</span>
<a name="ln-1927"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">ExhaustFlowCoef</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">28</span><span class="p">)</span>
<a name="ln-1928"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">ExhaustFlowCoef</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">29</span><span class="p">)</span>
<a name="ln-1929"></a>
<a name="ln-1930"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">PLBasedExhaustTempCoef</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<a name="ln-1931"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">PLBasedExhaustTempCoef</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">31</span><span class="p">)</span>
<a name="ln-1932"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">PLBasedExhaustTempCoef</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>
<a name="ln-1933"></a>
<a name="ln-1934"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempBasedExhaustTempCoef</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">33</span><span class="p">)</span>
<a name="ln-1935"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempBasedExhaustTempCoef</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">34</span><span class="p">)</span>
<a name="ln-1936"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempBasedExhaustTempCoef</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">35</span><span class="p">)</span>
<a name="ln-1937"></a>
<a name="ln-1938"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecLubeEnergyCoef</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">36</span><span class="p">)</span>
<a name="ln-1939"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecLubeEnergyCoef</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">37</span><span class="p">)</span>
<a name="ln-1940"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecLubeEnergyCoef</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">38</span><span class="p">)</span>
<a name="ln-1941"></a>
<a name="ln-1942"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">UAtoCapCoef</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">39</span><span class="p">)</span>
<a name="ln-1943"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">UAtoCapCoef</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span>
<a name="ln-1944"></a>
<a name="ln-1945"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">GTEngineCapacity</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">41</span><span class="p">)</span>
<a name="ln-1946"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">MaxExhaustperGTPower</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<a name="ln-1947"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">DesignSteamSatTemp</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">43</span><span class="p">)</span>
<a name="ln-1948"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelHeatingValue</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">44</span><span class="p">)</span>
<a name="ln-1949"></a>
<a name="ln-1950"></a>    <span class="c">!Get the Heat Recovery information</span>
<a name="ln-1951"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">DesignHeatRecVolFlowRate</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">45</span><span class="p">)</span>
<a name="ln-1952"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">DesignHeatRecVolFlowRate</span> <span class="o">&gt;</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1953"></a><span class="k">      </span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1954"></a>      <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span>   <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-1955"></a>               <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">7</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-1956"></a>               <span class="n">NodeType_Water</span><span class="p">,</span><span class="n">NodeConnectionType_Inlet</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-1957"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1958"></a><span class="k">        CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">7</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">7</span><span class="p">)))</span>
<a name="ln-1959"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-1960"></a>        <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1961"></a>      <span class="n">ENDIF</span>
<a name="ln-1962"></a>      <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecOutletNodeNum</span>   <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-1963"></a>               <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-1964"></a>               <span class="n">NodeType_Water</span><span class="p">,</span><span class="n">NodeConnectionType_Outlet</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-1965"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecOutletNodeNum</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1966"></a><span class="k">        CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">8</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">8</span><span class="p">)))</span>
<a name="ln-1967"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-1968"></a>        <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-1969"></a>      <span class="n">ENDIF</span>
<a name="ln-1970"></a>      <span class="k">CALL </span><span class="n">TestCompSet</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">7</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span><span class="s1">&#39;Heat Recovery Nodes&#39;</span><span class="p">)</span>
<a name="ln-1971"></a>
<a name="ln-1972"></a>        <span class="k">CALL </span><span class="n">RegisterPlantCompDesignFlow</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-1973"></a>                                <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">DesignHeatRecVolFlowRate</span> <span class="p">)</span>
<a name="ln-1974"></a>       <span class="c">! Condenser flow rate must be specified for heat reclaim</span>
<a name="ln-1975"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">AirCooled</span> <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-1976"></a>          <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1977"></a><span class="k">        IF</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span> <span class="p">.</span><span class="n">LE</span><span class="p">.</span> <span class="mf">0.0d0</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-1978"></a><span class="k">          CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cNumericFieldNames</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">RoundSigDigits</span><span class="p">(</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span><span class="mi">6</span><span class="p">)))</span>
<a name="ln-1979"></a>          <span class="k">CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Condenser fluid flow rate must be specified for Heat Reclaim applications.&#39;</span><span class="p">)</span>
<a name="ln-1980"></a>          <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-1981"></a>          <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">True</span><span class="p">.</span>
<a name="ln-1982"></a>      <span class="n">ENDIF</span>
<a name="ln-1983"></a>
<a name="ln-1984"></a>      <span class="n">ENDIf</span>
<a name="ln-1985"></a>
<a name="ln-1986"></a>    <span class="k">ELSE</span>
<a name="ln-1987"></a><span class="k">      </span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="o">=</span><span class="p">.</span><span class="n">false</span><span class="p">.</span>
<a name="ln-1988"></a>      <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">DesignHeatRecMassFlowRate</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-1989"></a>      <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span>    <span class="o">=</span> <span class="mi">0</span>
<a name="ln-1990"></a>      <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecOutletNodeNum</span>   <span class="o">=</span> <span class="mi">0</span>
<a name="ln-1991"></a>      <span class="k">IF</span> <span class="p">((.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">7</span><span class="p">))</span>  <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">(.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">8</span><span class="p">)))</span> <span class="k">THEN</span>
<a name="ln-1992"></a><span class="k">        CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="s1">&#39;Since Design Heat Flow Rate = 0.0, Heat Recovery inactive for &#39;</span><span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-1993"></a>                    <span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="p">)</span>
<a name="ln-1994"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;However, Node names were specified for heat recovery inlet or outlet nodes&#39;</span><span class="p">)</span>
<a name="ln-1995"></a>      <span class="n">ENDIF</span>
<a name="ln-1996"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">AirCooled</span> <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-1997"></a>          <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-1998"></a><span class="k">        </span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span> <span class="o">=</span> <span class="mf">0.0011d0</span>  <span class="c">! set to avoid errors in calc routine</span>
<a name="ln-1999"></a>      <span class="k">END IF</span>
<a name="ln-2000"></a><span class="k">    </span><span class="n">ENDIF</span>
<a name="ln-2001"></a>
<a name="ln-2002"></a>    <span class="k">SELECT CASE</span> <span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">9</span><span class="p">)))</span>
<a name="ln-2003"></a>    <span class="k">CASE</span> <span class="p">(</span> <span class="s1">&#39;CONSTANTFLOW&#39;</span> <span class="p">)</span>
<a name="ln-2004"></a>      <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">=</span> <span class="n">ConstantFlow</span>
<a name="ln-2005"></a>    <span class="k">CASE</span> <span class="p">(</span> <span class="s1">&#39;VARIABLEFLOW&#39;</span> <span class="p">)</span>
<a name="ln-2006"></a>      <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">=</span> <span class="n">LeavingSetpointModulated</span>
<a name="ln-2007"></a>      <span class="k">CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="n">RoutineName</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&quot;&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;&quot;,&#39;</span><span class="p">)</span>
<a name="ln-2008"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">9</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">9</span><span class="p">)))</span>
<a name="ln-2009"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Key choice is now called &quot;LeavingSetpointModulated&quot; and the simulation continues&#39;</span><span class="p">)</span>
<a name="ln-2010"></a>    <span class="k">CASE</span> <span class="p">(</span><span class="s1">&#39;LEAVINGSETPOINTMODULATED&#39;</span><span class="p">)</span>
<a name="ln-2011"></a>      <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">=</span> <span class="n">LeavingSetpointModulated</span>
<a name="ln-2012"></a>    <span class="k">CASE</span> <span class="p">(</span><span class="s1">&#39;NOTMODULATED&#39;</span><span class="p">)</span>
<a name="ln-2013"></a>      <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">=</span> <span class="n">NotModulated</span>
<a name="ln-2014"></a>    <span class="k">CASE </span><span class="n">DEFAULT</span>
<a name="ln-2015"></a>      <span class="k">CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="n">RoutineName</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&quot;&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;&quot;,&#39;</span><span class="p">)</span>
<a name="ln-2016"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">9</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">9</span><span class="p">)))</span>
<a name="ln-2017"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Available choices are ConstantFlow, NotModulated, or LeavingSetpointModulated&#39;</span><span class="p">)</span>
<a name="ln-2018"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Flow mode NotModulated is assumed and the simulation continues.&#39;</span><span class="p">)</span>
<a name="ln-2019"></a>      <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">=</span> <span class="n">NotModulated</span>
<a name="ln-2020"></a>    <span class="k">END SELECT</span>
<a name="ln-2021"></a>
<a name="ln-2022"></a>    <span class="c">!Fuel Type Case Statement</span>
<a name="ln-2023"></a>    <span class="k">SELECT CASE</span> <span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<a name="ln-2024"></a>    <span class="k">CASE</span> <span class="p">(</span><span class="s1">&#39;GAS&#39;</span><span class="p">,</span><span class="s1">&#39;NATURALGAS&#39;</span><span class="p">,</span><span class="s1">&#39;NATURAL GAS&#39;</span><span class="p">)</span>
<a name="ln-2025"></a>      <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelType</span> <span class="o">=</span> <span class="s1">&#39;Gas&#39;</span>
<a name="ln-2026"></a>
<a name="ln-2027"></a>    <span class="k">CASE</span> <span class="p">(</span><span class="s1">&#39;DIESEL&#39;</span><span class="p">)</span>
<a name="ln-2028"></a>      <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelType</span> <span class="o">=</span> <span class="s1">&#39;Diesel&#39;</span>
<a name="ln-2029"></a>
<a name="ln-2030"></a>    <span class="k">CASE</span> <span class="p">(</span><span class="s1">&#39;GASOLINE&#39;</span><span class="p">)</span>
<a name="ln-2031"></a>      <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelType</span> <span class="o">=</span> <span class="s1">&#39;Gasoline&#39;</span>
<a name="ln-2032"></a>
<a name="ln-2033"></a>    <span class="k">CASE</span> <span class="p">(</span><span class="s1">&#39;FUEL OIL #1&#39;</span><span class="p">,</span><span class="s1">&#39;FUELOIL#1&#39;</span><span class="p">,</span><span class="s1">&#39;FUEL OIL&#39;</span><span class="p">,</span><span class="s1">&#39;DISTILLATE OIL&#39;</span><span class="p">)</span>
<a name="ln-2034"></a>       <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelType</span> <span class="o">=</span> <span class="s1">&#39;FuelOil#1&#39;</span>
<a name="ln-2035"></a>
<a name="ln-2036"></a>    <span class="k">CASE</span> <span class="p">(</span><span class="s1">&#39;FUEL OIL #2&#39;</span><span class="p">,</span><span class="s1">&#39;FUELOIL#2&#39;</span><span class="p">,</span><span class="s1">&#39;RESIDUAL OIL&#39;</span><span class="p">)</span>
<a name="ln-2037"></a>       <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelType</span> <span class="o">=</span> <span class="s1">&#39;FuelOil#2&#39;</span>
<a name="ln-2038"></a>
<a name="ln-2039"></a>    <span class="k">CASE</span> <span class="p">(</span><span class="s1">&#39;PROPANE&#39;</span><span class="p">,</span><span class="s1">&#39;LPG&#39;</span><span class="p">,</span><span class="s1">&#39;PROPANEGAS&#39;</span><span class="p">,</span><span class="s1">&#39;PROPANE GAS&#39;</span><span class="p">)</span>
<a name="ln-2040"></a>       <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelType</span> <span class="o">=</span> <span class="s1">&#39;Propane&#39;</span>
<a name="ln-2041"></a>
<a name="ln-2042"></a>    <span class="k">CASE</span> <span class="p">(</span><span class="s1">&#39;OTHERFUEL1&#39;</span><span class="p">)</span>
<a name="ln-2043"></a>       <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelType</span> <span class="o">=</span> <span class="s1">&#39;OtherFuel1&#39;</span>
<a name="ln-2044"></a>
<a name="ln-2045"></a>    <span class="k">CASE</span> <span class="p">(</span><span class="s1">&#39;OTHERFUEL2&#39;</span><span class="p">)</span>
<a name="ln-2046"></a>       <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelType</span> <span class="o">=</span> <span class="s1">&#39;OtherFuel2&#39;</span>
<a name="ln-2047"></a>
<a name="ln-2048"></a>    <span class="k">CASE </span><span class="n">DEFAULT</span>
<a name="ln-2049"></a>      <span class="k">CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">10</span><span class="p">)))</span>
<a name="ln-2050"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-2051"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Valid choices are Electricity, NaturalGas, PropaneGas, Diesel, Gasoline, FuelOil#1, FuelOil#2,&#39;</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-2052"></a>       <span class="s1">&#39;OtherFuel1 or OtherFuel2&#39;</span><span class="p">)</span>
<a name="ln-2053"></a>      <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-2054"></a>    <span class="k">END SELECT</span>
<a name="ln-2055"></a>
<a name="ln-2056"></a>
<a name="ln-2057"></a><span class="k">    </span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecMaxTemp</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">46</span><span class="p">)</span>
<a name="ln-2058"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">SizFac</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">47</span><span class="p">)</span>
<a name="ln-2059"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">SizFac</span> <span class="o">&lt;=</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">SizFac</span> <span class="o">=</span> <span class="mf">1.0d0</span>
<a name="ln-2060"></a>
<a name="ln-2061"></a>    <span class="c">!   Basin heater power as a function of temperature must be greater than or equal to 0</span>
<a name="ln-2062"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPowerFTempDiff</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">48</span><span class="p">)</span>
<a name="ln-2063"></a>    <span class="k">IF</span><span class="p">(</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">48</span><span class="p">)</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2064"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&quot;&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span><span class="o">//</span><span class="p">&amp;</span>
<a name="ln-2065"></a>                     <span class="s1">&#39;&quot;&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cNumericFieldNames</span><span class="p">(</span><span class="mi">48</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39; must be &gt;= 0&#39;</span><span class="p">)</span>
<a name="ln-2066"></a>      <span class="n">ErrorsFound</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-2067"></a>    <span class="k">END IF</span>
<a name="ln-2068"></a>
<a name="ln-2069"></a><span class="k">    </span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSetPointTemp</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">49</span><span class="p">)</span>
<a name="ln-2070"></a>
<a name="ln-2071"></a>    <span class="k">IF</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPowerFTempDiff</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2072"></a><span class="k">      IF</span><span class="p">(</span><span class="n">NumNums</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="mi">49</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2073"></a><span class="k">        </span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSetPointTemp</span> <span class="o">=</span> <span class="mf">2.0d0</span>
<a name="ln-2074"></a>      <span class="n">ENDIF</span>
<a name="ln-2075"></a>      <span class="k">IF</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSetPointTemp</span> <span class="o">&lt;</span> <span class="mf">2.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2076"></a><span class="k">        CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;:&quot;&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span><span class="o">//</span><span class="p">&amp;</span>
<a name="ln-2077"></a>           <span class="s1">&#39;&quot;, &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cNumericFieldNames</span><span class="p">(</span><span class="mi">49</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39; is less than 2 deg C. Freezing could occur.&#39;</span><span class="p">)</span>
<a name="ln-2078"></a>      <span class="k">END IF</span>
<a name="ln-2079"></a><span class="k">    END IF</span>
<a name="ln-2080"></a>
<a name="ln-2081"></a><span class="k">    IF</span><span class="p">(.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">11</span><span class="p">))</span><span class="k">THEN</span>
<a name="ln-2082"></a><span class="k">      </span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSchedulePtr</span>   <span class="o">=</span> <span class="n">GetScheduleIndex</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">11</span><span class="p">))</span>
<a name="ln-2083"></a>      <span class="k">IF</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSchedulePtr</span> <span class="p">.</span><span class="n">EQ</span><span class="p">.</span> <span class="mi">0</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-2084"></a><span class="k">        CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;, &quot;&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span><span class="o">//</span><span class="p">&amp;</span>
<a name="ln-2085"></a>                       <span class="s1">&#39;&quot; TRIM(cAlphaFieldNames(11)) &quot;&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">11</span><span class="p">))</span> <span class="p">&amp;</span>
<a name="ln-2086"></a>                       <span class="o">//</span><span class="s1">&#39;&quot; was not found. Basin heater operation will not be modeled and the simulation continues&#39;</span><span class="p">)</span>
<a name="ln-2087"></a>      <span class="k">END IF</span>
<a name="ln-2088"></a><span class="k">    END IF</span>
<a name="ln-2089"></a>
<a name="ln-2090"></a><span class="k">  END DO</span>
<a name="ln-2091"></a>
<a name="ln-2092"></a><span class="k">  IF</span> <span class="p">(</span><span class="n">ErrorsFound</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2093"></a><span class="k">    CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;Errors found in processing input for &#39;</span><span class="o">//</span> <span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span> <span class="p">)</span>
<a name="ln-2094"></a>  <span class="n">ENDIF</span>
<a name="ln-2095"></a>
<a name="ln-2096"></a>  <span class="k">DO </span><span class="n">ChillerNum</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">NumGTChillers</span>
<a name="ln-2097"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Drive Shaft Power [W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2098"></a>          <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Power</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2099"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Drive Shaft Energy [J]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2100"></a>          <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Energy</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Sum&#39;</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2101"></a>
<a name="ln-2102"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Evaporator Cooling Rate [W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2103"></a>          <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QEvap</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2104"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Evaporator Cooling Energy [J]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2105"></a>          <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapEnergy</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Sum&#39;</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-2106"></a>                              <span class="n">ResourceTypeKey</span><span class="o">=</span><span class="s1">&#39;ENERGYTRANSFER&#39;</span><span class="p">,</span><span class="n">EndUseKey</span><span class="o">=</span><span class="s1">&#39;CHILLERS&#39;</span><span class="p">,</span><span class="n">GroupKey</span><span class="o">=</span><span class="s1">&#39;Plant&#39;</span><span class="p">)</span>
<a name="ln-2107"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Evaporator Inlet Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2108"></a>          <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2109"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Evaporator Outlet Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2110"></a>          <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2111"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Evaporator Mass Flow Rate [kg/s]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2112"></a>          <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Evapmdot</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2113"></a>
<a name="ln-2114"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Condenser Heat Transfer Rate [W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2115"></a>          <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QCond</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2116"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Condenser Heat Transfer Energy [J]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2117"></a>          <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondEnergy</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Sum&#39;</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-2118"></a>                              <span class="n">ResourceTypeKey</span><span class="o">=</span><span class="s1">&#39;ENERGYTRANSFER&#39;</span><span class="p">,</span><span class="n">EndUseKey</span><span class="o">=</span><span class="s1">&#39;HEATREJECTION&#39;</span><span class="p">,</span><span class="n">GroupKey</span><span class="o">=</span><span class="s1">&#39;Plant&#39;</span><span class="p">)</span>
<a name="ln-2119"></a>
<a name="ln-2120"></a>        <span class="c">!Condenser mass flow and outlet temp are valid for water cooled</span>
<a name="ln-2121"></a>     <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-2122"></a><span class="k">        CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Condenser Inlet Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2123"></a>             <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2124"></a>        <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Condenser Outlet Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2125"></a>             <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2126"></a>        <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Condenser Mass Flow Rate [kg/s]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2127"></a>             <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Condmdot</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2128"></a>     <span class="n">ELSEIF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">AirCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2129"></a><span class="k">        CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Condenser Inlet Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2130"></a>             <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2131"></a>     <span class="n">ELSEIF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2132"></a><span class="k">        CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Condenser Inlet Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2133"></a>             <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2134"></a>        <span class="k">IF</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPowerFTempDiff</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="mf">0.0d0</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-2135"></a><span class="k">          CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Basin Heater Electric Power [W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2136"></a>               <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPower</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2137"></a>          <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Basin Heater Electric Energy [J]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2138"></a>               <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterConsumption</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Sum&#39;</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2139"></a>               <span class="n">ResourceTypeKey</span><span class="o">=</span><span class="s1">&#39;Electric&#39;</span><span class="p">,</span><span class="n">EndUseKey</span><span class="o">=</span><span class="s1">&#39;CHILLERS&#39;</span><span class="p">,</span><span class="n">GroupKey</span><span class="o">=</span><span class="s1">&#39;Plant&#39;</span><span class="p">)</span>
<a name="ln-2140"></a>        <span class="k">END IF</span>
<a name="ln-2141"></a><span class="k">     </span><span class="n">ENDIF</span>
<a name="ln-2142"></a>
<a name="ln-2143"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Lube Recovered Heat Rate [W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2144"></a>          <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecLubeRate</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2145"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Lube Recovered Heat Energy [J]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2146"></a>          <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecLubeEnergy</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Sum&#39;</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-2147"></a>                              <span class="n">ResourceTypeKey</span><span class="o">=</span><span class="s1">&#39;ENERGYTRANSFER&#39;</span><span class="p">,</span><span class="n">EndUseKey</span><span class="o">=</span><span class="s1">&#39;HeatRecovery&#39;</span><span class="p">,</span><span class="n">GroupKey</span><span class="o">=</span><span class="s1">&#39;Plant&#39;</span><span class="p">)</span>
<a name="ln-2148"></a>
<a name="ln-2149"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller &#39;</span><span class="o">//</span> <span class="nb">TRIM</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelType</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39; Rate [W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2150"></a>          <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelEnergyUsedRate</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2151"></a>
<a name="ln-2152"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller &#39;</span><span class="o">//</span> <span class="nb">TRIM</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelType</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39; Energy [J]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2153"></a>          <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelEnergyUsed</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Sum&#39;</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-2154"></a>                              <span class="n">ResourceTypeKey</span><span class="o">=</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelType</span><span class="p">,</span><span class="n">EndUseKey</span><span class="o">=</span><span class="s1">&#39;Cooling&#39;</span><span class="p">,</span><span class="n">GroupKey</span><span class="o">=</span><span class="s1">&#39;Plant&#39;</span><span class="p">)</span>
<a name="ln-2155"></a>
<a name="ln-2156"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller &#39;</span><span class="o">//</span> <span class="nb">TRIM</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelType</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39; Mass Flow Rate [kg/s]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2157"></a>          <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelMassUsedRate</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2158"></a>
<a name="ln-2159"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller &#39;</span><span class="o">//</span> <span class="nb">TRIM</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelType</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39; Mass [kg]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2160"></a>          <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelMassUsed</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Sum&#39;</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2161"></a>
<a name="ln-2162"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Exhaust Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2163"></a>          <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">ExhaustStackTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2164"></a>
<a name="ln-2165"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Heat Recovery Inlet Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2166"></a>          <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecInletTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2167"></a>
<a name="ln-2168"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Heat Recovery Outlet Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2169"></a>          <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecOutletTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2170"></a>
<a name="ln-2171"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Heat Recovery Mass Flow Rate [kg/s]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2172"></a>          <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecMdot</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2173"></a>
<a name="ln-2174"></a>
<a name="ln-2175"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller COP [W/W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2176"></a>          <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelCOP</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2177"></a>
<a name="ln-2178"></a>     <span class="k">IF</span> <span class="p">(</span><span class="n">AnyEnergyManagementSystemInModel</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2179"></a><span class="k">       CALL </span><span class="n">SetupEMSInternalVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Nominal Capacity&#39;</span><span class="p">,</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="s1">&#39;[W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2180"></a>                                     <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span>  <span class="p">)</span>
<a name="ln-2181"></a>     <span class="n">ENDIF</span>
<a name="ln-2182"></a>
<a name="ln-2183"></a>  <span class="k">END DO</span>
<a name="ln-2184"></a>
<a name="ln-2185"></a><span class="k">RETURN</span>
<a name="ln-2186"></a><span class="k">END SUBROUTINE </span><span class="n">GetGTChillerInput</span>
<a name="ln-2187"></a>
<a name="ln-2188"></a><span class="k">SUBROUTINE </span><span class="n">GetConstCOPChillerInput</span>
<a name="ln-2189"></a>            <span class="c">! SUBROUTINE INFORMATION:</span>
<a name="ln-2190"></a>            <span class="c">!       AUTHOR:          Dan Fisher</span>
<a name="ln-2191"></a>            <span class="c">!       DATE WRITTEN:    April 1998</span>
<a name="ln-2192"></a>
<a name="ln-2193"></a>            <span class="c">! PURPOSE OF THIS SUBROUTINE:!This routine will get the input</span>
<a name="ln-2194"></a>                         <span class="c">!required by the PrimaryPlantLoopManager.  As such</span>
<a name="ln-2195"></a>                         <span class="c">!it will interact with the Input Scanner to retrieve</span>
<a name="ln-2196"></a>                         <span class="c">!information from the input file, count the number of</span>
<a name="ln-2197"></a>                         <span class="c">!heating and cooling loops and begin to fill the</span>
<a name="ln-2198"></a>                         <span class="c">!arrays associated with the type PlantLoopProps.</span>
<a name="ln-2199"></a>
<a name="ln-2200"></a>
<a name="ln-2201"></a>            <span class="c">! METHODOLOGY EMPLOYED: to be determined...</span>
<a name="ln-2202"></a>            <span class="c">! REFERENCES:</span>
<a name="ln-2203"></a>
<a name="ln-2204"></a>            <span class="c">! USE STATEMENTS:</span>
<a name="ln-2205"></a>  <span class="k">USE </span><span class="n">InputProcessor</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">GetNumObjectsFound</span><span class="p">,</span> <span class="n">GetObjectItem</span><span class="p">,</span> <span class="n">VerifyName</span>
<a name="ln-2206"></a>  <span class="k">USE </span><span class="n">DataIPShortCuts</span>  <span class="c">! Data for field names, blank numerics</span>
<a name="ln-2207"></a>  <span class="k">USE </span><span class="n">BranchNodeConnections</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">TestCompSet</span>
<a name="ln-2208"></a>  <span class="k">USE </span><span class="n">NodeInputManager</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">GetOnlySingleNode</span>
<a name="ln-2209"></a>  <span class="k">USE </span><span class="n">GlobalNames</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">VerifyUniqueChillerName</span>
<a name="ln-2210"></a>  <span class="k">USE </span><span class="n">OutputReportPredefined</span>
<a name="ln-2211"></a>  <span class="k">USE </span><span class="n">OutAirNodeManager</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">CheckAndAddAirNodeNumber</span>
<a name="ln-2212"></a>  <span class="k">USE </span><span class="n">General</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">RoundSigDigits</span>
<a name="ln-2213"></a>  <span class="k">USE </span><span class="n">ScheduleManager</span><span class="p">,</span>    <span class="n">ONLY</span><span class="p">:</span> <span class="n">GetScheduleIndex</span>
<a name="ln-2214"></a>  <span class="k">USE </span><span class="n">DataGlobals</span><span class="p">,</span>        <span class="n">ONLY</span><span class="p">:</span> <span class="n">AnyEnergyManagementSystemInModel</span>
<a name="ln-2215"></a>
<a name="ln-2216"></a>    <span class="k">IMPLICIT NONE</span> <span class="c">! Enforce explicit typing of all variables in this routine</span>
<a name="ln-2217"></a>
<a name="ln-2218"></a>          <span class="c">! SUBROUTINE ARGUMENT DEFINITIONS:</span>
<a name="ln-2219"></a>          <span class="c">! na</span>
<a name="ln-2220"></a>
<a name="ln-2221"></a>          <span class="c">! SUBROUTINE PARAMETER DEFINITIONS:</span>
<a name="ln-2222"></a>  <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span> <span class="k">PARAMETER</span> <span class="kd">::</span> <span class="n">RoutineName</span><span class="o">=</span><span class="s1">&#39;GetConstCOPChillerInput: &#39;</span> <span class="c">! include trailing blank space</span>
<a name="ln-2223"></a>
<a name="ln-2224"></a>          <span class="c">! DERIVED TYPE DEFINITIONS</span>
<a name="ln-2225"></a>          <span class="c">! na</span>
<a name="ln-2226"></a>
<a name="ln-2227"></a>          <span class="c">! SUBROUTINE LOCAL VARIABLE DECLARATIONS:</span>
<a name="ln-2228"></a>  <span class="kt">INTEGER</span>                        <span class="kd">::</span> <span class="n">ChillerNum</span>
<a name="ln-2229"></a>  <span class="kt">INTEGER</span>                     <span class="kd">::</span> <span class="n">NumAlphas</span> <span class="c">! Number of elements in the alpha array</span>
<a name="ln-2230"></a>  <span class="kt">INTEGER</span>                     <span class="kd">::</span> <span class="n">NumNums</span>   <span class="c">! Number of elements in the numeric array</span>
<a name="ln-2231"></a>  <span class="kt">INTEGER</span>                     <span class="kd">::</span> <span class="n">IOStat</span>    <span class="c">! IO Status when calling get input subroutine</span>
<a name="ln-2232"></a>  <span class="kt">LOGICAL</span><span class="p">,</span> <span class="k">SAVE</span> <span class="kd">::</span> <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">false</span><span class="p">.</span>
<a name="ln-2233"></a>  <span class="kt">LOGICAL</span>       <span class="kd">::</span> <span class="n">IsNotOK</span>               <span class="c">! Flag to verify name</span>
<a name="ln-2234"></a>  <span class="kt">LOGICAL</span>       <span class="kd">::</span> <span class="n">IsBlank</span>               <span class="c">! Flag for blank name</span>
<a name="ln-2235"></a>  <span class="kt">LOGICAL</span>       <span class="kd">::</span> <span class="n">errflag</span>
<a name="ln-2236"></a>  <span class="kt">LOGICAL</span>       <span class="kd">::</span> <span class="n">Okay</span>
<a name="ln-2237"></a>
<a name="ln-2238"></a>            <span class="c">!GET NUMBER OF ALL EQUIPMENT TYPES</span>
<a name="ln-2239"></a>  <span class="n">cCurrentModuleObject</span> <span class="o">=</span> <span class="s1">&#39;Chiller:ConstantCOP&#39;</span>
<a name="ln-2240"></a>  <span class="n">NumConstCOPChillers</span> <span class="o">=</span> <span class="n">GetNumObjectsFound</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span>
<a name="ln-2241"></a>
<a name="ln-2242"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">NumConstCOPChillers</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2243"></a><span class="k">    CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;No &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39; equipment specified in input file&#39;</span><span class="p">)</span>
<a name="ln-2244"></a>    <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-2245"></a>  <span class="n">ENDIF</span>
<a name="ln-2246"></a>
<a name="ln-2247"></a>            <span class="c">!See if load distribution manager has already gotten the input</span>
<a name="ln-2248"></a>  <span class="k">IF</span> <span class="p">(</span><span class="nb">ALLOCATED</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">))</span><span class="k">RETURN</span>
<a name="ln-2249"></a>
<a name="ln-2250"></a><span class="k">  ALLOCATE</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">NumConstCOPChillers</span><span class="p">))</span>
<a name="ln-2251"></a>  <span class="k">ALLOCATE</span> <span class="p">(</span><span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">NumConstCOPChillers</span><span class="p">))</span>
<a name="ln-2252"></a>
<a name="ln-2253"></a>             <span class="c">!LOAD ARRAYS WITH BLAST ConstCOP CHILLER DATA</span>
<a name="ln-2254"></a>  <span class="k">DO </span><span class="n">ChillerNum</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">,</span> <span class="n">NumConstCOPChillers</span>
<a name="ln-2255"></a>    <span class="k">CALL </span><span class="n">GetObjectItem</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">,</span><span class="n">ChillerNum</span><span class="p">,</span><span class="n">cAlphaArgs</span><span class="p">,</span><span class="n">NumAlphas</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2256"></a>                       <span class="n">rNumericArgs</span><span class="p">,</span><span class="n">NumNums</span><span class="p">,</span><span class="n">IOSTAT</span><span class="p">,</span><span class="n">AlphaBlank</span><span class="o">=</span><span class="n">lAlphaFieldBlanks</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2257"></a>                       <span class="n">AlphaFieldnames</span><span class="o">=</span><span class="n">cAlphaFieldNames</span><span class="p">,</span><span class="n">NumericFieldNames</span><span class="o">=</span><span class="n">cNumericFieldNames</span><span class="p">)</span>
<a name="ln-2258"></a>
<a name="ln-2259"></a>    <span class="n">IsNotOK</span><span class="o">=</span><span class="p">.</span><span class="n">false</span><span class="p">.</span>
<a name="ln-2260"></a>    <span class="n">IsBlank</span><span class="o">=</span><span class="p">.</span><span class="n">false</span><span class="p">.</span>
<a name="ln-2261"></a>    <span class="k">CALL </span><span class="n">VerifyName</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="n">ConstCOPChiller</span><span class="p">%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span><span class="n">ChillerNum</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">IsNotOK</span><span class="p">,</span><span class="n">IsBlank</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39; Name&#39;</span><span class="p">)</span>
<a name="ln-2262"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">IsNotOK</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2263"></a><span class="k">      </span><span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-2264"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">IsBlank</span><span class="p">)</span> <span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">=</span><span class="s1">&#39;xxxxx&#39;</span>
<a name="ln-2265"></a>    <span class="n">ENDIF</span>
<a name="ln-2266"></a>    <span class="k">CALL </span><span class="n">VerifyUniqueChillerName</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="n">errflag</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39; Name&#39;</span><span class="p">)</span>
<a name="ln-2267"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">errflag</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2268"></a><span class="k">      </span><span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-2269"></a>    <span class="n">ENDIF</span>
<a name="ln-2270"></a>    <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span>                <span class="o">=</span> <span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a name="ln-2271"></a>    <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span>              <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a name="ln-2272"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2273"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cNumericFieldNames</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">RoundSigDigits</span><span class="p">(</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="mi">2</span><span class="p">)))</span>
<a name="ln-2274"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-2275"></a>      <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-2276"></a>    <span class="n">ENDIF</span>
<a name="ln-2277"></a>    <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">COP</span>                 <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<a name="ln-2278"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2279"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cNumericFieldNames</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">RoundSigDigits</span><span class="p">(</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span><span class="mi">2</span><span class="p">)))</span>
<a name="ln-2280"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-2281"></a>      <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-2282"></a>    <span class="n">ENDIF</span>
<a name="ln-2283"></a>
<a name="ln-2284"></a>    <span class="c">!Set the Condenser Type from input</span>
<a name="ln-2285"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;AIRCOOLED&#39;</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2286"></a><span class="k">      </span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span>       <span class="o">=</span> <span class="n">AirCooled</span>
<a name="ln-2287"></a>    <span class="n">ELSEIF</span> <span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;EVAPORATIVELYCOOLED&#39;</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2288"></a><span class="k">      </span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span>       <span class="o">=</span> <span class="n">EvapCooled</span>
<a name="ln-2289"></a>    <span class="n">ELSEIF</span> <span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;WATERCOOLED&#39;</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2290"></a><span class="k">      </span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span>       <span class="o">=</span> <span class="n">WaterCooled</span>
<a name="ln-2291"></a>    <span class="k">ELSE</span>
<a name="ln-2292"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">6</span><span class="p">)))</span>
<a name="ln-2293"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-2294"></a>      <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-2295"></a>    <span class="n">ENDIF</span>
<a name="ln-2296"></a>
<a name="ln-2297"></a>    <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapVolFlowRate</span>     <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<a name="ln-2298"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">AirCooled</span> <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-2299"></a>        <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span> <span class="c">! Condenser flow rate not used for these cond types</span>
<a name="ln-2300"></a>      <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span>   <span class="o">=</span> <span class="mf">0.0011d0</span>
<a name="ln-2301"></a>    <span class="k">ELSE</span>
<a name="ln-2302"></a><span class="k">      </span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span>   <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<a name="ln-2303"></a>    <span class="n">ENDIF</span>
<a name="ln-2304"></a>    <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">SizFac</span>              <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<a name="ln-2305"></a>
<a name="ln-2306"></a>    <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletNodeNum</span>    <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-2307"></a>               <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-2308"></a>               <span class="n">NodeType_Water</span><span class="p">,</span><span class="n">NodeConnectionType_Inlet</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-2309"></a>    <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span>   <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-2310"></a>               <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-2311"></a>               <span class="n">NodeType_Water</span><span class="p">,</span><span class="n">NodeConnectionType_Outlet</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-2312"></a>    <span class="k">CALL </span><span class="n">TestCompSet</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span><span class="s1">&#39;Chilled Water Nodes&#39;</span><span class="p">)</span>
<a name="ln-2313"></a>
<a name="ln-2314"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">AirCooled</span> <span class="p">.</span><span class="nb">or</span><span class="p">.</span>   <span class="p">&amp;</span>
<a name="ln-2315"></a>       <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2316"></a>      <span class="c">! Connection not required for air or evap cooled condenser</span>
<a name="ln-2317"></a>       <span class="c">!If the condenser inlet is blank for air cooled and evap cooled condensers then supply a generic name</span>
<a name="ln-2318"></a>      <span class="c">!  since it is not used elsewhere for connection</span>
<a name="ln-2319"></a>      <span class="k">IF</span><span class="p">(</span><span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span><span class="k">THEN</span>
<a name="ln-2320"></a><span class="k">        IF</span> <span class="p">(</span><span class="nb">LEN_TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">MaxNameLength</span> <span class="o">-</span> <span class="mi">21</span><span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span> <span class="c">! protect against long name leading to &gt; 100 chars</span>
<a name="ln-2321"></a>          <span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">=</span> <span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39; CONDENSER INLET NODE&#39;</span>
<a name="ln-2322"></a>        <span class="k">ELSE</span>
<a name="ln-2323"></a><span class="k">          </span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">=</span> <span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)(</span><span class="mi">1</span><span class="p">:</span><span class="mi">79</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39; CONDENSER INLET NODE&#39;</span>
<a name="ln-2324"></a>        <span class="n">ENDIF</span>
<a name="ln-2325"></a>      <span class="k">End If</span>
<a name="ln-2326"></a><span class="k">      IF</span><span class="p">(</span><span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="p">)</span><span class="k">THEN</span>
<a name="ln-2327"></a><span class="k">        IF</span> <span class="p">(</span><span class="nb">LEN_TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">MaxNameLength</span> <span class="o">-</span> <span class="mi">22</span><span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span> <span class="c">! protect against long name leading to &gt; 100 chars</span>
<a name="ln-2328"></a>          <span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">=</span> <span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39; CONDENSER OUTLET NODE&#39;</span>
<a name="ln-2329"></a>        <span class="k">ELSE</span>
<a name="ln-2330"></a><span class="k">          </span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">=</span> <span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)(</span><span class="mi">1</span><span class="p">:</span><span class="mi">78</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39; CONDENSER OUTLET NODE&#39;</span>
<a name="ln-2331"></a>        <span class="n">ENDIF</span>
<a name="ln-2332"></a>      <span class="k">END IF</span>
<a name="ln-2333"></a>
<a name="ln-2334"></a><span class="k">      </span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span>    <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-2335"></a>               <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-2336"></a>               <span class="n">NodeType_Air</span><span class="p">,</span><span class="n">NodeConnectionType_OutsideAirReference</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-2337"></a>      <span class="k">CALL </span><span class="n">CheckAndAddAirNodeNumber</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span><span class="p">,</span><span class="n">Okay</span><span class="p">)</span>
<a name="ln-2338"></a>      <span class="k">IF</span> <span class="p">(.</span><span class="nb">not</span><span class="p">.</span> <span class="n">Okay</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2339"></a><span class="k">        CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;, Adding OutdoorAir:Node=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">4</span><span class="p">)))</span>
<a name="ln-2340"></a>      <span class="n">ENDIF</span>
<a name="ln-2341"></a>
<a name="ln-2342"></a>      <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletNodeNum</span>   <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-2343"></a>               <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-2344"></a>               <span class="n">NodeType_Air</span><span class="p">,</span><span class="n">NodeConnectionType_Outlet</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-2345"></a>    <span class="n">ELSEIF</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2346"></a><span class="k">      </span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span>    <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-2347"></a>               <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-2348"></a>               <span class="n">NodeType_Water</span><span class="p">,</span><span class="n">NodeConnectionType_Inlet</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-2349"></a>      <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletNodeNum</span>   <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-2350"></a>               <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-2351"></a>               <span class="n">NodeType_Water</span><span class="p">,</span><span class="n">NodeConnectionType_Outlet</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-2352"></a>      <span class="k">CALL </span><span class="n">TestCompSet</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="s1">&#39;Condenser Water Nodes&#39;</span><span class="p">)</span>
<a name="ln-2353"></a>      <span class="c">!Condenser Inlet node name is necessary for Water Cooled</span>
<a name="ln-2354"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2355"></a><span class="k">        CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid, &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;is blank &#39;</span><span class="p">)</span>
<a name="ln-2356"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-2357"></a>        <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-2358"></a>      <span class="n">ELSEIF</span> <span class="p">(</span> <span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2359"></a><span class="k">        CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid, &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;is blank &#39;</span><span class="p">)</span>
<a name="ln-2360"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-2361"></a>        <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-2362"></a>      <span class="n">ENDIF</span>
<a name="ln-2363"></a>    <span class="k">ELSE</span>
<a name="ln-2364"></a><span class="k">      </span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span>    <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-2365"></a>               <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-2366"></a>               <span class="n">NodeType_Unknown</span><span class="p">,</span><span class="n">NodeConnectionType_Inlet</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-2367"></a>      <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletNodeNum</span>   <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-2368"></a>               <span class="n">GetOnlySingleNode</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="n">ErrorsFound</span><span class="p">,</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="p">&amp;</span>
<a name="ln-2369"></a>               <span class="n">NodeType_Unknown</span><span class="p">,</span><span class="n">NodeConnectionType_Outlet</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">ObjectIsNotParent</span><span class="p">)</span>
<a name="ln-2370"></a>      <span class="k">CALL </span><span class="n">TestCompSet</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="s1">&#39;Condenser (unknown?) Nodes&#39;</span><span class="p">)</span>
<a name="ln-2371"></a>      <span class="c">!Condenser Inlet node name is necessary for Water Cooled</span>
<a name="ln-2372"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2373"></a><span class="k">        CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid, &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;is blank &#39;</span><span class="p">)</span>
<a name="ln-2374"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-2375"></a>        <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-2376"></a>      <span class="n">ELSEIF</span> <span class="p">(</span> <span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2377"></a><span class="k">        CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Invalid, &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;is blank &#39;</span><span class="p">)</span>
<a name="ln-2378"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Entered in &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
<a name="ln-2379"></a>        <span class="n">ErrorsFound</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-2380"></a>      <span class="n">ENDIF</span>
<a name="ln-2381"></a>    <span class="n">ENDIF</span>
<a name="ln-2382"></a>
<a name="ln-2383"></a>    <span class="k">SELECT CASE</span> <span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">7</span><span class="p">)))</span>
<a name="ln-2384"></a>    <span class="k">CASE</span> <span class="p">(</span> <span class="s1">&#39;CONSTANTFLOW&#39;</span> <span class="p">)</span>
<a name="ln-2385"></a>      <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">=</span> <span class="n">ConstantFlow</span>
<a name="ln-2386"></a>    <span class="k">CASE</span> <span class="p">(</span> <span class="s1">&#39;VARIABLEFLOW&#39;</span> <span class="p">)</span>
<a name="ln-2387"></a>      <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">=</span> <span class="n">LeavingSetpointModulated</span>
<a name="ln-2388"></a>      <span class="k">CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="n">RoutineName</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&quot;&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;&quot;,&#39;</span><span class="p">)</span>
<a name="ln-2389"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">7</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">7</span><span class="p">)))</span>
<a name="ln-2390"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Key choice is now called &quot;LeavingSetpointModulated&quot; and the simulation continues&#39;</span><span class="p">)</span>
<a name="ln-2391"></a>    <span class="k">CASE</span> <span class="p">(</span><span class="s1">&#39;LEAVINGSETPOINTMODULATED&#39;</span><span class="p">)</span>
<a name="ln-2392"></a>      <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">=</span> <span class="n">LeavingSetpointModulated</span>
<a name="ln-2393"></a>    <span class="k">CASE</span> <span class="p">(</span><span class="s1">&#39;NOTMODULATED&#39;</span><span class="p">)</span>
<a name="ln-2394"></a>      <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">=</span> <span class="n">NotModulated</span>
<a name="ln-2395"></a>    <span class="k">CASE </span><span class="n">DEFAULT</span>
<a name="ln-2396"></a>      <span class="k">CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="n">RoutineName</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;=&quot;&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;&quot;,&#39;</span><span class="p">)</span>
<a name="ln-2397"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Invalid &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaFieldNames</span><span class="p">(</span><span class="mi">7</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39;=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">7</span><span class="p">)))</span>
<a name="ln-2398"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Available choices are ConstantFlow, NotModulated, or LeavingSetpointModulated&#39;</span><span class="p">)</span>
<a name="ln-2399"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Flow mode NotModulated is assumed and the simulation continues.&#39;</span><span class="p">)</span>
<a name="ln-2400"></a>      <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">=</span> <span class="n">NotModulated</span>
<a name="ln-2401"></a>    <span class="k">END SELECT</span>
<a name="ln-2402"></a>
<a name="ln-2403"></a>    <span class="c">!   Basin heater power as a function of temperature must be greater than or equal to 0</span>
<a name="ln-2404"></a>    <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPowerFTempDiff</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<a name="ln-2405"></a>    <span class="k">IF</span><span class="p">(</span><span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2406"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;, &quot;&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span><span class="o">//</span><span class="p">&amp;</span>
<a name="ln-2407"></a>                     <span class="s1">&#39;&quot; TRIM(cNumericFieldNames(6)) must be &gt;= 0&#39;</span><span class="p">)</span>
<a name="ln-2408"></a>      <span class="n">ErrorsFound</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-2409"></a>    <span class="k">END IF</span>
<a name="ln-2410"></a>
<a name="ln-2411"></a><span class="k">    </span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSetPointTemp</span> <span class="o">=</span> <span class="n">rNumericArgs</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
<a name="ln-2412"></a>
<a name="ln-2413"></a>    <span class="k">IF</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPowerFTempDiff</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2414"></a><span class="k">      IF</span><span class="p">(</span><span class="n">NumNums</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="mi">7</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2415"></a><span class="k">        </span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSetPointTemp</span> <span class="o">=</span> <span class="mf">2.0d0</span>
<a name="ln-2416"></a>      <span class="n">ENDIF</span>
<a name="ln-2417"></a>      <span class="k">IF</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSetPointTemp</span> <span class="o">&lt;</span> <span class="mf">2.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2418"></a><span class="k">        CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;:&quot;&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span><span class="o">//</span><span class="p">&amp;</span>
<a name="ln-2419"></a>           <span class="s1">&#39;&quot;, &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cNumericFieldNames</span><span class="p">(</span><span class="mi">7</span><span class="p">))</span><span class="o">//</span><span class="s1">&#39; is less than 2 deg C. Freezing could occur.&#39;</span><span class="p">)</span>
<a name="ln-2420"></a>      <span class="k">END IF</span>
<a name="ln-2421"></a><span class="k">    END IF</span>
<a name="ln-2422"></a>
<a name="ln-2423"></a><span class="k">    IF</span><span class="p">(.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">lAlphaFieldBlanks</span><span class="p">(</span><span class="mi">8</span><span class="p">))</span><span class="k">THEN</span>
<a name="ln-2424"></a><span class="k">      </span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSchedulePtr</span>   <span class="o">=</span> <span class="n">GetScheduleIndex</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">8</span><span class="p">))</span>
<a name="ln-2425"></a>      <span class="k">IF</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSchedulePtr</span> <span class="p">.</span><span class="n">EQ</span><span class="p">.</span> <span class="mi">0</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-2426"></a><span class="k">        CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;, &quot;&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span><span class="o">//</span><span class="p">&amp;</span>
<a name="ln-2427"></a>                       <span class="s1">&#39;&quot; TRIM(cAlphaFieldNames(8)) &quot;&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cAlphaArgs</span><span class="p">(</span><span class="mi">8</span><span class="p">))</span> <span class="p">&amp;</span>
<a name="ln-2428"></a>                       <span class="o">//</span><span class="s1">&#39;&quot; was not found. Basin heater operation will not be modeled and the simulation continues&#39;</span><span class="p">)</span>
<a name="ln-2429"></a>      <span class="k">END IF</span>
<a name="ln-2430"></a><span class="k">    END IF</span>
<a name="ln-2431"></a>
<a name="ln-2432"></a>
<a name="ln-2433"></a><span class="k">  END DO</span>
<a name="ln-2434"></a>
<a name="ln-2435"></a><span class="k">  IF</span> <span class="p">(</span><span class="n">ErrorsFound</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2436"></a><span class="k">    CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;Errors found in processing input for &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">cCurrentModuleObject</span><span class="p">))</span>
<a name="ln-2437"></a>  <span class="n">ENDIF</span>
<a name="ln-2438"></a>
<a name="ln-2439"></a>  <span class="k">DO </span><span class="n">ChillerNum</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">NumConstCOPChillers</span>
<a name="ln-2440"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Electric Power [W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2441"></a>          <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Power</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2442"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Electric Energy [J]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2443"></a>          <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Energy</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Sum&#39;</span><span class="p">,</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2444"></a>          <span class="n">ResourceTypeKey</span><span class="o">=</span><span class="s1">&#39;ELECTRICITY&#39;</span><span class="p">,</span><span class="n">EndUseKey</span><span class="o">=</span><span class="s1">&#39;Cooling&#39;</span><span class="p">,</span><span class="n">GroupKey</span><span class="o">=</span><span class="s1">&#39;Plant&#39;</span><span class="p">)</span>
<a name="ln-2445"></a>
<a name="ln-2446"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Evaporator Cooling Rate [W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2447"></a>          <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QEvap</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2448"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Evaporator Cooling Energy [J]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2449"></a>          <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapEnergy</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Sum&#39;</span><span class="p">,</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-2450"></a>                              <span class="n">ResourceTypeKey</span><span class="o">=</span><span class="s1">&#39;ENERGYTRANSFER&#39;</span><span class="p">,</span><span class="n">EndUseKey</span><span class="o">=</span><span class="s1">&#39;CHILLERS&#39;</span><span class="p">,</span><span class="n">GroupKey</span><span class="o">=</span><span class="s1">&#39;Plant&#39;</span><span class="p">)</span>
<a name="ln-2451"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Evaporator Inlet Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2452"></a>          <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2453"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Evaporator Outlet Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2454"></a>          <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2455"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Evaporator Mass Flow Rate [kg/s]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2456"></a>          <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Evapmdot</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2457"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller COP [W/W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2458"></a>          <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">ActualCOP</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2459"></a>
<a name="ln-2460"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Condenser Heat Transfer Rate [W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2461"></a>          <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QCond</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2462"></a>     <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Condenser Heat Transfer Energy [J]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2463"></a>          <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondEnergy</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Sum&#39;</span><span class="p">,</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-2464"></a>                              <span class="n">ResourceTypeKey</span><span class="o">=</span><span class="s1">&#39;ENERGYTRANSFER&#39;</span><span class="p">,</span><span class="n">EndUseKey</span><span class="o">=</span><span class="s1">&#39;HEATREJECTION&#39;</span><span class="p">,</span><span class="n">GroupKey</span><span class="o">=</span><span class="s1">&#39;Plant&#39;</span><span class="p">)</span>
<a name="ln-2465"></a>
<a name="ln-2466"></a>        <span class="c">!Condenser mass flow and outlet temp are valid for water cooled</span>
<a name="ln-2467"></a>     <span class="k">IF</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-2468"></a><span class="k">        CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Condenser Inlet Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2469"></a>             <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2470"></a>        <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Condenser Outlet Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2471"></a>             <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2472"></a>        <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Condenser Mass Flow Rate [kg/s]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2473"></a>             <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Condmdot</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2474"></a>     <span class="n">ELSEIF</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">AirCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2475"></a><span class="k">        CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Condenser Inlet Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2476"></a>             <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2477"></a>     <span class="n">ELSEIF</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2478"></a><span class="k">        CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Condenser Inlet Temperature [C]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2479"></a>             <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletTemp</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2480"></a>        <span class="k">IF</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPowerFTempDiff</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="mf">0.0d0</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-2481"></a><span class="k">          CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Basin Heater Electric Power [W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2482"></a>               <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPower</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span>
<a name="ln-2483"></a>          <span class="k">CALL </span><span class="n">SetupOutputVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Basin Heater Electric Energy [J]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2484"></a>               <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterConsumption</span><span class="p">,</span><span class="s1">&#39;System&#39;</span><span class="p">,</span><span class="s1">&#39;Sum&#39;</span><span class="p">,</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2485"></a>               <span class="n">ResourceTypeKey</span><span class="o">=</span><span class="s1">&#39;Electric&#39;</span><span class="p">,</span><span class="n">EndUseKey</span><span class="o">=</span><span class="s1">&#39;CHILLERS&#39;</span><span class="p">,</span><span class="n">GroupKey</span><span class="o">=</span><span class="s1">&#39;Plant&#39;</span><span class="p">)</span>
<a name="ln-2486"></a>        <span class="k">END IF</span>
<a name="ln-2487"></a><span class="k">     </span><span class="n">ENDIF</span>
<a name="ln-2488"></a>     <span class="k">IF</span> <span class="p">(</span><span class="n">AnyEnergyManagementSystemInModel</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2489"></a><span class="k">       CALL </span><span class="n">SetupEMSInternalVariable</span><span class="p">(</span><span class="s1">&#39;Chiller Nominal Capacity&#39;</span><span class="p">,</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="s1">&#39;[W]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2490"></a>                                     <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span>  <span class="p">)</span>
<a name="ln-2491"></a>     <span class="n">ENDIF</span>
<a name="ln-2492"></a>  <span class="k">END DO</span>
<a name="ln-2493"></a>
<a name="ln-2494"></a><span class="k">RETURN</span>
<a name="ln-2495"></a><span class="k">END SUBROUTINE </span><span class="n">GetConstCOPChillerInput</span>
<a name="ln-2496"></a>
<a name="ln-2497"></a><span class="k">SUBROUTINE </span><span class="n">InitElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">,</span><span class="n">RunFlag</span><span class="p">,</span> <span class="n">MyLoad</span> <span class="p">)</span>
<a name="ln-2498"></a>
<a name="ln-2499"></a>
<a name="ln-2500"></a>          <span class="c">! SUBROUTINE INFORMATION:</span>
<a name="ln-2501"></a>          <span class="c">!       AUTHOR         Fred Buhl</span>
<a name="ln-2502"></a>          <span class="c">!       DATE WRITTEN   April 2002</span>
<a name="ln-2503"></a>          <span class="c">!       MODIFIED       na</span>
<a name="ln-2504"></a>          <span class="c">!       RE-ENGINEERED  na</span>
<a name="ln-2505"></a>
<a name="ln-2506"></a>          <span class="c">! PURPOSE OF THIS SUBROUTINE:</span>
<a name="ln-2507"></a>          <span class="c">! This subroutine is for initializations of the Electric Chiller components</span>
<a name="ln-2508"></a>
<a name="ln-2509"></a>          <span class="c">! METHODOLOGY EMPLOYED:</span>
<a name="ln-2510"></a>          <span class="c">! Uses the status flags to trigger initializations.</span>
<a name="ln-2511"></a>
<a name="ln-2512"></a>          <span class="c">! REFERENCES:</span>
<a name="ln-2513"></a>          <span class="c">! na</span>
<a name="ln-2514"></a>
<a name="ln-2515"></a>          <span class="c">! USE STATEMENTS:</span>
<a name="ln-2516"></a>  <span class="k">USE </span><span class="n">DataGlobals</span><span class="p">,</span>     <span class="n">ONLY</span> <span class="p">:</span> <span class="n">BeginEnvrnFlag</span><span class="p">,</span> <span class="n">AnyEnergyManagementSystemInModel</span>
<a name="ln-2517"></a>  <span class="k">USE </span><span class="n">DataPlant</span><span class="p">,</span>       <span class="n">ONLY</span> <span class="p">:</span> <span class="n">PlantLoop</span><span class="p">,</span> <span class="n">TypeOf_Chiller_Electric</span><span class="p">,</span> <span class="n">ScanPlantLoopsForObject</span><span class="p">,</span> <span class="n">PlantSizesOkayToFinalize</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2518"></a>                              <span class="n">PlantSizeNotComplete</span><span class="p">,</span> <span class="n">LoopFlowStatus_NeedyIfLoopOn</span><span class="p">,</span> <span class="n">SingleSetpoint</span><span class="p">,</span> <span class="n">DualSetpointDeadband</span>
<a name="ln-2519"></a>  <span class="k">USE </span><span class="n">DataEnvironment</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">StdBaroPress</span>
<a name="ln-2520"></a>  <span class="k">USE </span><span class="n">Psychrometrics</span><span class="p">,</span>  <span class="n">ONLY</span> <span class="p">:</span> <span class="n">PsyRhoAirFnPbTdbW</span>
<a name="ln-2521"></a>  <span class="k">USE </span><span class="n">PlantUtilities</span><span class="p">,</span>  <span class="n">ONLY</span> <span class="p">:</span> <span class="n">InterConnectTwoPlantLoopSides</span><span class="p">,</span> <span class="n">InitComponentNodes</span><span class="p">,</span> <span class="n">SetComponentFlowRate</span>
<a name="ln-2522"></a>  <span class="k">USE </span><span class="n">FluidProperties</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">GetDensityGlycol</span>
<a name="ln-2523"></a>  <span class="k">USE </span><span class="n">EMSManager</span><span class="p">,</span>      <span class="n">ONLY</span> <span class="p">:</span> <span class="n">iTemperatureSetpoint</span><span class="p">,</span> <span class="n">CheckIfNodeSetpointManagedByEMS</span>
<a name="ln-2524"></a>  <span class="k">USE </span><span class="n">DataInterfaces</span><span class="p">,</span>  <span class="n">ONLY</span> <span class="p">:</span> <span class="n">ShowFatalError</span><span class="p">,</span> <span class="n">ShowSevereError</span><span class="p">,</span> <span class="n">ShowContinueError</span>
<a name="ln-2525"></a>          <span class="c">! na</span>
<a name="ln-2526"></a>
<a name="ln-2527"></a>  <span class="k">IMPLICIT NONE</span>    <span class="c">! Enforce explicit typing of all variables in this routine</span>
<a name="ln-2528"></a>
<a name="ln-2529"></a>          <span class="c">! SUBROUTINE ARGUMENT DEFINITIONS:</span>
<a name="ln-2530"></a>  <span class="kt">INTEGER</span><span class="p">,</span> <span class="k">INTENT</span> <span class="p">(</span><span class="n">IN</span><span class="p">)</span> <span class="kd">::</span> <span class="n">ChillNum</span>     <span class="c">! number of the current electric chiller being simulated</span>
<a name="ln-2531"></a>  <span class="kt">LOGICAL</span><span class="p">,</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span>  <span class="kd">::</span> <span class="n">RunFlag</span>      <span class="c">! TRUE when chiller operating</span>
<a name="ln-2532"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span><span class="kd">::</span> <span class="n">MyLoad</span>
<a name="ln-2533"></a>
<a name="ln-2534"></a>
<a name="ln-2535"></a>          <span class="c">! SUBROUTINE PARAMETER DEFINITIONS:</span>
<a name="ln-2536"></a>  <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span> <span class="k">PARAMETER</span> <span class="kd">::</span> <span class="n">RoutineName</span><span class="o">=</span><span class="s1">&#39;InitElectricChiller&#39;</span>
<a name="ln-2537"></a>
<a name="ln-2538"></a>          <span class="c">! INTERFACE BLOCK SPECIFICATIONS</span>
<a name="ln-2539"></a>          <span class="c">! na</span>
<a name="ln-2540"></a>
<a name="ln-2541"></a>          <span class="c">! DERIVED TYPE DEFINITIONS</span>
<a name="ln-2542"></a>          <span class="c">! na</span>
<a name="ln-2543"></a>
<a name="ln-2544"></a>          <span class="c">! SUBROUTINE LOCAL VARIABLE DECLARATIONS:</span>
<a name="ln-2545"></a>  <span class="kt">LOGICAL</span><span class="p">,</span><span class="k">SAVE</span>        <span class="kd">::</span> <span class="n">MyOneTimeFlag</span> <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-2546"></a>  <span class="kt">LOGICAL</span><span class="p">,</span> <span class="k">ALLOCATABLE</span><span class="p">,</span> <span class="k">SAVE</span><span class="p">,</span> <span class="k">DIMENSION</span><span class="p">(:)</span> <span class="kd">::</span> <span class="n">MyFlag</span>
<a name="ln-2547"></a>  <span class="kt">LOGICAL</span><span class="p">,</span> <span class="k">ALLOCATABLE</span><span class="p">,</span> <span class="k">SAVE</span><span class="p">,</span> <span class="k">DIMENSION</span><span class="p">(:)</span> <span class="kd">::</span> <span class="n">MyEnvrnFlag</span>
<a name="ln-2548"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">CondInletNode</span>      <span class="c">! node number of water inlet node to the condenser</span>
<a name="ln-2549"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">CondOutletNode</span>     <span class="c">! node number of water outlet node from the condenser</span>
<a name="ln-2550"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">EvapInletNode</span>
<a name="ln-2551"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">EvapOutletNode</span>
<a name="ln-2552"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">HeatRecInNode</span>
<a name="ln-2553"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">HeatRecOutNode</span>
<a name="ln-2554"></a>  <span class="kt">LOGICAL</span> <span class="kd">::</span> <span class="n">errFlag</span>
<a name="ln-2555"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span> <span class="kd">::</span> <span class="n">rho</span> <span class="c">! local fluid density</span>
<a name="ln-2556"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span> <span class="kd">::</span> <span class="n">mdot</span> <span class="c">! local mass flow rate</span>
<a name="ln-2557"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span> <span class="kd">::</span> <span class="n">mdotCond</span> <span class="c">! local mass flow rate for condenser</span>
<a name="ln-2558"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span> <span class="kd">::</span> <span class="n">THeatRecSetpoint</span> <span class="c">! tests set point node for proper set point value</span>
<a name="ln-2559"></a>
<a name="ln-2560"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">InletNode</span>
<a name="ln-2561"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">OutletNode</span>
<a name="ln-2562"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">LoopNum</span>
<a name="ln-2563"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">LoopSideNum</span>
<a name="ln-2564"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">BranchIndex</span>
<a name="ln-2565"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">CompIndex</span>
<a name="ln-2566"></a>  <span class="kt">LOGICAL</span> <span class="kd">::</span> <span class="n">FatalError</span>
<a name="ln-2567"></a>          <span class="c">! FLOW:</span>
<a name="ln-2568"></a>
<a name="ln-2569"></a>  <span class="c">! Do the one time initializations</span>
<a name="ln-2570"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">MyOneTimeFlag</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2571"></a><span class="k">    ALLOCATE</span><span class="p">(</span><span class="n">MyFlag</span><span class="p">(</span><span class="n">NumElectricChillers</span><span class="p">))</span>
<a name="ln-2572"></a>    <span class="k">ALLOCATE</span><span class="p">(</span><span class="n">MyEnvrnFlag</span><span class="p">(</span><span class="n">NumElectricChillers</span><span class="p">))</span>
<a name="ln-2573"></a>    <span class="n">MyFlag</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-2574"></a>    <span class="n">MyEnvrnFlag</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-2575"></a>    <span class="n">MyOneTimeFlag</span> <span class="o">=</span> <span class="p">.</span><span class="n">false</span><span class="p">.</span>
<a name="ln-2576"></a>  <span class="k">END IF</span>
<a name="ln-2577"></a>
<a name="ln-2578"></a><span class="k">  </span><span class="n">CondInletNode</span>  <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span>
<a name="ln-2579"></a>  <span class="n">CondOutletNode</span> <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletNodeNum</span>
<a name="ln-2580"></a>  <span class="n">EvapInletNode</span>  <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletNodeNum</span>
<a name="ln-2581"></a>  <span class="n">EvapOutletNode</span> <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span>
<a name="ln-2582"></a>
<a name="ln-2583"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecActive</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2584"></a><span class="k">    </span><span class="n">HeatRecInNode</span> <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span>
<a name="ln-2585"></a>    <span class="n">HeatRecOutNode</span> <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecOutletNodeNum</span>
<a name="ln-2586"></a>  <span class="n">ENDIF</span>
<a name="ln-2587"></a>
<a name="ln-2588"></a>  <span class="c">! Init more variables</span>
<a name="ln-2589"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">MyFlag</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">))</span> <span class="k">THEN</span>
<a name="ln-2590"></a>    <span class="c">! Locate the chillers on the plant loops for later usage</span>
<a name="ln-2591"></a>    <span class="n">errFlag</span><span class="o">=</span><span class="p">.</span><span class="n">false</span><span class="p">.</span>
<a name="ln-2592"></a>    <span class="k">CALL </span><span class="n">ScanPlantLoopsForObject</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2593"></a>                                 <span class="n">TypeOf_Chiller_Electric</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2594"></a>                                 <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2595"></a>                                 <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2596"></a>                                 <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2597"></a>                                 <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2598"></a>                                 <span class="n">LowLimitTemp</span> <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">TempLowLimitEvapOut</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2599"></a>                                 <span class="n">InletNodeNumber</span> <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletNodeNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-2600"></a>                                 <span class="n">errFlag</span><span class="o">=</span><span class="n">errFlag</span><span class="p">)</span>
<a name="ln-2601"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">/=</span> <span class="n">AirCooled</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-2602"></a>        <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">/=</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2603"></a><span class="k">      CALL </span><span class="n">ScanPlantLoopsForObject</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2604"></a>                                   <span class="n">TypeOf_Chiller_Electric</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2605"></a>                                   <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2606"></a>                                   <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2607"></a>                                   <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDBranchNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2608"></a>                                   <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDCompNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2609"></a>                                   <span class="n">InletNodeNumber</span> <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-2610"></a>                                   <span class="n">errFlag</span><span class="o">=</span><span class="n">errFlag</span><span class="p">)</span>
<a name="ln-2611"></a>      <span class="k">CALL </span><span class="n">InterConnectTwoPlantLoopSides</span><span class="p">(</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>      <span class="p">&amp;</span>
<a name="ln-2612"></a>                                          <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-2613"></a>                                          <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span>      <span class="p">&amp;</span>
<a name="ln-2614"></a>                                          <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-2615"></a>                                          <span class="n">TypeOf_Chiller_Electric</span><span class="p">,</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span> <span class="p">)</span>
<a name="ln-2616"></a>    <span class="n">ENDIF</span>
<a name="ln-2617"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2618"></a><span class="k">      CALL </span><span class="n">ScanPlantLoopsForObject</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2619"></a>                                   <span class="n">TypeOf_Chiller_Electric</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2620"></a>                                   <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2621"></a>                                   <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2622"></a>                                   <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRBranchNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2623"></a>                                   <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRCompNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2624"></a>                                   <span class="n">InletNodeNumber</span> <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-2625"></a>                                   <span class="n">errFlag</span><span class="o">=</span><span class="n">errFlag</span><span class="p">)</span>
<a name="ln-2626"></a>      <span class="k">CALL </span><span class="n">InterConnectTwoPlantLoopSides</span><span class="p">(</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>      <span class="p">&amp;</span>
<a name="ln-2627"></a>                                          <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-2628"></a>                                          <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">,</span>      <span class="p">&amp;</span>
<a name="ln-2629"></a>                                          <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopSideNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-2630"></a>                                          <span class="n">TypeOf_Chiller_Electric</span><span class="p">,</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>  <span class="p">)</span>
<a name="ln-2631"></a>    <span class="n">ENDIF</span>
<a name="ln-2632"></a>
<a name="ln-2633"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">/=</span> <span class="n">AirCooled</span>  <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-2634"></a>        <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">/=</span> <span class="n">EvapCooled</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-2635"></a>        <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2636"></a><span class="k">      CALL </span><span class="n">InterConnectTwoPlantLoopSides</span><span class="p">(</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span>      <span class="p">&amp;</span>
<a name="ln-2637"></a>                                          <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-2638"></a>                                          <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">,</span>      <span class="p">&amp;</span>
<a name="ln-2639"></a>                                          <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopSideNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-2640"></a>                                          <span class="n">TypeOf_Chiller_Electric</span><span class="p">,</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span> <span class="p">)</span>
<a name="ln-2641"></a>    <span class="n">ENDIF</span>
<a name="ln-2642"></a>
<a name="ln-2643"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">errFlag</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2644"></a><span class="k">      CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;InitElectricChiller: Program terminated due to previous condition(s).&#39;</span><span class="p">)</span>
<a name="ln-2645"></a>    <span class="n">ENDIF</span>
<a name="ln-2646"></a>
<a name="ln-2647"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">ConstantFlow</span> <span class="p">)</span> <span class="k">Then</span>
<a name="ln-2648"></a>      <span class="c">! reset flow priority</span>
<a name="ln-2649"></a>      <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">LoopSide</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">)%</span> <span class="p">&amp;</span>
<a name="ln-2650"></a>          <span class="n">Branch</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">)%</span><span class="n">Comp</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)%</span><span class="n">FlowPriority</span> <span class="p">&amp;</span>
<a name="ln-2651"></a>              <span class="o">=</span> <span class="n">LoopFlowStatus_NeedyIfLoopOn</span>
<a name="ln-2652"></a>    <span class="n">ENDIF</span>
<a name="ln-2653"></a>
<a name="ln-2654"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">LeavingSetpointModulated</span><span class="p">)</span> <span class="k">Then</span>
<a name="ln-2655"></a>      <span class="c">! reset flow priority</span>
<a name="ln-2656"></a>      <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">LoopSide</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">)%</span> <span class="p">&amp;</span>
<a name="ln-2657"></a>          <span class="n">Branch</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">)%</span><span class="n">Comp</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)%</span><span class="n">FlowPriority</span> <span class="p">&amp;</span>
<a name="ln-2658"></a>              <span class="o">=</span> <span class="n">LoopFlowStatus_NeedyIfLoopOn</span>
<a name="ln-2659"></a>
<a name="ln-2660"></a>      <span class="c">! check if setpoint on outlet node</span>
<a name="ln-2661"></a>      <span class="k">IF</span> <span class="p">((</span><span class="n">Node</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">)%</span><span class="n">TempSetPoint</span>   <span class="o">==</span> <span class="n">SensedNodeFlagValue</span><span class="p">)</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-2662"></a>          <span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">)%</span><span class="n">TempSetPointHi</span> <span class="o">==</span> <span class="n">SensedNodeFlagValue</span><span class="p">))</span> <span class="k">THEN</span>
<a name="ln-2663"></a><span class="k">        IF</span> <span class="p">(.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">AnyEnergyManagementSystemInModel</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2664"></a><span class="k">          IF</span> <span class="p">(.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">ModulatedFlowErrDone</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2665"></a><span class="k">            CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="s1">&#39;Missing temperature setpoint for LeavingSetpointModulated mode chiller named &#39;</span> <span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-2666"></a>                                          <span class="nb">TRIM</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span> <span class="p">)</span>
<a name="ln-2667"></a>            <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;  A temperature setpoint is needed at the outlet node of a chiller &#39;</span> <span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-2668"></a>                                             <span class="s1">&#39;in variable flow mode, use a SetpointManager&#39;</span><span class="p">)</span>
<a name="ln-2669"></a>            <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;  The overall loop setpoint will be assumed for chiller. The simulation continues ... &#39;</span><span class="p">)</span>
<a name="ln-2670"></a>            <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">ModulatedFlowErrDone</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-2671"></a>          <span class="n">ENDIF</span>
<a name="ln-2672"></a>        <span class="k">ELSE</span>
<a name="ln-2673"></a>         <span class="c">! need call to EMS to check node</span>
<a name="ln-2674"></a>          <span class="n">FatalError</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span> <span class="c">! but not really fatal yet, but should be.</span>
<a name="ln-2675"></a>          <span class="k">CALL </span><span class="n">CheckIfNodeSetpointManagedByEMS</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">,</span><span class="n">iTemperatureSetpoint</span><span class="p">,</span> <span class="n">FatalError</span><span class="p">)</span>
<a name="ln-2676"></a>          <span class="k">IF</span> <span class="p">(</span><span class="n">FatalError</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2677"></a><span class="k">            IF</span> <span class="p">(.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">ModulatedFlowErrDone</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2678"></a><span class="k">              CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="s1">&#39;Missing temperature setpoint for LeavingSetpointModulated mode chiller named &#39;</span> <span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-2679"></a>                                          <span class="nb">TRIM</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span> <span class="p">)</span>
<a name="ln-2680"></a>              <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;  A temperature setpoint is needed at the outlet node of a chiller evaporator &#39;</span> <span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-2681"></a>                                             <span class="s1">&#39;in variable flow mode&#39;</span><span class="p">)</span>
<a name="ln-2682"></a>              <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;  use a Setpoint Manager to establish a setpoint at the chiller evaporator outlet node &#39;</span><span class="p">)</span>
<a name="ln-2683"></a>              <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;  or use an EMS actuator to establish a setpoint at the outlet node &#39;</span><span class="p">)</span>
<a name="ln-2684"></a>              <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;  The overall loop setpoint will be assumed for chiller. The simulation continues ... &#39;</span><span class="p">)</span>
<a name="ln-2685"></a>              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">ModulatedFlowErrDone</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-2686"></a>            <span class="n">ENDIF</span>
<a name="ln-2687"></a>          <span class="n">ENDIF</span>
<a name="ln-2688"></a>
<a name="ln-2689"></a>
<a name="ln-2690"></a>        <span class="n">ENDIF</span>
<a name="ln-2691"></a>        <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">ModulatedFlowSetToLoop</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-2692"></a>        <span class="k">SELECT CASE</span> <span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">LoopDemandCalcScheme</span><span class="p">)</span>
<a name="ln-2693"></a>        <span class="k">CASE</span> <span class="p">(</span><span class="n">SingleSetpoint</span><span class="p">)</span>
<a name="ln-2694"></a>          <span class="n">Node</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">)%</span><span class="n">TempSetPoint</span> <span class="o">=</span>                        <span class="p">&amp;</span>
<a name="ln-2695"></a>            <span class="n">Node</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">TempSetPointNodeNum</span><span class="p">)%</span><span class="n">TempSetPoint</span>
<a name="ln-2696"></a>        <span class="k">CASE</span> <span class="p">(</span><span class="n">DualSetpointDeadband</span><span class="p">)</span>
<a name="ln-2697"></a>          <span class="n">Node</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">)%</span><span class="n">TempSetPointHi</span> <span class="o">=</span>                        <span class="p">&amp;</span>
<a name="ln-2698"></a>            <span class="n">Node</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">TempSetPointNodeNum</span><span class="p">)%</span><span class="n">TempSetPointHi</span>
<a name="ln-2699"></a>        <span class="k">END SELECT</span>
<a name="ln-2700"></a><span class="k">      </span><span class="n">ENDIF</span>
<a name="ln-2701"></a>    <span class="n">ENDIF</span>
<a name="ln-2702"></a>    <span class="n">MyFlag</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)</span><span class="o">=</span><span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-2703"></a>  <span class="n">ENDIF</span>
<a name="ln-2704"></a>
<a name="ln-2705"></a>  <span class="k">IF</span><span class="p">(</span> <span class="n">MyEnvrnFlag</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="n">BeginEnvrnFlag</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">))</span> <span class="k">THEN</span>
<a name="ln-2706"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">PlantSizeNotComplete</span><span class="p">)</span> <span class="k">CALL </span><span class="n">SizeElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)</span>
<a name="ln-2707"></a>    <span class="n">rho</span> <span class="o">=</span> <span class="n">GetDensityGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-2708"></a>                                <span class="n">InitConvTemp</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2709"></a>                                <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,&amp;</span>
<a name="ln-2710"></a>                                <span class="n">RoutineName</span><span class="p">)</span>
<a name="ln-2711"></a>
<a name="ln-2712"></a>    <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapMassFlowRateMax</span> <span class="o">=</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapVolFlowRate</span>
<a name="ln-2713"></a>    <span class="k">CALL </span><span class="n">InitComponentNodes</span><span class="p">(</span><span class="mf">0.0D0</span><span class="p">,</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapMassFlowRateMax</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-2714"></a>                         <span class="n">EvapInletNode</span><span class="p">,</span>        <span class="p">&amp;</span>
<a name="ln-2715"></a>                         <span class="n">EvapOutletNode</span><span class="p">,</span>       <span class="p">&amp;</span>
<a name="ln-2716"></a>                         <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>               <span class="p">&amp;</span>
<a name="ln-2717"></a>                         <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span>           <span class="p">&amp;</span>
<a name="ln-2718"></a>                         <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span>             <span class="p">&amp;</span>
<a name="ln-2719"></a>                         <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)</span>
<a name="ln-2720"></a>
<a name="ln-2721"></a>          <span class="c">!init maximum available condenser flow rate</span>
<a name="ln-2722"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2723"></a>
<a name="ln-2724"></a><span class="k">      </span><span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">TempDesCondIn</span>  <span class="c">!DSU? old behavior, still want?</span>
<a name="ln-2725"></a>
<a name="ln-2726"></a>      <span class="n">rho</span> <span class="o">=</span> <span class="n">GetDensityGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-2727"></a>                                  <span class="n">InitConvTemp</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2728"></a>                                  <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,&amp;</span>
<a name="ln-2729"></a>                                  <span class="n">RoutineName</span><span class="p">)</span>
<a name="ln-2730"></a>
<a name="ln-2731"></a>      <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondMassFlowRateMax</span> <span class="o">=</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span>
<a name="ln-2732"></a>
<a name="ln-2733"></a>      <span class="k">CALL </span><span class="n">InitComponentNodes</span><span class="p">(</span><span class="mf">0.0D0</span><span class="p">,</span>  <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondMassFlowRateMax</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-2734"></a>                         <span class="n">CondInletNode</span><span class="p">,</span>        <span class="p">&amp;</span>
<a name="ln-2735"></a>                         <span class="n">CondOutletNode</span><span class="p">,</span>       <span class="p">&amp;</span>
<a name="ln-2736"></a>                         <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span>               <span class="p">&amp;</span>
<a name="ln-2737"></a>                         <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span>           <span class="p">&amp;</span>
<a name="ln-2738"></a>                         <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDBranchNum</span><span class="p">,</span>             <span class="p">&amp;</span>
<a name="ln-2739"></a>                         <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDCompNum</span><span class="p">)</span>
<a name="ln-2740"></a>    <span class="k">ELSE</span> <span class="c">! air or evap-air</span>
<a name="ln-2741"></a>
<a name="ln-2742"></a>      <span class="n">rho</span> <span class="o">=</span> <span class="n">PsyRhoAirFnPbTdbW</span><span class="p">(</span><span class="n">StdBaroPress</span><span class="p">,</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">TempDesCondIn</span><span class="p">,</span><span class="mf">0.0D0</span><span class="p">,</span><span class="n">RoutineName</span><span class="p">)</span>
<a name="ln-2743"></a>      <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondMassFlowRateMax</span> <span class="o">=</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span>
<a name="ln-2744"></a>
<a name="ln-2745"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowRate</span>        <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondMassFlowRateMax</span>
<a name="ln-2746"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">MassFlowrate</span>         <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowrate</span>
<a name="ln-2747"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowRateMaxAvail</span>  <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowrate</span>
<a name="ln-2748"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowRateMax</span>       <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowrate</span>
<a name="ln-2749"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">MassFlowRateMax</span>      <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowrate</span>
<a name="ln-2750"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowRateMinAvail</span>  <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-2751"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowRateMin</span>       <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-2752"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">MassFlowRateMinAvail</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-2753"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">MassFlowRateMin</span>      <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-2754"></a>    <span class="k">END IF</span>
<a name="ln-2755"></a>
<a name="ln-2756"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2757"></a><span class="k">      </span><span class="n">rho</span> <span class="o">=</span> <span class="n">GetDensityGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-2758"></a>                                  <span class="n">InitConvTemp</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2759"></a>                                  <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,&amp;</span>
<a name="ln-2760"></a>                                  <span class="n">RoutineName</span><span class="p">)</span>
<a name="ln-2761"></a>      <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">DesignHeatRecMassFlowRate</span> <span class="o">=</span> <span class="n">rho</span> <span class="o">*</span> <span class="p">&amp;</span>
<a name="ln-2762"></a>                                         <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">DesignHeatRecVolFlowRate</span>
<a name="ln-2763"></a>
<a name="ln-2764"></a>      <span class="k">CALL </span><span class="n">InitComponentNodes</span><span class="p">(</span><span class="mf">0.0D0</span><span class="p">,</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">DesignHeatRecMassFlowRate</span> <span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-2765"></a>                         <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span><span class="p">,</span>        <span class="p">&amp;</span>
<a name="ln-2766"></a>                         <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecOutletNodeNum</span><span class="p">,</span>       <span class="p">&amp;</span>
<a name="ln-2767"></a>                         <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">,</span>               <span class="p">&amp;</span>
<a name="ln-2768"></a>                         <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopSideNum</span><span class="p">,</span>           <span class="p">&amp;</span>
<a name="ln-2769"></a>                         <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRBranchNum</span><span class="p">,</span>             <span class="p">&amp;</span>
<a name="ln-2770"></a>                         <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRCompNum</span><span class="p">)</span>
<a name="ln-2771"></a>      <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecMaxCapacityLimit</span> <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecCapacityFraction</span> <span class="p">&amp;</span>
<a name="ln-2772"></a>                           <span class="o">*</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span> <span class="o">+</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span> <span class="p">&amp;</span>
<a name="ln-2773"></a>                                                                 <span class="o">/</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">COP</span>  <span class="p">)</span>
<a name="ln-2774"></a>
<a name="ln-2775"></a>      <span class="k">IF</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecSetpointNodeNum</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-2776"></a><span class="k">        SELECT CASE</span> <span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">)%</span><span class="n">LoopDemandCalcScheme</span><span class="p">)</span>
<a name="ln-2777"></a>          <span class="k">CASE</span> <span class="p">(</span><span class="n">SingleSetPoint</span><span class="p">)</span>
<a name="ln-2778"></a>            <span class="n">THeatRecSetpoint</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecSetpointNodeNum</span><span class="p">)%</span><span class="n">TempSetPoint</span>
<a name="ln-2779"></a>          <span class="k">CASE</span> <span class="p">(</span><span class="n">DualSetPointDeadBand</span><span class="p">)</span>
<a name="ln-2780"></a>            <span class="n">THeatRecSetpoint</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecSetpointNodeNum</span><span class="p">)%</span><span class="n">TempSetPointHi</span>
<a name="ln-2781"></a>        <span class="k">END SELECT</span>
<a name="ln-2782"></a><span class="k">        IF</span><span class="p">(</span><span class="n">THeatRecSetpoint</span> <span class="o">==</span> <span class="n">SensedNodeFlagValue</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-2783"></a><span class="k">          IF</span> <span class="p">(.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">AnyEnergyManagementSystemInModel</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2784"></a><span class="k">            IF</span> <span class="p">(.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">HRSPErrDone</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2785"></a><span class="k">              CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="s1">&#39;Missing heat recovery temperature setpoint for chiller named &#39;</span> <span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-2786"></a>                                          <span class="nb">TRIM</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span> <span class="p">)</span>
<a name="ln-2787"></a>              <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;  A temperature setpoint is needed at the heat recovery leaving temperature &#39;</span> <span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-2788"></a>                                             <span class="s1">&#39;setpoint node specified, use a SetpointManager&#39;</span><span class="p">)</span>
<a name="ln-2789"></a>              <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;  The overall loop setpoint will be assumed for heat recovery. The simulation continues ...&#39;</span><span class="p">)</span>
<a name="ln-2790"></a>              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecSetpointNodeNum</span> <span class="o">=</span> <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">)%</span><span class="n">TempSetPointNodeNum</span>
<a name="ln-2791"></a>                <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">HRSPErrDone</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-2792"></a>            <span class="n">ENDIF</span>
<a name="ln-2793"></a>          <span class="k">ELSE</span>
<a name="ln-2794"></a>           <span class="c">! need call to EMS to check node</span>
<a name="ln-2795"></a>            <span class="n">FatalError</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span> <span class="c">! but not really fatal yet, but should be.</span>
<a name="ln-2796"></a>            <span class="k">CALL </span><span class="n">CheckIfNodeSetpointManagedByEMS</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">,</span><span class="n">iTemperatureSetpoint</span><span class="p">,</span> <span class="n">FatalError</span><span class="p">)</span>
<a name="ln-2797"></a>            <span class="k">IF</span> <span class="p">(</span><span class="n">FatalError</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2798"></a><span class="k">              IF</span> <span class="p">(.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">HRSPErrDone</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2799"></a><span class="k">                CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="s1">&#39;Missing heat recovery temperature setpoint for chiller named &#39;</span> <span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-2800"></a>                                          <span class="nb">TRIM</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span> <span class="p">)</span>
<a name="ln-2801"></a>                <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;  A temperature setpoint is needed at the heat recovery leaving temperature &#39;</span> <span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-2802"></a>                                     <span class="s1">&#39;setpoint node specified, use a SetpointManager to establish a setpoint&#39;</span><span class="p">)</span>
<a name="ln-2803"></a>                <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;  or use an EMS actuator to establish a setpoint at this node &#39;</span><span class="p">)</span>
<a name="ln-2804"></a>                <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;  The overall loop setpoint will be assumed &#39;</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-2805"></a>                   <span class="s1">&#39;for heat recovery. The simulation continues ...&#39;</span><span class="p">)</span>
<a name="ln-2806"></a>                <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecSetpointNodeNum</span> <span class="o">=</span>   <span class="p">&amp;</span>
<a name="ln-2807"></a>                   <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">)%</span><span class="n">TempSetPointNodeNum</span>
<a name="ln-2808"></a>                <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">HRSPErrDone</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-2809"></a>              <span class="n">ENDIF</span>
<a name="ln-2810"></a>            <span class="n">ENDIF</span>
<a name="ln-2811"></a>          <span class="k">END IF</span> <span class="c">! IF (.NOT. AnyEnergyManagementSystemInModel) THEN</span>
<a name="ln-2812"></a>        <span class="k">END IF</span> <span class="c">! IF(THeatRecSetpoint == SensedNodeFlagValue)THEN</span>
<a name="ln-2813"></a>      <span class="k">END IF</span> <span class="c">! IF(ElectricChiller(ChillNum)%HeatRecSetpointNodeNum &gt; 0)THEN</span>
<a name="ln-2814"></a>    <span class="n">ENDIF</span> <span class="c">! IF (ElectricChiller(ChillNum)%HeatRecActive) THEN</span>
<a name="ln-2815"></a>
<a name="ln-2816"></a>    <span class="n">MyEnvrnFlag</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-2817"></a>  <span class="k">END IF</span>
<a name="ln-2818"></a><span class="k">  IF</span> <span class="p">(.</span><span class="nb">not</span><span class="p">.</span> <span class="n">BeginEnvrnFlag</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2819"></a><span class="k">    </span><span class="n">MyEnvrnFlag</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-2820"></a>  <span class="n">ENDIF</span>
<a name="ln-2821"></a>
<a name="ln-2822"></a>  <span class="k">IF</span> <span class="p">(</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">LeavingSetpointModulated</span><span class="p">)</span> <span class="p">&amp;</span>
<a name="ln-2823"></a>       <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">ModulatedFlowSetToLoop</span><span class="p">))</span> <span class="k">THEN</span>
<a name="ln-2824"></a>  <span class="c">! fix for clumsy old input that worked because loop setpoint was spread.</span>
<a name="ln-2825"></a>  <span class="c">!  could be removed with transition, testing , model change, period of being obsolete.</span>
<a name="ln-2826"></a>    <span class="k">SELECT CASE</span> <span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">LoopDemandCalcScheme</span><span class="p">)</span>
<a name="ln-2827"></a>    <span class="k">CASE</span> <span class="p">(</span><span class="n">SingleSetpoint</span><span class="p">)</span>
<a name="ln-2828"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">)%</span><span class="n">TempSetPoint</span> <span class="o">=</span>                        <span class="p">&amp;</span>
<a name="ln-2829"></a>        <span class="n">Node</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">TempSetPointNodeNum</span><span class="p">)%</span><span class="n">TempSetPoint</span>
<a name="ln-2830"></a>    <span class="k">CASE</span> <span class="p">(</span><span class="n">DualSetpointDeadband</span><span class="p">)</span>
<a name="ln-2831"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">)%</span><span class="n">TempSetPointHi</span> <span class="o">=</span>                        <span class="p">&amp;</span>
<a name="ln-2832"></a>        <span class="n">Node</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">TempSetPointNodeNum</span><span class="p">)%</span><span class="n">TempSetPointHi</span>
<a name="ln-2833"></a>    <span class="k">END SELECT</span>
<a name="ln-2834"></a>
<a name="ln-2835"></a><span class="k">  </span><span class="n">ENDIF</span>
<a name="ln-2836"></a>
<a name="ln-2837"></a><span class="c">!</span>
<a name="ln-2838"></a>
<a name="ln-2839"></a>  <span class="k">IF</span> <span class="p">((</span><span class="n">MyLoad</span> <span class="o">&lt;</span> <span class="mf">0.d0</span><span class="p">)</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="n">RunFlag</span><span class="p">)</span>  <span class="k">THEN</span>
<a name="ln-2840"></a>    <span class="c">! request full then take what can get</span>
<a name="ln-2841"></a>    <span class="n">mdot</span>     <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapMassFlowRateMax</span>
<a name="ln-2842"></a>    <span class="n">mdotCond</span> <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondMassFlowRateMax</span>
<a name="ln-2843"></a>  <span class="k">ELSE</span>
<a name="ln-2844"></a><span class="k">    </span><span class="n">mdot</span>     <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-2845"></a>    <span class="n">mdotCond</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-2846"></a>  <span class="n">ENDIF</span>
<a name="ln-2847"></a>
<a name="ln-2848"></a>  <span class="k">CALL </span><span class="n">SetComponentFlowRate</span><span class="p">(</span> <span class="n">mdot</span><span class="p">,</span> <span class="n">EvapInletNode</span><span class="p">,</span> <span class="n">EvapOutletNode</span><span class="p">,</span>            <span class="p">&amp;</span>
<a name="ln-2849"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-2850"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2851"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-2852"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)</span>
<a name="ln-2853"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2854"></a><span class="k">    CALL </span><span class="n">SetComponentFlowRate</span><span class="p">(</span> <span class="n">mdotCond</span><span class="p">,</span> <span class="n">CondInletNode</span><span class="p">,</span> <span class="n">CondOutletNode</span><span class="p">,</span>         <span class="p">&amp;</span>
<a name="ln-2855"></a>                                <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-2856"></a>                                <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2857"></a>                                <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDBranchNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-2858"></a>                                <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDCompNum</span><span class="p">)</span>
<a name="ln-2859"></a>  <span class="n">ENDIF</span>
<a name="ln-2860"></a>
<a name="ln-2861"></a>
<a name="ln-2862"></a>  <span class="c">! Initialize heat recovery flow rates at node</span>
<a name="ln-2863"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecActive</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2864"></a>
<a name="ln-2865"></a><span class="k">    </span><span class="n">InletNode</span>    <span class="o">=</span>  <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span>
<a name="ln-2866"></a>    <span class="n">OutletNode</span>   <span class="o">=</span>  <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecOutletNodeNum</span>
<a name="ln-2867"></a>    <span class="n">LoopNum</span>      <span class="o">=</span>  <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span>
<a name="ln-2868"></a>    <span class="n">LoopSideNum</span>  <span class="o">=</span>  <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopSideNum</span>
<a name="ln-2869"></a>    <span class="n">BranchIndex</span>  <span class="o">=</span>  <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRBranchNum</span>
<a name="ln-2870"></a>    <span class="n">CompIndex</span>    <span class="o">=</span>  <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRCompNum</span>
<a name="ln-2871"></a>
<a name="ln-2872"></a>    <span class="k">If</span> <span class="p">(</span> <span class="n">RunFlag</span> <span class="p">)</span> <span class="k">Then</span>
<a name="ln-2873"></a><span class="k">      </span><span class="n">mdot</span> <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">DesignHeatRecMassFlowRate</span>
<a name="ln-2874"></a>    <span class="k">ELSE</span>
<a name="ln-2875"></a><span class="k">      </span><span class="n">mdot</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-2876"></a>    <span class="n">ENDIF</span>
<a name="ln-2877"></a>
<a name="ln-2878"></a>    <span class="k">CALL </span><span class="n">SetComponentFlowRate</span><span class="p">(</span><span class="n">mdot</span><span class="p">,</span><span class="n">InletNode</span><span class="p">,</span><span class="n">OutletNode</span><span class="p">,</span><span class="n">LoopNum</span><span class="p">,</span><span class="n">LoopSideNum</span><span class="p">,</span><span class="n">BranchIndex</span><span class="p">,</span><span class="n">CompIndex</span><span class="p">)</span>
<a name="ln-2879"></a>
<a name="ln-2880"></a>  <span class="k">END IF</span>
<a name="ln-2881"></a>
<a name="ln-2882"></a><span class="k">  IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2883"></a><span class="k">    </span><span class="n">BasinHeaterPower</span>       <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-2884"></a>  <span class="n">ENDIF</span>
<a name="ln-2885"></a>
<a name="ln-2886"></a>  <span class="k">RETURN</span>
<a name="ln-2887"></a>
<a name="ln-2888"></a><span class="k">END SUBROUTINE </span><span class="n">InitElectricChiller</span>
<a name="ln-2889"></a>
<a name="ln-2890"></a>
<a name="ln-2891"></a><span class="k">SUBROUTINE </span><span class="n">InitEngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">,</span><span class="n">RunFlag</span><span class="p">,</span><span class="n">MyLoad</span><span class="p">)</span>
<a name="ln-2892"></a>
<a name="ln-2893"></a>          <span class="c">! SUBROUTINE INFORMATION:</span>
<a name="ln-2894"></a>          <span class="c">!       AUTHOR         Fred Buhl</span>
<a name="ln-2895"></a>          <span class="c">!       DATE WRITTEN   June 2002</span>
<a name="ln-2896"></a>          <span class="c">!       MODIFIED       na</span>
<a name="ln-2897"></a>          <span class="c">!       RE-ENGINEERED  na</span>
<a name="ln-2898"></a>
<a name="ln-2899"></a>          <span class="c">! PURPOSE OF THIS SUBROUTINE:</span>
<a name="ln-2900"></a>          <span class="c">! This subroutine is for initializations of the Engine Driven Chiller components</span>
<a name="ln-2901"></a>
<a name="ln-2902"></a>          <span class="c">! METHODOLOGY EMPLOYED:</span>
<a name="ln-2903"></a>          <span class="c">! Uses the status flags to trigger initializations.</span>
<a name="ln-2904"></a>
<a name="ln-2905"></a>          <span class="c">! REFERENCES:</span>
<a name="ln-2906"></a>          <span class="c">! na</span>
<a name="ln-2907"></a>
<a name="ln-2908"></a>          <span class="c">! USE STATEMENTS:</span>
<a name="ln-2909"></a>  <span class="k">USE </span><span class="n">DataGlobals</span><span class="p">,</span>     <span class="n">ONLY</span> <span class="p">:</span> <span class="n">BeginEnvrnFlag</span><span class="p">,</span> <span class="n">AnyEnergyManagementSystemInModel</span>
<a name="ln-2910"></a>  <span class="k">USE </span><span class="n">DataPlant</span><span class="p">,</span>       <span class="n">ONLY</span> <span class="p">:</span> <span class="n">PlantLoop</span><span class="p">,</span> <span class="n">TypeOf_Chiller_EngineDriven</span><span class="p">,</span> <span class="n">ScanPlantLoopsForObject</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2911"></a>                              <span class="n">PlantSizesOkayToFinalize</span><span class="p">,</span> <span class="n">PlantSizeNotComplete</span><span class="p">,</span> <span class="n">LoopFlowStatus_NeedyIfLoopOn</span>
<a name="ln-2912"></a>  <span class="k">USE </span><span class="n">DataEnvironment</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">StdBaroPress</span>
<a name="ln-2913"></a>  <span class="k">USE </span><span class="n">Psychrometrics</span><span class="p">,</span>  <span class="n">ONLY</span> <span class="p">:</span> <span class="n">PsyRhoAirFnPbTdbW</span>
<a name="ln-2914"></a>  <span class="k">USE </span><span class="n">PlantUtilities</span><span class="p">,</span>  <span class="n">ONLY</span> <span class="p">:</span> <span class="n">InterConnectTwoPlantLoopSides</span><span class="p">,</span> <span class="n">InitComponentNodes</span><span class="p">,</span> <span class="n">SetComponentFlowRate</span>
<a name="ln-2915"></a>  <span class="k">USE </span><span class="n">FluidProperties</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">GetDensityGlycol</span>
<a name="ln-2916"></a>  <span class="k">USE </span><span class="n">EMSManager</span><span class="p">,</span>      <span class="n">ONLY</span> <span class="p">:</span> <span class="n">iTemperatureSetpoint</span><span class="p">,</span> <span class="n">CheckIfNodeSetpointManagedByEMS</span>
<a name="ln-2917"></a>  <span class="k">USE </span><span class="n">DataInterfaces</span><span class="p">,</span>  <span class="n">ONLY</span> <span class="p">:</span> <span class="n">ShowFatalError</span><span class="p">,</span> <span class="n">ShowSevereError</span><span class="p">,</span> <span class="n">ShowContinueError</span>
<a name="ln-2918"></a>
<a name="ln-2919"></a>  <span class="k">IMPLICIT NONE</span>    <span class="c">! Enforce explicit typing of all variables in this routine</span>
<a name="ln-2920"></a>
<a name="ln-2921"></a>          <span class="c">! SUBROUTINE ARGUMENT DEFINITIONS:</span>
<a name="ln-2922"></a>  <span class="kt">INTEGER</span><span class="p">,</span> <span class="k">INTENT</span> <span class="p">(</span><span class="n">IN</span><span class="p">)</span> <span class="kd">::</span> <span class="n">ChillNum</span>     <span class="c">! number of the current engine driven chiller being simulated</span>
<a name="ln-2923"></a>  <span class="kt">LOGICAL</span><span class="p">,</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span>  <span class="kd">::</span> <span class="n">RunFlag</span>      <span class="c">! TRUE when chiller operating</span>
<a name="ln-2924"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span><span class="kd">::</span> <span class="n">MyLoad</span>
<a name="ln-2925"></a>
<a name="ln-2926"></a>          <span class="c">! SUBROUTINE PARAMETER DEFINITIONS:</span>
<a name="ln-2927"></a>  <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span> <span class="k">PARAMETER</span> <span class="kd">::</span> <span class="n">RoutineName</span><span class="o">=</span><span class="s1">&#39;InitEngineDrivenChiller&#39;</span>
<a name="ln-2928"></a>
<a name="ln-2929"></a>          <span class="c">! INTERFACE BLOCK SPECIFICATIONS</span>
<a name="ln-2930"></a>          <span class="c">! na</span>
<a name="ln-2931"></a>
<a name="ln-2932"></a>          <span class="c">! DERIVED TYPE DEFINITIONS</span>
<a name="ln-2933"></a>          <span class="c">! na</span>
<a name="ln-2934"></a>
<a name="ln-2935"></a>          <span class="c">! SUBROUTINE LOCAL VARIABLE DECLARATIONS:</span>
<a name="ln-2936"></a>  <span class="kt">LOGICAL</span><span class="p">,</span><span class="k">SAVE</span>        <span class="kd">::</span> <span class="n">MyOneTimeFlag</span> <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-2937"></a>  <span class="kt">LOGICAL</span><span class="p">,</span> <span class="k">ALLOCATABLE</span><span class="p">,</span><span class="k">Save</span><span class="p">,</span> <span class="k">DIMENSION</span><span class="p">(:)</span> <span class="kd">::</span> <span class="n">MyEnvrnFlag</span>
<a name="ln-2938"></a>  <span class="kt">LOGICAL</span><span class="p">,</span> <span class="k">ALLOCATABLE</span><span class="p">,</span><span class="k">Save</span><span class="p">,</span> <span class="k">DIMENSION</span><span class="p">(:)</span> <span class="kd">::</span> <span class="n">MyFlag</span>
<a name="ln-2939"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">CondInletNode</span>      <span class="c">! node number of water inlet node to the condenser</span>
<a name="ln-2940"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">CondOutletNode</span>
<a name="ln-2941"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">EvapInletNode</span>
<a name="ln-2942"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">EvapOutletNode</span>
<a name="ln-2943"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">HeatRecInNode</span>
<a name="ln-2944"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">HeatRecOutNode</span>
<a name="ln-2945"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span> <span class="kd">::</span> <span class="n">rho</span>       <span class="c">! local fluid density</span>
<a name="ln-2946"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span> <span class="kd">::</span> <span class="n">mdot</span>      <span class="c">! local mass flow rate</span>
<a name="ln-2947"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span> <span class="kd">::</span> <span class="n">mdotCond</span>  <span class="c">! local mass flow rate for condenser</span>
<a name="ln-2948"></a>  <span class="kt">LOGICAL</span> <span class="kd">::</span> <span class="n">errFlag</span>
<a name="ln-2949"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">InletNode</span>
<a name="ln-2950"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">OutletNode</span>
<a name="ln-2951"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">LoopNum</span>
<a name="ln-2952"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">LoopSideNum</span>
<a name="ln-2953"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">BranchIndex</span>
<a name="ln-2954"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">CompIndex</span>
<a name="ln-2955"></a>  <span class="kt">LOGICAL</span> <span class="kd">::</span> <span class="n">FatalError</span>
<a name="ln-2956"></a>
<a name="ln-2957"></a>          <span class="c">! FLOW:</span>
<a name="ln-2958"></a>
<a name="ln-2959"></a>  <span class="c">! Do the one time initializations</span>
<a name="ln-2960"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">MyOneTimeFlag</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2961"></a><span class="k">    ALLOCATE</span><span class="p">(</span><span class="n">MyFlag</span><span class="p">(</span><span class="n">NumEngineDrivenChillers</span><span class="p">))</span>
<a name="ln-2962"></a>    <span class="k">ALLOCATE</span><span class="p">(</span><span class="n">MyEnvrnFlag</span><span class="p">(</span><span class="n">NumEngineDrivenChillers</span><span class="p">))</span>
<a name="ln-2963"></a>    <span class="n">MyFlag</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-2964"></a>    <span class="n">MyEnvrnFlag</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-2965"></a>    <span class="n">MyOneTimeFlag</span> <span class="o">=</span> <span class="p">.</span><span class="n">false</span><span class="p">.</span>
<a name="ln-2966"></a>  <span class="k">END IF</span>
<a name="ln-2967"></a>
<a name="ln-2968"></a>  <span class="c">!Load inputs to local structure</span>
<a name="ln-2969"></a>  <span class="n">CondInletNode</span>  <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span>
<a name="ln-2970"></a>  <span class="n">CondOutletNode</span> <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletNodeNum</span>
<a name="ln-2971"></a>  <span class="n">EvapInletNode</span>  <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletNodeNum</span>
<a name="ln-2972"></a>  <span class="n">EvapOutletNode</span> <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span>
<a name="ln-2973"></a>
<a name="ln-2974"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2975"></a><span class="k">    </span><span class="n">HeatRecInNode</span> <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span>
<a name="ln-2976"></a>    <span class="n">HeatRecOutNode</span> <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecOutletNodeNum</span>
<a name="ln-2977"></a>  <span class="n">ENDIF</span>
<a name="ln-2978"></a>
<a name="ln-2979"></a>  <span class="c">! Init more variables</span>
<a name="ln-2980"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">MyFlag</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">))</span> <span class="k">THEN</span>
<a name="ln-2981"></a>    <span class="c">! Locate the chillers on the plant loops for later usage</span>
<a name="ln-2982"></a>    <span class="n">errFlag</span><span class="o">=</span><span class="p">.</span><span class="n">false</span><span class="p">.</span>
<a name="ln-2983"></a>    <span class="k">CALL </span><span class="n">ScanPlantLoopsForObject</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2984"></a>                                 <span class="n">TypeOf_Chiller_EngineDriven</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2985"></a>                                 <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2986"></a>                                 <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2987"></a>                                 <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2988"></a>                                 <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2989"></a>                                 <span class="n">LowLimitTemp</span> <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">TempLowLimitEvapOut</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2990"></a>                                 <span class="n">InletNodeNumber</span> <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletNodeNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-2991"></a>                                 <span class="n">errFlag</span><span class="o">=</span><span class="n">errFlag</span><span class="p">)</span>
<a name="ln-2992"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">/=</span> <span class="n">AirCooled</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-2993"></a>        <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">/=</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-2994"></a><span class="k">      CALL </span><span class="n">ScanPlantLoopsForObject</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2995"></a>                                   <span class="n">TypeOf_Chiller_EngineDriven</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2996"></a>                                   <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2997"></a>                                   <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2998"></a>                                   <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDBranchNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-2999"></a>                                   <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDCompNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3000"></a>                                   <span class="n">InletNodeNumber</span> <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3001"></a>                                   <span class="n">errFlag</span><span class="o">=</span><span class="n">errFlag</span><span class="p">)</span>
<a name="ln-3002"></a>      <span class="k">CALL </span><span class="n">InterConnectTwoPlantLoopSides</span><span class="p">(</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>      <span class="p">&amp;</span>
<a name="ln-3003"></a>                                          <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3004"></a>                                          <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span>      <span class="p">&amp;</span>
<a name="ln-3005"></a>                                          <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3006"></a>                                          <span class="n">TypeOf_Chiller_EngineDriven</span><span class="p">,</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span> <span class="p">)</span>
<a name="ln-3007"></a>    <span class="n">ENDIF</span>
<a name="ln-3008"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecActive</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3009"></a><span class="k">      CALL </span><span class="n">ScanPlantLoopsForObject</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3010"></a>                                   <span class="n">TypeOf_Chiller_EngineDriven</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3011"></a>                                   <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3012"></a>                                   <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3013"></a>                                   <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRBranchNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3014"></a>                                   <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRCompNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3015"></a>                                   <span class="n">InletNodeNumber</span> <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3016"></a>                                   <span class="n">errFlag</span><span class="o">=</span><span class="n">errFlag</span><span class="p">)</span>
<a name="ln-3017"></a>      <span class="k">CALL </span><span class="n">InterConnectTwoPlantLoopSides</span><span class="p">(</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>      <span class="p">&amp;</span>
<a name="ln-3018"></a>                                          <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3019"></a>                                          <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">,</span>      <span class="p">&amp;</span>
<a name="ln-3020"></a>                                          <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopSideNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3021"></a>                                          <span class="n">TypeOf_Chiller_EngineDriven</span> <span class="p">,</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span> <span class="p">)</span>
<a name="ln-3022"></a>    <span class="n">ENDIF</span>
<a name="ln-3023"></a>    <span class="n">MyFlag</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)</span><span class="o">=</span><span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-3024"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">/=</span> <span class="n">AirCooled</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-3025"></a>        <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">/=</span> <span class="n">EvapCooled</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-3026"></a>        <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="p">)</span>  <span class="k">THEN</span>
<a name="ln-3027"></a><span class="k">      CALL </span><span class="n">InterConnectTwoPlantLoopSides</span><span class="p">(</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span>      <span class="p">&amp;</span>
<a name="ln-3028"></a>                                          <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3029"></a>                                          <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">,</span>      <span class="p">&amp;</span>
<a name="ln-3030"></a>                                          <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopSideNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3031"></a>                                          <span class="n">TypeOf_Chiller_EngineDriven</span><span class="p">,</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span> <span class="p">)</span>
<a name="ln-3032"></a>    <span class="n">ENDIF</span>
<a name="ln-3033"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">errFlag</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3034"></a><span class="k">      CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;InitEngineDrivenChiller: Program terminated due to previous condition(s).&#39;</span><span class="p">)</span>
<a name="ln-3035"></a>    <span class="n">ENDIF</span>
<a name="ln-3036"></a>
<a name="ln-3037"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">ConstantFlow</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3038"></a>      <span class="c">! reset flow priority</span>
<a name="ln-3039"></a>      <span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">LoopSide</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">)%</span> <span class="p">&amp;</span>
<a name="ln-3040"></a>          <span class="n">Branch</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">)%</span><span class="n">Comp</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)%</span><span class="n">FlowPriority</span> <span class="p">&amp;</span>
<a name="ln-3041"></a>              <span class="o">=</span> <span class="n">LoopFlowStatus_NeedyIfLoopOn</span>
<a name="ln-3042"></a>    <span class="n">ENDIF</span>
<a name="ln-3043"></a>
<a name="ln-3044"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">LeavingSetpointModulated</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3045"></a>      <span class="c">! reset flow priority</span>
<a name="ln-3046"></a>      <span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">LoopSide</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">)%</span> <span class="p">&amp;</span>
<a name="ln-3047"></a>          <span class="n">Branch</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">)%</span><span class="n">Comp</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)%</span><span class="n">FlowPriority</span> <span class="p">&amp;</span>
<a name="ln-3048"></a>              <span class="o">=</span> <span class="n">LoopFlowStatus_NeedyIfLoopOn</span>
<a name="ln-3049"></a>      <span class="c">! check if setpoint on outlet node</span>
<a name="ln-3050"></a>      <span class="k">IF</span> <span class="p">((</span><span class="n">Node</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">)%</span><span class="n">TempSetPoint</span> <span class="o">==</span> <span class="n">SensedNodeFlagValue</span><span class="p">)</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-3051"></a>          <span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">)%</span><span class="n">TempSetPointHi</span> <span class="o">==</span> <span class="n">SensedNodeFlagValue</span><span class="p">))</span> <span class="k">THEN</span>
<a name="ln-3052"></a><span class="k">        IF</span> <span class="p">(.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">AnyEnergyManagementSystemInModel</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3053"></a><span class="k">          IF</span> <span class="p">(.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">ModulatedFlowErrDone</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3054"></a><span class="k">            CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="s1">&#39;Missing temperature setpoint for LeavingSetpointModulated mode chiller named &#39;</span> <span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-3055"></a>                                          <span class="nb">TRIM</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span> <span class="p">)</span>
<a name="ln-3056"></a>            <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;  A temperature setpoint is needed at the outlet node of a chiller &#39;</span> <span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-3057"></a>                                             <span class="s1">&#39;in variable flow mode, use a SetpointManager&#39;</span><span class="p">)</span>
<a name="ln-3058"></a>            <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;  The overall loop setpoint will be assumed for chiller. The simulation continues ... &#39;</span><span class="p">)</span>
<a name="ln-3059"></a>            <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">ModulatedFlowErrDone</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-3060"></a>          <span class="n">ENDIF</span>
<a name="ln-3061"></a>        <span class="k">ELSE</span>
<a name="ln-3062"></a>         <span class="c">! need call to EMS to check node</span>
<a name="ln-3063"></a>          <span class="n">FatalError</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span> <span class="c">! but not really fatal yet, but should be.</span>
<a name="ln-3064"></a>          <span class="k">CALL </span><span class="n">CheckIfNodeSetpointManagedByEMS</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3065"></a>             <span class="n">iTemperatureSetpoint</span><span class="p">,</span> <span class="n">FatalError</span><span class="p">)</span>
<a name="ln-3066"></a>          <span class="k">IF</span> <span class="p">(</span><span class="n">FatalError</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3067"></a><span class="k">            IF</span> <span class="p">(.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">ModulatedFlowErrDone</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3068"></a><span class="k">              CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="s1">&#39;Missing temperature setpoint for LeavingSetpointModulated mode chiller named &#39;</span> <span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-3069"></a>                                          <span class="nb">TRIM</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span> <span class="p">)</span>
<a name="ln-3070"></a>              <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;  A temperature setpoint is needed at the outlet node of a chiller evaporator &#39;</span> <span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-3071"></a>                                             <span class="s1">&#39;in variable flow mode&#39;</span><span class="p">)</span>
<a name="ln-3072"></a>              <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;  use a Setpoint Manager to establish a setpoint at the chiller evaporator outlet node &#39;</span><span class="p">)</span>
<a name="ln-3073"></a>              <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;  or use an EMS actuator to establish a setpoint at the outlet node &#39;</span><span class="p">)</span>
<a name="ln-3074"></a>              <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;  The overall loop setpoint will be assumed for chiller. The simulation continues ... &#39;</span><span class="p">)</span>
<a name="ln-3075"></a>              <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">ModulatedFlowErrDone</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-3076"></a>            <span class="n">ENDIF</span>
<a name="ln-3077"></a>          <span class="n">ENDIF</span>
<a name="ln-3078"></a>
<a name="ln-3079"></a>
<a name="ln-3080"></a>        <span class="n">ENDIF</span>
<a name="ln-3081"></a>        <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">ModulatedFlowSetToLoop</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-3082"></a>        <span class="n">Node</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">)%</span><span class="n">TempSetPoint</span> <span class="o">=</span>                        <span class="p">&amp;</span>
<a name="ln-3083"></a>          <span class="n">Node</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">TempSetPointNodeNum</span><span class="p">)%</span><span class="n">TempSetPoint</span>
<a name="ln-3084"></a>        <span class="n">Node</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">)%</span><span class="n">TempSetPointHi</span> <span class="o">=</span>                        <span class="p">&amp;</span>
<a name="ln-3085"></a>          <span class="n">Node</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">TempSetPointNodeNum</span><span class="p">)%</span><span class="n">TempSetPointHi</span>
<a name="ln-3086"></a>      <span class="n">ENDIF</span>
<a name="ln-3087"></a>    <span class="n">ENDIF</span>
<a name="ln-3088"></a>
<a name="ln-3089"></a>    <span class="n">MyFlag</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)</span><span class="o">=</span><span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-3090"></a>  <span class="n">ENDIF</span>
<a name="ln-3091"></a>
<a name="ln-3092"></a>          <span class="c">!Initialize critical Demand Side Variables</span>
<a name="ln-3093"></a><span class="c">!  IF((MyEnvrnFlag(ChillNum) .and. BeginEnvrnFlag) &amp;</span>
<a name="ln-3094"></a><span class="c">!     .OR. (Node(CondInletNode)%MassFlowrate &lt;= 0.0 .AND. RunFlag)) THEN</span>
<a name="ln-3095"></a>  <span class="k">IF</span><span class="p">(</span><span class="n">MyEnvrnFlag</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)</span> <span class="p">.</span><span class="nb">and</span><span class="p">.</span> <span class="n">BeginEnvrnFlag</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">))</span> <span class="k">THEN</span>
<a name="ln-3096"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">PlantSizeNotComplete</span><span class="p">)</span>  <span class="k">CALL </span><span class="n">SizeEngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)</span>
<a name="ln-3097"></a>    <span class="n">rho</span> <span class="o">=</span> <span class="n">GetDensityGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3098"></a>                                <span class="n">InitConvTemp</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3099"></a>                                <span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,&amp;</span>
<a name="ln-3100"></a>                                <span class="n">RoutineName</span><span class="p">)</span>
<a name="ln-3101"></a>
<a name="ln-3102"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapMassFlowRateMax</span> <span class="o">=</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapVolFlowRate</span>
<a name="ln-3103"></a>    <span class="k">CALL </span><span class="n">InitComponentNodes</span><span class="p">(</span><span class="mf">0.0D0</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapMassFlowRateMax</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3104"></a>                         <span class="n">EvapInletNode</span><span class="p">,</span>        <span class="p">&amp;</span>
<a name="ln-3105"></a>                         <span class="n">EvapOutletNode</span><span class="p">,</span>       <span class="p">&amp;</span>
<a name="ln-3106"></a>                         <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>               <span class="p">&amp;</span>
<a name="ln-3107"></a>                         <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span>           <span class="p">&amp;</span>
<a name="ln-3108"></a>                         <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span>             <span class="p">&amp;</span>
<a name="ln-3109"></a>                         <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)</span>
<a name="ln-3110"></a>
<a name="ln-3111"></a>          <span class="c">!init maximum available condenser flow rate</span>
<a name="ln-3112"></a>
<a name="ln-3113"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3114"></a>
<a name="ln-3115"></a><span class="k">      </span><span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">TempDesCondIn</span>
<a name="ln-3116"></a>
<a name="ln-3117"></a>      <span class="n">rho</span> <span class="o">=</span> <span class="n">GetDensityGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3118"></a>                                  <span class="n">InitConvTemp</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3119"></a>                                  <span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,&amp;</span>
<a name="ln-3120"></a>                                  <span class="n">RoutineName</span><span class="p">)</span>
<a name="ln-3121"></a>
<a name="ln-3122"></a>      <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondMassFlowRateMax</span> <span class="o">=</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span>
<a name="ln-3123"></a>
<a name="ln-3124"></a>      <span class="k">CALL </span><span class="n">InitComponentNodes</span><span class="p">(</span><span class="mf">0.0D0</span><span class="p">,</span>  <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondMassFlowRateMax</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3125"></a>                         <span class="n">CondInletNode</span><span class="p">,</span>        <span class="p">&amp;</span>
<a name="ln-3126"></a>                         <span class="n">CondOutletNode</span><span class="p">,</span>       <span class="p">&amp;</span>
<a name="ln-3127"></a>                         <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span>               <span class="p">&amp;</span>
<a name="ln-3128"></a>                         <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span>           <span class="p">&amp;</span>
<a name="ln-3129"></a>                         <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDBranchNum</span><span class="p">,</span>             <span class="p">&amp;</span>
<a name="ln-3130"></a>                         <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDCompNum</span><span class="p">)</span>
<a name="ln-3131"></a>    <span class="k">ELSE</span> <span class="c">! air or evap-air</span>
<a name="ln-3132"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowRate</span>        <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span> <span class="o">*</span> <span class="p">&amp;</span>
<a name="ln-3133"></a>        <span class="n">PsyRhoAirFnPbTdbW</span><span class="p">(</span><span class="n">StdBaroPress</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">TempDesCondIn</span><span class="p">,</span><span class="mf">0.0D0</span><span class="p">,</span><span class="n">RoutineName</span><span class="p">)</span>
<a name="ln-3134"></a>
<a name="ln-3135"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">MassFlowrate</span>         <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowrate</span>
<a name="ln-3136"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowRateMaxAvail</span>  <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowrate</span>
<a name="ln-3137"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowRateMax</span>       <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowrate</span>
<a name="ln-3138"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">MassFlowRateMax</span>      <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowrate</span>
<a name="ln-3139"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowRateMinAvail</span>  <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-3140"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowRateMin</span>       <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-3141"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">MassFlowRateMinAvail</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-3142"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">MassFlowRateMin</span>      <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-3143"></a>    <span class="k">END IF</span>
<a name="ln-3144"></a>
<a name="ln-3145"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3146"></a><span class="k">      </span><span class="n">rho</span> <span class="o">=</span> <span class="n">GetDensityGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3147"></a>                                  <span class="n">InitConvTemp</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3148"></a>                                  <span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,&amp;</span>
<a name="ln-3149"></a>                                  <span class="n">RoutineName</span><span class="p">)</span>
<a name="ln-3150"></a>      <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">DesignHeatRecMassFlowRate</span> <span class="o">=</span> <span class="n">rho</span> <span class="o">*</span> <span class="p">&amp;</span>
<a name="ln-3151"></a>                                         <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">DesignHeatRecVolFlowRate</span>
<a name="ln-3152"></a>
<a name="ln-3153"></a>      <span class="k">CALL </span><span class="n">InitComponentNodes</span><span class="p">(</span><span class="mf">0.0D0</span><span class="p">,</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">DesignHeatRecMassFlowRate</span> <span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3154"></a>                         <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span><span class="p">,</span>        <span class="p">&amp;</span>
<a name="ln-3155"></a>                         <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecOutletNodeNum</span><span class="p">,</span>       <span class="p">&amp;</span>
<a name="ln-3156"></a>                         <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">,</span>               <span class="p">&amp;</span>
<a name="ln-3157"></a>                         <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopSideNum</span><span class="p">,</span>           <span class="p">&amp;</span>
<a name="ln-3158"></a>                         <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRBranchNum</span><span class="p">,</span>             <span class="p">&amp;</span>
<a name="ln-3159"></a>                         <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRCompNum</span><span class="p">)</span>
<a name="ln-3160"></a>    <span class="n">ENDIF</span>
<a name="ln-3161"></a>
<a name="ln-3162"></a>    <span class="n">MyEnvrnFlag</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-3163"></a>  <span class="k">END IF</span>
<a name="ln-3164"></a>
<a name="ln-3165"></a><span class="k">  IF</span> <span class="p">(.</span><span class="nb">not</span><span class="p">.</span> <span class="n">BeginEnvrnFlag</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3166"></a><span class="k">    </span><span class="n">MyEnvrnFlag</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-3167"></a>  <span class="n">ENDIF</span>
<a name="ln-3168"></a>
<a name="ln-3169"></a>  <span class="k">IF</span> <span class="p">((</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">LeavingSetpointModulated</span><span class="p">)</span> <span class="p">&amp;</span>
<a name="ln-3170"></a>       <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">ModulatedFlowSetToLoop</span><span class="p">))</span> <span class="k">THEN</span>
<a name="ln-3171"></a>  <span class="c">! fix for clumsy old input that worked because loop setpoint was spread.</span>
<a name="ln-3172"></a>  <span class="c">!  could be removed with transition, testing , model change, period of being obsolete.</span>
<a name="ln-3173"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">)%</span><span class="n">TempSetPoint</span> <span class="o">=</span>                        <span class="p">&amp;</span>
<a name="ln-3174"></a>         <span class="n">Node</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">TempSetPointNodeNum</span><span class="p">)%</span><span class="n">TempSetPoint</span>
<a name="ln-3175"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">)%</span><span class="n">TempSetPointHi</span> <span class="o">=</span>                        <span class="p">&amp;</span>
<a name="ln-3176"></a>         <span class="n">Node</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">TempSetPointNodeNum</span><span class="p">)%</span><span class="n">TempSetPointHi</span>
<a name="ln-3177"></a>  <span class="n">ENDIF</span>
<a name="ln-3178"></a>
<a name="ln-3179"></a>  <span class="k">IF</span> <span class="p">((</span><span class="nb">ABS</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.d0</span><span class="p">)</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="n">RunFlag</span><span class="p">)</span>  <span class="k">THEN</span>
<a name="ln-3180"></a><span class="k">    </span><span class="n">mdot</span>     <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapMassFlowRateMax</span>
<a name="ln-3181"></a>    <span class="n">mdotCond</span> <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondMassFlowRateMax</span>
<a name="ln-3182"></a>  <span class="k">ELSE</span>
<a name="ln-3183"></a><span class="k">    </span><span class="n">mdot</span>     <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-3184"></a>    <span class="n">mdotCond</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-3185"></a>  <span class="n">ENDIF</span>
<a name="ln-3186"></a>
<a name="ln-3187"></a>  <span class="k">CALL </span><span class="n">SetComponentFlowRate</span><span class="p">(</span> <span class="n">mdot</span><span class="p">,</span> <span class="n">EvapInletNode</span><span class="p">,</span> <span class="n">EvapOutletNode</span><span class="p">,</span>            <span class="p">&amp;</span>
<a name="ln-3188"></a>                              <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-3189"></a>                              <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3190"></a>                              <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-3191"></a>                              <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)</span>
<a name="ln-3192"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3193"></a><span class="k">    CALL </span><span class="n">SetComponentFlowRate</span><span class="p">(</span> <span class="n">mdotCond</span><span class="p">,</span> <span class="n">CondInletNode</span><span class="p">,</span> <span class="n">CondOutletNode</span><span class="p">,</span>        <span class="p">&amp;</span>
<a name="ln-3194"></a>                              <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-3195"></a>                              <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3196"></a>                              <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDBranchNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-3197"></a>                              <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDCompNum</span><span class="p">)</span>
<a name="ln-3198"></a>  <span class="n">ENDIF</span>
<a name="ln-3199"></a>
<a name="ln-3200"></a>  <span class="c">! Initialize heat recovery flow rates at node</span>
<a name="ln-3201"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecActive</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3202"></a><span class="k">    </span><span class="n">InletNode</span>    <span class="o">=</span>  <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span>
<a name="ln-3203"></a>    <span class="n">OutletNode</span>   <span class="o">=</span>  <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecOutletNodeNum</span>
<a name="ln-3204"></a>    <span class="n">LoopNum</span>      <span class="o">=</span>  <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span>
<a name="ln-3205"></a>    <span class="n">LoopSideNum</span>  <span class="o">=</span>  <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopSideNum</span>
<a name="ln-3206"></a>    <span class="n">BranchIndex</span>  <span class="o">=</span>  <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRBranchNum</span>
<a name="ln-3207"></a>    <span class="n">CompIndex</span>    <span class="o">=</span>  <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRCompNum</span>
<a name="ln-3208"></a>
<a name="ln-3209"></a>    <span class="k">If</span> <span class="p">(</span> <span class="n">RunFlag</span> <span class="p">)</span> <span class="k">Then</span>
<a name="ln-3210"></a><span class="k">      </span><span class="n">mdot</span> <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">DesignHeatRecMassFlowRate</span>
<a name="ln-3211"></a>    <span class="k">ELSE</span>
<a name="ln-3212"></a><span class="k">      </span><span class="n">mdot</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-3213"></a>    <span class="n">ENDIF</span>
<a name="ln-3214"></a>
<a name="ln-3215"></a>    <span class="k">CALL </span><span class="n">SetComponentFlowRate</span><span class="p">(</span><span class="n">mdot</span><span class="p">,</span><span class="n">InletNode</span><span class="p">,</span><span class="n">OutletNode</span><span class="p">,</span><span class="n">LoopNum</span><span class="p">,</span><span class="n">LoopSideNum</span><span class="p">,</span><span class="n">BranchIndex</span><span class="p">,</span><span class="n">CompIndex</span><span class="p">)</span>
<a name="ln-3216"></a>
<a name="ln-3217"></a>  <span class="k">END IF</span>
<a name="ln-3218"></a><span class="k">  IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3219"></a><span class="k">    </span><span class="n">BasinHeaterPower</span>       <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-3220"></a>  <span class="n">ENDIF</span>
<a name="ln-3221"></a>
<a name="ln-3222"></a>  <span class="k">RETURN</span>
<a name="ln-3223"></a>
<a name="ln-3224"></a><span class="k">END SUBROUTINE </span><span class="n">InitEngineDrivenChiller</span>
<a name="ln-3225"></a>
<a name="ln-3226"></a><span class="k">SUBROUTINE </span><span class="n">InitGTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">,</span><span class="n">RunFlag</span><span class="p">,</span> <span class="n">MyLoad</span><span class="p">)</span>
<a name="ln-3227"></a>
<a name="ln-3228"></a>          <span class="c">! SUBROUTINE INFORMATION:</span>
<a name="ln-3229"></a>          <span class="c">!       AUTHOR         Fred Buhl</span>
<a name="ln-3230"></a>          <span class="c">!       DATE WRITTEN   November 2003</span>
<a name="ln-3231"></a>          <span class="c">!       MODIFIED       na</span>
<a name="ln-3232"></a>          <span class="c">!       RE-ENGINEERED  na</span>
<a name="ln-3233"></a>
<a name="ln-3234"></a>          <span class="c">! PURPOSE OF THIS SUBROUTINE:</span>
<a name="ln-3235"></a>          <span class="c">! This subroutine is for initializations of the Gas Turbine Chiller components</span>
<a name="ln-3236"></a>
<a name="ln-3237"></a>          <span class="c">! METHODOLOGY EMPLOYED:</span>
<a name="ln-3238"></a>          <span class="c">! Uses the status flags to trigger initializations.</span>
<a name="ln-3239"></a>
<a name="ln-3240"></a>          <span class="c">! REFERENCES:</span>
<a name="ln-3241"></a>          <span class="c">! na</span>
<a name="ln-3242"></a>
<a name="ln-3243"></a>          <span class="c">! USE STATEMENTS:</span>
<a name="ln-3244"></a>  <span class="k">USE </span><span class="n">DataGlobals</span><span class="p">,</span>     <span class="n">ONLY</span> <span class="p">:</span> <span class="n">BeginEnvrnFlag</span><span class="p">,</span> <span class="n">AnyEnergyManagementSystemInModel</span>
<a name="ln-3245"></a>  <span class="k">USE </span><span class="n">DataPlant</span><span class="p">,</span>       <span class="n">ONLY</span> <span class="p">:</span> <span class="n">PlantLoop</span><span class="p">,</span> <span class="n">TypeOf_Chiller_CombTurbine</span><span class="p">,</span> <span class="n">ScanPlantLoopsForObject</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3246"></a>                              <span class="n">PlantSizeNotComplete</span><span class="p">,</span> <span class="n">PlantSizesOkayToFinalize</span><span class="p">,</span> <span class="n">LoopFlowStatus_NeedyIfLoopOn</span>
<a name="ln-3247"></a>  <span class="k">USE </span><span class="n">DataEnvironment</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">StdBaroPress</span>
<a name="ln-3248"></a>  <span class="k">USE </span><span class="n">Psychrometrics</span><span class="p">,</span>  <span class="n">ONLY</span> <span class="p">:</span> <span class="n">PsyRhoAirFnPbTdbW</span>
<a name="ln-3249"></a>  <span class="k">USE </span><span class="n">PlantUtilities</span><span class="p">,</span>  <span class="n">ONLY</span> <span class="p">:</span> <span class="n">InterConnectTwoPlantLoopSides</span><span class="p">,</span> <span class="n">InitComponentNodes</span><span class="p">,</span> <span class="n">SetComponentFlowRate</span>
<a name="ln-3250"></a>  <span class="k">USE </span><span class="n">FluidProperties</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">GetDensityGlycol</span>
<a name="ln-3251"></a>  <span class="k">USE </span><span class="n">EMSManager</span><span class="p">,</span>      <span class="n">ONLY</span> <span class="p">:</span> <span class="n">iTemperatureSetpoint</span><span class="p">,</span> <span class="n">CheckIfNodeSetpointManagedByEMS</span>
<a name="ln-3252"></a>  <span class="k">USE </span><span class="n">DataInterfaces</span><span class="p">,</span>  <span class="n">ONLY</span> <span class="p">:</span> <span class="n">ShowFatalError</span><span class="p">,</span> <span class="n">ShowSevereError</span><span class="p">,</span> <span class="n">ShowContinueError</span>
<a name="ln-3253"></a>
<a name="ln-3254"></a>  <span class="k">IMPLICIT NONE</span>    <span class="c">! Enforce explicit typing of all variables in this routine</span>
<a name="ln-3255"></a>
<a name="ln-3256"></a>          <span class="c">! SUBROUTINE ARGUMENT DEFINITIONS:</span>
<a name="ln-3257"></a>  <span class="kt">INTEGER</span><span class="p">,</span> <span class="k">INTENT</span> <span class="p">(</span><span class="n">IN</span><span class="p">)</span> <span class="kd">::</span> <span class="n">ChillNum</span>     <span class="c">! number of the current engine driven chiller being simulated</span>
<a name="ln-3258"></a>  <span class="kt">LOGICAL</span><span class="p">,</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span>  <span class="kd">::</span> <span class="n">RunFlag</span>      <span class="c">! TRUE when chiller operating</span>
<a name="ln-3259"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span><span class="kd">::</span> <span class="n">MyLoad</span>
<a name="ln-3260"></a>
<a name="ln-3261"></a>          <span class="c">! SUBROUTINE PARAMETER DEFINITIONS:</span>
<a name="ln-3262"></a>  <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span> <span class="k">PARAMETER</span> <span class="kd">::</span> <span class="n">RoutineName</span><span class="o">=</span><span class="s1">&#39;InitGTChiller&#39;</span>
<a name="ln-3263"></a>
<a name="ln-3264"></a>          <span class="c">! INTERFACE BLOCK SPECIFICATIONS</span>
<a name="ln-3265"></a>          <span class="c">! na</span>
<a name="ln-3266"></a>
<a name="ln-3267"></a>          <span class="c">! DERIVED TYPE DEFINITIONS</span>
<a name="ln-3268"></a>          <span class="c">! na</span>
<a name="ln-3269"></a>
<a name="ln-3270"></a>          <span class="c">! SUBROUTINE LOCAL VARIABLE DECLARATIONS:</span>
<a name="ln-3271"></a>  <span class="kt">LOGICAL</span><span class="p">,</span><span class="k">SAVE</span>        <span class="kd">::</span> <span class="n">MyOneTimeFlag</span> <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-3272"></a>  <span class="kt">LOGICAL</span><span class="p">,</span> <span class="k">ALLOCATABLE</span><span class="p">,</span><span class="k">Save</span><span class="p">,</span> <span class="k">DIMENSION</span><span class="p">(:)</span> <span class="kd">::</span> <span class="n">MyEnvrnFlag</span>
<a name="ln-3273"></a>  <span class="kt">LOGICAL</span><span class="p">,</span> <span class="k">ALLOCATABLE</span><span class="p">,</span><span class="k">Save</span><span class="p">,</span> <span class="k">DIMENSION</span><span class="p">(:)</span> <span class="kd">::</span> <span class="n">MyFlag</span>
<a name="ln-3274"></a>  <span class="kt">INTEGER</span>   <span class="kd">::</span> <span class="n">CondInletNode</span>      <span class="c">! node number of water inlet node to the condenser</span>
<a name="ln-3275"></a>  <span class="kt">INTEGER</span>   <span class="kd">::</span> <span class="n">CondOutletNode</span>     <span class="c">! node number of water outlet node from the condenser</span>
<a name="ln-3276"></a>  <span class="kt">INTEGER</span>   <span class="kd">::</span> <span class="n">EvapInletNode</span>
<a name="ln-3277"></a>  <span class="kt">INTEGER</span>   <span class="kd">::</span> <span class="n">EvapOutletNode</span>
<a name="ln-3278"></a>  <span class="kt">INTEGER</span>   <span class="kd">::</span> <span class="n">HeatRecInNode</span>
<a name="ln-3279"></a>  <span class="kt">INTEGER</span>   <span class="kd">::</span> <span class="n">HeatRecOutNode</span>
<a name="ln-3280"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span> <span class="kd">::</span> <span class="n">rho</span>       <span class="c">! local fluid density</span>
<a name="ln-3281"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span> <span class="kd">::</span> <span class="n">mdot</span>      <span class="c">! local mass flow rate</span>
<a name="ln-3282"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span> <span class="kd">::</span> <span class="n">mdotCond</span>  <span class="c">! local mass flow rate for condenser</span>
<a name="ln-3283"></a>  <span class="kt">INTEGER</span>   <span class="kd">::</span> <span class="n">InletNode</span>
<a name="ln-3284"></a>  <span class="kt">INTEGER</span>   <span class="kd">::</span> <span class="n">OutletNode</span>
<a name="ln-3285"></a>  <span class="kt">INTEGER</span>   <span class="kd">::</span> <span class="n">LoopNum</span>
<a name="ln-3286"></a>  <span class="kt">INTEGER</span>   <span class="kd">::</span> <span class="n">LoopSideNum</span>
<a name="ln-3287"></a>  <span class="kt">INTEGER</span>   <span class="kd">::</span> <span class="n">BranchIndex</span>
<a name="ln-3288"></a>  <span class="kt">INTEGER</span>   <span class="kd">::</span> <span class="n">CompIndex</span>
<a name="ln-3289"></a>  <span class="kt">LOGICAL</span>   <span class="kd">::</span> <span class="n">FatalError</span>
<a name="ln-3290"></a>  <span class="kt">LOGICAL</span> <span class="kd">::</span> <span class="n">errFlag</span>
<a name="ln-3291"></a>          <span class="c">! FLOW:</span>
<a name="ln-3292"></a>
<a name="ln-3293"></a>  <span class="c">! Do the one time initializations</span>
<a name="ln-3294"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">MyOneTimeFlag</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3295"></a><span class="k">    ALLOCATE</span><span class="p">(</span><span class="n">MyFlag</span><span class="p">(</span><span class="n">NumGTChillers</span><span class="p">))</span>
<a name="ln-3296"></a>    <span class="k">ALLOCATE</span><span class="p">(</span><span class="n">MyEnvrnFlag</span><span class="p">(</span><span class="n">NumGTChillers</span><span class="p">))</span>
<a name="ln-3297"></a>    <span class="n">MyFlag</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-3298"></a>    <span class="n">MyEnvrnFlag</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-3299"></a>    <span class="n">MyOneTimeFlag</span> <span class="o">=</span> <span class="p">.</span><span class="n">false</span><span class="p">.</span>
<a name="ln-3300"></a>  <span class="k">END IF</span>
<a name="ln-3301"></a>
<a name="ln-3302"></a><span class="k">  </span><span class="n">CondInletNode</span>  <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span>
<a name="ln-3303"></a>  <span class="n">CondOutletNode</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletNodeNum</span>
<a name="ln-3304"></a>  <span class="n">EvapInletNode</span>  <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletNodeNum</span>
<a name="ln-3305"></a>  <span class="n">EvapOutletNode</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span>
<a name="ln-3306"></a>
<a name="ln-3307"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3308"></a><span class="k">    </span><span class="n">HeatRecInNode</span>  <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span>
<a name="ln-3309"></a>    <span class="n">HeatRecOutNode</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecOutletNodeNum</span>
<a name="ln-3310"></a>  <span class="n">ENDIF</span>
<a name="ln-3311"></a>
<a name="ln-3312"></a>  <span class="c">! Init more variables</span>
<a name="ln-3313"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">MyFlag</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">))</span> <span class="k">THEN</span>
<a name="ln-3314"></a>    <span class="c">! Locate the chillers on the plant loops for later usage</span>
<a name="ln-3315"></a>    <span class="n">errFlag</span><span class="o">=</span><span class="p">.</span><span class="n">false</span><span class="p">.</span>
<a name="ln-3316"></a>    <span class="k">CALL </span><span class="n">ScanPlantLoopsForObject</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3317"></a>                                 <span class="n">TypeOf_Chiller_CombTurbine</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3318"></a>                                 <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3319"></a>                                 <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3320"></a>                                 <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3321"></a>                                 <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3322"></a>                                 <span class="n">LowLimitTemp</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">TempLowLimitEvapOut</span> <span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3323"></a>                                 <span class="n">InletNodeNumber</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletNodeNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3324"></a>                                 <span class="n">errFlag</span><span class="o">=</span><span class="n">errFlag</span><span class="p">)</span>
<a name="ln-3325"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">/=</span> <span class="n">AirCooled</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-3326"></a>        <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">/=</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3327"></a><span class="k">      CALL </span><span class="n">ScanPlantLoopsForObject</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3328"></a>                                   <span class="n">TypeOf_Chiller_CombTurbine</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3329"></a>                                   <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3330"></a>                                   <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3331"></a>                                   <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDBranchNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3332"></a>                                   <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDCompNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3333"></a>                                   <span class="n">InletNodeNumber</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3334"></a>                                   <span class="n">errFlag</span><span class="o">=</span><span class="n">errFlag</span><span class="p">)</span>
<a name="ln-3335"></a>       <span class="k">CALL </span><span class="n">InterConnectTwoPlantLoopSides</span><span class="p">(</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-3336"></a>                                          <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3337"></a>                                          <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span>      <span class="p">&amp;</span>
<a name="ln-3338"></a>                                          <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3339"></a>                                          <span class="n">TypeOf_Chiller_CombTurbine</span><span class="p">,</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span> <span class="p">)</span>
<a name="ln-3340"></a>    <span class="n">ENDIF</span>
<a name="ln-3341"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3342"></a><span class="k">      CALL </span><span class="n">ScanPlantLoopsForObject</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3343"></a>                                   <span class="n">TypeOf_Chiller_CombTurbine</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3344"></a>                                   <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3345"></a>                                   <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3346"></a>                                   <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRBranchNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3347"></a>                                   <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRCompNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3348"></a>                                   <span class="n">InletNodeNumber</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3349"></a>                                   <span class="n">errFlag</span><span class="o">=</span><span class="n">errFlag</span><span class="p">)</span>
<a name="ln-3350"></a>      <span class="k">CALL </span><span class="n">InterConnectTwoPlantLoopSides</span><span class="p">(</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>      <span class="p">&amp;</span>
<a name="ln-3351"></a>                                          <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3352"></a>                                          <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-3353"></a>                                          <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopSideNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3354"></a>                                          <span class="n">TypeOf_Chiller_CombTurbine</span> <span class="p">,</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span> <span class="p">)</span>
<a name="ln-3355"></a>    <span class="n">ENDIF</span>
<a name="ln-3356"></a>
<a name="ln-3357"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">/=</span> <span class="n">AirCooled</span>  <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-3358"></a>        <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">/=</span> <span class="n">EvapCooled</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-3359"></a>        <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3360"></a><span class="k">      CALL </span><span class="n">InterConnectTwoPlantLoopSides</span><span class="p">(</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span>      <span class="p">&amp;</span>
<a name="ln-3361"></a>                                          <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3362"></a>                                          <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-3363"></a>                                          <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopSideNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3364"></a>                                          <span class="n">TypeOf_Chiller_CombTurbine</span><span class="p">,</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span> <span class="p">)</span>
<a name="ln-3365"></a>    <span class="n">ENDIF</span>
<a name="ln-3366"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">errFlag</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3367"></a><span class="k">      CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;InitGTChiller: Program terminated due to previous condition(s).&#39;</span><span class="p">)</span>
<a name="ln-3368"></a>    <span class="n">ENDIF</span>
<a name="ln-3369"></a>
<a name="ln-3370"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">ConstantFlow</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3371"></a>      <span class="c">! reset flow priority</span>
<a name="ln-3372"></a>      <span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">LoopSide</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">)%</span> <span class="p">&amp;</span>
<a name="ln-3373"></a>          <span class="n">Branch</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">)%</span><span class="n">Comp</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)%</span><span class="n">FlowPriority</span> <span class="p">&amp;</span>
<a name="ln-3374"></a>              <span class="o">=</span> <span class="n">LoopFlowStatus_NeedyIfLoopOn</span>
<a name="ln-3375"></a>    <span class="n">ENDIF</span>
<a name="ln-3376"></a>
<a name="ln-3377"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">LeavingSetpointModulated</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3378"></a>      <span class="c">! reset flow priority</span>
<a name="ln-3379"></a>      <span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">LoopSide</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">)%</span> <span class="p">&amp;</span>
<a name="ln-3380"></a>          <span class="n">Branch</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">)%</span><span class="n">Comp</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)%</span><span class="n">FlowPriority</span> <span class="p">&amp;</span>
<a name="ln-3381"></a>              <span class="o">=</span> <span class="n">LoopFlowStatus_NeedyIfLoopOn</span>
<a name="ln-3382"></a>
<a name="ln-3383"></a>    <span class="c">! check if setpoint on outlet node</span>
<a name="ln-3384"></a>      <span class="k">IF</span> <span class="p">((</span><span class="n">Node</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">)%</span><span class="n">TempSetPoint</span> <span class="o">==</span> <span class="n">SensedNodeFlagValue</span><span class="p">)</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-3385"></a>          <span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">)%</span><span class="n">TempSetPointHi</span> <span class="o">==</span> <span class="n">SensedNodeFlagValue</span><span class="p">))</span>  <span class="k">THEN</span>
<a name="ln-3386"></a><span class="k">        IF</span> <span class="p">(.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">AnyEnergyManagementSystemInModel</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3387"></a><span class="k">          IF</span> <span class="p">(.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">ModulatedFlowErrDone</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3388"></a><span class="k">            CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="s1">&#39;Missing temperature setpoint for LeavingSetpointModulated mode chiller named &#39;</span> <span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-3389"></a>                                          <span class="nb">TRIM</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span> <span class="p">)</span>
<a name="ln-3390"></a>            <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;  A temperature setpoint is needed at the outlet node of a chiller &#39;</span> <span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-3391"></a>                                             <span class="s1">&#39;in variable flow mode, use a SetpointManager&#39;</span><span class="p">)</span>
<a name="ln-3392"></a>            <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;  The overall loop setpoint will be assumed for chiller. The simulation continues ... &#39;</span><span class="p">)</span>
<a name="ln-3393"></a>            <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">ModulatedFlowErrDone</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-3394"></a>          <span class="n">ENDIF</span>
<a name="ln-3395"></a>        <span class="k">ELSE</span>
<a name="ln-3396"></a>         <span class="c">! need call to EMS to check node</span>
<a name="ln-3397"></a>          <span class="n">FatalError</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span> <span class="c">! but not really fatal yet, but should be.</span>
<a name="ln-3398"></a>          <span class="k">CALL </span><span class="n">CheckIfNodeSetpointManagedByEMS</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">,</span><span class="n">iTemperatureSetpoint</span><span class="p">,</span> <span class="n">FatalError</span><span class="p">)</span>
<a name="ln-3399"></a>          <span class="k">IF</span> <span class="p">(</span><span class="n">FatalError</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3400"></a><span class="k">            IF</span> <span class="p">(.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">ModulatedFlowErrDone</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3401"></a><span class="k">              CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="s1">&#39;Missing temperature setpoint for LeavingSetpointModulated mode chiller named &#39;</span> <span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-3402"></a>                                          <span class="nb">TRIM</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span> <span class="p">)</span>
<a name="ln-3403"></a>              <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;  A temperature setpoint is needed at the outlet node of a chiller evaporator &#39;</span> <span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-3404"></a>                                             <span class="s1">&#39;in variable flow mode&#39;</span><span class="p">)</span>
<a name="ln-3405"></a>              <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;  use a Setpoint Manager to establish a setpoint at the chiller evaporator outlet node &#39;</span><span class="p">)</span>
<a name="ln-3406"></a>              <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;  or use an EMS actuator to establish a setpoint at the outlet node &#39;</span><span class="p">)</span>
<a name="ln-3407"></a>              <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;  The overall loop setpoint will be assumed for chiller. The simulation continues ... &#39;</span><span class="p">)</span>
<a name="ln-3408"></a>              <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">ModulatedFlowErrDone</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-3409"></a>            <span class="n">ENDIF</span>
<a name="ln-3410"></a>          <span class="n">ENDIF</span>
<a name="ln-3411"></a>
<a name="ln-3412"></a>
<a name="ln-3413"></a>        <span class="n">ENDIF</span>
<a name="ln-3414"></a>        <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">ModulatedFlowSetToLoop</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-3415"></a>        <span class="n">Node</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">)%</span><span class="n">TempSetPoint</span> <span class="o">=</span>                        <span class="p">&amp;</span>
<a name="ln-3416"></a>          <span class="n">Node</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">TempSetPointNodeNum</span><span class="p">)%</span><span class="n">TempSetPoint</span>
<a name="ln-3417"></a>        <span class="n">Node</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">)%</span><span class="n">TempSetPointHi</span> <span class="o">=</span>                        <span class="p">&amp;</span>
<a name="ln-3418"></a>          <span class="n">Node</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">TempSetPointNodeNum</span><span class="p">)%</span><span class="n">TempSetPointHi</span>
<a name="ln-3419"></a>      <span class="n">ENDIF</span>
<a name="ln-3420"></a>    <span class="n">ENDIF</span>
<a name="ln-3421"></a>    <span class="n">MyFlag</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)</span><span class="o">=</span><span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-3422"></a>  <span class="n">ENDIF</span>
<a name="ln-3423"></a>
<a name="ln-3424"></a>  <span class="k">IF</span><span class="p">(</span><span class="n">MyEnvrnFlag</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)</span> <span class="p">.</span><span class="nb">and</span><span class="p">.</span> <span class="n">BeginEnvrnFlag</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">))</span> <span class="k">THEN</span>
<a name="ln-3425"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">PlantSizeNotComplete</span><span class="p">)</span> <span class="k">CALL </span><span class="n">SizeGTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)</span>
<a name="ln-3426"></a>    <span class="n">rho</span> <span class="o">=</span> <span class="n">GetDensityGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3427"></a>                                <span class="n">InitConvTemp</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3428"></a>                                <span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,&amp;</span>
<a name="ln-3429"></a>                                <span class="n">RoutineName</span><span class="p">)</span>
<a name="ln-3430"></a>
<a name="ln-3431"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapMassFlowRateMax</span> <span class="o">=</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapVolFlowRate</span>
<a name="ln-3432"></a>    <span class="k">CALL </span><span class="n">InitComponentNodes</span><span class="p">(</span><span class="mf">0.0D0</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapMassFlowRateMax</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3433"></a>                         <span class="n">EvapInletNode</span><span class="p">,</span>        <span class="p">&amp;</span>
<a name="ln-3434"></a>                         <span class="n">EvapOutletNode</span><span class="p">,</span>       <span class="p">&amp;</span>
<a name="ln-3435"></a>                         <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>               <span class="p">&amp;</span>
<a name="ln-3436"></a>                         <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span>           <span class="p">&amp;</span>
<a name="ln-3437"></a>                         <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span>             <span class="p">&amp;</span>
<a name="ln-3438"></a>                         <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)</span>
<a name="ln-3439"></a>
<a name="ln-3440"></a>          <span class="c">!init maximum available condenser flow rate</span>
<a name="ln-3441"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3442"></a>
<a name="ln-3443"></a><span class="k">      </span><span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">TempDesCondIn</span>
<a name="ln-3444"></a>
<a name="ln-3445"></a>      <span class="n">rho</span> <span class="o">=</span> <span class="n">GetDensityGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3446"></a>                                  <span class="n">InitConvTemp</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3447"></a>                                  <span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,&amp;</span>
<a name="ln-3448"></a>                                  <span class="n">RoutineName</span><span class="p">)</span>
<a name="ln-3449"></a>
<a name="ln-3450"></a>      <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondMassFlowRateMax</span> <span class="o">=</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span>
<a name="ln-3451"></a>
<a name="ln-3452"></a>      <span class="k">CALL </span><span class="n">InitComponentNodes</span><span class="p">(</span><span class="mf">0.0D0</span><span class="p">,</span>  <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondMassFlowRateMax</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3453"></a>                         <span class="n">CondInletNode</span><span class="p">,</span>        <span class="p">&amp;</span>
<a name="ln-3454"></a>                         <span class="n">CondOutletNode</span><span class="p">,</span>       <span class="p">&amp;</span>
<a name="ln-3455"></a>                         <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span>               <span class="p">&amp;</span>
<a name="ln-3456"></a>                         <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span>           <span class="p">&amp;</span>
<a name="ln-3457"></a>                         <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDBranchNum</span><span class="p">,</span>             <span class="p">&amp;</span>
<a name="ln-3458"></a>                         <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDCompNum</span><span class="p">)</span>
<a name="ln-3459"></a>    <span class="k">ELSE</span> <span class="c">! air or evap-air</span>
<a name="ln-3460"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowRate</span>        <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span> <span class="o">*</span> <span class="p">&amp;</span>
<a name="ln-3461"></a>        <span class="n">PsyRhoAirFnPbTdbW</span><span class="p">(</span><span class="n">StdBaroPress</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">TempDesCondIn</span><span class="p">,</span><span class="mf">0.0D0</span><span class="p">,</span><span class="n">RoutineName</span><span class="p">)</span>
<a name="ln-3462"></a>
<a name="ln-3463"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">MassFlowrate</span>         <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowrate</span>
<a name="ln-3464"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowRateMaxAvail</span>  <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowrate</span>
<a name="ln-3465"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowRateMax</span>       <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowrate</span>
<a name="ln-3466"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">MassFlowRateMax</span>      <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowrate</span>
<a name="ln-3467"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowRateMinAvail</span>  <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-3468"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowRateMin</span>       <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-3469"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">MassFlowRateMinAvail</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-3470"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">MassFlowRateMin</span>      <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-3471"></a>    <span class="k">END IF</span>
<a name="ln-3472"></a>
<a name="ln-3473"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3474"></a><span class="k">      </span><span class="n">rho</span> <span class="o">=</span> <span class="n">GetDensityGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3475"></a>                                  <span class="n">InitConvTemp</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3476"></a>                                  <span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,&amp;</span>
<a name="ln-3477"></a>                                  <span class="n">RoutineName</span><span class="p">)</span>
<a name="ln-3478"></a>      <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">DesignHeatRecMassFlowRate</span> <span class="o">=</span> <span class="n">rho</span> <span class="o">*</span> <span class="p">&amp;</span>
<a name="ln-3479"></a>                                         <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">DesignHeatRecVolFlowRate</span>
<a name="ln-3480"></a>
<a name="ln-3481"></a>      <span class="k">CALL </span><span class="n">InitComponentNodes</span><span class="p">(</span><span class="mf">0.0D0</span><span class="p">,</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">DesignHeatRecMassFlowRate</span> <span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3482"></a>                         <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span><span class="p">,</span>        <span class="p">&amp;</span>
<a name="ln-3483"></a>                         <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecOutletNodeNum</span><span class="p">,</span>       <span class="p">&amp;</span>
<a name="ln-3484"></a>                         <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">,</span>                  <span class="p">&amp;</span>
<a name="ln-3485"></a>                         <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopSideNum</span><span class="p">,</span>              <span class="p">&amp;</span>
<a name="ln-3486"></a>                         <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRBranchNum</span><span class="p">,</span>                <span class="p">&amp;</span>
<a name="ln-3487"></a>                         <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRCompNum</span><span class="p">)</span>
<a name="ln-3488"></a>
<a name="ln-3489"></a>    <span class="n">ENDIF</span>
<a name="ln-3490"></a>
<a name="ln-3491"></a>    <span class="n">MyEnvrnFlag</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-3492"></a>  <span class="k">END IF</span>
<a name="ln-3493"></a>
<a name="ln-3494"></a><span class="k">  IF</span> <span class="p">(.</span><span class="nb">not</span><span class="p">.</span> <span class="n">BeginEnvrnFlag</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3495"></a><span class="k">    </span><span class="n">MyEnvrnFlag</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-3496"></a>  <span class="n">ENDIF</span>
<a name="ln-3497"></a>
<a name="ln-3498"></a>  <span class="k">IF</span> <span class="p">(</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">LeavingSetpointModulated</span><span class="p">)</span> <span class="p">&amp;</span>
<a name="ln-3499"></a>      <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">ModulatedFlowSetToLoop</span><span class="p">))</span> <span class="k">THEN</span>
<a name="ln-3500"></a>  <span class="c">! fix for clumsy old input that worked because loop setpoint was spread.</span>
<a name="ln-3501"></a>  <span class="c">!  could be removed with transition, testing , model change, period of being obsolete.</span>
<a name="ln-3502"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">)%</span><span class="n">TempSetPoint</span> <span class="o">=</span>                        <span class="p">&amp;</span>
<a name="ln-3503"></a>         <span class="n">Node</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">TempSetPointNodeNum</span><span class="p">)%</span><span class="n">TempSetPoint</span>
<a name="ln-3504"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">)%</span><span class="n">TempSetPointHi</span> <span class="o">=</span>                        <span class="p">&amp;</span>
<a name="ln-3505"></a>         <span class="n">Node</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">TempSetPointNodeNum</span><span class="p">)%</span><span class="n">TempSetPointHi</span>
<a name="ln-3506"></a>  <span class="n">ENDIF</span>
<a name="ln-3507"></a>
<a name="ln-3508"></a>  <span class="k">IF</span> <span class="p">((</span><span class="nb">ABS</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.d0</span><span class="p">)</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="n">RunFlag</span><span class="p">)</span>  <span class="k">THEN</span>
<a name="ln-3509"></a><span class="k">    </span><span class="n">mdot</span>     <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapMassFlowRateMax</span>
<a name="ln-3510"></a>    <span class="n">mdotCond</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondMassFlowRateMax</span>
<a name="ln-3511"></a>  <span class="k">ELSE</span>
<a name="ln-3512"></a><span class="k">    </span><span class="n">mdot</span>     <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-3513"></a>    <span class="n">mdotCond</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-3514"></a>  <span class="n">ENDIF</span>
<a name="ln-3515"></a>
<a name="ln-3516"></a>  <span class="k">CALL </span><span class="n">SetComponentFlowRate</span><span class="p">(</span> <span class="n">mdot</span><span class="p">,</span> <span class="n">EvapInletNode</span><span class="p">,</span> <span class="n">EvapOutletNode</span><span class="p">,</span>            <span class="p">&amp;</span>
<a name="ln-3517"></a>                              <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-3518"></a>                              <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3519"></a>                              <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-3520"></a>                              <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)</span>
<a name="ln-3521"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3522"></a><span class="k">    CALL </span><span class="n">SetComponentFlowRate</span><span class="p">(</span> <span class="n">mdotCond</span><span class="p">,</span> <span class="n">CondInletNode</span><span class="p">,</span> <span class="n">CondOutletNode</span><span class="p">,</span>         <span class="p">&amp;</span>
<a name="ln-3523"></a>                              <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-3524"></a>                              <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3525"></a>                              <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDBranchNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-3526"></a>                              <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDCompNum</span><span class="p">)</span>
<a name="ln-3527"></a>  <span class="n">ENDIF</span>
<a name="ln-3528"></a>
<a name="ln-3529"></a>  <span class="c">! Initialize heat recovery flow rates at node</span>
<a name="ln-3530"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecActive</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3531"></a>
<a name="ln-3532"></a><span class="k">    </span><span class="n">InletNode</span>    <span class="o">=</span>  <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span>
<a name="ln-3533"></a>    <span class="n">OutletNode</span>   <span class="o">=</span>  <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecOutletNodeNum</span>
<a name="ln-3534"></a>    <span class="n">LoopNum</span>      <span class="o">=</span>  <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span>
<a name="ln-3535"></a>    <span class="n">LoopSideNum</span>  <span class="o">=</span>  <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopSideNum</span>
<a name="ln-3536"></a>    <span class="n">BranchIndex</span>  <span class="o">=</span>  <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRBranchNum</span>
<a name="ln-3537"></a>    <span class="n">CompIndex</span>    <span class="o">=</span>  <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRCompNum</span>
<a name="ln-3538"></a>
<a name="ln-3539"></a>    <span class="k">IF</span> <span class="p">(</span> <span class="n">RunFlag</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3540"></a><span class="k">      </span><span class="n">mdot</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">DesignHeatRecMassFlowRate</span>
<a name="ln-3541"></a>    <span class="k">ELSE</span>
<a name="ln-3542"></a><span class="k">      </span><span class="n">mdot</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-3543"></a>    <span class="n">ENDIF</span>
<a name="ln-3544"></a>
<a name="ln-3545"></a>    <span class="k">CALL </span><span class="n">SetComponentFlowRate</span><span class="p">(</span><span class="n">mdot</span><span class="p">,</span><span class="n">InletNode</span><span class="p">,</span><span class="n">OutletNode</span><span class="p">,</span><span class="n">LoopNum</span><span class="p">,</span><span class="n">LoopSideNum</span><span class="p">,</span><span class="n">BranchIndex</span><span class="p">,</span><span class="n">CompIndex</span><span class="p">)</span>
<a name="ln-3546"></a>
<a name="ln-3547"></a>  <span class="k">END IF</span>
<a name="ln-3548"></a><span class="k">  IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3549"></a><span class="k">    </span><span class="n">BasinHeaterPower</span>       <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-3550"></a>  <span class="n">ENDIF</span>
<a name="ln-3551"></a>  <span class="k">RETURN</span>
<a name="ln-3552"></a>
<a name="ln-3553"></a><span class="k">END SUBROUTINE </span><span class="n">InitGTChiller</span>
<a name="ln-3554"></a>
<a name="ln-3555"></a><span class="k">SUBROUTINE </span><span class="n">InitConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">,</span><span class="n">RunFlag</span><span class="p">,</span> <span class="n">MyLoad</span><span class="p">)</span>
<a name="ln-3556"></a>
<a name="ln-3557"></a>          <span class="c">! SUBROUTINE INFORMATION:</span>
<a name="ln-3558"></a>          <span class="c">!       AUTHOR         Chandan Sharma</span>
<a name="ln-3559"></a>          <span class="c">!       DATE WRITTEN   September 2010</span>
<a name="ln-3560"></a>          <span class="c">!       MODIFIED       na</span>
<a name="ln-3561"></a>          <span class="c">!       RE-ENGINEERED  na</span>
<a name="ln-3562"></a>
<a name="ln-3563"></a>          <span class="c">! PURPOSE OF THIS SUBROUTINE:</span>
<a name="ln-3564"></a>          <span class="c">! This subroutine is for initializations of the Electric Chiller components</span>
<a name="ln-3565"></a>
<a name="ln-3566"></a>          <span class="c">! METHODOLOGY EMPLOYED:</span>
<a name="ln-3567"></a>          <span class="c">! Uses the status flags to trigger initializations.</span>
<a name="ln-3568"></a>
<a name="ln-3569"></a>          <span class="c">! REFERENCES:</span>
<a name="ln-3570"></a>          <span class="c">! Based on InitElectricChiller from Fred Buhl</span>
<a name="ln-3571"></a>
<a name="ln-3572"></a>          <span class="c">! USE STATEMENTS:</span>
<a name="ln-3573"></a>  <span class="k">USE </span><span class="n">DataGlobals</span><span class="p">,</span>     <span class="n">ONLY</span> <span class="p">:</span> <span class="n">BeginEnvrnFlag</span><span class="p">,</span> <span class="n">AnyEnergyManagementSystemInModel</span>
<a name="ln-3574"></a>  <span class="k">USE </span><span class="n">DataPlant</span><span class="p">,</span>       <span class="n">ONLY</span> <span class="p">:</span> <span class="n">PlantLoop</span><span class="p">,</span> <span class="n">ScanPlantLoopsForObject</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3575"></a>                              <span class="n">PlantSizeNotComplete</span><span class="p">,</span> <span class="n">PlantSizesOkayToFinalize</span><span class="p">,</span> <span class="n">LoopFlowStatus_NeedyIfLoopOn</span>
<a name="ln-3576"></a>  <span class="k">USE </span><span class="n">DataEnvironment</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">StdBaroPress</span>
<a name="ln-3577"></a>  <span class="k">USE </span><span class="n">Psychrometrics</span><span class="p">,</span>  <span class="n">ONLY</span> <span class="p">:</span> <span class="n">PsyRhoAirFnPbTdbW</span>
<a name="ln-3578"></a>  <span class="k">USE </span><span class="n">PlantUtilities</span><span class="p">,</span>  <span class="n">ONLY</span> <span class="p">:</span> <span class="n">InterConnectTwoPlantLoopSides</span><span class="p">,</span> <span class="n">InitComponentNodes</span><span class="p">,</span> <span class="n">SetComponentFlowRate</span>
<a name="ln-3579"></a>  <span class="k">USE </span><span class="n">FluidProperties</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">GetDensityGlycol</span>
<a name="ln-3580"></a>  <span class="k">USE </span><span class="n">EMSManager</span><span class="p">,</span>      <span class="n">ONLY</span> <span class="p">:</span> <span class="n">iTemperatureSetpoint</span><span class="p">,</span> <span class="n">CheckIfNodeSetpointManagedByEMS</span>
<a name="ln-3581"></a>  <span class="k">USE </span><span class="n">DataInterfaces</span><span class="p">,</span>  <span class="n">ONLY</span> <span class="p">:</span> <span class="n">ShowFatalError</span><span class="p">,</span> <span class="n">ShowSevereError</span><span class="p">,</span> <span class="n">ShowContinueError</span>
<a name="ln-3582"></a>          <span class="c">! na</span>
<a name="ln-3583"></a>
<a name="ln-3584"></a>  <span class="k">IMPLICIT NONE</span>    <span class="c">! Enforce explicit typing of all variables in this routine</span>
<a name="ln-3585"></a>
<a name="ln-3586"></a>          <span class="c">! SUBROUTINE ARGUMENT DEFINITIONS:</span>
<a name="ln-3587"></a>  <span class="kt">INTEGER</span><span class="p">,</span> <span class="k">INTENT</span> <span class="p">(</span><span class="n">IN</span><span class="p">)</span> <span class="kd">::</span> <span class="n">ChillNum</span>     <span class="c">! number of the current electric chiller being simulated</span>
<a name="ln-3588"></a>  <span class="kt">LOGICAL</span><span class="p">,</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span>  <span class="kd">::</span> <span class="n">RunFlag</span>      <span class="c">! TRUE when chiller operating</span>
<a name="ln-3589"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span><span class="kd">::</span> <span class="n">MyLoad</span>
<a name="ln-3590"></a>
<a name="ln-3591"></a>          <span class="c">! SUBROUTINE PARAMETER DEFINITIONS:</span>
<a name="ln-3592"></a>  <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span> <span class="k">PARAMETER</span> <span class="kd">::</span> <span class="n">RoutineName</span><span class="o">=</span><span class="s1">&#39;InitConstCOPChiller&#39;</span>
<a name="ln-3593"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span> <span class="k">parameter</span>        <span class="kd">::</span> <span class="n">TempDesCondIn</span> <span class="o">=</span> <span class="mi">2</span><span class="mf">5.d0</span>        <span class="c">! Design condenser inlet temp. C</span>
<a name="ln-3594"></a>
<a name="ln-3595"></a>
<a name="ln-3596"></a>          <span class="c">! INTERFACE BLOCK SPECIFICATIONS</span>
<a name="ln-3597"></a>          <span class="c">! na</span>
<a name="ln-3598"></a>
<a name="ln-3599"></a>          <span class="c">! DERIVED TYPE DEFINITIONS</span>
<a name="ln-3600"></a>          <span class="c">! na</span>
<a name="ln-3601"></a>
<a name="ln-3602"></a>          <span class="c">! SUBROUTINE LOCAL VARIABLE DECLARATIONS:</span>
<a name="ln-3603"></a>  <span class="kt">LOGICAL</span><span class="p">,</span><span class="k">SAVE</span>        <span class="kd">::</span> <span class="n">OneTimeFlag</span> <span class="o">=</span> <span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-3604"></a>  <span class="kt">LOGICAL</span><span class="p">,</span> <span class="k">ALLOCATABLE</span><span class="p">,</span> <span class="k">SAVE</span><span class="p">,</span> <span class="k">DIMENSION</span><span class="p">(:)</span> <span class="kd">::</span> <span class="n">MyFlag</span>
<a name="ln-3605"></a>  <span class="kt">LOGICAL</span><span class="p">,</span> <span class="k">ALLOCATABLE</span><span class="p">,</span> <span class="k">SAVE</span><span class="p">,</span> <span class="k">DIMENSION</span><span class="p">(:)</span> <span class="kd">::</span> <span class="n">MyEnvironFlag</span>
<a name="ln-3606"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">CondInletNode</span>      <span class="c">! node number of water inlet node to the condenser</span>
<a name="ln-3607"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">CondOutletNode</span>     <span class="c">! node number of water outlet node from the condenser</span>
<a name="ln-3608"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">EvapInletNode</span>
<a name="ln-3609"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">EvapOutletNode</span>
<a name="ln-3610"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span> <span class="kd">::</span> <span class="n">rho</span> <span class="c">! local fluid density</span>
<a name="ln-3611"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span> <span class="kd">::</span> <span class="n">mdot</span> <span class="c">! local mass flow rate</span>
<a name="ln-3612"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span> <span class="kd">::</span> <span class="n">mdotCond</span> <span class="c">! local mass flow rate for condenser</span>
<a name="ln-3613"></a>  <span class="kt">LOGICAL</span> <span class="kd">::</span> <span class="n">FatalError</span>
<a name="ln-3614"></a>  <span class="kt">LOGICAL</span> <span class="kd">::</span> <span class="n">errFlag</span>
<a name="ln-3615"></a>          <span class="c">!FLOW</span>
<a name="ln-3616"></a>  <span class="c">! Do the one time initializations</span>
<a name="ln-3617"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">OneTimeFlag</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3618"></a><span class="k">    ALLOCATE</span><span class="p">(</span><span class="n">MyFlag</span><span class="p">(</span><span class="n">NumConstCOPChillers</span><span class="p">))</span>
<a name="ln-3619"></a>    <span class="k">ALLOCATE</span><span class="p">(</span><span class="n">MyEnvironFlag</span><span class="p">(</span><span class="n">NumConstCOPChillers</span><span class="p">))</span>
<a name="ln-3620"></a>    <span class="n">MyFlag</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-3621"></a>    <span class="n">MyEnvironFlag</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-3622"></a>    <span class="n">OneTimeFlag</span> <span class="o">=</span> <span class="p">.</span><span class="n">false</span><span class="p">.</span>
<a name="ln-3623"></a>  <span class="k">END IF</span>
<a name="ln-3624"></a>
<a name="ln-3625"></a><span class="k">  </span><span class="n">EvapInletNode</span>            <span class="o">=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletNodeNum</span>
<a name="ln-3626"></a>  <span class="n">EvapOutletNode</span>           <span class="o">=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span>
<a name="ln-3627"></a>  <span class="n">CondInletNode</span>            <span class="o">=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span>
<a name="ln-3628"></a>  <span class="n">CondOutletNode</span>           <span class="o">=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletNodeNum</span>
<a name="ln-3629"></a>
<a name="ln-3630"></a>  <span class="c">! Init more variables</span>
<a name="ln-3631"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">MyFlag</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">))</span> <span class="k">THEN</span>
<a name="ln-3632"></a>    <span class="c">! Locate the chillers on the plant loops for later usage</span>
<a name="ln-3633"></a>    <span class="n">errFlag</span><span class="o">=</span><span class="p">.</span><span class="n">false</span><span class="p">.</span>
<a name="ln-3634"></a>    <span class="k">CALL </span><span class="n">ScanPlantLoopsForObject</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3635"></a>                                 <span class="n">TypeOf_Chiller_ConstCOP</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3636"></a>                                 <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3637"></a>                                 <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3638"></a>                                 <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3639"></a>                                 <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3640"></a>                                 <span class="n">InletNodeNumber</span> <span class="o">=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletNodeNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3641"></a>                                 <span class="n">errFlag</span><span class="o">=</span><span class="n">errFlag</span><span class="p">)</span>
<a name="ln-3642"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">/=</span> <span class="n">AirCooled</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-3643"></a>        <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">/=</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3644"></a><span class="k">      CALL </span><span class="n">ScanPlantLoopsForObject</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3645"></a>                                   <span class="n">TypeOf_Chiller_ConstCOP</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3646"></a>                                   <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3647"></a>                                   <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3648"></a>                                   <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDBranchNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3649"></a>                                   <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDCompNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3650"></a>                                   <span class="n">InletNodeNumber</span> <span class="o">=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3651"></a>                                   <span class="n">errFlag</span><span class="o">=</span><span class="n">errFlag</span><span class="p">)</span>
<a name="ln-3652"></a>      <span class="k">CALL </span><span class="n">InterConnectTwoPlantLoopSides</span><span class="p">(</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>      <span class="p">&amp;</span>
<a name="ln-3653"></a>                                          <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3654"></a>                                          <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span>      <span class="p">&amp;</span>
<a name="ln-3655"></a>                                          <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3656"></a>                                          <span class="n">TypeOf_Chiller_ConstCOP</span><span class="p">,</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span> <span class="p">)</span>
<a name="ln-3657"></a>    <span class="n">ENDIF</span>
<a name="ln-3658"></a>
<a name="ln-3659"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">errFlag</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3660"></a><span class="k">      CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;CalcConstCOPChillerModel: Program terminated due to previous condition(s).&#39;</span><span class="p">)</span>
<a name="ln-3661"></a>    <span class="n">ENDIF</span>
<a name="ln-3662"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">ConstantFlow</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3663"></a>      <span class="c">! reset flow priority</span>
<a name="ln-3664"></a>      <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">LoopSide</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">)%</span> <span class="p">&amp;</span>
<a name="ln-3665"></a>          <span class="n">Branch</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">)%</span><span class="n">Comp</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)%</span><span class="n">FlowPriority</span> <span class="p">&amp;</span>
<a name="ln-3666"></a>              <span class="o">=</span> <span class="n">LoopFlowStatus_NeedyIfLoopOn</span>
<a name="ln-3667"></a>    <span class="n">ENDIF</span>
<a name="ln-3668"></a>
<a name="ln-3669"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">LeavingSetpointModulated</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3670"></a>      <span class="c">! reset flow priority</span>
<a name="ln-3671"></a>      <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">LoopSide</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">)%</span> <span class="p">&amp;</span>
<a name="ln-3672"></a>          <span class="n">Branch</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">)%</span><span class="n">Comp</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)%</span><span class="n">FlowPriority</span> <span class="p">&amp;</span>
<a name="ln-3673"></a>              <span class="o">=</span> <span class="n">LoopFlowStatus_NeedyIfLoopOn</span>
<a name="ln-3674"></a>
<a name="ln-3675"></a>      <span class="c">! check if setpoint on outlet node</span>
<a name="ln-3676"></a>      <span class="k">IF</span> <span class="p">((</span><span class="n">Node</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">)%</span><span class="n">TempSetPoint</span> <span class="o">==</span> <span class="n">SensedNodeFlagValue</span><span class="p">)</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-3677"></a>          <span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">)%</span><span class="n">TempSetPointHi</span> <span class="o">==</span> <span class="n">SensedNodeFlagValue</span><span class="p">))</span> <span class="k">THEN</span>
<a name="ln-3678"></a><span class="k">        IF</span> <span class="p">(.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">AnyEnergyManagementSystemInModel</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3679"></a><span class="k">          IF</span> <span class="p">(.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">ModulatedFlowErrDone</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3680"></a><span class="k">            CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="s1">&#39;Missing temperature setpoint for LeavingSetpointModulated mode chiller named &#39;</span> <span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-3681"></a>                                          <span class="nb">TRIM</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span> <span class="p">)</span>
<a name="ln-3682"></a>            <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;  A temperature setpoint is needed at the outlet node of a chiller &#39;</span> <span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-3683"></a>                                             <span class="s1">&#39;in variable flow mode, use a SetpointManager&#39;</span><span class="p">)</span>
<a name="ln-3684"></a>            <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;  The overall loop setpoint will be assumed for chiller. The simulation continues ... &#39;</span><span class="p">)</span>
<a name="ln-3685"></a>            <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">ModulatedFlowErrDone</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-3686"></a>          <span class="n">ENDIF</span>
<a name="ln-3687"></a>        <span class="k">ELSE</span>
<a name="ln-3688"></a>         <span class="c">! need call to EMS to check node</span>
<a name="ln-3689"></a>          <span class="n">FatalError</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span> <span class="c">! but not really fatal yet, but should be.</span>
<a name="ln-3690"></a>          <span class="k">CALL </span><span class="n">CheckIfNodeSetpointManagedByEMS</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">,</span><span class="n">iTemperatureSetpoint</span><span class="p">,</span> <span class="n">FatalError</span><span class="p">)</span>
<a name="ln-3691"></a>          <span class="k">IF</span> <span class="p">(</span><span class="n">FatalError</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3692"></a><span class="k">            IF</span> <span class="p">(.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">ModulatedFlowErrDone</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3693"></a><span class="k">              CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="s1">&#39;Missing temperature setpoint for LeavingSetpointModulated mode chiller named &#39;</span> <span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-3694"></a>                                          <span class="nb">TRIM</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span> <span class="p">)</span>
<a name="ln-3695"></a>              <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;  A temperature setpoint is needed at the outlet node of a chiller evaporator &#39;</span> <span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-3696"></a>                                             <span class="s1">&#39;in variable flow mode&#39;</span><span class="p">)</span>
<a name="ln-3697"></a>              <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;  use a Setpoint Manager to establish a setpoint at the chiller evaporator outlet node &#39;</span><span class="p">)</span>
<a name="ln-3698"></a>              <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;  or use an EMS actuator to establish a setpoint at the outlet node &#39;</span><span class="p">)</span>
<a name="ln-3699"></a>              <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;  The overall loop setpoint will be assumed for chiller. The simulation continues ... &#39;</span><span class="p">)</span>
<a name="ln-3700"></a>              <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">ModulatedFlowErrDone</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-3701"></a>            <span class="n">ENDIF</span>
<a name="ln-3702"></a>          <span class="n">ENDIF</span>
<a name="ln-3703"></a>        <span class="n">ENDIF</span>
<a name="ln-3704"></a>        <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">ModulatedFlowSetToLoop</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-3705"></a>        <span class="n">Node</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">)%</span><span class="n">TempSetPoint</span> <span class="o">=</span>                        <span class="p">&amp;</span>
<a name="ln-3706"></a>          <span class="n">Node</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">TempSetPointNodeNum</span><span class="p">)%</span><span class="n">TempSetPoint</span>
<a name="ln-3707"></a>        <span class="n">Node</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">)%</span><span class="n">TempSetPointHi</span> <span class="o">=</span>                        <span class="p">&amp;</span>
<a name="ln-3708"></a>          <span class="n">Node</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">TempSetPointNodeNum</span><span class="p">)%</span><span class="n">TempSetPointHi</span>
<a name="ln-3709"></a>      <span class="n">ENDIF</span>
<a name="ln-3710"></a>    <span class="n">ENDIF</span>
<a name="ln-3711"></a>    <span class="n">MyFlag</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)</span><span class="o">=</span><span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-3712"></a>  <span class="n">ENDIF</span>
<a name="ln-3713"></a>
<a name="ln-3714"></a>     <span class="c">!Initialize critical Demand Side Variables at the beginning of each environment</span>
<a name="ln-3715"></a>  <span class="k">IF</span><span class="p">(</span><span class="n">MyEnvironFlag</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)</span> <span class="p">.</span><span class="nb">and</span><span class="p">.</span> <span class="n">BeginEnvrnFlag</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">))</span><span class="k">Then</span>
<a name="ln-3716"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">PlantSizeNotComplete</span><span class="p">)</span> <span class="k">CALL </span><span class="n">SizeConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)</span>
<a name="ln-3717"></a>    <span class="n">rho</span> <span class="o">=</span> <span class="n">GetDensityGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3718"></a>                                <span class="n">InitConvTemp</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3719"></a>                                <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,&amp;</span>
<a name="ln-3720"></a>                                <span class="n">RoutineName</span><span class="p">)</span>
<a name="ln-3721"></a>    <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapMassFlowRateMax</span> <span class="o">=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapVolFlowRate</span> <span class="o">*</span> <span class="n">rho</span>
<a name="ln-3722"></a>    <span class="k">CALL </span><span class="n">InitComponentNodes</span><span class="p">(</span><span class="mf">0.0D0</span><span class="p">,</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapMassFlowRateMax</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3723"></a>                         <span class="n">EvapInletNode</span><span class="p">,</span>        <span class="p">&amp;</span>
<a name="ln-3724"></a>                         <span class="n">EvapOutletNode</span><span class="p">,</span>       <span class="p">&amp;</span>
<a name="ln-3725"></a>                         <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>               <span class="p">&amp;</span>
<a name="ln-3726"></a>                         <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span>           <span class="p">&amp;</span>
<a name="ln-3727"></a>                         <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span>             <span class="p">&amp;</span>
<a name="ln-3728"></a>                         <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)</span>
<a name="ln-3729"></a>
<a name="ln-3730"></a>          <span class="c">!init maximum available condenser flow rate</span>
<a name="ln-3731"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3732"></a>
<a name="ln-3733"></a><span class="k">      </span><span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">=</span> <span class="n">TempDesCondIn</span>
<a name="ln-3734"></a>
<a name="ln-3735"></a>      <span class="n">rho</span> <span class="o">=</span> <span class="n">GetDensityGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3736"></a>                                  <span class="n">InitConvTemp</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3737"></a>                                  <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,&amp;</span>
<a name="ln-3738"></a>                                  <span class="n">RoutineName</span><span class="p">)</span>
<a name="ln-3739"></a>
<a name="ln-3740"></a>      <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondMassFlowRateMax</span> <span class="o">=</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span>
<a name="ln-3741"></a>
<a name="ln-3742"></a>      <span class="k">CALL </span><span class="n">InitComponentNodes</span><span class="p">(</span><span class="mf">0.0D0</span><span class="p">,</span>  <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondMassFlowRateMax</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3743"></a>                         <span class="n">CondInletNode</span><span class="p">,</span>        <span class="p">&amp;</span>
<a name="ln-3744"></a>                         <span class="n">CondOutletNode</span><span class="p">,</span>       <span class="p">&amp;</span>
<a name="ln-3745"></a>                         <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span>               <span class="p">&amp;</span>
<a name="ln-3746"></a>                         <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span>           <span class="p">&amp;</span>
<a name="ln-3747"></a>                         <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDBranchNum</span><span class="p">,</span>             <span class="p">&amp;</span>
<a name="ln-3748"></a>                         <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDCompNum</span><span class="p">)</span>
<a name="ln-3749"></a>    <span class="k">ELSE</span> <span class="c">! air or evap-air</span>
<a name="ln-3750"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowRate</span>        <span class="o">=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span> <span class="o">*</span> <span class="p">&amp;</span>
<a name="ln-3751"></a>        <span class="n">PsyRhoAirFnPbTdbW</span><span class="p">(</span><span class="n">StdBaroPress</span><span class="p">,</span><span class="n">TempDesCondIn</span><span class="p">,</span><span class="mf">0.0D0</span><span class="p">,</span><span class="n">RoutineName</span><span class="p">)</span>
<a name="ln-3752"></a>
<a name="ln-3753"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">MassFlowrate</span>         <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowrate</span>
<a name="ln-3754"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowRateMaxAvail</span>  <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowrate</span>
<a name="ln-3755"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowRateMax</span>       <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowrate</span>
<a name="ln-3756"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">MassFlowRateMax</span>      <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowrate</span>
<a name="ln-3757"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowRateMinAvail</span>  <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-3758"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowRateMin</span>       <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-3759"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">MassFlowRateMinAvail</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-3760"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">MassFlowRateMin</span>      <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-3761"></a>    <span class="k">END IF</span>
<a name="ln-3762"></a><span class="k">    </span><span class="n">MyEnvironFlag</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-3763"></a>  <span class="k">END IF</span>
<a name="ln-3764"></a>
<a name="ln-3765"></a><span class="k">  IF</span> <span class="p">(.</span><span class="nb">not</span><span class="p">.</span> <span class="n">BeginEnvrnFlag</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3766"></a><span class="k">    </span><span class="n">MyEnvironFlag</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)</span><span class="o">=</span><span class="p">.</span><span class="n">true</span><span class="p">.</span>
<a name="ln-3767"></a>  <span class="n">ENDIF</span>
<a name="ln-3768"></a>  <span class="k">IF</span> <span class="p">((</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">LeavingSetpointModulated</span><span class="p">)</span> <span class="p">&amp;</span>
<a name="ln-3769"></a>      <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">ModulatedFlowSetToLoop</span><span class="p">))</span> <span class="k">THEN</span>
<a name="ln-3770"></a>  <span class="c">! fix for clumsy old input that worked because loop setpoint was spread.</span>
<a name="ln-3771"></a>  <span class="c">!  could be removed with transition, testing , model change, period of being obsolete.</span>
<a name="ln-3772"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">)%</span><span class="n">TempSetPoint</span> <span class="o">=</span>                        <span class="p">&amp;</span>
<a name="ln-3773"></a>         <span class="n">Node</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">TempSetPointNodeNum</span><span class="p">)%</span><span class="n">TempSetPoint</span>
<a name="ln-3774"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">)%</span><span class="n">TempSetPointHi</span> <span class="o">=</span>                        <span class="p">&amp;</span>
<a name="ln-3775"></a>         <span class="n">Node</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">TempSetPointNodeNum</span><span class="p">)%</span><span class="n">TempSetPointHi</span>
<a name="ln-3776"></a>  <span class="n">ENDIF</span>
<a name="ln-3777"></a>
<a name="ln-3778"></a>  <span class="k">IF</span> <span class="p">((</span><span class="n">MyLoad</span> <span class="o">&lt;</span> <span class="mf">0.d0</span><span class="p">)</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="n">RunFlag</span><span class="p">)</span>  <span class="k">THEN</span>
<a name="ln-3779"></a><span class="k">    </span><span class="n">mdot</span>     <span class="o">=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapMassFlowRateMax</span>
<a name="ln-3780"></a>    <span class="n">mdotCond</span> <span class="o">=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondMassFlowRateMax</span>
<a name="ln-3781"></a>  <span class="k">ELSE</span>
<a name="ln-3782"></a><span class="k">    </span><span class="n">mdot</span>     <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-3783"></a>    <span class="n">mdotCond</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-3784"></a>  <span class="n">ENDIF</span>
<a name="ln-3785"></a>
<a name="ln-3786"></a>  <span class="k">CALL </span><span class="n">SetComponentFlowRate</span><span class="p">(</span> <span class="n">mdot</span><span class="p">,</span> <span class="n">EvapInletNode</span><span class="p">,</span> <span class="n">EvapOutletNode</span><span class="p">,</span>            <span class="p">&amp;</span>
<a name="ln-3787"></a>                              <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-3788"></a>                              <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3789"></a>                              <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-3790"></a>                              <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)</span>
<a name="ln-3791"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3792"></a><span class="k">    CALL </span><span class="n">SetComponentFlowRate</span><span class="p">(</span> <span class="n">mdotCond</span><span class="p">,</span> <span class="n">CondInletNode</span><span class="p">,</span> <span class="n">CondOutletNode</span><span class="p">,</span>         <span class="p">&amp;</span>
<a name="ln-3793"></a>                                <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-3794"></a>                                <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3795"></a>                                <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDBranchNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-3796"></a>                                <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDCompNum</span><span class="p">)</span>
<a name="ln-3797"></a>  <span class="n">ENDIF</span>
<a name="ln-3798"></a>
<a name="ln-3799"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3800"></a><span class="k">    </span><span class="n">BasinHeaterPower</span>       <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-3801"></a>  <span class="n">ENDIF</span>
<a name="ln-3802"></a>
<a name="ln-3803"></a><span class="k">END SUBROUTINE </span><span class="n">InitConstCOPChiller</span>
<a name="ln-3804"></a>
<a name="ln-3805"></a><span class="k">SUBROUTINE </span><span class="n">SizeElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)</span>
<a name="ln-3806"></a>
<a name="ln-3807"></a>          <span class="c">! SUBROUTINE INFORMATION:</span>
<a name="ln-3808"></a>          <span class="c">!       AUTHOR         Fred Buhl</span>
<a name="ln-3809"></a>          <span class="c">!       DATE WRITTEN   April 2002</span>
<a name="ln-3810"></a>          <span class="c">!       MODIFIED       na</span>
<a name="ln-3811"></a>          <span class="c">!       RE-ENGINEERED  B. Griffith, April 2011, allow repeated sizing calls, finish when ready to do so</span>
<a name="ln-3812"></a>
<a name="ln-3813"></a>          <span class="c">! PURPOSE OF THIS SUBROUTINE:</span>
<a name="ln-3814"></a>          <span class="c">! This subroutine is for sizing Electric Chiller Components for which capacities and flow rates</span>
<a name="ln-3815"></a>          <span class="c">! have not been specified in the input.</span>
<a name="ln-3816"></a>
<a name="ln-3817"></a>          <span class="c">! METHODOLOGY EMPLOYED:</span>
<a name="ln-3818"></a>          <span class="c">! Obtains evaporator flow rate from the plant sizing array. Calculates nominal capacity from</span>
<a name="ln-3819"></a>          <span class="c">! the evaporator flow rate and the chilled water loop design delta T. The condenser flow rate</span>
<a name="ln-3820"></a>          <span class="c">! is calculated from the nominal capacity, the COP, and the condenser loop design delta T.</span>
<a name="ln-3821"></a>
<a name="ln-3822"></a>          <span class="c">! REFERENCES:</span>
<a name="ln-3823"></a>          <span class="c">! na</span>
<a name="ln-3824"></a>
<a name="ln-3825"></a>          <span class="c">! USE STATEMENTS:</span>
<a name="ln-3826"></a>  <span class="k">USE </span><span class="n">DataSizing</span>
<a name="ln-3827"></a>  <span class="k">USE </span><span class="n">DataPlant</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">PlantLoop</span><span class="p">,</span> <span class="n">PlantSizesOkayToFinalize</span>
<a name="ln-3828"></a>  <span class="k">USE </span><span class="n">PlantUtilities</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">RegisterPlantCompDesignFlow</span>
<a name="ln-3829"></a>  <span class="k">USE </span><span class="n">ReportSizingManager</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">ReportSizingOutput</span>
<a name="ln-3830"></a>  <span class="k">USE </span><span class="n">OutputReportPredefined</span>
<a name="ln-3831"></a>
<a name="ln-3832"></a>  <span class="k">USE </span><span class="n">FluidProperties</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">GetDensityGlycol</span><span class="p">,</span> <span class="n">GetSpecificHeatGlycol</span>
<a name="ln-3833"></a>
<a name="ln-3834"></a>  <span class="k">IMPLICIT NONE</span>    <span class="c">! Enforce explicit typing of all variables in this routine</span>
<a name="ln-3835"></a>
<a name="ln-3836"></a>          <span class="c">! SUBROUTINE ARGUMENT DEFINITIONS:</span>
<a name="ln-3837"></a>  <span class="kt">INTEGER</span><span class="p">,</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span> <span class="kd">::</span> <span class="n">ChillNum</span>
<a name="ln-3838"></a>
<a name="ln-3839"></a>          <span class="c">! SUBROUTINE PARAMETER DEFINITIONS:</span>
<a name="ln-3840"></a>          <span class="c">! na</span>
<a name="ln-3841"></a>
<a name="ln-3842"></a>          <span class="c">! INTERFACE BLOCK SPECIFICATIONS</span>
<a name="ln-3843"></a>          <span class="c">! na</span>
<a name="ln-3844"></a>
<a name="ln-3845"></a>          <span class="c">! DERIVED TYPE DEFINITIONS</span>
<a name="ln-3846"></a>          <span class="c">! na</span>
<a name="ln-3847"></a>
<a name="ln-3848"></a>          <span class="c">! SUBROUTINE LOCAL VARIABLE DECLARATIONS:</span>
<a name="ln-3849"></a><span class="c">!unused1208  INTEGER             :: PltSizIndex   ! Plant Sizing Do loop index</span>
<a name="ln-3850"></a>  <span class="kt">INTEGER</span>             <span class="kd">::</span> <span class="n">PltSizNum</span>     <span class="c">! Plant Sizing index corresponding to CurLoopNum</span>
<a name="ln-3851"></a>  <span class="kt">INTEGER</span>             <span class="kd">::</span> <span class="n">PltSizCondNum</span> <span class="c">! Plant Sizing index for condenser loop</span>
<a name="ln-3852"></a>  <span class="kt">LOGICAL</span>             <span class="kd">::</span> <span class="n">ErrorsFound</span>   <span class="c">! If errors detected in input</span>
<a name="ln-3853"></a>  <span class="kt">LOGICAL</span>             <span class="kd">::</span> <span class="n">LoopErrorsFound</span>
<a name="ln-3854"></a>  <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="n">MaxNameLength</span><span class="p">)</span> <span class="kd">::</span> <span class="n">equipName</span>
<a name="ln-3855"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>           <span class="kd">::</span>  <span class="n">rho</span> <span class="c">! local fluid density</span>
<a name="ln-3856"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>           <span class="kd">::</span>  <span class="n">Cp</span>  <span class="c">! local fluid specific heat</span>
<a name="ln-3857"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>           <span class="kd">::</span> <span class="n">tmpNomCap</span> <span class="c">! local nominal capacity cooling power</span>
<a name="ln-3858"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>           <span class="kd">::</span> <span class="n">tmpEvapVolFlowRate</span> <span class="c">! local evaporator design volume flow rate</span>
<a name="ln-3859"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>           <span class="kd">::</span> <span class="n">tmpCondVolFlowRate</span> <span class="c">! local condenser design volume flow rate</span>
<a name="ln-3860"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>           <span class="kd">::</span> <span class="n">tmpHeatRecVolFlowRate</span> <span class="c">! local heat recovery design volume flow rate</span>
<a name="ln-3861"></a>
<a name="ln-3862"></a>  <span class="n">PltSizNum</span> <span class="o">=</span> <span class="mi">0</span>
<a name="ln-3863"></a>  <span class="n">PltSizCondNum</span> <span class="o">=</span> <span class="mi">0</span>
<a name="ln-3864"></a>  <span class="n">ErrorsFound</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-3865"></a>  <span class="c">! init local temporary version in case of partial/mixed autosizing</span>
<a name="ln-3866"></a>  <span class="n">tmpNomCap</span>          <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span>
<a name="ln-3867"></a>  <span class="n">tmpEvapVolFlowRate</span> <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapVolFlowRate</span>
<a name="ln-3868"></a>  <span class="n">tmpCondVolFlowRate</span> <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span>
<a name="ln-3869"></a>
<a name="ln-3870"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3871"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span> <span class="o">==</span> <span class="n">AutoSize</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3872"></a><span class="k">      </span><span class="n">PltSizCondNum</span> <span class="o">=</span> <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">PlantSizNum</span>
<a name="ln-3873"></a>    <span class="k">END IF</span>
<a name="ln-3874"></a><span class="k">  END IF</span>
<a name="ln-3875"></a>
<a name="ln-3876"></a><span class="k">  </span><span class="n">PltSizNum</span> <span class="o">=</span> <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">PlantSizNum</span>
<a name="ln-3877"></a>
<a name="ln-3878"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span>  <span class="o">==</span> <span class="n">AutoSize</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3879"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">PltSizNum</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3880"></a><span class="k">      IF</span> <span class="p">(</span><span class="n">PlantSizData</span><span class="p">(</span><span class="n">PltSizNum</span><span class="p">)%</span><span class="n">DesVolFlowRate</span> <span class="o">&gt;=</span> <span class="n">SmallWaterVolFlow</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3881"></a><span class="k">        </span><span class="n">rho</span> <span class="o">=</span> <span class="n">GetDensityGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3882"></a>                                  <span class="n">InitConvTemp</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3883"></a>                                  <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,&amp;</span>
<a name="ln-3884"></a>                                  <span class="s1">&#39;SizeElectricChiller&#39;</span><span class="p">)</span>
<a name="ln-3885"></a>        <span class="n">Cp</span> <span class="o">=</span> <span class="n">GetSpecificHeatGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3886"></a>                                 <span class="n">InitConvTemp</span><span class="p">,</span>                      <span class="p">&amp;</span>
<a name="ln-3887"></a>                                 <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3888"></a>                                 <span class="s1">&#39;SizeElectricChiller&#39;</span><span class="p">)</span>
<a name="ln-3889"></a>        <span class="n">tmpNomCap</span> <span class="o">=</span> <span class="n">Cp</span> <span class="o">*</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">PlantSizData</span><span class="p">(</span><span class="n">PltSizNum</span><span class="p">)%</span><span class="n">DeltaT</span> <span class="p">&amp;</span>
<a name="ln-3890"></a>                                                    <span class="o">*</span> <span class="n">PlantSizData</span><span class="p">(</span><span class="n">PltSizNum</span><span class="p">)%</span><span class="n">DesVolFlowRate</span> <span class="o">*</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">SizFac</span>
<a name="ln-3891"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span> <span class="o">=</span> <span class="n">tmpNomCap</span>
<a name="ln-3892"></a>
<a name="ln-3893"></a>      <span class="k">ELSE</span>
<a name="ln-3894"></a><span class="k">        </span><span class="n">tmpNomCap</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-3895"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span> <span class="o">=</span> <span class="n">tmpNomCap</span>
<a name="ln-3896"></a>      <span class="k">END IF</span>
<a name="ln-3897"></a><span class="k">      IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="k">CALL </span><span class="n">ReportSizingOutput</span><span class="p">(</span><span class="s1">&#39;Chiller:Electric&#39;</span><span class="p">,</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3898"></a>                                                        <span class="s1">&#39;Nominal Capacity [W]&#39;</span><span class="p">,</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span><span class="p">)</span>
<a name="ln-3899"></a>    <span class="k">ELSE</span>
<a name="ln-3900"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Autosizing of Electric Chiller nominal capacity requires a loop Sizing:Plant object&#39;</span><span class="p">)</span>
<a name="ln-3901"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Occurs in Electric Chiller object=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">))</span>
<a name="ln-3902"></a>      <span class="n">ErrorsFound</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-3903"></a>    <span class="k">END IF</span>
<a name="ln-3904"></a><span class="k">  END IF</span>
<a name="ln-3905"></a>
<a name="ln-3906"></a><span class="k">  IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapVolFlowRate</span> <span class="o">==</span> <span class="n">AutoSize</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3907"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">PltSizNum</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3908"></a><span class="k">      IF</span> <span class="p">(</span><span class="n">PlantSizData</span><span class="p">(</span><span class="n">PltSizNum</span><span class="p">)%</span><span class="n">DesVolFlowRate</span> <span class="o">&gt;=</span> <span class="n">SmallWaterVolFlow</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3909"></a><span class="k">        </span><span class="n">tmpEvapVolFlowRate</span> <span class="o">=</span> <span class="n">PlantSizData</span><span class="p">(</span><span class="n">PltSizNum</span><span class="p">)%</span><span class="n">DesVolFlowRate</span> <span class="o">*</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">SizFac</span>
<a name="ln-3910"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapVolFlowRate</span> <span class="o">=</span> <span class="n">tmpEvapVolFlowRate</span>
<a name="ln-3911"></a>      <span class="k">ELSE</span>
<a name="ln-3912"></a><span class="k">        </span><span class="n">tmpEvapVolFlowRate</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-3913"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span>  <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapVolFlowRate</span> <span class="o">=</span> <span class="n">tmpEvapVolFlowRate</span>
<a name="ln-3914"></a>      <span class="k">END IF</span>
<a name="ln-3915"></a><span class="k">      IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span>  <span class="k">CALL </span><span class="n">ReportSizingOutput</span><span class="p">(</span><span class="s1">&#39;Chiller:Electric&#39;</span><span class="p">,</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3916"></a>                              <span class="s1">&#39;Design Chilled Water Flow Rate [m3/s]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3917"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapVolFlowRate</span><span class="p">)</span>
<a name="ln-3918"></a>    <span class="k">ELSE</span>
<a name="ln-3919"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Autosizing of Electric Chiller evap flow rate requires a loop Sizing:Plant object&#39;</span><span class="p">)</span>
<a name="ln-3920"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Occurs in Electric Chiller object=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">))</span>
<a name="ln-3921"></a>      <span class="n">ErrorsFound</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-3922"></a>    <span class="k">END IF</span>
<a name="ln-3923"></a><span class="k">  END IF</span>
<a name="ln-3924"></a>
<a name="ln-3925"></a><span class="k">  CALL </span><span class="n">RegisterPlantCompDesignFlow</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletNodeNum</span><span class="p">,</span><span class="n">tmpEvapVolFlowRate</span><span class="p">)</span>
<a name="ln-3926"></a>
<a name="ln-3927"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span> <span class="o">==</span> <span class="n">AutoSize</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3928"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">PltSizCondNum</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3929"></a><span class="k">      IF</span> <span class="p">(</span><span class="n">PlantSizData</span><span class="p">(</span><span class="n">PltSizNum</span><span class="p">)%</span><span class="n">DesVolFlowRate</span> <span class="o">&gt;=</span> <span class="n">SmallWaterVolFlow</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3930"></a><span class="k">        </span><span class="n">rho</span> <span class="o">=</span> <span class="n">GetDensityGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3931"></a>                                  <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">TempDesCondIn</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3932"></a>                                  <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,&amp;</span>
<a name="ln-3933"></a>                                  <span class="s1">&#39;SizeElectricChiller&#39;</span><span class="p">)</span>
<a name="ln-3934"></a>
<a name="ln-3935"></a>        <span class="n">Cp</span> <span class="o">=</span> <span class="n">GetSpecificHeatGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-3936"></a>                                 <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">TempDesCondIn</span><span class="p">,</span>                      <span class="p">&amp;</span>
<a name="ln-3937"></a>                                 <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3938"></a>                                 <span class="s1">&#39;SizeElectricChiller&#39;</span><span class="p">)</span>
<a name="ln-3939"></a>        <span class="n">tmpCondVolFlowRate</span> <span class="o">=</span> <span class="n">tmpNomCap</span> <span class="o">*</span>   <span class="p">(</span><span class="mf">1.d0</span> <span class="o">+</span> <span class="mf">1.d0</span><span class="o">/</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">COP</span><span class="p">)</span> <span class="o">/</span> <span class="p">&amp;</span>
<a name="ln-3940"></a>                                             <span class="p">(</span> <span class="n">PlantSizData</span><span class="p">(</span><span class="n">PltSizCondNum</span><span class="p">)%</span><span class="n">DeltaT</span> <span class="o">*</span> <span class="n">Cp</span> <span class="o">*</span> <span class="n">rho</span> <span class="p">)</span>
<a name="ln-3941"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span> <span class="o">=</span> <span class="n">tmpCondVolFlowRate</span>
<a name="ln-3942"></a>
<a name="ln-3943"></a>      <span class="k">ELSE</span>
<a name="ln-3944"></a><span class="k">        </span><span class="n">tmpCondVolFlowRate</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-3945"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span>  <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-3946"></a>      <span class="k">END IF</span>
<a name="ln-3947"></a><span class="k">      IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span>  <span class="k">CALL </span><span class="n">ReportSizingOutput</span><span class="p">(</span><span class="s1">&#39;Chiller:Electric&#39;</span><span class="p">,</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3948"></a>                              <span class="s1">&#39;Design Condenser Water Flow Rate [m3/s]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3949"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span><span class="p">)</span>
<a name="ln-3950"></a>    <span class="k">ELSE</span>
<a name="ln-3951"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Autosizing of Electric Chiller condenser flow rate requires a condenser&#39;</span><span class="p">)</span>
<a name="ln-3952"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;loop Sizing:Plant object&#39;</span><span class="p">)</span>
<a name="ln-3953"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Occurs in Electric Chiller object=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">))</span>
<a name="ln-3954"></a>      <span class="n">ErrorsFound</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-3955"></a>    <span class="k">END IF</span>
<a name="ln-3956"></a><span class="k">  END IF</span>
<a name="ln-3957"></a>
<a name="ln-3958"></a>  <span class="c">! save the design condenser water volumetric flow rate for use by the condenser water loop sizing algorithms</span>
<a name="ln-3959"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3960"></a><span class="k">    CALL </span><span class="n">RegisterPlantCompDesignFlow</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span><span class="p">,</span><span class="n">tmpCondVolFlowRate</span><span class="p">)</span>
<a name="ln-3961"></a>  <span class="n">ENDIF</span>
<a name="ln-3962"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">ErrorsFound</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3963"></a><span class="k">    CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;Preceding sizing errors cause program termination&#39;</span><span class="p">)</span>
<a name="ln-3964"></a>  <span class="k">END IF</span>
<a name="ln-3965"></a>
<a name="ln-3966"></a><span class="k">  IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3967"></a><span class="k">    </span><span class="n">tmpHeatRecVolFlowRate</span> <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">DesignHeatRecVolFlowRate</span>
<a name="ln-3968"></a>    <span class="k">IF</span> <span class="p">(</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">DesignHeatRecVolFlowRate</span> <span class="o">==</span> <span class="n">Autosize</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3969"></a><span class="k">      </span><span class="n">tmpHeatRecVolFlowRate</span> <span class="o">=</span> <span class="n">tmpCondVolFlowRate</span> <span class="o">*</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecCapacityFraction</span>
<a name="ln-3970"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-3971"></a><span class="k">        </span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">DesignHeatRecVolFlowRate</span> <span class="o">=</span> <span class="n">tmpHeatRecVolFlowRate</span>
<a name="ln-3972"></a>        <span class="k">CALL </span><span class="n">ReportSizingOutput</span><span class="p">(</span><span class="s1">&#39;Chiller:Electric&#39;</span><span class="p">,</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3973"></a>                              <span class="s1">&#39;Design Heat Recovery Fluid Flow Rate [m3/s]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-3974"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">DesignHeatRecVolFlowRate</span><span class="p">)</span>
<a name="ln-3975"></a>      <span class="n">ENDIF</span>
<a name="ln-3976"></a>    <span class="n">ENDIF</span>
<a name="ln-3977"></a>    <span class="c">! save the reference heat recovery fluid volumetric flow rate</span>
<a name="ln-3978"></a>    <span class="k">CALL </span><span class="n">RegisterPlantCompDesignFlow</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span><span class="p">,</span><span class="n">tmpHeatRecVolFlowRate</span><span class="p">)</span>
<a name="ln-3979"></a>  <span class="n">ENDIF</span>
<a name="ln-3980"></a>
<a name="ln-3981"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="k">Then</span>
<a name="ln-3982"></a>    <span class="c">!create predefined report</span>
<a name="ln-3983"></a>    <span class="n">equipName</span> <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span>
<a name="ln-3984"></a>    <span class="k">CALL </span><span class="n">PreDefTableEntry</span><span class="p">(</span><span class="n">pdchMechType</span><span class="p">,</span><span class="n">equipName</span><span class="p">,</span><span class="s1">&#39;Chiller:Electric&#39;</span><span class="p">)</span>
<a name="ln-3985"></a>    <span class="k">CALL </span><span class="n">PreDefTableEntry</span><span class="p">(</span><span class="n">pdchMechNomEff</span><span class="p">,</span><span class="n">equipName</span><span class="p">,</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">COP</span><span class="p">)</span>
<a name="ln-3986"></a>    <span class="k">CALL </span><span class="n">PreDefTableEntry</span><span class="p">(</span><span class="n">pdchMechNomCap</span><span class="p">,</span><span class="n">equipName</span><span class="p">,</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span><span class="p">)</span>
<a name="ln-3987"></a>  <span class="n">ENDIF</span>
<a name="ln-3988"></a>
<a name="ln-3989"></a>  <span class="k">RETURN</span>
<a name="ln-3990"></a><span class="k">END SUBROUTINE </span><span class="n">SizeElectricChiller</span>
<a name="ln-3991"></a>
<a name="ln-3992"></a><span class="k">SUBROUTINE </span><span class="n">SizeEngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)</span>
<a name="ln-3993"></a>
<a name="ln-3994"></a>          <span class="c">! SUBROUTINE INFORMATION:</span>
<a name="ln-3995"></a>          <span class="c">!       AUTHOR         Fred Buhl</span>
<a name="ln-3996"></a>          <span class="c">!       DATE WRITTEN   June 2002</span>
<a name="ln-3997"></a>          <span class="c">!       MODIFIED       na</span>
<a name="ln-3998"></a>          <span class="c">!       RE-ENGINEERED  na</span>
<a name="ln-3999"></a>
<a name="ln-4000"></a>          <span class="c">! PURPOSE OF THIS SUBROUTINE:</span>
<a name="ln-4001"></a>          <span class="c">! This subroutine is for sizing Engine Driven Chiller Components for which capacities and flow rates</span>
<a name="ln-4002"></a>          <span class="c">! have not been specified in the input.</span>
<a name="ln-4003"></a>
<a name="ln-4004"></a>          <span class="c">! METHODOLOGY EMPLOYED:</span>
<a name="ln-4005"></a>          <span class="c">! Obtains evaporator flow rate from the plant sizing array. Calculates nominal capacity from</span>
<a name="ln-4006"></a>          <span class="c">! the evaporator flow rate and the chilled water loop design delta T. The condenser flow rate</span>
<a name="ln-4007"></a>          <span class="c">! is calculated from the nominal capacity, the COP, and the condenser loop design delta T.</span>
<a name="ln-4008"></a>
<a name="ln-4009"></a>          <span class="c">! REFERENCES:</span>
<a name="ln-4010"></a>          <span class="c">! na</span>
<a name="ln-4011"></a>
<a name="ln-4012"></a>          <span class="c">! USE STATEMENTS:</span>
<a name="ln-4013"></a>  <span class="k">USE </span><span class="n">DataSizing</span>
<a name="ln-4014"></a>  <span class="k">USE </span><span class="n">DataPlant</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">PlantLoop</span><span class="p">,</span> <span class="n">PlantSizesOkayToFinalize</span>
<a name="ln-4015"></a>  <span class="k">USE </span><span class="n">PlantUtilities</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">RegisterPlantCompDesignFlow</span>
<a name="ln-4016"></a>  <span class="k">USE </span><span class="n">ReportSizingManager</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">ReportSizingOutput</span>
<a name="ln-4017"></a>  <span class="k">USE </span><span class="n">OutputReportPredefined</span>
<a name="ln-4018"></a>  <span class="k">USE </span><span class="n">FluidProperties</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">GetDensityGlycol</span><span class="p">,</span> <span class="n">GetSpecificHeatGlycol</span>
<a name="ln-4019"></a>
<a name="ln-4020"></a>  <span class="k">IMPLICIT NONE</span>    <span class="c">! Enforce explicit typing of all variables in this routine</span>
<a name="ln-4021"></a>
<a name="ln-4022"></a>          <span class="c">! SUBROUTINE ARGUMENT DEFINITIONS:</span>
<a name="ln-4023"></a>  <span class="kt">Integer</span><span class="p">,</span> <span class="k">Intent</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span> <span class="kd">::</span> <span class="n">ChillNum</span>
<a name="ln-4024"></a>
<a name="ln-4025"></a>          <span class="c">! SUBROUTINE PARAMETER DEFINITIONS:</span>
<a name="ln-4026"></a>          <span class="c">! na</span>
<a name="ln-4027"></a>
<a name="ln-4028"></a>          <span class="c">! INTERFACE BLOCK SPECIFICATIONS</span>
<a name="ln-4029"></a>          <span class="c">! na</span>
<a name="ln-4030"></a>
<a name="ln-4031"></a>          <span class="c">! DERIVED TYPE DEFINITIONS</span>
<a name="ln-4032"></a>          <span class="c">! na</span>
<a name="ln-4033"></a>
<a name="ln-4034"></a>          <span class="c">! SUBROUTINE LOCAL VARIABLE DECLARATIONS:</span>
<a name="ln-4035"></a><span class="c">!unused1208  INTEGER             :: PltSizIndex   ! Plant Sizing Do loop index</span>
<a name="ln-4036"></a>  <span class="kt">INTEGER</span>             <span class="kd">::</span> <span class="n">PltSizNum</span>     <span class="c">! Plant Sizing index corresponding to CurLoopNum</span>
<a name="ln-4037"></a>  <span class="kt">INTEGER</span>             <span class="kd">::</span> <span class="n">PltSizCondNum</span> <span class="c">! Plant Sizing index for condenser loop</span>
<a name="ln-4038"></a>  <span class="kt">LOGICAL</span>             <span class="kd">::</span> <span class="n">ErrorsFound</span>   <span class="c">! If errors detected in input</span>
<a name="ln-4039"></a>  <span class="kt">LOGICAL</span>             <span class="kd">::</span> <span class="n">LoopErrorsFound</span>
<a name="ln-4040"></a>  <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="n">MaxNameLength</span><span class="p">)</span> <span class="kd">::</span> <span class="n">equipName</span>
<a name="ln-4041"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>           <span class="kd">::</span>  <span class="n">rho</span> <span class="c">! local fluid density</span>
<a name="ln-4042"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>           <span class="kd">::</span>  <span class="n">Cp</span>  <span class="c">! local fluid specific heat</span>
<a name="ln-4043"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>           <span class="kd">::</span> <span class="n">tmpNomCap</span> <span class="c">! local nominal capacity cooling power</span>
<a name="ln-4044"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>           <span class="kd">::</span> <span class="n">tmpEvapVolFlowRate</span> <span class="c">! local evaporator design volume flow rate</span>
<a name="ln-4045"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>           <span class="kd">::</span> <span class="n">tmpCondVolFlowRate</span> <span class="c">! local condenser design volume flow rate</span>
<a name="ln-4046"></a>
<a name="ln-4047"></a>  <span class="n">PltSizNum</span> <span class="o">=</span> <span class="mi">0</span>
<a name="ln-4048"></a>  <span class="n">PltSizCondNum</span> <span class="o">=</span> <span class="mi">0</span>
<a name="ln-4049"></a>  <span class="n">ErrorsFound</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-4050"></a>  <span class="n">tmpNomCap</span>          <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span>
<a name="ln-4051"></a>  <span class="n">tmpEvapVolFlowRate</span> <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapVolFlowRate</span>
<a name="ln-4052"></a>  <span class="n">tmpCondVolFlowRate</span> <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span>
<a name="ln-4053"></a>
<a name="ln-4054"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4055"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span> <span class="o">==</span> <span class="n">AutoSize</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4056"></a><span class="k">      </span><span class="n">PltSizCondNum</span> <span class="o">=</span> <span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">PlantSizNum</span>
<a name="ln-4057"></a>    <span class="k">END IF</span>
<a name="ln-4058"></a><span class="k">  END IF</span>
<a name="ln-4059"></a>
<a name="ln-4060"></a><span class="k">  </span><span class="n">PltSizNum</span> <span class="o">=</span> <span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">PlantSizNum</span>
<a name="ln-4061"></a>
<a name="ln-4062"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span>  <span class="o">==</span> <span class="n">AutoSize</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4063"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">PltSizNum</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4064"></a><span class="k">      IF</span> <span class="p">(</span><span class="n">PlantSizData</span><span class="p">(</span><span class="n">PltSizNum</span><span class="p">)%</span><span class="n">DesVolFlowRate</span> <span class="o">&gt;=</span> <span class="n">SmallWaterVolFlow</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4065"></a><span class="k">        </span><span class="n">rho</span> <span class="o">=</span> <span class="n">GetDensityGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-4066"></a>                                  <span class="n">InitConvTemp</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4067"></a>                                  <span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,&amp;</span>
<a name="ln-4068"></a>                                  <span class="s1">&#39;SizeEngineDrivenChiller&#39;</span><span class="p">)</span>
<a name="ln-4069"></a>        <span class="n">Cp</span> <span class="o">=</span> <span class="n">GetSpecificHeatGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-4070"></a>                                 <span class="n">InitConvTemp</span><span class="p">,</span>                      <span class="p">&amp;</span>
<a name="ln-4071"></a>                                 <span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4072"></a>                                 <span class="s1">&#39;SizeEngineDrivenChiller&#39;</span><span class="p">)</span>
<a name="ln-4073"></a>        <span class="n">tmpNomCap</span> <span class="o">=</span> <span class="n">Cp</span> <span class="o">*</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">PlantSizData</span><span class="p">(</span><span class="n">PltSizNum</span><span class="p">)%</span><span class="n">DeltaT</span> <span class="p">&amp;</span>
<a name="ln-4074"></a>                                              <span class="o">*</span> <span class="n">PlantSizData</span><span class="p">(</span><span class="n">PltSizNum</span><span class="p">)%</span><span class="n">DesVolFlowRate</span> <span class="o">*</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">SizFac</span>
<a name="ln-4075"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span> <span class="o">=</span>  <span class="n">tmpNomCap</span>
<a name="ln-4076"></a>      <span class="k">ELSE</span>
<a name="ln-4077"></a><span class="k">        </span><span class="n">tmpNomCap</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-4078"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span>  <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span> <span class="o">=</span> <span class="n">tmpNomCap</span>
<a name="ln-4079"></a>      <span class="k">END IF</span>
<a name="ln-4080"></a><span class="k">      IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="k">CALL </span><span class="n">ReportSizingOutput</span><span class="p">(</span><span class="s1">&#39;Chiller:EngineDriven&#39;</span><span class="p">,</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4081"></a>                              <span class="s1">&#39;Nominal Capacity [W]&#39;</span><span class="p">,</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span><span class="p">)</span>
<a name="ln-4082"></a>    <span class="k">ELSE</span>
<a name="ln-4083"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Autosizing of Engine Driven Chiller nominal capacity requires a loop Sizing:Plant object&#39;</span><span class="p">)</span>
<a name="ln-4084"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Occurs in Engine Driven Chiller object=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">))</span>
<a name="ln-4085"></a>      <span class="n">ErrorsFound</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-4086"></a>    <span class="k">END IF</span>
<a name="ln-4087"></a><span class="k">  END IF</span>
<a name="ln-4088"></a>
<a name="ln-4089"></a><span class="k">  IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapVolFlowRate</span> <span class="o">==</span> <span class="n">AutoSize</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4090"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">PltSizNum</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4091"></a><span class="k">      IF</span> <span class="p">(</span><span class="n">PlantSizData</span><span class="p">(</span><span class="n">PltSizNum</span><span class="p">)%</span><span class="n">DesVolFlowRate</span> <span class="o">&gt;=</span> <span class="n">SmallWaterVolFlow</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4092"></a><span class="k">        </span><span class="n">tmpEvapVolFlowRate</span> <span class="o">=</span> <span class="n">PlantSizData</span><span class="p">(</span><span class="n">PltSizNum</span><span class="p">)%</span><span class="n">DesVolFlowRate</span> <span class="o">*</span>   <span class="p">&amp;</span>
<a name="ln-4093"></a>                                    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">SizFac</span>
<a name="ln-4094"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapVolFlowRate</span> <span class="o">=</span> <span class="n">tmpEvapVolFlowRate</span>
<a name="ln-4095"></a>      <span class="k">ELSE</span>
<a name="ln-4096"></a><span class="k">        </span><span class="n">tmpEvapVolFlowRate</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-4097"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapVolFlowRate</span> <span class="o">=</span> <span class="n">tmpEvapVolFlowRate</span>
<a name="ln-4098"></a>      <span class="k">END IF</span>
<a name="ln-4099"></a><span class="k">      IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="k">CALL </span><span class="n">ReportSizingOutput</span><span class="p">(</span><span class="s1">&#39;Chiller:EngineDriven&#39;</span><span class="p">,</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4100"></a>                              <span class="s1">&#39;Design Chilled Water Flow Rate [m3/s]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4101"></a>                              <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapVolFlowRate</span><span class="p">)</span>
<a name="ln-4102"></a>    <span class="k">ELSE</span>
<a name="ln-4103"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Autosizing of Engine Driven Chiller evap flow rate requires a loop Sizing:Plant object&#39;</span><span class="p">)</span>
<a name="ln-4104"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Occurs in Engine Driven Chiller object=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">))</span>
<a name="ln-4105"></a>      <span class="n">ErrorsFound</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-4106"></a>    <span class="k">END IF</span>
<a name="ln-4107"></a><span class="k">  END IF</span>
<a name="ln-4108"></a>
<a name="ln-4109"></a><span class="k">  CALL </span><span class="n">RegisterPlantCompDesignFlow</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletNodeNum</span><span class="p">,</span><span class="n">tmpEvapVolFlowRate</span><span class="p">)</span>
<a name="ln-4110"></a>
<a name="ln-4111"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span> <span class="o">==</span> <span class="n">AutoSize</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4112"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">PltSizCondNum</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4113"></a><span class="k">      IF</span> <span class="p">(</span><span class="n">PlantSizData</span><span class="p">(</span><span class="n">PltSizNum</span><span class="p">)%</span><span class="n">DesVolFlowRate</span> <span class="o">&gt;=</span> <span class="n">SmallWaterVolFlow</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4114"></a><span class="k">        </span><span class="n">rho</span> <span class="o">=</span> <span class="n">GetDensityGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-4115"></a>                                  <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">TempDesCondIn</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4116"></a>                                  <span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,&amp;</span>
<a name="ln-4117"></a>                                  <span class="s1">&#39;SizeEngineDrivenChiller&#39;</span><span class="p">)</span>
<a name="ln-4118"></a>
<a name="ln-4119"></a>        <span class="n">Cp</span> <span class="o">=</span> <span class="n">GetSpecificHeatGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-4120"></a>                                 <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">TempDesCondIn</span><span class="p">,</span>                      <span class="p">&amp;</span>
<a name="ln-4121"></a>                                 <span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4122"></a>                                 <span class="s1">&#39;SizeEngineDrivenChiller&#39;</span><span class="p">)</span>
<a name="ln-4123"></a>        <span class="n">tmpCondVolFlowRate</span> <span class="o">=</span> <span class="n">tmpNomCap</span> <span class="o">*</span>   <span class="p">(</span><span class="mf">1.d0</span> <span class="o">+</span> <span class="mf">1.d0</span><span class="o">/</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">COP</span><span class="p">)</span> <span class="o">/</span> <span class="p">&amp;</span>
<a name="ln-4124"></a>                                                 <span class="p">(</span> <span class="n">PlantSizData</span><span class="p">(</span><span class="n">PltSizCondNum</span><span class="p">)%</span><span class="n">DeltaT</span> <span class="o">*</span> <span class="n">Cp</span> <span class="o">*</span> <span class="n">rho</span> <span class="p">)</span>
<a name="ln-4125"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span>  <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span> <span class="o">=</span> <span class="n">tmpCondVolFlowRate</span>
<a name="ln-4126"></a>
<a name="ln-4127"></a>      <span class="k">ELSE</span>
<a name="ln-4128"></a><span class="k">        </span><span class="n">tmpCondVolFlowRate</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-4129"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span>  <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span> <span class="o">=</span> <span class="n">tmpCondVolFlowRate</span>
<a name="ln-4130"></a>      <span class="k">END IF</span>
<a name="ln-4131"></a><span class="k">      IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span>  <span class="k">CALL </span><span class="n">ReportSizingOutput</span><span class="p">(</span><span class="s1">&#39;Chiller:EngineDriven&#39;</span><span class="p">,</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4132"></a>                              <span class="s1">&#39;Design Condenser Water Flow Rate [m3/s]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4133"></a>                              <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span><span class="p">)</span>
<a name="ln-4134"></a>    <span class="k">ELSE</span>
<a name="ln-4135"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Autosizing of EngineDriven Chiller condenser flow rate requires a condenser&#39;</span><span class="p">)</span>
<a name="ln-4136"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;loop Sizing:Plant object&#39;</span><span class="p">)</span>
<a name="ln-4137"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Occurs in EngineDriven Chiller object=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">))</span>
<a name="ln-4138"></a>      <span class="n">ErrorsFound</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-4139"></a>    <span class="k">END IF</span>
<a name="ln-4140"></a><span class="k">  END IF</span>
<a name="ln-4141"></a>
<a name="ln-4142"></a>  <span class="c">! save the design condenser water volumetric flow rate for use by the condenser water loop sizing algorithms</span>
<a name="ln-4143"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4144"></a><span class="k">    CALL </span><span class="n">RegisterPlantCompDesignFlow</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span><span class="p">,</span> <span class="n">tmpCondVolFlowRate</span><span class="p">)</span>
<a name="ln-4145"></a>  <span class="n">ENDIF</span>
<a name="ln-4146"></a>
<a name="ln-4147"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="k">Then</span>
<a name="ln-4148"></a>    <span class="c">!create predefined report</span>
<a name="ln-4149"></a>    <span class="n">equipName</span> <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span>
<a name="ln-4150"></a>    <span class="k">CALL </span><span class="n">PreDefTableEntry</span><span class="p">(</span><span class="n">pdchMechType</span><span class="p">,</span><span class="n">equipName</span><span class="p">,</span><span class="s1">&#39;Chiller:EngineDriven&#39;</span><span class="p">)</span>
<a name="ln-4151"></a>    <span class="k">CALL </span><span class="n">PreDefTableEntry</span><span class="p">(</span><span class="n">pdchMechNomEff</span><span class="p">,</span><span class="n">equipName</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">COP</span><span class="p">)</span>
<a name="ln-4152"></a>    <span class="k">CALL </span><span class="n">PreDefTableEntry</span><span class="p">(</span><span class="n">pdchMechNomCap</span><span class="p">,</span><span class="n">equipName</span><span class="p">,</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span><span class="p">)</span>
<a name="ln-4153"></a>  <span class="n">ENDIF</span>
<a name="ln-4154"></a>
<a name="ln-4155"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">ErrorsFound</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4156"></a><span class="k">    CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;Preceding sizing errors cause program termination&#39;</span><span class="p">)</span>
<a name="ln-4157"></a>  <span class="k">END IF</span>
<a name="ln-4158"></a>
<a name="ln-4159"></a><span class="k">  RETURN</span>
<a name="ln-4160"></a><span class="k">END SUBROUTINE </span><span class="n">SizeEngineDrivenChiller</span>
<a name="ln-4161"></a>
<a name="ln-4162"></a><span class="k">SUBROUTINE </span><span class="n">SizeGTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)</span>
<a name="ln-4163"></a>
<a name="ln-4164"></a>
<a name="ln-4165"></a>          <span class="c">! SUBROUTINE INFORMATION:</span>
<a name="ln-4166"></a>          <span class="c">!       AUTHOR         Fred Buhl</span>
<a name="ln-4167"></a>          <span class="c">!       DATE WRITTEN   June 2002</span>
<a name="ln-4168"></a>          <span class="c">!       MODIFIED       na</span>
<a name="ln-4169"></a>          <span class="c">!       RE-ENGINEERED  na</span>
<a name="ln-4170"></a>
<a name="ln-4171"></a>          <span class="c">! PURPOSE OF THIS SUBROUTINE:</span>
<a name="ln-4172"></a>          <span class="c">! This subroutine is for sizing Gas Turbine Chiller Components for which capacities and flow rates</span>
<a name="ln-4173"></a>          <span class="c">! have not been specified in the input.</span>
<a name="ln-4174"></a>
<a name="ln-4175"></a>          <span class="c">! METHODOLOGY EMPLOYED:</span>
<a name="ln-4176"></a>          <span class="c">! Obtains evaporator flow rate from the plant sizing array. Calculates nominal capacity from</span>
<a name="ln-4177"></a>          <span class="c">! the evaporator flow rate and the chilled water loop design delta T. The condenser flow rate</span>
<a name="ln-4178"></a>          <span class="c">! is calculated from the nominal capacity, the COP, and the condenser loop design delta T.</span>
<a name="ln-4179"></a>
<a name="ln-4180"></a>          <span class="c">! REFERENCES:</span>
<a name="ln-4181"></a>          <span class="c">! na</span>
<a name="ln-4182"></a>
<a name="ln-4183"></a>          <span class="c">! USE STATEMENTS:</span>
<a name="ln-4184"></a>  <span class="k">USE </span><span class="n">DataSizing</span>
<a name="ln-4185"></a>  <span class="k">USE </span><span class="n">DataPlant</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">PlantLoop</span><span class="p">,</span> <span class="n">PlantSizesOkayToFinalize</span>
<a name="ln-4186"></a>  <span class="k">USE </span><span class="n">PlantUtilities</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">RegisterPlantCompDesignFlow</span>
<a name="ln-4187"></a>  <span class="k">USE </span><span class="n">ReportSizingManager</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">ReportSizingOutput</span>
<a name="ln-4188"></a>  <span class="k">USE </span><span class="n">OutputReportPredefined</span>
<a name="ln-4189"></a>  <span class="k">USE </span><span class="n">FluidProperties</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">GetDensityGlycol</span><span class="p">,</span> <span class="n">GetSpecificHeatGlycol</span>
<a name="ln-4190"></a>
<a name="ln-4191"></a>  <span class="k">IMPLICIT NONE</span>    <span class="c">! Enforce explicit typing of all variables in this routine</span>
<a name="ln-4192"></a>
<a name="ln-4193"></a>          <span class="c">! SUBROUTINE ARGUMENT DEFINITIONS:</span>
<a name="ln-4194"></a>  <span class="kt">Integer</span><span class="p">,</span> <span class="k">Intent</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span> <span class="kd">::</span> <span class="n">ChillNum</span>
<a name="ln-4195"></a>
<a name="ln-4196"></a>          <span class="c">! SUBROUTINE PARAMETER DEFINITIONS:</span>
<a name="ln-4197"></a>          <span class="c">! na</span>
<a name="ln-4198"></a>
<a name="ln-4199"></a>          <span class="c">! INTERFACE BLOCK SPECIFICATIONS</span>
<a name="ln-4200"></a>          <span class="c">! na</span>
<a name="ln-4201"></a>
<a name="ln-4202"></a>          <span class="c">! DERIVED TYPE DEFINITIONS</span>
<a name="ln-4203"></a>          <span class="c">! na</span>
<a name="ln-4204"></a>
<a name="ln-4205"></a>          <span class="c">! SUBROUTINE LOCAL VARIABLE DECLARATIONS:</span>
<a name="ln-4206"></a><span class="c">!unused1208  INTEGER             :: PltSizIndex   ! Plant Sizing Do loop index</span>
<a name="ln-4207"></a>  <span class="kt">INTEGER</span>             <span class="kd">::</span> <span class="n">PltSizNum</span>     <span class="c">! Plant Sizing index corresponding to CurLoopNum</span>
<a name="ln-4208"></a>  <span class="kt">INTEGER</span>             <span class="kd">::</span> <span class="n">PltSizCondNum</span> <span class="c">! Plant Sizing index for condenser loop</span>
<a name="ln-4209"></a>  <span class="kt">LOGICAL</span>             <span class="kd">::</span> <span class="n">ErrorsFound</span>   <span class="c">! If errors detected in input</span>
<a name="ln-4210"></a>  <span class="kt">LOGICAL</span>             <span class="kd">::</span> <span class="n">LoopErrorsFound</span>
<a name="ln-4211"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>           <span class="kd">::</span> <span class="n">EngineEff</span>     <span class="c">! this should be an input! needed to autosize the engine capacity.</span>
<a name="ln-4212"></a>  <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="n">MaxNameLength</span><span class="p">)</span> <span class="kd">::</span> <span class="n">equipName</span>
<a name="ln-4213"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>           <span class="kd">::</span>  <span class="n">rho</span>  <span class="c">! local fluid density</span>
<a name="ln-4214"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>           <span class="kd">::</span>  <span class="n">Cp</span>   <span class="c">! local fluid specific heat</span>
<a name="ln-4215"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>           <span class="kd">::</span>  <span class="n">tmpNomCap</span> <span class="c">! local nominal capacity cooling power</span>
<a name="ln-4216"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>           <span class="kd">::</span>  <span class="n">tmpEvapVolFlowRate</span> <span class="c">! local evaporator design volume flow rate</span>
<a name="ln-4217"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>           <span class="kd">::</span>  <span class="n">tmpCondVolFlowRate</span> <span class="c">! local condenser design volume flow rate</span>
<a name="ln-4218"></a>
<a name="ln-4219"></a>  <span class="n">PltSizNum</span> <span class="o">=</span> <span class="mi">0</span>
<a name="ln-4220"></a>  <span class="n">PltSizCondNum</span> <span class="o">=</span> <span class="mi">0</span>
<a name="ln-4221"></a>  <span class="n">EngineEff</span> <span class="o">=</span> <span class="mf">0.35d0</span>
<a name="ln-4222"></a>  <span class="n">ErrorsFound</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-4223"></a>  <span class="n">tmpNomCap</span>          <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span>
<a name="ln-4224"></a>  <span class="n">tmpEvapVolFlowRate</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapVolFlowRate</span>
<a name="ln-4225"></a>  <span class="n">tmpCondVolFlowRate</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span>
<a name="ln-4226"></a>
<a name="ln-4227"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4228"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span> <span class="o">==</span> <span class="n">AutoSize</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4229"></a><span class="k">      </span><span class="n">PltSizCondNum</span> <span class="o">=</span> <span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">PlantSizNum</span>
<a name="ln-4230"></a>    <span class="k">END IF</span>
<a name="ln-4231"></a><span class="k">  END IF</span>
<a name="ln-4232"></a>
<a name="ln-4233"></a><span class="k">  </span><span class="n">PltSizNum</span> <span class="o">=</span> <span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">PlantSizNum</span>
<a name="ln-4234"></a>
<a name="ln-4235"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span>  <span class="o">==</span> <span class="n">AutoSize</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4236"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">PltSizNum</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4237"></a><span class="k">      IF</span> <span class="p">(</span><span class="n">PlantSizData</span><span class="p">(</span><span class="n">PltSizNum</span><span class="p">)%</span><span class="n">DesVolFlowRate</span> <span class="o">&gt;=</span> <span class="n">SmallWaterVolFlow</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4238"></a><span class="k">        </span><span class="n">rho</span> <span class="o">=</span> <span class="n">GetDensityGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-4239"></a>                                  <span class="n">InitConvTemp</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4240"></a>                                  <span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,&amp;</span>
<a name="ln-4241"></a>                                  <span class="s1">&#39;SizeGTChiller&#39;</span><span class="p">)</span>
<a name="ln-4242"></a>        <span class="n">Cp</span> <span class="o">=</span> <span class="n">GetSpecificHeatGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-4243"></a>                                   <span class="n">InitConvTemp</span><span class="p">,</span>                      <span class="p">&amp;</span>
<a name="ln-4244"></a>                                   <span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4245"></a>                                   <span class="s1">&#39;SizeGTChiller&#39;</span><span class="p">)</span>
<a name="ln-4246"></a>        <span class="n">tmpNomCap</span> <span class="o">=</span> <span class="n">Cp</span> <span class="o">*</span> <span class="n">Rho</span> <span class="o">*</span> <span class="n">PlantSizData</span><span class="p">(</span><span class="n">PltSizNum</span><span class="p">)%</span><span class="n">DeltaT</span> <span class="p">&amp;</span>
<a name="ln-4247"></a>                                        <span class="o">*</span> <span class="n">PlantSizData</span><span class="p">(</span><span class="n">PltSizNum</span><span class="p">)%</span><span class="n">DesVolFlowRate</span> <span class="o">*</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">SizFac</span>
<a name="ln-4248"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span>  <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span> <span class="o">=</span> <span class="n">tmpNomCap</span>
<a name="ln-4249"></a>      <span class="k">ELSE</span>
<a name="ln-4250"></a><span class="k">        </span><span class="n">tmpNomCap</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-4251"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span> <span class="o">=</span> <span class="n">tmpNomCap</span>
<a name="ln-4252"></a>      <span class="k">END IF</span>
<a name="ln-4253"></a><span class="k">      IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="k">CALL </span><span class="n">ReportSizingOutput</span><span class="p">(</span><span class="s1">&#39;Chiller:CombustionTurbine&#39;</span><span class="p">,</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4254"></a>                              <span class="s1">&#39;Nominal Capacity [W]&#39;</span><span class="p">,</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span><span class="p">)</span>
<a name="ln-4255"></a>    <span class="k">ELSE</span>
<a name="ln-4256"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Autosizing of Gas Turbine Chiller nominal capacity requires a loop Sizing:Plant object&#39;</span><span class="p">)</span>
<a name="ln-4257"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Occurs in Gas Turbine Chiller object=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">))</span>
<a name="ln-4258"></a>      <span class="n">ErrorsFound</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-4259"></a>    <span class="k">END IF</span>
<a name="ln-4260"></a><span class="k">  END IF</span>
<a name="ln-4261"></a>
<a name="ln-4262"></a><span class="k">  IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapVolFlowRate</span> <span class="o">==</span> <span class="n">AutoSize</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4263"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">PltSizNum</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4264"></a><span class="k">      IF</span> <span class="p">(</span><span class="n">PlantSizData</span><span class="p">(</span><span class="n">PltSizNum</span><span class="p">)%</span><span class="n">DesVolFlowRate</span> <span class="o">&gt;=</span> <span class="n">SmallWaterVolFlow</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4265"></a><span class="k">        </span><span class="n">tmpEvapVolFlowRate</span> <span class="o">=</span> <span class="n">PlantSizData</span><span class="p">(</span><span class="n">PltSizNum</span><span class="p">)%</span><span class="n">DesVolFlowRate</span> <span class="o">*</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">SizFac</span>
<a name="ln-4266"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapVolFlowRate</span> <span class="o">=</span> <span class="n">tmpEvapVolFlowRate</span>
<a name="ln-4267"></a>      <span class="k">ELSE</span>
<a name="ln-4268"></a><span class="k">        </span><span class="n">tmpEvapVolFlowRate</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-4269"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapVolFlowRate</span> <span class="o">=</span> <span class="n">tmpEvapVolFlowRate</span>
<a name="ln-4270"></a>      <span class="k">END IF</span>
<a name="ln-4271"></a><span class="k">      IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="k">CALL </span><span class="n">ReportSizingOutput</span><span class="p">(</span><span class="s1">&#39;Chiller:CombustionTurbine&#39;</span><span class="p">,</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4272"></a>                              <span class="s1">&#39;Design Chilled Water Flow Rate [m3/s]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4273"></a>                              <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapVolFlowRate</span><span class="p">)</span>
<a name="ln-4274"></a>    <span class="k">ELSE</span>
<a name="ln-4275"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Autosizing of Gas Turbine Chiller evap flow rate requires a loop Sizing:Plant object&#39;</span><span class="p">)</span>
<a name="ln-4276"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Occurs in Gas Turbine Chiller object=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">))</span>
<a name="ln-4277"></a>      <span class="n">ErrorsFound</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-4278"></a>    <span class="k">END IF</span>
<a name="ln-4279"></a><span class="k">  END IF</span>
<a name="ln-4280"></a>
<a name="ln-4281"></a><span class="k">  CALL </span><span class="n">RegisterPlantCompDesignFlow</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletNodeNum</span><span class="p">,</span><span class="n">tmpEvapVolFlowRate</span><span class="p">)</span>
<a name="ln-4282"></a>
<a name="ln-4283"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span> <span class="o">==</span> <span class="n">AutoSize</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4284"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">PltSizCondNum</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4285"></a><span class="k">      IF</span> <span class="p">(</span><span class="n">PlantSizData</span><span class="p">(</span><span class="n">PltSizNum</span><span class="p">)%</span><span class="n">DesVolFlowRate</span> <span class="o">&gt;=</span> <span class="n">SmallWaterVolFlow</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4286"></a><span class="k">        </span><span class="n">rho</span> <span class="o">=</span> <span class="n">GetDensityGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-4287"></a>                                  <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">TempDesCondIn</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4288"></a>                                  <span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,&amp;</span>
<a name="ln-4289"></a>                                  <span class="s1">&#39;SizeGTChiller&#39;</span><span class="p">)</span>
<a name="ln-4290"></a>
<a name="ln-4291"></a>        <span class="n">Cp</span> <span class="o">=</span> <span class="n">GetSpecificHeatGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-4292"></a>                                 <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">TempDesCondIn</span><span class="p">,</span>                      <span class="p">&amp;</span>
<a name="ln-4293"></a>                                 <span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4294"></a>                                 <span class="s1">&#39;SizeGTChiller&#39;</span><span class="p">)</span>
<a name="ln-4295"></a>        <span class="n">tmpCondVolFlowRate</span> <span class="o">=</span> <span class="n">tmpNomCap</span> <span class="o">*</span>  <span class="p">(</span><span class="mf">1.0d0</span> <span class="o">+</span> <span class="mf">1.0d0</span><span class="o">/</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">COP</span><span class="p">)</span> <span class="o">/</span> <span class="p">&amp;</span>
<a name="ln-4296"></a>                                <span class="p">(</span> <span class="n">PlantSizData</span><span class="p">(</span><span class="n">PltSizCondNum</span><span class="p">)%</span><span class="n">DeltaT</span> <span class="o">*</span> <span class="n">Cp</span> <span class="o">*</span> <span class="n">Rho</span><span class="p">)</span>
<a name="ln-4297"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span> <span class="o">=</span> <span class="n">tmpCondVolFlowRate</span>
<a name="ln-4298"></a>      <span class="k">ELSE</span>
<a name="ln-4299"></a><span class="k">        </span><span class="n">tmpCondVolFlowRate</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-4300"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span> <span class="o">=</span> <span class="n">tmpCondVolFlowRate</span>
<a name="ln-4301"></a>      <span class="k">END IF</span>
<a name="ln-4302"></a><span class="k">      IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="k">CALL </span><span class="n">ReportSizingOutput</span><span class="p">(</span><span class="s1">&#39;Chiller:CombustionTurbine&#39;</span><span class="p">,</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4303"></a>                              <span class="s1">&#39;Design Condenser Water Flow Rate [m3/s]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4304"></a>                              <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span><span class="p">)</span>
<a name="ln-4305"></a>    <span class="k">ELSE</span>
<a name="ln-4306"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Autosizing of Gas Turbine Chiller condenser flow rate requires a condenser&#39;</span><span class="p">)</span>
<a name="ln-4307"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;loop Sizing:Plant object&#39;</span><span class="p">)</span>
<a name="ln-4308"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Occurs in Gas Turbine Chiller object=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">))</span>
<a name="ln-4309"></a>      <span class="n">ErrorsFound</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-4310"></a>    <span class="k">END IF</span>
<a name="ln-4311"></a><span class="k">  END IF</span>
<a name="ln-4312"></a>  <span class="c">! save the design condenser water volumetric flow rate for use by the condenser water loop sizing algorithms</span>
<a name="ln-4313"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="p">&amp;</span>
<a name="ln-4314"></a>    <span class="k">CALL </span><span class="n">RegisterPlantCompDesignFlow</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span><span class="p">,</span><span class="n">tmpCondVolFlowRate</span><span class="p">)</span>
<a name="ln-4315"></a>
<a name="ln-4316"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">GTEngineCapacity</span>  <span class="o">==</span> <span class="n">AutoSize</span> <span class="p">.</span><span class="nb">and</span><span class="p">.</span> <span class="n">PlantSizesOkayToFinalize</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4317"></a><span class="k">    </span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">GTEngineCapacity</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span> <span class="o">*</span> <span class="n">EngineEff</span> <span class="p">&amp;</span>
<a name="ln-4318"></a>                                                    <span class="o">/</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">COP</span>
<a name="ln-4319"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="k">CALL </span><span class="n">ReportSizingOutput</span><span class="p">(</span><span class="s1">&#39;Chiller:CombustionTurbine&#39;</span><span class="p">,</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4320"></a>                            <span class="s1">&#39;Gas Turbine Engine Capacity [W]&#39;</span><span class="p">,</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">GTEngineCapacity</span><span class="p">)</span>
<a name="ln-4321"></a>  <span class="k">END IF</span>
<a name="ln-4322"></a>
<a name="ln-4323"></a>
<a name="ln-4324"></a><span class="k">  IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="k">Then</span>
<a name="ln-4325"></a>    <span class="c">!create predefined report</span>
<a name="ln-4326"></a>    <span class="n">equipName</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span>
<a name="ln-4327"></a>    <span class="k">CALL </span><span class="n">PreDefTableEntry</span><span class="p">(</span><span class="n">pdchMechType</span><span class="p">,</span><span class="n">equipName</span><span class="p">,</span><span class="s1">&#39;Chiller:CombustionTurbine&#39;</span><span class="p">)</span>
<a name="ln-4328"></a>    <span class="k">CALL </span><span class="n">PreDefTableEntry</span><span class="p">(</span><span class="n">pdchMechNomEff</span><span class="p">,</span><span class="n">equipName</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">COP</span><span class="p">)</span>
<a name="ln-4329"></a>    <span class="k">CALL </span><span class="n">PreDefTableEntry</span><span class="p">(</span><span class="n">pdchMechNomCap</span><span class="p">,</span><span class="n">equipName</span><span class="p">,</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span><span class="p">)</span>
<a name="ln-4330"></a>  <span class="n">ENDIF</span>
<a name="ln-4331"></a>
<a name="ln-4332"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">ErrorsFound</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4333"></a><span class="k">    CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;Preceding sizing errors cause program termination&#39;</span><span class="p">)</span>
<a name="ln-4334"></a>  <span class="k">END IF</span>
<a name="ln-4335"></a>
<a name="ln-4336"></a><span class="k">  RETURN</span>
<a name="ln-4337"></a>
<a name="ln-4338"></a><span class="k">END SUBROUTINE </span><span class="n">SizeGTChiller</span>
<a name="ln-4339"></a>
<a name="ln-4340"></a><span class="k">SUBROUTINE </span><span class="n">SizeConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)</span>
<a name="ln-4341"></a>
<a name="ln-4342"></a>          <span class="c">! SUBROUTINE INFORMATION:</span>
<a name="ln-4343"></a>          <span class="c">!       AUTHOR         Fred Buhl</span>
<a name="ln-4344"></a>          <span class="c">!       DATE WRITTEN   March 2008</span>
<a name="ln-4345"></a>          <span class="c">!       MODIFIED       na</span>
<a name="ln-4346"></a>          <span class="c">!       RE-ENGINEERED  na</span>
<a name="ln-4347"></a>
<a name="ln-4348"></a>          <span class="c">! PURPOSE OF THIS SUBROUTINE:</span>
<a name="ln-4349"></a>          <span class="c">! This subroutine is for sizing Constabt COP Chiller Components for which capacities and flow rates</span>
<a name="ln-4350"></a>          <span class="c">! have not been specified in the input.</span>
<a name="ln-4351"></a>
<a name="ln-4352"></a>          <span class="c">! METHODOLOGY EMPLOYED:</span>
<a name="ln-4353"></a>          <span class="c">! Obtains evaporator flow rate from the plant sizing array. Calculates nominal capacity from</span>
<a name="ln-4354"></a>          <span class="c">! the evaporator flow rate and the chilled water loop design delta T. The condenser flow rate</span>
<a name="ln-4355"></a>          <span class="c">! is calculated from the nominal capacity, the COP, and the condenser loop design delta T.</span>
<a name="ln-4356"></a>
<a name="ln-4357"></a>          <span class="c">! REFERENCES:</span>
<a name="ln-4358"></a>          <span class="c">! na</span>
<a name="ln-4359"></a>
<a name="ln-4360"></a>          <span class="c">! USE STATEMENTS:</span>
<a name="ln-4361"></a>  <span class="k">USE </span><span class="n">DataSizing</span>
<a name="ln-4362"></a>  <span class="k">USE </span><span class="n">DataPlant</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">PlantLoop</span><span class="p">,</span> <span class="n">PlantSizesOkayToFinalize</span>
<a name="ln-4363"></a>  <span class="k">USE </span><span class="n">PlantUtilities</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">RegisterPlantCompDesignFlow</span>
<a name="ln-4364"></a>  <span class="k">USE </span><span class="n">ReportSizingManager</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">ReportSizingOutput</span>
<a name="ln-4365"></a>  <span class="k">USE </span><span class="n">OutputReportPredefined</span>
<a name="ln-4366"></a>  <span class="k">USE </span><span class="n">FluidProperties</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">GetDensityGlycol</span><span class="p">,</span> <span class="n">GetSpecificHeatGlycol</span>
<a name="ln-4367"></a>
<a name="ln-4368"></a>  <span class="k">IMPLICIT NONE</span>    <span class="c">! Enforce explicit typing of all variables in this routine</span>
<a name="ln-4369"></a>
<a name="ln-4370"></a>          <span class="c">! SUBROUTINE ARGUMENT DEFINITIONS:</span>
<a name="ln-4371"></a>  <span class="kt">Integer</span><span class="p">,</span> <span class="k">Intent</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span> <span class="kd">::</span> <span class="n">ChillNum</span>
<a name="ln-4372"></a>
<a name="ln-4373"></a>          <span class="c">! SUBROUTINE PARAMETER DEFINITIONS:</span>
<a name="ln-4374"></a>          <span class="c">! na</span>
<a name="ln-4375"></a>
<a name="ln-4376"></a>          <span class="c">! INTERFACE BLOCK SPECIFICATIONS</span>
<a name="ln-4377"></a>          <span class="c">! na</span>
<a name="ln-4378"></a>
<a name="ln-4379"></a>          <span class="c">! DERIVED TYPE DEFINITIONS</span>
<a name="ln-4380"></a>          <span class="c">! na</span>
<a name="ln-4381"></a>
<a name="ln-4382"></a>          <span class="c">! SUBROUTINE LOCAL VARIABLE DECLARATIONS:</span>
<a name="ln-4383"></a><span class="c">!unused1208  INTEGER             :: PltSizIndex   ! Plant Sizing Do loop index</span>
<a name="ln-4384"></a>  <span class="kt">INTEGER</span>             <span class="kd">::</span> <span class="n">PltSizNum</span>     <span class="c">! Plant Sizing index corresponding to CurLoopNum</span>
<a name="ln-4385"></a>  <span class="kt">INTEGER</span>             <span class="kd">::</span> <span class="n">PltSizCondNum</span> <span class="c">! Plant Sizing index for condenser loop</span>
<a name="ln-4386"></a>  <span class="kt">LOGICAL</span>             <span class="kd">::</span> <span class="n">ErrorsFound</span>   <span class="c">! If errors detected in input</span>
<a name="ln-4387"></a>  <span class="kt">LOGICAL</span>             <span class="kd">::</span> <span class="n">LoopErrorsFound</span>
<a name="ln-4388"></a>  <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="n">MaxNameLength</span><span class="p">)</span> <span class="kd">::</span> <span class="n">equipName</span>
<a name="ln-4389"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>           <span class="kd">::</span>  <span class="n">rho</span> <span class="c">! local fluid density</span>
<a name="ln-4390"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>           <span class="kd">::</span>  <span class="n">Cp</span>  <span class="c">! local fluid specific heat</span>
<a name="ln-4391"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>           <span class="kd">::</span> <span class="n">tmpNomCap</span> <span class="c">! local nominal capacity cooling power</span>
<a name="ln-4392"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>           <span class="kd">::</span> <span class="n">tmpEvapVolFlowRate</span> <span class="c">! local evaporator design volume flow rate</span>
<a name="ln-4393"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>           <span class="kd">::</span> <span class="n">tmpCondVolFlowRate</span> <span class="c">! local condenser design volume flow rate</span>
<a name="ln-4394"></a>
<a name="ln-4395"></a>  <span class="n">PltSizNum</span> <span class="o">=</span> <span class="mi">0</span>
<a name="ln-4396"></a>  <span class="n">PltSizCondNum</span> <span class="o">=</span> <span class="mi">0</span>
<a name="ln-4397"></a>  <span class="n">ErrorsFound</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-4398"></a>  <span class="n">tmpNomCap</span>          <span class="o">=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span>
<a name="ln-4399"></a>  <span class="n">tmpEvapVolFlowRate</span> <span class="o">=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapVolFlowRate</span>
<a name="ln-4400"></a>  <span class="n">tmpCondVolFlowRate</span> <span class="o">=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span>
<a name="ln-4401"></a>
<a name="ln-4402"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4403"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span> <span class="o">==</span> <span class="n">AutoSize</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4404"></a><span class="k">      </span><span class="n">PltSizCondNum</span> <span class="o">=</span> <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">PlantSizNum</span>
<a name="ln-4405"></a>    <span class="k">END IF</span>
<a name="ln-4406"></a><span class="k">  END IF</span>
<a name="ln-4407"></a>
<a name="ln-4408"></a><span class="k">  </span><span class="n">PltSizNum</span> <span class="o">=</span> <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">PlantSizNum</span>
<a name="ln-4409"></a>
<a name="ln-4410"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span>  <span class="o">==</span> <span class="n">AutoSize</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4411"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">PltSizNum</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4412"></a><span class="k">      IF</span> <span class="p">(</span><span class="n">PlantSizData</span><span class="p">(</span><span class="n">PltSizNum</span><span class="p">)%</span><span class="n">DesVolFlowRate</span> <span class="o">&gt;=</span> <span class="n">SmallWaterVolFlow</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4413"></a><span class="k">        </span><span class="n">rho</span> <span class="o">=</span> <span class="n">GetDensityGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-4414"></a>                                  <span class="n">InitConvTemp</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4415"></a>                                  <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,&amp;</span>
<a name="ln-4416"></a>                                  <span class="s1">&#39;SizeConstCOPChiller&#39;</span><span class="p">)</span>
<a name="ln-4417"></a>        <span class="n">Cp</span> <span class="o">=</span> <span class="n">GetSpecificHeatGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-4418"></a>                                   <span class="n">InitConvTemp</span><span class="p">,</span>                      <span class="p">&amp;</span>
<a name="ln-4419"></a>                                   <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4420"></a>                                 <span class="s1">&#39;SizeConstCOPChiller&#39;</span><span class="p">)</span>
<a name="ln-4421"></a>        <span class="n">tmpNomCap</span> <span class="o">=</span> <span class="n">Cp</span> <span class="o">*</span> <span class="n">rho</span> <span class="o">*</span> <span class="n">PlantSizData</span><span class="p">(</span><span class="n">PltSizNum</span><span class="p">)%</span><span class="n">DeltaT</span> <span class="p">&amp;</span>
<a name="ln-4422"></a>                                              <span class="o">*</span> <span class="n">PlantSizData</span><span class="p">(</span><span class="n">PltSizNum</span><span class="p">)%</span><span class="n">DesVolFlowRate</span> <span class="o">*</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">SizFac</span>
<a name="ln-4423"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span> <span class="o">=</span> <span class="n">tmpNomCap</span>
<a name="ln-4424"></a>
<a name="ln-4425"></a>      <span class="k">ELSE</span>
<a name="ln-4426"></a><span class="k">        </span><span class="n">tmpNomCap</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-4427"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span> <span class="o">=</span> <span class="n">tmpNomCap</span>
<a name="ln-4428"></a>      <span class="k">END IF</span>
<a name="ln-4429"></a><span class="k">        IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="k">CALL </span><span class="n">ReportSizingOutput</span><span class="p">(</span><span class="s1">&#39;Chiller:ConstantCOP&#39;</span><span class="p">,</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4430"></a>                              <span class="s1">&#39;Nominal Capacity [W]&#39;</span><span class="p">,</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span><span class="p">)</span>
<a name="ln-4431"></a>    <span class="k">ELSE</span>
<a name="ln-4432"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Autosizing of Constant COP Chiller nominal capacity requires a loop Sizing:Plant object&#39;</span><span class="p">)</span>
<a name="ln-4433"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Occurs in Chiller:ConstantCOP object=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">))</span>
<a name="ln-4434"></a>      <span class="n">ErrorsFound</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-4435"></a>    <span class="k">END IF</span>
<a name="ln-4436"></a><span class="k">  END IF</span>
<a name="ln-4437"></a>
<a name="ln-4438"></a><span class="k">  IF</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapVolFlowRate</span> <span class="o">==</span> <span class="n">AutoSize</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4439"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">PltSizNum</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4440"></a><span class="k">      IF</span> <span class="p">(</span><span class="n">PlantSizData</span><span class="p">(</span><span class="n">PltSizNum</span><span class="p">)%</span><span class="n">DesVolFlowRate</span> <span class="o">&gt;=</span> <span class="n">SmallWaterVolFlow</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4441"></a><span class="k">        </span><span class="n">tmpEvapVolFlowRate</span> <span class="o">=</span> <span class="n">PlantSizData</span><span class="p">(</span><span class="n">PltSizNum</span><span class="p">)%</span><span class="n">DesVolFlowRate</span> <span class="o">*</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">SizFac</span>
<a name="ln-4442"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapVolFlowRate</span> <span class="o">=</span> <span class="n">tmpEvapVolFlowRate</span>
<a name="ln-4443"></a>      <span class="k">ELSE</span>
<a name="ln-4444"></a><span class="k">        </span><span class="n">tmpEvapVolFlowRate</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-4445"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span>  <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapVolFlowRate</span> <span class="o">=</span> <span class="n">tmpEvapVolFlowRate</span>
<a name="ln-4446"></a>      <span class="k">END IF</span>
<a name="ln-4447"></a><span class="k">      IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="k">CALL </span><span class="n">ReportSizingOutput</span><span class="p">(</span><span class="s1">&#39;Chiller:ConstantCOP&#39;</span><span class="p">,</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4448"></a>                              <span class="s1">&#39;Design Chilled Water Flow Rate [m3/s]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4449"></a>                              <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapVolFlowRate</span><span class="p">)</span>
<a name="ln-4450"></a>    <span class="k">ELSE</span>
<a name="ln-4451"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Autosizing of Constant COP Chiller evap flow rate requires a loop Sizing:Plant object&#39;</span><span class="p">)</span>
<a name="ln-4452"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Occurs in Chiller:ConstantCOP object=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">))</span>
<a name="ln-4453"></a>      <span class="n">ErrorsFound</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-4454"></a>    <span class="k">END IF</span>
<a name="ln-4455"></a><span class="k">  END IF</span>
<a name="ln-4456"></a>
<a name="ln-4457"></a><span class="k">  CALL </span><span class="n">RegisterPlantCompDesignFlow</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletNodeNum</span><span class="p">,</span><span class="n">tmpEvapVolFlowRate</span><span class="p">)</span>
<a name="ln-4458"></a>
<a name="ln-4459"></a>  <span class="k">IF</span> <span class="p">((</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-4460"></a>      <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span> <span class="o">==</span> <span class="n">AutoSize</span><span class="p">))</span> <span class="k">THEN</span>
<a name="ln-4461"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">PltSizCondNum</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4462"></a><span class="k">      IF</span> <span class="p">(</span><span class="n">PlantSizData</span><span class="p">(</span><span class="n">PltSizNum</span><span class="p">)%</span><span class="n">DesVolFlowRate</span> <span class="o">&gt;=</span> <span class="n">SmallWaterVolFlow</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4463"></a><span class="k">        </span><span class="n">rho</span> <span class="o">=</span> <span class="n">GetDensityGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-4464"></a>                               <span class="mi">2</span><span class="mf">9.44d0</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4465"></a>                               <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,&amp;</span>
<a name="ln-4466"></a>                               <span class="s1">&#39;SizeConstCOPChiller&#39;</span><span class="p">)</span>
<a name="ln-4467"></a>
<a name="ln-4468"></a>        <span class="n">Cp</span> <span class="o">=</span> <span class="n">GetSpecificHeatGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-4469"></a>                                   <span class="mi">2</span><span class="mf">9.44d0</span><span class="p">,</span>                      <span class="p">&amp;</span>
<a name="ln-4470"></a>                                   <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4471"></a>                                   <span class="s1">&#39;SizeConstCOPChiller&#39;</span><span class="p">)</span>
<a name="ln-4472"></a>        <span class="n">tmpCondVolFlowRate</span>  <span class="o">=</span> <span class="n">tmpNomCap</span> <span class="o">*</span>  <span class="p">(</span><span class="mf">1.d0</span> <span class="o">+</span> <span class="mf">1.d0</span><span class="o">/</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">COP</span><span class="p">)</span> <span class="p">&amp;</span>
<a name="ln-4473"></a>                                            <span class="o">/</span><span class="p">(</span> <span class="n">PlantSizData</span><span class="p">(</span><span class="n">PltSizCondNum</span><span class="p">)%</span><span class="n">DeltaT</span> <span class="o">*</span> <span class="n">Cp</span> <span class="o">*</span> <span class="n">rho</span> <span class="p">)</span>
<a name="ln-4474"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span> <span class="o">=</span> <span class="n">tmpCondVolFlowRate</span>
<a name="ln-4475"></a>
<a name="ln-4476"></a>      <span class="k">ELSE</span>
<a name="ln-4477"></a><span class="k">        </span><span class="n">tmpCondVolFlowRate</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-4478"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span> <span class="o">=</span> <span class="n">tmpCondVolFlowRate</span>
<a name="ln-4479"></a>      <span class="k">END IF</span>
<a name="ln-4480"></a><span class="k">        IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="k">CALL </span><span class="n">ReportSizingOutput</span><span class="p">(</span><span class="s1">&#39;Chiller:ConstantCOP&#39;</span><span class="p">,</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4481"></a>                              <span class="s1">&#39;Design Condenser Water Flow Rate [m3/s]&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4482"></a>                              <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondVolFlowRate</span><span class="p">)</span>
<a name="ln-4483"></a>    <span class="k">ELSE</span>
<a name="ln-4484"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;Autosizing of Constant COP Chiller condenser flow rate requires a condenser&#39;</span><span class="p">)</span>
<a name="ln-4485"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;loop Sizing:Plant object&#39;</span><span class="p">)</span>
<a name="ln-4486"></a>      <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Occurs in Chiller:ConstantCOP object=&#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">))</span>
<a name="ln-4487"></a>      <span class="n">ErrorsFound</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-4488"></a>    <span class="k">END IF</span>
<a name="ln-4489"></a><span class="k">  END IF</span>
<a name="ln-4490"></a>
<a name="ln-4491"></a>  <span class="c">! save the design condenser water volumetric flow rate for use by the condenser water loop sizing algorithms</span>
<a name="ln-4492"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="p">&amp;</span>
<a name="ln-4493"></a>      <span class="k">CALL </span><span class="n">RegisterPlantCompDesignFlow</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span><span class="p">,</span> <span class="n">tmpCondVolFlowRate</span><span class="p">)</span>
<a name="ln-4494"></a>
<a name="ln-4495"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">ErrorsFound</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4496"></a><span class="k">    CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;Preceding sizing errors cause program termination&#39;</span><span class="p">)</span>
<a name="ln-4497"></a>  <span class="k">END IF</span>
<a name="ln-4498"></a>
<a name="ln-4499"></a>  <span class="c">!create predefined report</span>
<a name="ln-4500"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">PlantSizesOkayToFinalize</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4501"></a><span class="k">    </span><span class="n">equipName</span> <span class="o">=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span>
<a name="ln-4502"></a>    <span class="k">CALL </span><span class="n">PreDefTableEntry</span><span class="p">(</span><span class="n">pdchMechType</span><span class="p">,</span><span class="n">equipName</span><span class="p">,</span><span class="s1">&#39;Chiller:ConstantCOP&#39;</span><span class="p">)</span>
<a name="ln-4503"></a>    <span class="k">CALL </span><span class="n">PreDefTableEntry</span><span class="p">(</span><span class="n">pdchMechNomEff</span><span class="p">,</span><span class="n">equipName</span><span class="p">,</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">COP</span><span class="p">)</span>
<a name="ln-4504"></a>    <span class="k">CALL </span><span class="n">PreDefTableEntry</span><span class="p">(</span><span class="n">pdchMechNomCap</span><span class="p">,</span><span class="n">equipName</span><span class="p">,</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span><span class="p">)</span>
<a name="ln-4505"></a>  <span class="n">ENDIF</span>
<a name="ln-4506"></a>
<a name="ln-4507"></a>  <span class="k">RETURN</span>
<a name="ln-4508"></a><span class="k">END SUBROUTINE </span><span class="n">SizeConstCOPChiller</span>
<a name="ln-4509"></a>
<a name="ln-4510"></a><span class="k">SUBROUTINE </span><span class="n">CalcElectricChillerModel</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">,</span><span class="n">MyLoad</span><span class="p">,</span><span class="n">EquipFlowCtrl</span><span class="p">,</span><span class="n">Runflag</span><span class="p">)</span>
<a name="ln-4511"></a>          <span class="c">! SUBROUTINE INFORMATION:</span>
<a name="ln-4512"></a>          <span class="c">!       AUTHOR         Dan Fisher / Brandon Anderson</span>
<a name="ln-4513"></a>          <span class="c">!       DATE WRITTEN   Sept. 2000</span>
<a name="ln-4514"></a>          <span class="c">!       MODIFIED       Chandan Sharma, FSEC, February 2010, Added basin heater</span>
<a name="ln-4515"></a>          <span class="c">!       RE-ENGINEERED  na</span>
<a name="ln-4516"></a>
<a name="ln-4517"></a>          <span class="c">! PURPOSE OF THIS SUBROUTINE:</span>
<a name="ln-4518"></a>          <span class="c">! simulate a vapor compression chiller using the Electric model</span>
<a name="ln-4519"></a>
<a name="ln-4520"></a>          <span class="c">! METHODOLOGY EMPLOYED:</span>
<a name="ln-4521"></a>          <span class="c">! curve fit of performance data:</span>
<a name="ln-4522"></a>
<a name="ln-4523"></a>          <span class="c">! REFERENCES:</span>
<a name="ln-4524"></a>          <span class="c">! 1. BLAST Users Manual</span>
<a name="ln-4525"></a>          <span class="c">! 2. CHILLER User Manual</span>
<a name="ln-4526"></a>
<a name="ln-4527"></a>          <span class="c">! USE STATEMENTS:</span>
<a name="ln-4528"></a>  <span class="k">USE </span><span class="n">DataPrecisionGlobals</span>
<a name="ln-4529"></a>  <span class="k">USE </span><span class="n">DataGlobals</span><span class="p">,</span>     <span class="n">ONLY</span> <span class="p">:</span> <span class="n">BeginEnvrnFlag</span><span class="p">,</span> <span class="n">SecInHour</span><span class="p">,</span> <span class="n">outputfiledebug</span><span class="p">,</span> <span class="n">CurrentTime</span>
<a name="ln-4530"></a>  <span class="k">USE </span><span class="n">DataHVACGlobals</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">FirstTimeStepSysFlag</span><span class="p">,</span> <span class="n">TimeStepSys</span><span class="p">,</span> <span class="n">SysTimeElapsed</span>
<a name="ln-4531"></a>  <span class="k">USE </span><span class="n">General</span><span class="p">,</span>         <span class="n">ONLY</span> <span class="p">:</span> <span class="n">RoundSigDigits</span><span class="p">,</span> <span class="n">CreateSysTimeIntervalString</span>
<a name="ln-4532"></a>  <span class="k">USE </span><span class="n">DataPlant</span><span class="p">,</span>       <span class="n">ONLY</span> <span class="p">:</span> <span class="n">PlantLoop</span><span class="p">,</span> <span class="n">TypeOf_Chiller_Electric</span><span class="p">,</span> <span class="n">CompSetPtBasedSchemeType</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4533"></a>                              <span class="n">CriteriaType_MassFlowRate</span><span class="p">,</span> <span class="n">SingleSetpoint</span><span class="p">,</span> <span class="n">DualSetpointDeadband</span>
<a name="ln-4534"></a>  <span class="k">USE </span><span class="n">DataBranchAirLoopPlant</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">ControlType_SeriesActive</span><span class="p">,</span> <span class="n">MassFlowTolerance</span>
<a name="ln-4535"></a>  <span class="k">USE </span><span class="n">DataEnvironment</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">EnvironmentName</span><span class="p">,</span> <span class="n">CurMnDy</span>
<a name="ln-4536"></a>  <span class="k">USE </span><span class="n">FluidProperties</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">GetSpecificHeatGlycol</span>
<a name="ln-4537"></a>  <span class="k">USE </span><span class="n">PlantUtilities</span><span class="p">,</span>  <span class="n">ONLY</span> <span class="p">:</span> <span class="n">SetComponentFlowRate</span><span class="p">,</span> <span class="n">PullCompInterconnectTrigger</span>
<a name="ln-4538"></a>  <span class="k">USE </span><span class="n">Psychrometrics</span><span class="p">,</span>  <span class="n">ONLY</span> <span class="p">:</span> <span class="n">PsyCpAirFnWTdb</span><span class="p">,</span> <span class="n">PsyWFnTdbTwbPb</span>
<a name="ln-4539"></a>
<a name="ln-4540"></a>  <span class="k">IMPLICIT NONE</span>
<a name="ln-4541"></a>
<a name="ln-4542"></a>
<a name="ln-4543"></a>          <span class="c">! SUBROUTINE ARGUMENT DEFINITIONS:</span>
<a name="ln-4544"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">ChillNum</span>        <span class="c">! chiller number</span>
<a name="ln-4545"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">MyLoad</span>          <span class="c">! operating load</span>
<a name="ln-4546"></a>  <span class="kt">LOGICAL</span><span class="p">,</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">RunFlag</span>         <span class="c">! TRUE when chiller operating</span>
<a name="ln-4547"></a>  <span class="c">!INTEGER, INTENT(IN)    :: FlowLock        ! TRUE when flow resolver has calculated branch flow</span>
<a name="ln-4548"></a>  <span class="kt">INTEGER</span><span class="p">,</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">EquipFlowCtrl</span>  <span class="c">! Flow control mode for the equipment</span>
<a name="ln-4549"></a>
<a name="ln-4550"></a>          <span class="c">! SUBROUTINE PARAMETER DEFINITIONS:</span>
<a name="ln-4551"></a>
<a name="ln-4552"></a>  <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span> <span class="k">PARAMETER</span> <span class="kd">::</span> <span class="n">OutputFormat</span>  <span class="o">=</span><span class="s1">&#39;(F6.2)&#39;</span>
<a name="ln-4553"></a>
<a name="ln-4554"></a>          <span class="c">! INTERFACE BLOCK SPECIFICATIONS</span>
<a name="ln-4555"></a>          <span class="c">! na</span>
<a name="ln-4556"></a>
<a name="ln-4557"></a>          <span class="c">! DERIVED TYPE DEFINITIONS</span>
<a name="ln-4558"></a>          <span class="c">! na</span>
<a name="ln-4559"></a>
<a name="ln-4560"></a>          <span class="c">! SUBROUTINE LOCAL VARIABLE DECLARATIONS:</span>
<a name="ln-4561"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span> <span class="k">DIMENSION</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>     <span class="kd">::</span> <span class="n">CapacityRat</span>           <span class="c">! intermediate result:  capacity ratio</span>
<a name="ln-4562"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span> <span class="k">DIMENSION</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>     <span class="kd">::</span> <span class="n">PowerRat</span>              <span class="c">! intermediate result:  power ratio</span>
<a name="ln-4563"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span> <span class="k">DIMENSION</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>     <span class="kd">::</span> <span class="n">FullLoadFactor</span>        <span class="c">! intermediate result:  full load factor</span>
<a name="ln-4564"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">MinPartLoadRat</span>        <span class="c">! min allowed operating frac full load</span>
<a name="ln-4565"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">MaxPartLoadRat</span>        <span class="c">! max allowed operating frac full load</span>
<a name="ln-4566"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">TempCondInDesign</span>      <span class="c">! C - (Electric ADJTC(1)The design secondary loop fluid</span>
<a name="ln-4567"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">TempRiseRat</span>           <span class="c">! intermediate result:  temperature rise ratio</span>
<a name="ln-4568"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">EvapInletTemp</span>         <span class="c">! C - evaporator inlet temperature, water side</span>
<a name="ln-4569"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">CondInletTemp</span>         <span class="c">! C - condenser inlet temperature, water side</span>
<a name="ln-4570"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">TempEvapOut</span>           <span class="c">! C - evaporator outlet temperature, water side</span>
<a name="ln-4571"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">TempEvapOutSetpoint</span>   <span class="c">! C - evaporator outlet temperature setpoint</span>
<a name="ln-4572"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">TempEvapOutDesign</span>     <span class="c">! design evaporator outlet temperature, water side</span>
<a name="ln-4573"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">ChillerNomCap</span>         <span class="c">! chiller nominal capacity</span>
<a name="ln-4574"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">AvailChillerCap</span>       <span class="c">! chiller available capacity</span>
<a name="ln-4575"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">RatedCOP</span>              <span class="c">! rated coefficient of performance, from user input</span>
<a name="ln-4576"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">FracFullLoadPower</span>     <span class="c">! fraction of full load power</span>
<a name="ln-4577"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">EvapDeltaTemp</span>         <span class="c">! C - evaporator temperature difference, water side</span>
<a name="ln-4578"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">DeltaTemp</span>             <span class="c">! C - intermediate result: condenser/evaporator temp diff</span>
<a name="ln-4579"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">AvailNomCapRat</span>        <span class="c">! intermediate result: available nominal capacity ratio</span>
<a name="ln-4580"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">FullLoadPowerRat</span>      <span class="c">! intermediate result: full load power ratio</span>
<a name="ln-4581"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">PartLoadRat</span>           <span class="c">! part load ratio for efficiency calculation</span>
<a name="ln-4582"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">OperPartLoadRat</span>       <span class="c">! Actual Operating PLR</span>
<a name="ln-4583"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">TempLowLimitEout</span>      <span class="c">! C - Evaporator low temp. limit cut off</span>
<a name="ln-4584"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">EvapMassFlowRateMax</span> <span class="c">! Max Design Evaporator Mass Flow Rate converted from Volume Flow Rate</span>
<a name="ln-4585"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">EvapInletNode</span>         <span class="c">! evaporator inlet node number, water side</span>
<a name="ln-4586"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">EvapOutletNode</span>        <span class="c">! evaporator outlet node number, water side</span>
<a name="ln-4587"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">CondInletNode</span>         <span class="c">! condenser inlet node number, water side</span>
<a name="ln-4588"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">CondOutletNode</span>        <span class="c">! condenser outlet node number, water side</span>
<a name="ln-4589"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">FRAC</span>
<a name="ln-4590"></a><span class="c">!  LOGICAL,SAVE           :: PossibleSubCooling=.false.</span>
<a name="ln-4591"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">PlantLoopNum</span>
<a name="ln-4592"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">LoopNum</span>
<a name="ln-4593"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">LoopSideNum</span>
<a name="ln-4594"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">BranchNum</span>
<a name="ln-4595"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">CompNum</span>
<a name="ln-4596"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">SAVE</span>  <span class="kd">::</span> <span class="n">TimeStepSysLast</span><span class="o">=</span><span class="mf">0.0d0</span>     <span class="c">! last system time step (used to check for downshifting)</span>
<a name="ln-4597"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>       <span class="kd">::</span> <span class="n">CurrentEndTime</span>          <span class="c">! end time of time step for current simulation time step</span>
<a name="ln-4598"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">SAVE</span>  <span class="kd">::</span> <span class="n">CurrentEndTimeLast</span><span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">! end time of time step for last simulation time step</span>
<a name="ln-4599"></a>  <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span><span class="kd">::</span> <span class="n">OutputChar</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span>        <span class="c">! character string for warning messages</span>
<a name="ln-4600"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>       <span class="kd">::</span> <span class="n">Cp</span> <span class="c">! local for fluid specif heat, for evaporator</span>
<a name="ln-4601"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>       <span class="kd">::</span> <span class="n">CpCond</span> <span class="c">! local for fluid specif heat, for condenser</span>
<a name="ln-4602"></a>
<a name="ln-4603"></a>          <span class="c">!set module level inlet and outlet nodes</span>
<a name="ln-4604"></a>  <span class="n">EvapMassFlowRate</span>           <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-4605"></a>  <span class="n">CondMassFlowRate</span>           <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-4606"></a>  <span class="n">Power</span>                      <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-4607"></a>  <span class="n">Energy</span>                     <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-4608"></a>  <span class="n">QCondenser</span>                 <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-4609"></a>  <span class="n">QEvaporator</span>                <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-4610"></a>  <span class="n">CondenserEnergy</span>            <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-4611"></a>  <span class="n">EvaporatorEnergy</span>           <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-4612"></a>  <span class="n">QHeatRecovered</span>             <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-4613"></a>  <span class="n">EvapInletNode</span>  <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletNodeNum</span>
<a name="ln-4614"></a>  <span class="n">EvapOutletNode</span> <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span>
<a name="ln-4615"></a>  <span class="n">CondInletNode</span>  <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span>
<a name="ln-4616"></a>  <span class="n">CondOutletNode</span> <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletNodeNum</span>
<a name="ln-4617"></a>  <span class="n">FRAC</span>               <span class="o">=</span> <span class="mf">1.0d0</span>
<a name="ln-4618"></a>  <span class="n">LoopNum</span>            <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span>
<a name="ln-4619"></a>  <span class="n">LoopSideNum</span>        <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span>
<a name="ln-4620"></a>  <span class="n">BranchNum</span>          <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span>
<a name="ln-4621"></a>  <span class="n">CompNum</span>            <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span>
<a name="ln-4622"></a>  <span class="n">EvapInletTemp</span>      <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-4623"></a>
<a name="ln-4624"></a><span class="c">!   calculate end time of current time step</span>
<a name="ln-4625"></a>  <span class="n">CurrentEndTime</span> <span class="o">=</span> <span class="n">CurrentTime</span> <span class="o">+</span> <span class="n">SysTimeElapsed</span>
<a name="ln-4626"></a>
<a name="ln-4627"></a><span class="c">!   Print warning messages only when valid and only for the first ocurrance. Let summary provide statistics.</span>
<a name="ln-4628"></a><span class="c">!   Wait for next time step to print warnings. If simulation iterates, print out</span>
<a name="ln-4629"></a><span class="c">!   the warning for the last iteration only. Must wait for next time step to accomplish this.</span>
<a name="ln-4630"></a><span class="c">!   If a warning occurs and the simulation down shifts, the warning is not valid.</span>
<a name="ln-4631"></a>  <span class="k">IF</span><span class="p">(</span><span class="n">CurrentEndTime</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="n">CurrentEndTimeLast</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="n">TimeStepSys</span> <span class="p">.</span><span class="n">GE</span><span class="p">.</span> <span class="n">TimeStepSysLast</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-4632"></a><span class="k">    IF</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-4633"></a><span class="k">        </span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgErrorCount</span> <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-4634"></a>                         <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgErrorCount</span> <span class="o">+</span> <span class="mi">1</span>
<a name="ln-4635"></a><span class="c">!       Show single warning and pass additional info to ShowRecurringWarningErrorAtEnd</span>
<a name="ln-4636"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgErrorCount</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4637"></a><span class="k">         CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgBuffer1</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
<a name="ln-4638"></a>         <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgBuffer2</span><span class="p">))</span>
<a name="ln-4639"></a>      <span class="k">ELSE</span>
<a name="ln-4640"></a><span class="k">        CALL </span><span class="n">ShowRecurringWarningErrorAtEnd</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgBuffer1</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39; error continues.&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4641"></a>           <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">ErrCount1</span><span class="p">,</span><span class="n">ReportMaxOf</span><span class="o">=</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgDataLast</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-4642"></a>           <span class="n">ReportMinOf</span><span class="o">=</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgDataLast</span><span class="p">,</span><span class="n">ReportMaxUnits</span><span class="o">=</span><span class="s1">&#39;[C]&#39;</span><span class="p">,</span><span class="n">ReportMinUnits</span><span class="o">=</span><span class="s1">&#39;[C]&#39;</span><span class="p">)</span>
<a name="ln-4643"></a>      <span class="k">END IF</span>
<a name="ln-4644"></a><span class="k">    END IF</span>
<a name="ln-4645"></a><span class="k">  END IF</span>
<a name="ln-4646"></a>
<a name="ln-4647"></a><span class="c">!   save last system time step and last end time of current time step (used to determine if warning is valid)</span>
<a name="ln-4648"></a>  <span class="n">TimeStepSysLast</span>    <span class="o">=</span> <span class="n">TimeStepSys</span>
<a name="ln-4649"></a>  <span class="n">CurrentEndTimeLast</span> <span class="o">=</span> <span class="n">CurrentEndTime</span>
<a name="ln-4650"></a>
<a name="ln-4651"></a>          <span class="c">!If no loop demand or chiller OFF, return</span>
<a name="ln-4652"></a>   <span class="c">!If Chiller load is 0 or chiller is not running then leave the subroutine.</span>
<a name="ln-4653"></a>  <span class="k">IF</span><span class="p">(</span><span class="n">MyLoad</span> <span class="o">&gt;=</span> <span class="mf">0.d0</span> <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">RunFlag</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4654"></a>     <span class="c">! call for zero flow before leaving</span>
<a name="ln-4655"></a>    <span class="k">IF</span><span class="p">(</span><span class="n">EquipFlowCtrl</span> <span class="o">==</span> <span class="n">ControlType_SeriesActive</span> <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="n">PlantLoop</span><span class="p">(</span><span class="n">LoopNum</span><span class="p">)%</span><span class="n">LoopSide</span><span class="p">(</span><span class="n">LoopSideNum</span><span class="p">)%</span><span class="n">FlowLock</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4656"></a><span class="k">      </span><span class="n">EvapMassFlowRate</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">MassFlowrate</span>
<a name="ln-4657"></a>    <span class="k">ELSE</span>
<a name="ln-4658"></a><span class="k">      </span><span class="n">EvapMassFlowRate</span>           <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-4659"></a>      <span class="k">CALL </span><span class="n">SetComponentFlowRate</span><span class="p">(</span> <span class="n">EvapMassFlowRate</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-4660"></a>                              <span class="n">EvapInletNode</span> <span class="p">,</span> <span class="n">EvapOutletNode</span>  <span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4661"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-4662"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4663"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-4664"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)</span>
<a name="ln-4665"></a>    <span class="n">ENDIF</span>
<a name="ln-4666"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4667"></a><span class="k">      IF</span> <span class="p">(</span> <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span> <span class="p">&amp;</span>
<a name="ln-4668"></a>            <span class="n">LoopSide</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">)%</span> <span class="p">&amp;</span>
<a name="ln-4669"></a>              <span class="n">Branch</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDBranchNum</span><span class="p">)%</span>  <span class="p">&amp;</span>
<a name="ln-4670"></a>                <span class="n">Comp</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDCompNum</span><span class="p">)%</span><span class="n">FlowCtrl</span> <span class="o">==</span> <span class="n">ControlType_SeriesActive</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4671"></a><span class="k">        </span><span class="n">CondMassFlowRate</span>           <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowrate</span>
<a name="ln-4672"></a>      <span class="k">ELSE</span>
<a name="ln-4673"></a><span class="k">        </span><span class="n">CondMassFlowRate</span>           <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-4674"></a>        <span class="k">CALL </span><span class="n">SetComponentFlowRate</span><span class="p">(</span><span class="n">CondMassFlowRate</span><span class="p">,</span> <span class="n">CondInletNode</span><span class="p">,</span> <span class="n">CondOutletNode</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4675"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4676"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4677"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDBranchNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4678"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDCompNum</span><span class="p">)</span>
<a name="ln-4679"></a>      <span class="n">ENDIF</span>
<a name="ln-4680"></a>    <span class="n">ENDIF</span>
<a name="ln-4681"></a>
<a name="ln-4682"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4683"></a><span class="k">      CALL </span><span class="n">CalcBasinHeaterPower</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPowerFTempDiff</span><span class="p">,&amp;</span>
<a name="ln-4684"></a>                                <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSchedulePtr</span><span class="p">,&amp;</span>
<a name="ln-4685"></a>                                <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSetPointTemp</span><span class="p">,</span><span class="n">BasinHeaterPower</span><span class="p">)</span>
<a name="ln-4686"></a>    <span class="n">ENDIF</span>
<a name="ln-4687"></a>    <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-4688"></a>    <span class="k">RETURN</span>
<a name="ln-4689"></a><span class="k">  END IF</span>
<a name="ln-4690"></a>
<a name="ln-4691"></a>
<a name="ln-4692"></a>
<a name="ln-4693"></a>   <span class="c">! If not air or evap cooled then set to the condenser node that is attached to a cooling tower</span>
<a name="ln-4694"></a>  <span class="n">CondInletTemp</span>  <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-4695"></a>
<a name="ln-4696"></a>        <span class="c">!Set mass flow rates</span>
<a name="ln-4697"></a><span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4698"></a><span class="k">  </span><span class="n">CondMassFlowRate</span> <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondMassFlowRateMax</span>
<a name="ln-4699"></a>  <span class="k">CALL </span><span class="n">SetComponentFlowRate</span><span class="p">(</span><span class="n">CondMassFlowRate</span><span class="p">,</span> <span class="n">CondInletNode</span><span class="p">,</span> <span class="n">CondOutletNode</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4700"></a>                            <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4701"></a>                            <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4702"></a>                            <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDBranchNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4703"></a>                            <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDCompNum</span><span class="p">)</span>
<a name="ln-4704"></a>  <span class="k">CALL </span><span class="n">PullCompInterconnectTrigger</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4705"></a>                                   <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4706"></a>                                   <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4707"></a>                                   <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4708"></a>                                   <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondMassFlowIndex</span><span class="p">,</span>              <span class="p">&amp;</span>
<a name="ln-4709"></a>                                   <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4710"></a>                                   <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-4711"></a>                                   <span class="n">CriteriaType_MassFlowRate</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4712"></a>                                   <span class="n">CondMassFlowRate</span><span class="p">)</span>
<a name="ln-4713"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">CondMassFlowRate</span> <span class="o">&lt;</span> <span class="n">MassFlowTolerance</span><span class="p">)</span> <span class="k">RETURN</span>
<a name="ln-4714"></a><span class="k">END IF</span>
<a name="ln-4715"></a>
<a name="ln-4716"></a>      <span class="c">!  LOAD LOCAL VARIABLES FROM DATA STRUCTURE (for code readability)</span>
<a name="ln-4717"></a>  <span class="n">CapacityRat</span>        <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">CapRatCoef</span>
<a name="ln-4718"></a>  <span class="n">PowerRat</span>           <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">PowerRatCoef</span>
<a name="ln-4719"></a>  <span class="n">FullLoadFactor</span>     <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">FullLoadCoef</span>
<a name="ln-4720"></a>  <span class="n">MinPartLoadRat</span>     <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">MinPartLoadRat</span>
<a name="ln-4721"></a>  <span class="n">PartLoadRat</span>        <span class="o">=</span> <span class="n">MinPartLoadRat</span>
<a name="ln-4722"></a>  <span class="n">MaxPartLoadRat</span>     <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">MaxPartLoadRat</span>
<a name="ln-4723"></a>  <span class="n">TempCondInDesign</span>   <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">TempDesCondIn</span>
<a name="ln-4724"></a>  <span class="n">TempRiseRat</span>        <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">TempRiseCoef</span>
<a name="ln-4725"></a>  <span class="n">TempEvapOutDesign</span>  <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">TempDesEvapOut</span>
<a name="ln-4726"></a>  <span class="n">ChillerNomCap</span>      <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span>
<a name="ln-4727"></a>  <span class="n">RatedCOP</span>           <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">COP</span>
<a name="ln-4728"></a>  <span class="n">TempEvapOut</span>        <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-4729"></a>  <span class="n">TempLowLimitEout</span>   <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">TempLowLimitEvapOut</span>
<a name="ln-4730"></a>  <span class="n">EvapMassFlowRateMax</span>    <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapMassFlowRateMax</span>
<a name="ln-4731"></a>  <span class="n">PlantLoopNum</span>       <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span>
<a name="ln-4732"></a>
<a name="ln-4733"></a>  <span class="n">LoopNum</span>            <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span>
<a name="ln-4734"></a>  <span class="n">LoopSideNum</span>        <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span>
<a name="ln-4735"></a>
<a name="ln-4736"></a><span class="c">! initialize outlet air humidity ratio of air or evap cooled chillers</span>
<a name="ln-4737"></a>  <span class="n">CondOutletHumRat</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">HumRat</span>
<a name="ln-4738"></a>
<a name="ln-4739"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">AirCooled</span><span class="p">)</span> <span class="k">THEN</span> <span class="c">!Condenser inlet temp = outdoor temp</span>
<a name="ln-4740"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">OutAirDryBulb</span>
<a name="ln-4741"></a>      <span class="c">!  Warn user if entering condenser temperature falls below 0C</span>
<a name="ln-4742"></a>      <span class="k">IF</span><span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="mf">0.0d0</span> <span class="p">.</span><span class="nb">and</span><span class="p">.</span> <span class="p">.</span><span class="nb">not</span><span class="p">.</span> <span class="n">WarmupFlag</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4743"></a><span class="k">        </span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-4744"></a>        <span class="k">WRITE</span><span class="p">(</span><span class="n">OutputChar</span><span class="p">,</span><span class="n">OutputFormat</span><span class="p">)</span><span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-4745"></a>        <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgBuffer1</span> <span class="o">=</span> <span class="s1">&#39;CalcElectricChillerModel - Chiller:Electric &quot;&#39;</span> <span class="p">&amp;</span>
<a name="ln-4746"></a>                             <span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span><span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-4747"></a>                             <span class="s1">&#39;&quot; - Air Cooled Condenser Inlet Temperature below 0C&#39;</span>
<a name="ln-4748"></a>        <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgBuffer2</span> <span class="o">=</span> <span class="s1">&#39;... Outdoor Dry-bulb Condition = &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">OutputChar</span><span class="p">)</span><span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-4749"></a>                   <span class="s1">&#39; C. Occurrence info = &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">EnvironmentName</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;, &#39;</span><span class="o">//</span><span class="nb">Trim</span><span class="p">(</span><span class="n">CurMnDy</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39; &#39;</span><span class="p">&amp;</span>
<a name="ln-4750"></a>                   <span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">CreateSysTimeIntervalString</span><span class="p">())</span>
<a name="ln-4751"></a>        <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgDataLast</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-4752"></a>      <span class="k">ELSE</span>
<a name="ln-4753"></a><span class="k">        </span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-4754"></a>      <span class="n">ENDIF</span>
<a name="ln-4755"></a>  <span class="k">Else IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span> <span class="c">!Condenser inlet temp = (outdoor wet bulb)</span>
<a name="ln-4756"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">OutAirWetBulb</span>
<a name="ln-4757"></a><span class="c">!  line above assumes evaporation pushes condenser inlet air humidity ratio to saturation</span>
<a name="ln-4758"></a>    <span class="n">CondOutletHumRat</span> <span class="o">=</span> <span class="n">PsyWFnTdbTwbPb</span><span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span><span class="p">,</span><span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span><span class="p">,</span><span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Press</span><span class="p">)</span>
<a name="ln-4759"></a><span class="c">!  Warn user if evap condenser wet bulb temperature falls below 10C</span>
<a name="ln-4760"></a>    <span class="k">IF</span><span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="mi">1</span><span class="mf">0.0d0</span> <span class="p">.</span><span class="nb">and</span><span class="p">.</span> <span class="p">.</span><span class="nb">not</span><span class="p">.</span> <span class="n">WarmupFlag</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4761"></a><span class="k">      </span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-4762"></a>      <span class="k">WRITE</span><span class="p">(</span><span class="n">OutputChar</span><span class="p">,</span><span class="n">OutputFormat</span><span class="p">)</span><span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-4763"></a>      <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgBuffer1</span> <span class="o">=</span> <span class="s1">&#39;CalcElectricChillerModel - Chiller:Electric &quot;&#39;</span> <span class="p">&amp;</span>
<a name="ln-4764"></a>                           <span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span><span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-4765"></a>                           <span class="s1">&#39;&quot; - Evap Cooled Condenser Inlet Temperature below 10C&#39;</span>
<a name="ln-4766"></a>      <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgBuffer2</span> <span class="o">=</span> <span class="s1">&#39;... Outdoor Wet-bulb Condition = &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">OutputChar</span><span class="p">)</span><span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-4767"></a>                 <span class="s1">&#39; C. Occurrence info = &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">EnvironmentName</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;, &#39;</span><span class="o">//</span><span class="nb">Trim</span><span class="p">(</span><span class="n">CurMnDy</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39; &#39;</span><span class="p">&amp;</span>
<a name="ln-4768"></a>                 <span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">CreateSysTimeIntervalString</span><span class="p">())</span>
<a name="ln-4769"></a>      <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgDataLast</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-4770"></a>    <span class="k">ELSE</span>
<a name="ln-4771"></a><span class="k">      </span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-4772"></a>    <span class="n">ENDIF</span>
<a name="ln-4773"></a>  <span class="n">ENDIF</span> <span class="c">! End of the Air Cooled/Evap Cooled Logic block</span>
<a name="ln-4774"></a>
<a name="ln-4775"></a>  <span class="n">CondInletTemp</span>  <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-4776"></a>
<a name="ln-4777"></a>  <span class="c">! correct inlet temperature if using heat recovery</span>
<a name="ln-4778"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4779"></a><span class="k">    IF</span> <span class="p">((</span><span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">QHeatRecovery</span> <span class="o">+</span> <span class="p">&amp;</span>
<a name="ln-4780"></a>         <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QCond</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">0.d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4781"></a><span class="k">      </span><span class="n">AvgCondSinkTemp</span> <span class="o">=</span> <span class="p">(</span><span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">QHeatRecovery</span> <span class="p">&amp;</span>
<a name="ln-4782"></a>                           <span class="o">*</span> <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecInletTemp</span> <span class="p">&amp;</span>
<a name="ln-4783"></a>                         <span class="o">+</span> <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QCond</span> <span class="p">&amp;</span>
<a name="ln-4784"></a>                           <span class="o">*</span> <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletTemp</span><span class="p">)</span> <span class="p">&amp;</span>
<a name="ln-4785"></a>                        <span class="o">/</span> <span class="p">(</span> <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">QHeatRecovery</span> <span class="p">&amp;</span>
<a name="ln-4786"></a>                            <span class="o">+</span> <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QCond</span><span class="p">)</span>
<a name="ln-4787"></a>    <span class="k">ELSE</span>
<a name="ln-4788"></a><span class="k">      </span><span class="n">AvgCondSinkTemp</span> <span class="o">=</span> <span class="n">CondInletTemp</span>
<a name="ln-4789"></a>    <span class="n">ENDIF</span>
<a name="ln-4790"></a>  <span class="k">ELSE</span>
<a name="ln-4791"></a><span class="k">    </span><span class="n">AvgCondSinkTemp</span> <span class="o">=</span> <span class="n">CondInletTemp</span>
<a name="ln-4792"></a>  <span class="n">ENDIF</span>
<a name="ln-4793"></a>
<a name="ln-4794"></a>  <span class="c">!Calculate chiller performance from this set of performance equations.</span>
<a name="ln-4795"></a>  <span class="c">!  from BLAST...Z=(TECONDW-ADJTC(1))/ADJTC(2)-(TLCHLRW-ADJTC(3))</span>
<a name="ln-4796"></a>
<a name="ln-4797"></a>  <span class="n">DeltaTemp</span><span class="o">=</span> <span class="p">(</span><span class="n">AvgCondSinkTemp</span>   <span class="o">-</span>  <span class="n">TempCondInDesign</span><span class="p">)</span> <span class="o">/</span> <span class="n">TempRiseRat</span> <span class="p">&amp;</span>
<a name="ln-4798"></a>         <span class="o">-</span> <span class="p">(</span><span class="n">TempEvapOut</span> <span class="o">-</span>  <span class="n">TempEvapOutDesign</span><span class="p">)</span>
<a name="ln-4799"></a>
<a name="ln-4800"></a>  <span class="c">! model should have bounds on DeltaTemp and check them (also needs engineering ref content)</span>
<a name="ln-4801"></a>  <span class="c">!  from BLAST...RCAV=RCAVC(1)+RCAVC(2)*Z+RCAVC(3)*Z**2</span>
<a name="ln-4802"></a>  <span class="n">AvailNomCapRat</span> <span class="o">=</span>   <span class="n">CapacityRat</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>                   <span class="p">&amp;</span>
<a name="ln-4803"></a>                   <span class="o">+</span> <span class="n">CapacityRat</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">DeltaTemp</span>       <span class="p">&amp;</span>
<a name="ln-4804"></a>                   <span class="o">+</span> <span class="n">CapacityRat</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="n">DeltaTemp</span> <span class="o">**</span> <span class="mf">2.d0</span>
<a name="ln-4805"></a>
<a name="ln-4806"></a>  <span class="n">AvailChillerCap</span> <span class="o">=</span> <span class="n">ChillerNomCap</span><span class="o">*</span><span class="n">AvailNomCapRat</span>
<a name="ln-4807"></a>
<a name="ln-4808"></a>  <span class="c">! from BLAST...G=ADJEC(1)+ADJEC(2)*RCAV+ADJEC(3)*RCAV**2.</span>
<a name="ln-4809"></a>  <span class="n">FullLoadPowerRat</span><span class="o">=</span>   <span class="n">PowerRat</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>                         <span class="p">&amp;</span>
<a name="ln-4810"></a>                    <span class="o">+</span> <span class="n">PowerRat</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">AvailNomCapRat</span>      <span class="p">&amp;</span>
<a name="ln-4811"></a>                    <span class="o">+</span> <span class="n">PowerRat</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="n">AvailNomCapRat</span> <span class="o">**</span> <span class="mf">2.d0</span>
<a name="ln-4812"></a>
<a name="ln-4813"></a>  <span class="c">!  from BLAST...RCLOAD=AMAX1(MINCHFR(I,IPLCTR),AMIN1(CHLRLOAD(I)/CHLROCAP(I) &amp;</span>
<a name="ln-4814"></a>  <span class="c">!         /RCAV,MAXCHFR(I,IPLCTR)))</span>
<a name="ln-4815"></a>
<a name="ln-4816"></a>  <span class="c">!Calculate the PLR. When there is Min PLR and the load is less than Min PLR then the Frac Full load Power</span>
<a name="ln-4817"></a>  <span class="c">!is calculated at Min PLR, while all other calculations are based on the actual PLR. So in that case once</span>
<a name="ln-4818"></a>  <span class="c">!FracFullLoadPower is calculated the PLR should be recalculated</span>
<a name="ln-4819"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">AvailChillerCap</span> <span class="o">&gt;</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4820"></a><span class="k">    </span><span class="n">PartLoadRat</span> <span class="o">=</span> <span class="nb">MAX</span><span class="p">(</span><span class="n">MinPartLoadRat</span><span class="p">,</span> <span class="nb">MIN</span><span class="p">(</span><span class="nb">ABS</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">)</span><span class="o">/</span><span class="n">AvailChillerCap</span><span class="p">,</span><span class="n">MaxPartLoadRat</span><span class="p">))</span>
<a name="ln-4821"></a>  <span class="n">ENDIF</span>
<a name="ln-4822"></a>
<a name="ln-4823"></a> <span class="c">! from BLAST...RPOWER=RPWRC(1)+RPWRC(2)*RCLOAD+RPWRC(3)*RCLOAD**2</span>
<a name="ln-4824"></a>  <span class="n">FracFullLoadPower</span> <span class="o">=</span> <span class="n">FullLoadFactor</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>                      <span class="p">&amp;</span>
<a name="ln-4825"></a>                    <span class="o">+</span> <span class="n">FullLoadFactor</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">PartLoadRat</span>      <span class="p">&amp;</span>
<a name="ln-4826"></a>                    <span class="o">+</span> <span class="n">FullLoadFactor</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="n">PartLoadRat</span> <span class="o">**</span> <span class="mi">2</span>
<a name="ln-4827"></a>
<a name="ln-4828"></a>  <span class="c">!If the PLR is less than Min PLR calculate the actual PLR for calculations. The power will then adjust for</span>
<a name="ln-4829"></a>  <span class="c">!the cycling.</span>
<a name="ln-4830"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">AvailChillerCap</span> <span class="o">&gt;</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4831"></a><span class="k">    IF</span><span class="p">(</span><span class="nb">ABS</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">)</span><span class="o">/</span><span class="n">AvailChillerCap</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="n">MinPartLoadRat</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4832"></a><span class="k">     </span><span class="n">OperPartLoadRat</span> <span class="o">=</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">)</span><span class="o">/</span><span class="n">AvailChillerCap</span>
<a name="ln-4833"></a>    <span class="k">ELSE</span>
<a name="ln-4834"></a><span class="k">     </span><span class="n">OperPartLoadRat</span> <span class="o">=</span> <span class="n">PartLoadRat</span>
<a name="ln-4835"></a>    <span class="k">END IF</span>
<a name="ln-4836"></a><span class="k">  ELSE</span>
<a name="ln-4837"></a><span class="k">    </span><span class="n">OperPartLoadRat</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-4838"></a>  <span class="n">ENDIF</span>
<a name="ln-4839"></a>
<a name="ln-4840"></a>  <span class="n">Cp</span> <span class="o">=</span> <span class="n">GetSpecificHeatGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-4841"></a>                         <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span><span class="p">,</span>                      <span class="p">&amp;</span>
<a name="ln-4842"></a>                         <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4843"></a>                         <span class="s1">&#39;CalcElectricChillerModel&#39;</span><span class="p">)</span>
<a name="ln-4844"></a>
<a name="ln-4845"></a>        <span class="c">! If FlowLock is True, the new resolved mdot is used to update Power, QEvap, Qcond, and</span>
<a name="ln-4846"></a>        <span class="c">! condenser side outlet temperature.</span>
<a name="ln-4847"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">LoopNum</span><span class="p">)%</span><span class="n">LoopSide</span><span class="p">(</span><span class="n">LoopSideNum</span><span class="p">)%</span><span class="n">FlowLock</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4848"></a>
<a name="ln-4849"></a>       <span class="c">!ElectricChiller(ChillNum)%PossibleSubCooling = .FALSE.</span>
<a name="ln-4850"></a>       <span class="c">!PossibleSubCooling = .NOT. PlantLoop(PlantLoopNum)%TempSetPtCtrl</span>
<a name="ln-4851"></a>       <span class="k">IF</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">PlantLoopNum</span><span class="p">)%</span><span class="n">LoopSide</span><span class="p">(</span><span class="n">LoopSideNum</span><span class="p">)%</span><span class="n">Branch</span><span class="p">(</span><span class="n">BranchNum</span><span class="p">)%</span><span class="n">Comp</span><span class="p">(</span><span class="n">CompNum</span><span class="p">)%</span><span class="n">CurOpSchemeType</span> <span class="p">&amp;</span>
<a name="ln-4852"></a>                    <span class="o">==</span> <span class="n">CompSetPtBasedSchemeType</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-4853"></a><span class="k">         </span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PossibleSubCooling</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-4854"></a>       <span class="k">ELSE</span>
<a name="ln-4855"></a><span class="k">         </span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PossibleSubCooling</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-4856"></a>       <span class="n">ENDIF</span>
<a name="ln-4857"></a>       <span class="n">QEvaporator</span> <span class="o">=</span> <span class="n">AvailChillerCap</span> <span class="o">*</span> <span class="n">OperPartLoadRat</span>
<a name="ln-4858"></a>       <span class="k">IF</span> <span class="p">(</span><span class="n">OperPartLoadRat</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="n">MinPartLoadRat</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4859"></a><span class="k">        </span><span class="n">FRAC</span> <span class="o">=</span> <span class="nb">MIN</span><span class="p">(</span><span class="mf">1.0d0</span><span class="p">,(</span><span class="n">OperPartLoadRat</span><span class="o">/</span><span class="n">MinPartLoadRat</span><span class="p">))</span>
<a name="ln-4860"></a>       <span class="k">ELSE</span>
<a name="ln-4861"></a><span class="k">        </span><span class="n">FRAC</span> <span class="o">=</span> <span class="mf">1.0d0</span>
<a name="ln-4862"></a>       <span class="k">END IF</span>
<a name="ln-4863"></a><span class="k">       </span><span class="n">Power</span> <span class="o">=</span> <span class="n">FracFullLoadPower</span> <span class="o">*</span> <span class="n">FullLoadPowerRat</span> <span class="o">*</span> <span class="n">AvailChillerCap</span><span class="o">/</span><span class="n">RatedCOP</span> <span class="o">*</span> <span class="n">FRAC</span>
<a name="ln-4864"></a>
<a name="ln-4865"></a>       <span class="c">! Either set the flow to the Constant value or caluclate the flow for the variable volume</span>
<a name="ln-4866"></a>       <span class="k">IF</span> <span class="p">(</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">ConstantFlow</span><span class="p">)</span>  <span class="p">&amp;</span>
<a name="ln-4867"></a>            <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">NotModulated</span><span class="p">))</span> <span class="k">THEN</span>
<a name="ln-4868"></a>
<a name="ln-4869"></a>          <span class="c">! Start by assuming max (design) flow</span>
<a name="ln-4870"></a>          <span class="n">EvapMassFlowRate</span> <span class="o">=</span> <span class="n">EvapMassFlowRateMax</span>
<a name="ln-4871"></a>          <span class="c">! Use SetComponentFlowRate to decide actual flow</span>
<a name="ln-4872"></a>          <span class="k">CALL </span><span class="n">SetComponentFlowRate</span><span class="p">(</span> <span class="n">EvapMassFlowRate</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-4873"></a>                              <span class="n">EvapInletNode</span> <span class="p">,</span> <span class="n">EvapOutletNode</span>  <span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4874"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-4875"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4876"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-4877"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)</span>
<a name="ln-4878"></a>          <span class="c">! Evaluate delta temp based on actual flow rate</span>
<a name="ln-4879"></a>          <span class="k">IF</span> <span class="p">(</span><span class="n">EvapMassFlowRate</span> <span class="o">/=</span> <span class="mf">0.0D0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4880"></a><span class="k">            </span><span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">QEvaporator</span><span class="o">/</span><span class="n">EvapMassFlowRate</span><span class="o">/</span><span class="n">Cp</span>
<a name="ln-4881"></a>          <span class="k">ELSE</span>
<a name="ln-4882"></a><span class="k">            </span><span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="mf">0.0D0</span>
<a name="ln-4883"></a>          <span class="n">ENDIF</span>
<a name="ln-4884"></a>          <span class="c">! Evaluate outlet temp based on delta</span>
<a name="ln-4885"></a>          <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapDeltaTemp</span>
<a name="ln-4886"></a>
<a name="ln-4887"></a>       <span class="k">ELSE IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">LeavingSetpointModulated</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4888"></a>
<a name="ln-4889"></a>          <span class="c">! Calculate the Delta Temp from the inlet temp to the chiller outlet setpoint</span>
<a name="ln-4890"></a>          <span class="k">SELECT CASE</span> <span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">LoopDemandCalcScheme</span><span class="p">)</span>
<a name="ln-4891"></a>          <span class="k">CASE</span> <span class="p">(</span><span class="n">SingleSetpoint</span><span class="p">)</span>
<a name="ln-4892"></a>            <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPoint</span>
<a name="ln-4893"></a>          <span class="k">CASE</span> <span class="p">(</span><span class="n">DualSetpointDeadband</span><span class="p">)</span>
<a name="ln-4894"></a>            <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPointHi</span>
<a name="ln-4895"></a>          <span class="k">END SELECT</span>
<a name="ln-4896"></a>
<a name="ln-4897"></a><span class="k">          IF</span> <span class="p">(</span><span class="n">EvapDeltaTemp</span> <span class="o">/=</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4898"></a>
<a name="ln-4899"></a>            <span class="c">! Calculate desired flow to request based on load</span>
<a name="ln-4900"></a>            <span class="n">EvapMassFlowRate</span> <span class="o">=</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">QEvaporator</span><span class="o">/</span><span class="n">Cp</span><span class="o">/</span><span class="n">EvapDeltaTemp</span><span class="p">)</span>
<a name="ln-4901"></a>            <span class="c">!Check to see if the Maximum is exceeded, if so set to maximum</span>
<a name="ln-4902"></a>            <span class="k">IF</span><span class="p">((</span><span class="n">EvapMassFlowRate</span> <span class="o">-</span> <span class="n">EvapMassFlowRateMax</span><span class="p">)</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="n">MassFlowTolerance</span><span class="p">)</span> <span class="p">&amp;</span>
<a name="ln-4903"></a>                     <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PossibleSubCooling</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-4904"></a>            <span class="n">EvapMassFlowRate</span> <span class="o">=</span> <span class="nb">MIN</span><span class="p">(</span><span class="n">EvapMassFlowRateMax</span><span class="p">,</span> <span class="n">EvapMassFlowRate</span><span class="p">)</span>
<a name="ln-4905"></a>            <span class="c">! Use SetComponentFlowRate to decide actual flow</span>
<a name="ln-4906"></a>            <span class="k">Call </span><span class="n">SetComponentFlowRate</span><span class="p">(</span> <span class="n">EvapMassFlowRate</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-4907"></a>                              <span class="n">EvapInletNode</span> <span class="p">,</span> <span class="n">EvapOutletNode</span>  <span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4908"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-4909"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4910"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-4911"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)</span>
<a name="ln-4912"></a>            <span class="k">SELECT CASE</span> <span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">LoopDemandCalcScheme</span><span class="p">)</span>
<a name="ln-4913"></a>            <span class="k">CASE</span> <span class="p">(</span><span class="n">SingleSetpoint</span><span class="p">)</span>
<a name="ln-4914"></a>              <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPoint</span>
<a name="ln-4915"></a>            <span class="k">CASE</span> <span class="p">(</span><span class="n">DualSetpointDeadband</span><span class="p">)</span>
<a name="ln-4916"></a>              <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPointHi</span>
<a name="ln-4917"></a>            <span class="k">END SELECT</span>
<a name="ln-4918"></a>
<a name="ln-4919"></a><span class="k">          ELSE</span>
<a name="ln-4920"></a>
<a name="ln-4921"></a>            <span class="c">! Try to request zero flow</span>
<a name="ln-4922"></a>            <span class="n">EvapMassFlowRate</span><span class="o">=</span><span class="mf">0.0d0</span>
<a name="ln-4923"></a>            <span class="c">! Use SetComponentFlowRate to decide actual flow</span>
<a name="ln-4924"></a>            <span class="k">Call </span><span class="n">SetComponentFlowRate</span><span class="p">(</span> <span class="n">EvapMassFlowRate</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-4925"></a>                              <span class="n">EvapInletNode</span> <span class="p">,</span> <span class="n">EvapOutletNode</span>  <span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4926"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-4927"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4928"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-4929"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)</span>
<a name="ln-4930"></a>            <span class="c">! No deltaT since component is not running</span>
<a name="ln-4931"></a>            <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-4932"></a>
<a name="ln-4933"></a>          <span class="k">END IF</span>
<a name="ln-4934"></a>
<a name="ln-4935"></a><span class="k">       End If</span>  <span class="c">!End of Constant Variable Flow If Block</span>
<a name="ln-4936"></a>
<a name="ln-4937"></a>  <span class="k">ELSE</span>  <span class="c">! If FlowLock is True</span>
<a name="ln-4938"></a>
<a name="ln-4939"></a>    <span class="n">EvapMassFlowRate</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">MassFlowRate</span>
<a name="ln-4940"></a>    <span class="k">Call </span><span class="n">SetComponentFlowRate</span><span class="p">(</span> <span class="n">EvapMassFlowRate</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-4941"></a>                              <span class="n">EvapInletNode</span> <span class="p">,</span> <span class="n">EvapOutletNode</span>  <span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4942"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-4943"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-4944"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-4945"></a>                              <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)</span>
<a name="ln-4946"></a>
<a name="ln-4947"></a><span class="c">!       Some other component set the flow to 0. No reason to continue with calculations.</span>
<a name="ln-4948"></a>    <span class="k">IF</span><span class="p">(</span><span class="n">EvapMassFlowRate</span> <span class="o">==</span> <span class="mf">0.0d0</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-4949"></a><span class="k">      </span><span class="n">MyLoad</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-4950"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4951"></a><span class="k">        CALL </span><span class="n">CalcBasinHeaterPower</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPowerFTempDiff</span><span class="p">,&amp;</span>
<a name="ln-4952"></a>                            <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSchedulePtr</span><span class="p">,&amp;</span>
<a name="ln-4953"></a>                            <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSetPointTemp</span><span class="p">,</span><span class="n">BasinHeaterPower</span><span class="p">)</span>
<a name="ln-4954"></a>      <span class="n">ENDIF</span>
<a name="ln-4955"></a>      <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-4956"></a>      <span class="k">RETURN</span>
<a name="ln-4957"></a><span class="k">    END IF</span>
<a name="ln-4958"></a>    <span class="c">!Flow resolver might have given less flow or control scheme have provided more load, which may</span>
<a name="ln-4959"></a>    <span class="c">!result in subcooling.</span>
<a name="ln-4960"></a>    <span class="k">IF</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PossibleSubCooling</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4961"></a><span class="k">      </span><span class="n">QEvaporator</span> <span class="o">=</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">)</span>
<a name="ln-4962"></a>      <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">QEvaporator</span><span class="o">/</span><span class="n">EvapMassFlowRate</span><span class="o">/</span><span class="n">Cp</span>
<a name="ln-4963"></a>      <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapDeltaTemp</span>
<a name="ln-4964"></a>    <span class="k">ELSE</span>  <span class="c">!No subcooling in this case.No recalculation required.Still need to check chiller low temp limit</span>
<a name="ln-4965"></a>
<a name="ln-4966"></a>      <span class="k">SELECT CASE</span> <span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">LoopNum</span><span class="p">)%</span><span class="n">LoopDemandCalcScheme</span><span class="p">)</span>
<a name="ln-4967"></a>      <span class="k">CASE</span> <span class="p">(</span><span class="n">SingleSetpoint</span><span class="p">)</span>
<a name="ln-4968"></a>        <span class="k">IF</span> <span class="p">((</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">LeavingSetpointModulated</span> <span class="p">)</span> <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-4969"></a>            <span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">LoopNum</span><span class="p">)%</span><span class="n">LoopSide</span><span class="p">(</span><span class="n">LoopSideNum</span><span class="p">)%</span><span class="n">Branch</span><span class="p">(</span><span class="n">BranchNum</span><span class="p">)%</span><span class="n">Comp</span><span class="p">(</span><span class="n">CompNum</span><span class="p">)%</span><span class="n">CurOpSchemeType</span> <span class="p">&amp;</span>
<a name="ln-4970"></a>                 <span class="o">==</span> <span class="n">CompSetPtBasedSchemeType</span><span class="p">)</span>          <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-4971"></a>            <span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPoint</span> <span class="o">/=</span> <span class="n">SensedNodeFlagValue</span><span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4972"></a><span class="k">          </span><span class="n">TempEvapOutSetpoint</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPoint</span>
<a name="ln-4973"></a>        <span class="k">ELSE</span>
<a name="ln-4974"></a><span class="k">          </span><span class="n">TempEvapOutSetpoint</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">LoopNum</span><span class="p">)%</span><span class="n">TempSetPointNodeNum</span><span class="p">)%</span><span class="n">TempSetPoint</span>
<a name="ln-4975"></a>        <span class="n">ENDIF</span>
<a name="ln-4976"></a>      <span class="k">CASE</span> <span class="p">(</span><span class="n">DualSetpointDeadband</span><span class="p">)</span>
<a name="ln-4977"></a>        <span class="k">IF</span> <span class="p">((</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">LeavingSetpointModulated</span><span class="p">)</span> <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-4978"></a>            <span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">LoopNum</span><span class="p">)%</span><span class="n">LoopSide</span><span class="p">(</span><span class="n">LoopSideNum</span><span class="p">)%</span><span class="n">Branch</span><span class="p">(</span><span class="n">BranchNum</span><span class="p">)%</span><span class="n">Comp</span><span class="p">(</span><span class="n">CompNum</span><span class="p">)%</span><span class="n">CurOpSchemeType</span> <span class="p">&amp;</span>
<a name="ln-4979"></a>                 <span class="o">==</span> <span class="n">CompSetPtBasedSchemeType</span><span class="p">)</span>          <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-4980"></a>            <span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPointHi</span> <span class="o">/=</span> <span class="n">SensedNodeFlagValue</span><span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4981"></a><span class="k">          </span><span class="n">TempEvapOutSetpoint</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPointHi</span>
<a name="ln-4982"></a>        <span class="k">ELSE</span>
<a name="ln-4983"></a><span class="k">          </span><span class="n">TempEvapOutSetpoint</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">LoopNum</span><span class="p">)%</span><span class="n">TempSetPointNodeNum</span><span class="p">)%</span><span class="n">TempSetPointHi</span>
<a name="ln-4984"></a>        <span class="n">ENDIF</span>
<a name="ln-4985"></a>      <span class="k">END SELECT</span>
<a name="ln-4986"></a><span class="k">      </span><span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">TempEvapOutSetpoint</span>
<a name="ln-4987"></a>      <span class="n">QEvaporator</span> <span class="o">=</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">EvapMassFlowRate</span><span class="o">*</span><span class="n">Cp</span><span class="o">*</span><span class="n">EvapDeltaTemp</span><span class="p">)</span>
<a name="ln-4988"></a>      <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">TempEvapOutSetpoint</span>
<a name="ln-4989"></a>    <span class="k">END IF</span>
<a name="ln-4990"></a>    <span class="c">!Check that the Evap outlet temp honors both plant loop temp low limit and also the chiller low limit</span>
<a name="ln-4991"></a>    <span class="k">IF</span><span class="p">(</span><span class="n">EvapOutletTemp</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="n">TempLowLimitEout</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4992"></a><span class="k">      IF</span><span class="p">((</span><span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">TempLowLimitEout</span><span class="p">)</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="n">DeltaTemptol</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-4993"></a><span class="k">        </span><span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">TempLowLimitEout</span>
<a name="ln-4994"></a>        <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapOutletTemp</span>
<a name="ln-4995"></a>        <span class="n">QEvaporator</span> <span class="o">=</span> <span class="n">EvapMassFlowRate</span><span class="o">*</span><span class="n">Cp</span><span class="o">*</span><span class="n">EvapDeltaTemp</span>
<a name="ln-4996"></a>      <span class="k">ELSE</span>
<a name="ln-4997"></a><span class="k">        </span><span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-4998"></a>        <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapOutletTemp</span>
<a name="ln-4999"></a>        <span class="n">QEvaporator</span> <span class="o">=</span> <span class="n">EvapMassFlowRate</span><span class="o">*</span><span class="n">Cp</span><span class="o">*</span><span class="n">EvapDeltaTemp</span>
<a name="ln-5000"></a>      <span class="k">END IF</span>
<a name="ln-5001"></a><span class="k">    END IF</span>
<a name="ln-5002"></a><span class="k">    IF</span><span class="p">(</span><span class="n">EvapOutletTemp</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempMin</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5003"></a><span class="k">      IF</span><span class="p">((</span><span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempMin</span><span class="p">)</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="n">DeltaTemptol</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5004"></a><span class="k">        </span><span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempMin</span>
<a name="ln-5005"></a>        <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapOutletTemp</span>
<a name="ln-5006"></a>        <span class="n">QEvaporator</span> <span class="o">=</span> <span class="n">EvapMassFlowRate</span><span class="o">*</span><span class="n">Cp</span><span class="o">*</span><span class="n">EvapDeltaTemp</span>
<a name="ln-5007"></a>      <span class="k">ELSE</span>
<a name="ln-5008"></a><span class="k">        </span><span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-5009"></a>        <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapOutletTemp</span>
<a name="ln-5010"></a>        <span class="n">QEvaporator</span> <span class="o">=</span> <span class="n">EvapMassFlowRate</span><span class="o">*</span><span class="n">Cp</span><span class="o">*</span><span class="n">EvapDeltaTemp</span>
<a name="ln-5011"></a>      <span class="k">END IF</span>
<a name="ln-5012"></a><span class="k">    END IF</span>
<a name="ln-5013"></a>
<a name="ln-5014"></a>    <span class="c">! If load exceeds the distributed load set to the distributed load</span>
<a name="ln-5015"></a>    <span class="k">IF</span><span class="p">(</span><span class="n">QEvaporator</span> <span class="o">&gt;</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">))</span> <span class="k">Then</span>
<a name="ln-5016"></a><span class="k">      If</span><span class="p">(</span><span class="n">EvapMassFlowRate</span> <span class="o">&gt;</span> <span class="n">MassFlowTolerance</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5017"></a><span class="k">        </span><span class="n">QEvaporator</span> <span class="o">=</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">)</span>
<a name="ln-5018"></a>        <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">QEvaporator</span><span class="o">/</span><span class="n">EvapMassFlowRate</span><span class="o">/</span><span class="n">Cp</span>
<a name="ln-5019"></a>        <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapDeltaTemp</span>
<a name="ln-5020"></a>      <span class="k">ELSE</span>
<a name="ln-5021"></a><span class="k">        </span><span class="n">QEvaporator</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5022"></a>        <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-5023"></a>      <span class="k">End If</span>
<a name="ln-5024"></a><span class="k">    End IF</span>
<a name="ln-5025"></a>
<a name="ln-5026"></a>    <span class="c">! Checks QEvaporator on the basis of the machine limits.</span>
<a name="ln-5027"></a>    <span class="k">If</span><span class="p">(</span><span class="n">QEvaporator</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">AvailChillerCap</span> <span class="o">*</span> <span class="n">MaxPartLoadRat</span><span class="p">))</span><span class="k">Then</span>
<a name="ln-5028"></a><span class="k">      If</span><span class="p">(</span><span class="n">EvapMassFlowRate</span> <span class="o">&gt;</span> <span class="n">MassFlowTolerance</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5029"></a><span class="k">        </span><span class="n">QEvaporator</span> <span class="o">=</span> <span class="n">AvailChillerCap</span> <span class="o">*</span> <span class="n">OperPartLoadRat</span>
<a name="ln-5030"></a>        <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">QEvaporator</span><span class="o">/</span><span class="n">EvapMassFlowRate</span><span class="o">/</span><span class="n">Cp</span>
<a name="ln-5031"></a>        <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapDeltaTemp</span>
<a name="ln-5032"></a>      <span class="k">Else</span>
<a name="ln-5033"></a><span class="k">        </span><span class="n">QEvaporator</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5034"></a>        <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-5035"></a>      <span class="k">End If</span>
<a name="ln-5036"></a><span class="k">    End If</span>
<a name="ln-5037"></a>
<a name="ln-5038"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">OperPartLoadRat</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="n">MinPartLoadRat</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5039"></a><span class="k">      </span><span class="n">FRAC</span> <span class="o">=</span> <span class="nb">MIN</span><span class="p">(</span><span class="mf">1.0d0</span><span class="p">,(</span><span class="n">OperPartLoadRat</span><span class="o">/</span><span class="n">MinPartLoadRat</span><span class="p">))</span>
<a name="ln-5040"></a>    <span class="k">ELSE</span>
<a name="ln-5041"></a><span class="k">      </span><span class="n">FRAC</span> <span class="o">=</span> <span class="mf">1.0d0</span>
<a name="ln-5042"></a>    <span class="k">END IF</span>
<a name="ln-5043"></a>
<a name="ln-5044"></a>    <span class="c">! set the module level variable used for reporting FRAC</span>
<a name="ln-5045"></a>    <span class="n">ChillerCyclingRatio</span> <span class="o">=</span> <span class="n">FRAC</span>
<a name="ln-5046"></a>
<a name="ln-5047"></a>    <span class="c">! Chiller is false loading below PLR = minimum unloading ratio, find PLR used for energy calculation</span>
<a name="ln-5048"></a>    <span class="n">Power</span> <span class="o">=</span> <span class="n">FracFullLoadPower</span> <span class="o">*</span> <span class="n">FullLoadPowerRat</span> <span class="o">*</span> <span class="n">AvailChillerCap</span> <span class="o">/</span><span class="n">RatedCOP</span> <span class="o">*</span> <span class="n">FRAC</span>
<a name="ln-5049"></a>
<a name="ln-5050"></a>    <span class="k">IF</span><span class="p">(</span><span class="n">EvapMassFlowRate</span> <span class="o">==</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5051"></a><span class="k">     </span><span class="n">QEvaporator</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5052"></a>     <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-5053"></a>     <span class="n">Power</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5054"></a>     <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-5055"></a>    <span class="k">END IF</span>
<a name="ln-5056"></a><span class="k">    IF</span><span class="p">(</span><span class="n">QEvaporator</span> <span class="o">==</span> <span class="mf">0.0d0</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5057"></a><span class="k">      CALL </span><span class="n">CalcBasinHeaterPower</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPowerFTempDiff</span><span class="p">,&amp;</span>
<a name="ln-5058"></a>                                  <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSchedulePtr</span><span class="p">,&amp;</span>
<a name="ln-5059"></a>                                  <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSetPointTemp</span><span class="p">,</span><span class="n">BasinHeaterPower</span><span class="p">)</span>
<a name="ln-5060"></a>    <span class="k">END IF</span>
<a name="ln-5061"></a><span class="k">  END IF</span>  <span class="c">!This is the end of the FlowLock Block</span>
<a name="ln-5062"></a>
<a name="ln-5063"></a>  <span class="c">!QCondenser is calculated the same for each type, but the power consumption should be different</span>
<a name="ln-5064"></a>  <span class="c">!  depending on the performance coefficients used for the chiller model.</span>
<a name="ln-5065"></a>  <span class="n">QCondenser</span> <span class="o">=</span> <span class="n">Power</span> <span class="o">+</span> <span class="n">QEvaporator</span>
<a name="ln-5066"></a>
<a name="ln-5067"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5068"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">CondMassFlowRate</span> <span class="o">&gt;</span> <span class="n">MassFlowTolerance</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5069"></a>      <span class="c">! If Heat Recovery specified for this vapor compression chiller, then Qcondenser will be adjusted by this subroutine</span>
<a name="ln-5070"></a>      <span class="k">If</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="p">)</span> <span class="k">Call </span><span class="n">CalcElectricChillerHeatRecovery</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">,</span><span class="n">QCondenser</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5071"></a>                                                               <span class="n">CondMassFlowRate</span><span class="p">,</span><span class="n">CondInletTemp</span><span class="p">,</span><span class="n">QHeatRecovered</span><span class="p">)</span>
<a name="ln-5072"></a>      <span class="n">CpCond</span> <span class="o">=</span> <span class="n">GetSpecificHeatGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-5073"></a>                                         <span class="n">CondInletTemp</span><span class="p">,</span>                      <span class="p">&amp;</span>
<a name="ln-5074"></a>                                         <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5075"></a>                                         <span class="s1">&#39;CalcElectricChillerModel&#39;</span><span class="p">)</span>
<a name="ln-5076"></a>       <span class="n">CondOutletTemp</span> <span class="o">=</span> <span class="n">QCondenser</span><span class="o">/</span><span class="n">CondMassFlowRate</span><span class="o">/</span><span class="n">CpCond</span> <span class="o">+</span> <span class="n">CondInletTemp</span>
<a name="ln-5077"></a>    <span class="k">ELSE</span>
<a name="ln-5078"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;CalcElectricChillerModel: Condenser flow = 0, for ElectricChiller=&#39;</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-5079"></a>                            <span class="nb">TRIM</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">))</span>
<a name="ln-5080"></a>      <span class="k">CALL </span><span class="n">ShowContinueErrorTimeStamp</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<a name="ln-5081"></a>
<a name="ln-5082"></a>    <span class="k">END IF</span>
<a name="ln-5083"></a><span class="k">  ELSE</span> <span class="c">!Air Cooled or Evap Cooled</span>
<a name="ln-5084"></a>
<a name="ln-5085"></a>    <span class="k">IF</span><span class="p">(</span><span class="n">QCondenser</span> <span class="o">&gt;</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5086"></a><span class="k">      </span><span class="n">CondMassFlowRate</span> <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondMassFlowRateMax</span> <span class="o">*</span> <span class="n">OperPartLoadRat</span>
<a name="ln-5087"></a>    <span class="k">ELSE</span>
<a name="ln-5088"></a><span class="k">      </span><span class="n">CondMassFlowRate</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5089"></a>    <span class="k">END IF</span>
<a name="ln-5090"></a>
<a name="ln-5091"></a>    <span class="c">! If Heat Recovery specified for this vapor compression chiller, then Qcondenser will be adjusted by this subroutine</span>
<a name="ln-5092"></a>    <span class="k">If</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="p">)</span> <span class="k">Call </span><span class="n">CalcElectricChillerHeatRecovery</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">,</span><span class="n">QCondenser</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5093"></a>                                                 <span class="n">CondMassFlowRate</span><span class="p">,</span><span class="n">CondInletTemp</span><span class="p">,</span><span class="n">QHeatRecovered</span><span class="p">)</span>
<a name="ln-5094"></a>    <span class="k">IF</span><span class="p">(</span><span class="n">CondMassFlowRate</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="mf">0.0d0</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-5095"></a><span class="k">      </span><span class="n">CpCond</span> <span class="o">=</span> <span class="n">PsyCpAirFnWTdb</span><span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">HumRat</span><span class="p">,</span><span class="n">CondInletTemp</span><span class="p">,</span><span class="s1">&#39;CalcElectricChillerModel&#39;</span><span class="p">)</span>
<a name="ln-5096"></a>      <span class="n">CondOutletTemp</span> <span class="o">=</span> <span class="n">CondInletTemp</span> <span class="o">+</span> <span class="n">QCondenser</span><span class="o">/</span><span class="n">CondMassFlowRate</span><span class="o">/</span><span class="n">CpCond</span>
<a name="ln-5097"></a>    <span class="k">ELSE</span>
<a name="ln-5098"></a><span class="k">      </span><span class="n">CondOutletTemp</span> <span class="o">=</span> <span class="n">CondInletTemp</span>
<a name="ln-5099"></a>    <span class="k">END IF</span>
<a name="ln-5100"></a><span class="k">  END IF</span>
<a name="ln-5101"></a>
<a name="ln-5102"></a>
<a name="ln-5103"></a>    <span class="c">!Calculate Energy</span>
<a name="ln-5104"></a>  <span class="n">CondenserEnergy</span>  <span class="o">=</span> <span class="n">QCondenser</span><span class="o">*</span><span class="n">TimeStepSys</span><span class="o">*</span><span class="n">SecInHour</span>
<a name="ln-5105"></a>  <span class="n">Energy</span>           <span class="o">=</span> <span class="n">Power</span><span class="o">*</span><span class="n">TimeStepSys</span><span class="o">*</span><span class="n">SecInHour</span>
<a name="ln-5106"></a>  <span class="n">EvaporatorEnergy</span> <span class="o">=</span> <span class="n">QEvaporator</span><span class="o">*</span><span class="n">TimeStepSys</span><span class="o">*</span><span class="n">SecInHour</span>
<a name="ln-5107"></a>
<a name="ln-5108"></a> <span class="c">!check for problems BG 9/12/06 (deal with observed negative energy results)</span>
<a name="ln-5109"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">Energy</span> <span class="o">&lt;</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">then</span>  <span class="c">! there is a serious problem</span>
<a name="ln-5110"></a>
<a name="ln-5111"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5112"></a>     <span class="c">! first check for run away condenser loop temps (only reason yet to be observed for this?)</span>
<a name="ln-5113"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">CondInletTemp</span> <span class="o">&gt;</span> <span class="mi">7</span><span class="mf">0.0d0</span> <span class="p">)</span>  <span class="k">then</span>
<a name="ln-5114"></a><span class="k">        CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;CalcElectricChillerModel: Condenser loop inlet temperatures over 70.0 C for ElectricChiller=&#39;</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-5115"></a>                            <span class="nb">TRIM</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">))</span>
<a name="ln-5116"></a>        <span class="k">CALL </span><span class="n">ShowContinueErrorTimeStamp</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<a name="ln-5117"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Condenser loop water temperatures are too high at&#39;</span><span class="o">//</span><span class="nb">trim</span><span class="p">(</span><span class="n">RoundSigDigits</span><span class="p">(</span><span class="n">CondInletTemp</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span> <span class="p">)</span>
<a name="ln-5118"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Check input for condenser plant loop, especially cooling tower&#39;</span><span class="p">)</span>
<a name="ln-5119"></a>        <span class="k">CALL </span><span class="n">showContinueError</span><span class="p">(</span><span class="s1">&#39;Evaporator inlet temperature: &#39;</span><span class="o">//</span><span class="nb">trim</span><span class="p">(</span><span class="n">RoundSigDigits</span><span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span> <span class="p">)</span>
<a name="ln-5120"></a>
<a name="ln-5121"></a>        <span class="k">CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;Program Terminates due to previous error condition&#39;</span><span class="p">)</span>
<a name="ln-5122"></a>      <span class="n">ENDIF</span>
<a name="ln-5123"></a>    <span class="n">ENDIF</span>
<a name="ln-5124"></a>    <span class="k">IF</span><span class="p">(.</span><span class="nb">NOT</span><span class="p">.</span><span class="n">WarmupFlag</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-5125"></a><span class="k">      If</span> <span class="p">(</span><span class="n">AvailNomCapRat</span> <span class="o">&lt;</span> <span class="mf">0.0d0</span> <span class="p">)</span> <span class="k">then</span>     <span class="c">! apparently the real reason energy goes negative</span>
<a name="ln-5126"></a>        <span class="k">CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;CalcElectricChillerModel: Capacity ratio below zero for ElectricChiller=&#39;</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-5127"></a>                              <span class="nb">TRIM</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">))</span>
<a name="ln-5128"></a>        <span class="k">CALL </span><span class="n">ShowContinueErrorTimeStamp</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<a name="ln-5129"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Check input for Capacity Ratio Curve&#39;</span><span class="p">)</span>
<a name="ln-5130"></a>        <span class="k">CALL </span><span class="n">showContinueError</span><span class="p">(</span><span class="s1">&#39;Condenser inlet temperature: &#39;</span><span class="o">//</span><span class="nb">trim</span><span class="p">(</span><span class="n">RoundSigDigits</span><span class="p">(</span><span class="n">CondInletTemp</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span> <span class="p">)</span>
<a name="ln-5131"></a>        <span class="k">CALL </span><span class="n">showContinueError</span><span class="p">(</span><span class="s1">&#39;Evaporator inlet temperature: &#39;</span><span class="o">//</span><span class="nb">trim</span><span class="p">(</span><span class="n">RoundSigDigits</span><span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span> <span class="p">)</span>
<a name="ln-5132"></a>        <span class="k">CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;Program Terminates due to previous error condition&#39;</span><span class="p">)</span>
<a name="ln-5133"></a>      <span class="n">ENDIF</span>
<a name="ln-5134"></a>    <span class="n">ENDIF</span>
<a name="ln-5135"></a>    <span class="c">! If makes it here, set limits, chiller can&#39;t have negative energy/power</span>
<a name="ln-5136"></a>    <span class="c">! proceeding silently for now but may want to throw error here</span>
<a name="ln-5137"></a>    <span class="n">Power</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5138"></a>    <span class="n">Energy</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5139"></a>  <span class="n">ENDIF</span>
<a name="ln-5140"></a>  <span class="k">RETURN</span>
<a name="ln-5141"></a><span class="k">END SUBROUTINE </span><span class="n">CalcElectricChillerModel</span>
<a name="ln-5142"></a>
<a name="ln-5143"></a>
<a name="ln-5144"></a><span class="k">SUBROUTINE </span><span class="n">CalcEngineDrivenChillerModel</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">,</span><span class="n">MyLoad</span><span class="p">,</span><span class="n">Runflag</span><span class="p">,</span><span class="n">EquipFlowCtrl</span><span class="p">)</span>
<a name="ln-5145"></a>          <span class="c">! SUBROUTINE INFORMATION:</span>
<a name="ln-5146"></a>          <span class="c">!       AUTHOR         Dan Fisher / Brandon Anderson</span>
<a name="ln-5147"></a>          <span class="c">!       DATE WRITTEN   Sept. 2000</span>
<a name="ln-5148"></a>          <span class="c">!       MODIFIED       Chandan Sharma, FSEC, February 2010, Added basin heater</span>
<a name="ln-5149"></a>          <span class="c">!       RE-ENGINEERED  na</span>
<a name="ln-5150"></a>
<a name="ln-5151"></a>          <span class="c">! PURPOSE OF THIS SUBROUTINE:</span>
<a name="ln-5152"></a>          <span class="c">! simulate a vapor compression chiller using the EngineDriven model</span>
<a name="ln-5153"></a>
<a name="ln-5154"></a>          <span class="c">! METHODOLOGY EMPLOYED:</span>
<a name="ln-5155"></a>          <span class="c">! curve fit of performance data:</span>
<a name="ln-5156"></a>
<a name="ln-5157"></a>          <span class="c">! REFERENCES:</span>
<a name="ln-5158"></a>          <span class="c">! 1. BLAST Users Manual</span>
<a name="ln-5159"></a>          <span class="c">! 2. CHILLER User Manual</span>
<a name="ln-5160"></a>
<a name="ln-5161"></a>          <span class="c">! USE STATEMENTS:</span>
<a name="ln-5162"></a>  <span class="k">USE </span><span class="n">DataGlobals</span><span class="p">,</span>     <span class="n">ONLY</span> <span class="p">:</span> <span class="n">BeginEnvrnFlag</span><span class="p">,</span> <span class="n">SecInHour</span><span class="p">,</span> <span class="n">CurrentTime</span>
<a name="ln-5163"></a>  <span class="k">USE </span><span class="n">DataHVACGlobals</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">FirstTimeStepSysFlag</span><span class="p">,</span> <span class="n">TimeStepSys</span><span class="p">,</span> <span class="n">SysTimeElapsed</span>
<a name="ln-5164"></a>  <span class="k">USE </span><span class="n">CurveManager</span><span class="p">,</span>    <span class="n">ONLY</span> <span class="p">:</span> <span class="n">CurveValue</span>
<a name="ln-5165"></a>  <span class="k">USE </span><span class="n">General</span><span class="p">,</span>         <span class="n">ONLY</span> <span class="p">:</span> <span class="n">RoundSigDigits</span><span class="p">,</span> <span class="n">CreateSysTimeIntervalString</span>
<a name="ln-5166"></a>  <span class="k">USE </span><span class="n">DataPlant</span><span class="p">,</span>       <span class="n">ONLY</span> <span class="p">:</span> <span class="n">PlantLoop</span><span class="p">,</span> <span class="n">TypeOf_Chiller_EngineDriven</span><span class="p">,</span> <span class="n">CompSetPtBasedSchemeType</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5167"></a>                              <span class="n">CriteriaType_MassFlowRate</span><span class="p">,</span> <span class="n">SingleSetpoint</span><span class="p">,</span> <span class="n">DualSetpointDeadband</span>
<a name="ln-5168"></a>  <span class="k">USE </span><span class="n">DataBranchAirLoopPlant</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">ControlType_SeriesActive</span><span class="p">,</span> <span class="n">MassFlowTolerance</span>
<a name="ln-5169"></a>  <span class="k">USE </span><span class="n">DataEnvironment</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">EnvironmentName</span><span class="p">,</span> <span class="n">CurMnDy</span>
<a name="ln-5170"></a>  <span class="k">USE </span><span class="n">FluidProperties</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">GetSpecificHeatGlycol</span>
<a name="ln-5171"></a>  <span class="k">USE </span><span class="n">PlantUtilities</span><span class="p">,</span>  <span class="n">ONLY</span> <span class="p">:</span> <span class="n">SetComponentFlowRate</span><span class="p">,</span> <span class="n">PullCompInterconnectTrigger</span>
<a name="ln-5172"></a>
<a name="ln-5173"></a>  <span class="k">IMPLICIT NONE</span>
<a name="ln-5174"></a>
<a name="ln-5175"></a>
<a name="ln-5176"></a>          <span class="c">! SUBROUTINE ARGUMENT DEFINITIONS:</span>
<a name="ln-5177"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">ChillerNum</span>      <span class="c">! chiller number</span>
<a name="ln-5178"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">MyLoad</span>          <span class="c">! operating load</span>
<a name="ln-5179"></a>  <span class="kt">LOGICAL</span><span class="p">,</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">RunFlag</span>         <span class="c">! TRUE when chiller operating</span>
<a name="ln-5180"></a> <span class="c">! INTEGER, INTENT(IN)    :: FlowLock        ! TRUE when flow resolver has calculated branch flow</span>
<a name="ln-5181"></a>  <span class="kt">INTEGER</span><span class="p">,</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span> <span class="kd">::</span> <span class="n">EquipFlowCtrl</span>  <span class="c">! Flow control mode for the equipment</span>
<a name="ln-5182"></a>
<a name="ln-5183"></a>          <span class="c">! SUBROUTINE PARAMETER DEFINITIONS:</span>
<a name="ln-5184"></a>
<a name="ln-5185"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span> <span class="k">PARAMETER</span>   <span class="kd">::</span> <span class="n">ExhaustCP</span> <span class="o">=</span> <span class="mf">1.047d0</span>    <span class="c">!Exhaust Gas Specific Heat (J/kg-K)</span>
<a name="ln-5186"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span> <span class="k">PARAMETER</span>   <span class="kd">::</span> <span class="n">ReferenceTemp</span> <span class="o">=</span> <span class="mi">2</span><span class="mf">5.0d0</span> <span class="c">!Reference temperature by which lower heating</span>
<a name="ln-5187"></a>                                                   <span class="c">! value is reported.  This should be subtracted</span>
<a name="ln-5188"></a>                                                   <span class="c">! off of when calculated exhaust energies.</span>
<a name="ln-5189"></a>  <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span> <span class="k">PARAMETER</span> <span class="kd">::</span> <span class="n">OutputFormat</span>  <span class="o">=</span><span class="s1">&#39;(F6.2)&#39;</span>
<a name="ln-5190"></a>
<a name="ln-5191"></a>          <span class="c">! INTERFACE BLOCK SPECIFICATIONS</span>
<a name="ln-5192"></a>          <span class="c">! na</span>
<a name="ln-5193"></a>
<a name="ln-5194"></a>          <span class="c">! DERIVED TYPE DEFINITIONS</span>
<a name="ln-5195"></a>          <span class="c">! na</span>
<a name="ln-5196"></a>
<a name="ln-5197"></a>          <span class="c">! SUBROUTINE LOCAL VARIABLE DECLARATIONS:</span>
<a name="ln-5198"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span> <span class="k">DIMENSION</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>     <span class="kd">::</span> <span class="n">CapacityRat</span>         <span class="c">! intermediate result:  capacity ratio</span>
<a name="ln-5199"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span> <span class="k">DIMENSION</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>     <span class="kd">::</span> <span class="n">PowerRat</span>            <span class="c">! intermediate result:  power ratio</span>
<a name="ln-5200"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span> <span class="k">DIMENSION</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>     <span class="kd">::</span> <span class="n">FullLoadFactor</span>      <span class="c">! intermediate result:  full load factor</span>
<a name="ln-5201"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">MinPartLoadRat</span>      <span class="c">! min allowed operating frac full load</span>
<a name="ln-5202"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">MaxPartLoadRat</span>      <span class="c">! max allowed operating frac full load</span>
<a name="ln-5203"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">TempCondIn</span>          <span class="c">! C - (EngineDriven ADJTC(1)The design secondary loop fluid</span>
<a name="ln-5204"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">TempCondInDesign</span>    <span class="c">! C - (EngineDriven ADJTC(1)The design secondary loop fluid</span>
<a name="ln-5205"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">TempRiseRat</span>         <span class="c">! intermediate result:  temperature rise ratio</span>
<a name="ln-5206"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">EvapInletTemp</span>       <span class="c">! C - evaporator inlet temperature, water side</span>
<a name="ln-5207"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">CondInletTemp</span>       <span class="c">! C - condenser inlet temperature, water side</span>
<a name="ln-5208"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">TempEvapOut</span>         <span class="c">! C - evaporator outlet temperature, water side</span>
<a name="ln-5209"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">TempEvapOutSetpoint</span>   <span class="c">! C - evaporator outlet temperature setpoint</span>
<a name="ln-5210"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">TempEvapOutDesign</span>   <span class="c">! design evaporator outlet temperature, water side</span>
<a name="ln-5211"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">ChillerNomCap</span>       <span class="c">! chiller nominal capacity</span>
<a name="ln-5212"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">AvailChillerCap</span>     <span class="c">! chiller available capacity</span>
<a name="ln-5213"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">COP</span>                 <span class="c">! coefficient of performance</span>
<a name="ln-5214"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">FracFullLoadPower</span>   <span class="c">! fraction of full load power</span>
<a name="ln-5215"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">EvapDeltaTemp</span>       <span class="c">! C - evaporator temperature difference, water side</span>
<a name="ln-5216"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">DeltaTemp</span>             <span class="c">! C - intermediate result: condenser/evaporator temp diff</span>
<a name="ln-5217"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">AvailNomCapRat</span>        <span class="c">! intermediate result: available nominal capacity ratio</span>
<a name="ln-5218"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">FullLoadPowerRat</span>      <span class="c">! intermediate result: full load power ratio</span>
<a name="ln-5219"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">PartLoadRat</span>           <span class="c">! part load ratio for efficiency</span>
<a name="ln-5220"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">OperPartLoadRat</span>     <span class="c">! Actual operating PLR</span>
<a name="ln-5221"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">EvapInletNode</span>       <span class="c">! evaporator inlet node number, water side</span>
<a name="ln-5222"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">EvapOutletNode</span>      <span class="c">! evaporator outlet node number, water side</span>
<a name="ln-5223"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">CondInletNode</span>       <span class="c">! condenser inlet node number, water side</span>
<a name="ln-5224"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">CondOutletNode</span>      <span class="c">! condenser outlet node number, water side</span>
<a name="ln-5225"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">EvapMassFlowRateMax</span> <span class="c">! Max Design Evaporator Mass Flow Rate converted from Volume Flow Rate</span>
<a name="ln-5226"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">TempLowLimitEout</span>    <span class="c">! C - Evaporator low temp. limit cut off</span>
<a name="ln-5227"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">FRAC</span>
<a name="ln-5228"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">LoopNum</span>
<a name="ln-5229"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">LoopSideNum</span>
<a name="ln-5230"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">SAVE</span>  <span class="kd">::</span> <span class="n">TimeStepSysLast</span><span class="o">=</span><span class="mf">0.0d0</span>     <span class="c">! last system time step (used to check for downshifting)</span>
<a name="ln-5231"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>       <span class="kd">::</span> <span class="n">CurrentEndTime</span>          <span class="c">! end time of time step for current simulation time step</span>
<a name="ln-5232"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">SAVE</span>  <span class="kd">::</span> <span class="n">CurrentEndTimeLast</span><span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">! end time of time step for last simulation time step</span>
<a name="ln-5233"></a>  <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span><span class="kd">::</span> <span class="n">OutputChar</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span>        <span class="c">! character string for warning messages</span>
<a name="ln-5234"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>       <span class="kd">::</span> <span class="n">Cp</span>                      <span class="c">! local for fluid specif heat, for evaporator</span>
<a name="ln-5235"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>       <span class="kd">::</span> <span class="n">CpCond</span>                  <span class="c">! local for fluid specif heat, for condenser</span>
<a name="ln-5236"></a>
<a name="ln-5237"></a><span class="c">! Special variables for EngineDriven Chiller</span>
<a name="ln-5238"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">MaxExhaustperPowerOutput</span> <span class="c">!curve fit parameter</span>
<a name="ln-5239"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">ClngLoadFuelRat</span>      <span class="c">!(RELDC) Ratio of Shaft Power to Fuel Energy Input</span>
<a name="ln-5240"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">RecJacHeattoFuelRat</span>  <span class="c">!(RJACDC) Ratio of Recoverable Jacket Heat to Fuel Energy Input</span>
<a name="ln-5241"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">RecLubeHeattoFuelRat</span> <span class="c">!(RLUBDC) Ratio of Recoverable Lube Oil Heat to Fuel Energy Input</span>
<a name="ln-5242"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">TotExhausttoFuelRat</span>  <span class="c">!(REXDC) Total Exhaust Energy Input to Fuel Energy Input</span>
<a name="ln-5243"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">TotalExhaustEnergy</span>
<a name="ln-5244"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">ExhaustTemp</span>          <span class="c">!(TEX) Exhaust Gas Temp</span>
<a name="ln-5245"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">ExhaustGasFlow</span>       <span class="c">!exhaust gas mass flow rate</span>
<a name="ln-5246"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">DesignMinExitGasTemp</span>
<a name="ln-5247"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">UA</span>                   <span class="c">!(UACDC) exhaust gas Heat Exchanger UA</span>
<a name="ln-5248"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">HeatRecCp</span>            <span class="c">!Specific Heat of the Heat Recovery Fluid (J/kg-K)</span>
<a name="ln-5249"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">EngineDrivenFuelEnergy</span>
<a name="ln-5250"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">HeatRecRatio</span>              <span class="c">!When Max Temp is reached the amount of recovered heat has to be reduced.</span>
<a name="ln-5251"></a><span class="c">!  LOGICAL,SAVE :: PossibleSubCooling=.FALSE.</span>
<a name="ln-5252"></a>
<a name="ln-5253"></a>      <span class="c">!set module level inlet and outlet nodes</span>
<a name="ln-5254"></a>  <span class="n">EvapMassFlowRate</span>           <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5255"></a>  <span class="n">CondMassFlowRate</span>           <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5256"></a>  <span class="n">Power</span>                      <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5257"></a>  <span class="n">QCondenser</span>                 <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5258"></a>  <span class="n">QEvaporator</span>                <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5259"></a>  <span class="n">Energy</span>                     <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5260"></a>  <span class="n">CondenserEnergy</span>            <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5261"></a>  <span class="n">EvaporatorEnergy</span>           <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5262"></a>  <span class="n">HeatRecCp</span>                  <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5263"></a>  <span class="n">HeatRecMdotActual</span>          <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5264"></a>  <span class="n">QTotalHeatRecovered</span>        <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5265"></a>  <span class="n">QJacketRecovered</span>           <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5266"></a>  <span class="n">QLubeOilRecovered</span>          <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5267"></a>  <span class="n">QExhaustRecovered</span>          <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5268"></a>  <span class="n">EngineDrivenFuelEnergy</span>     <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5269"></a>  <span class="n">FuelEnergyUseRate</span>          <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5270"></a>  <span class="n">TotalHeatEnergyRec</span>         <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5271"></a>  <span class="n">JacketEnergyRec</span>            <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5272"></a>  <span class="n">LubeOilEnergyRec</span>           <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5273"></a>  <span class="n">ExhaustEnergyRec</span>           <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5274"></a>  <span class="n">FuelEnergy</span>                 <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5275"></a>  <span class="n">FuelMdot</span>                   <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5276"></a>  <span class="n">ExhaustStackTemp</span>           <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5277"></a>  <span class="n">FRAC</span>                       <span class="o">=</span> <span class="mf">1.0d0</span>
<a name="ln-5278"></a>
<a name="ln-5279"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5280"></a><span class="k">     </span><span class="n">HeatRecInletTemp</span>           <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-5281"></a>     <span class="n">HeatRecOutletTemp</span>          <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-5282"></a>     <span class="n">HeatRecMdotDesign</span>          <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">DesignHeatRecMassFlowRate</span>
<a name="ln-5283"></a>  <span class="n">ENDIF</span>
<a name="ln-5284"></a>
<a name="ln-5285"></a>  <span class="n">EvapInletNode</span>  <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletNodeNum</span>
<a name="ln-5286"></a>  <span class="n">EvapOutletNode</span> <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span>
<a name="ln-5287"></a>  <span class="n">CondInletNode</span>  <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span>
<a name="ln-5288"></a>  <span class="n">CondOutletNode</span> <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletNodeNum</span>
<a name="ln-5289"></a>  <span class="n">LoopNum</span>        <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span>
<a name="ln-5290"></a>  <span class="n">LoopSideNum</span>    <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span>
<a name="ln-5291"></a>  <span class="n">EvapInletTemp</span>  <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-5292"></a>
<a name="ln-5293"></a><span class="c">!   calculate end time of current time step</span>
<a name="ln-5294"></a>  <span class="n">CurrentEndTime</span> <span class="o">=</span> <span class="n">CurrentTime</span> <span class="o">+</span> <span class="n">SysTimeElapsed</span>
<a name="ln-5295"></a>
<a name="ln-5296"></a><span class="c">!   Print warning messages only when valid and only for the first ocurrance. Let summary provide statistics.</span>
<a name="ln-5297"></a><span class="c">!   Wait for next time step to print warnings. If simulation iterates, print out</span>
<a name="ln-5298"></a><span class="c">!   the warning for the last iteration only. Must wait for next time step to accomplish this.</span>
<a name="ln-5299"></a><span class="c">!   If a warning occurs and the simulation down shifts, the warning is not valid.</span>
<a name="ln-5300"></a>  <span class="k">IF</span><span class="p">(</span><span class="n">CurrentEndTime</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="n">CurrentEndTimeLast</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="n">TimeStepSys</span> <span class="p">.</span><span class="n">GE</span><span class="p">.</span> <span class="n">TimeStepSysLast</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-5301"></a><span class="k">    IF</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-5302"></a><span class="k">        </span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgErrorCount</span> <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-5303"></a>                         <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgErrorCount</span> <span class="o">+</span> <span class="mi">1</span>
<a name="ln-5304"></a><span class="c">!     Show single warning and pass additional info to ShowRecurringWarningErrorAtEnd</span>
<a name="ln-5305"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgErrorCount</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5306"></a><span class="k">         CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgBuffer1</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
<a name="ln-5307"></a>         <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgBuffer2</span><span class="p">))</span>
<a name="ln-5308"></a>      <span class="k">ELSE</span>
<a name="ln-5309"></a><span class="k">        CALL </span><span class="n">ShowRecurringWarningErrorAtEnd</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgBuffer1</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39; error continues.&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5310"></a>           <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">ErrCount1</span><span class="p">,</span><span class="n">ReportMaxOf</span><span class="o">=</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgDataLast</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-5311"></a>           <span class="n">ReportMinOf</span><span class="o">=</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgDataLast</span><span class="p">,</span><span class="n">ReportMaxUnits</span><span class="o">=</span><span class="s1">&#39;[C]&#39;</span><span class="p">,</span><span class="n">ReportMinUnits</span><span class="o">=</span><span class="s1">&#39;[C]&#39;</span><span class="p">)</span>
<a name="ln-5312"></a>      <span class="k">END IF</span>
<a name="ln-5313"></a><span class="k">    END IF</span>
<a name="ln-5314"></a><span class="k">  END IF</span>
<a name="ln-5315"></a>
<a name="ln-5316"></a><span class="c">! save last system time step and last end time of current time step (used to determine if warning is valid)</span>
<a name="ln-5317"></a>  <span class="n">TimeStepSysLast</span>    <span class="o">=</span> <span class="n">TimeStepSys</span>
<a name="ln-5318"></a>  <span class="n">CurrentEndTimeLast</span> <span class="o">=</span> <span class="n">CurrentEndTime</span>
<a name="ln-5319"></a>
<a name="ln-5320"></a>   <span class="c">!If Chiller load is 0 or chiller is not running then leave the subroutine.</span>
<a name="ln-5321"></a>  <span class="k">IF</span><span class="p">(</span><span class="n">MyLoad</span> <span class="o">&gt;=</span> <span class="mf">0.d0</span> <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">RunFlag</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5322"></a><span class="k">    IF</span><span class="p">(</span><span class="n">EquipFlowCtrl</span> <span class="o">==</span> <span class="n">ControlType_SeriesActive</span> <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="n">PlantLoop</span><span class="p">(</span><span class="n">LoopNum</span><span class="p">)%</span><span class="n">LoopSide</span><span class="p">(</span><span class="n">LoopSideNum</span><span class="p">)%</span><span class="n">FlowLock</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5323"></a><span class="k">      </span><span class="n">EvapMassFlowRate</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">MassFlowrate</span>
<a name="ln-5324"></a>    <span class="k">ELSE</span>
<a name="ln-5325"></a><span class="k">      </span><span class="n">EvapMassFlowRate</span>           <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-5326"></a>
<a name="ln-5327"></a>      <span class="k">CALL </span><span class="n">SetComponentFlowRate</span><span class="p">(</span> <span class="n">EvapMassFlowRate</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-5328"></a>                          <span class="n">EvapInletNode</span> <span class="p">,</span> <span class="n">EvapOutletNode</span>  <span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5329"></a>                          <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-5330"></a>                          <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5331"></a>                          <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-5332"></a>                          <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)</span>
<a name="ln-5333"></a>    <span class="n">ENDIF</span>
<a name="ln-5334"></a>
<a name="ln-5335"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5336"></a><span class="k">      IF</span> <span class="p">(</span> <span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span> <span class="p">&amp;</span>
<a name="ln-5337"></a>            <span class="n">LoopSide</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">)%</span> <span class="p">&amp;</span>
<a name="ln-5338"></a>              <span class="n">Branch</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDBranchNum</span><span class="p">)%</span>  <span class="p">&amp;</span>
<a name="ln-5339"></a>                <span class="n">Comp</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDCompNum</span><span class="p">)%</span><span class="n">FlowCtrl</span> <span class="o">==</span> <span class="n">ControlType_SeriesActive</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5340"></a><span class="k">        </span><span class="n">CondMassFlowRate</span>           <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowrate</span>
<a name="ln-5341"></a>      <span class="k">ELSE</span>
<a name="ln-5342"></a><span class="k">        </span><span class="n">CondMassFlowRate</span>           <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-5343"></a>        <span class="k">CALL </span><span class="n">SetComponentFlowRate</span><span class="p">(</span><span class="n">CondMassFlowRate</span><span class="p">,</span> <span class="n">CondInletNode</span><span class="p">,</span> <span class="n">CondOutletNode</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5344"></a>                                <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5345"></a>                                <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5346"></a>                                <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDBranchNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5347"></a>                                <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDCompNum</span><span class="p">)</span>
<a name="ln-5348"></a>      <span class="n">ENDIF</span>
<a name="ln-5349"></a>    <span class="n">ENDIF</span>
<a name="ln-5350"></a>
<a name="ln-5351"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5352"></a><span class="k">      CALL </span><span class="n">CalcBasinHeaterPower</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPowerFTempDiff</span><span class="p">,&amp;</span>
<a name="ln-5353"></a>                                <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSchedulePtr</span><span class="p">,&amp;</span>
<a name="ln-5354"></a>                                <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSetPointTemp</span><span class="p">,</span><span class="n">BasinHeaterPower</span><span class="p">)</span>
<a name="ln-5355"></a>    <span class="n">ENDIF</span>
<a name="ln-5356"></a>    <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-5357"></a>    <span class="k">RETURN</span>
<a name="ln-5358"></a><span class="k">  END IF</span>
<a name="ln-5359"></a>
<a name="ln-5360"></a><span class="k">  IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">AirCooled</span><span class="p">)</span> <span class="k">THEN</span> <span class="c">!Condenser inlet temp = outdoor temp</span>
<a name="ln-5361"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">OutAirDryBulb</span>
<a name="ln-5362"></a><span class="c">!  Warn user if entering condenser temperature falls below 0C</span>
<a name="ln-5363"></a>      <span class="k">IF</span><span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="mf">0.0d0</span> <span class="p">.</span><span class="nb">and</span><span class="p">.</span> <span class="p">.</span><span class="nb">not</span><span class="p">.</span> <span class="n">WarmupFlag</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5364"></a><span class="k">        </span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-5365"></a>        <span class="k">WRITE</span><span class="p">(</span><span class="n">OutputChar</span><span class="p">,</span><span class="n">OutputFormat</span><span class="p">)</span><span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-5366"></a>        <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgBuffer1</span> <span class="o">=</span> <span class="s1">&#39;CalcEngineDrivenChillerModel - Chiller:EngineDriven &quot;&#39;</span> <span class="p">&amp;</span>
<a name="ln-5367"></a>                             <span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span><span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-5368"></a>                             <span class="s1">&#39;&quot; - Air Cooled Condenser Inlet Temperature below 0C&#39;</span>
<a name="ln-5369"></a>        <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgBuffer2</span> <span class="o">=</span> <span class="s1">&#39;... Outdoor Dry-bulb Condition = &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">OutputChar</span><span class="p">)</span><span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-5370"></a>                   <span class="s1">&#39; C. Occurrence info = &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">EnvironmentName</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;, &#39;</span><span class="o">//</span><span class="nb">Trim</span><span class="p">(</span><span class="n">CurMnDy</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39; &#39;</span><span class="p">&amp;</span>
<a name="ln-5371"></a>                   <span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">CreateSysTimeIntervalString</span><span class="p">())</span>
<a name="ln-5372"></a>        <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgDataLast</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-5373"></a>      <span class="k">ELSE</span>
<a name="ln-5374"></a><span class="k">        </span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-5375"></a>      <span class="n">ENDIF</span>
<a name="ln-5376"></a>  <span class="k">Else IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span> <span class="c">!Condenser inlet temp = (outdoor wet bulb)</span>
<a name="ln-5377"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">OutAirWetBulb</span>
<a name="ln-5378"></a><span class="c">!  Warn user if evap condenser wet bulb temperature falls below 10C</span>
<a name="ln-5379"></a>      <span class="k">IF</span><span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="mi">1</span><span class="mf">0.0d0</span> <span class="p">.</span><span class="nb">and</span><span class="p">.</span> <span class="p">.</span><span class="nb">not</span><span class="p">.</span> <span class="n">WarmupFlag</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5380"></a><span class="k">        </span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-5381"></a>        <span class="k">WRITE</span><span class="p">(</span><span class="n">OutputChar</span><span class="p">,</span><span class="n">OutputFormat</span><span class="p">)</span><span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-5382"></a>        <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgBuffer1</span> <span class="o">=</span> <span class="s1">&#39;CalcEngineDrivenChillerModel - Chiller:EngineDriven &quot;&#39;</span> <span class="p">&amp;</span>
<a name="ln-5383"></a>                             <span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span><span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-5384"></a>                             <span class="s1">&#39;&quot; - Evap Cooled Condenser Inlet Temperature below 10C&#39;</span>
<a name="ln-5385"></a>        <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgBuffer2</span> <span class="o">=</span> <span class="s1">&#39;... Outdoor Wet-bulb Condition = &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">OutputChar</span><span class="p">)</span><span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-5386"></a>                   <span class="s1">&#39; C. Occurrence info = &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">EnvironmentName</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;, &#39;</span><span class="o">//</span><span class="nb">Trim</span><span class="p">(</span><span class="n">CurMnDy</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39; &#39;</span><span class="p">&amp;</span>
<a name="ln-5387"></a>                   <span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">CreateSysTimeIntervalString</span><span class="p">())</span>
<a name="ln-5388"></a>        <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgDataLast</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-5389"></a>      <span class="k">ELSE</span>
<a name="ln-5390"></a><span class="k">        </span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-5391"></a>      <span class="n">ENDIF</span>
<a name="ln-5392"></a>  <span class="n">ENDIF</span> <span class="c">! End of the Air Cooled/Evap Cooled Logic block</span>
<a name="ln-5393"></a>
<a name="ln-5394"></a>  <span class="c">! If not air or evap cooled then set to the condenser node that is attached to a cooling tower</span>
<a name="ln-5395"></a>  <span class="n">CondInletTemp</span>  <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-5396"></a>
<a name="ln-5397"></a>        <span class="c">!Set mass flow rates</span>
<a name="ln-5398"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5399"></a><span class="k">    </span><span class="n">CondMassFlowRate</span> <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondMassFlowRateMax</span>
<a name="ln-5400"></a>    <span class="k">CALL </span><span class="n">SetComponentFlowRate</span><span class="p">(</span><span class="n">CondMassFlowRate</span><span class="p">,</span> <span class="n">CondInletNode</span><span class="p">,</span> <span class="n">CondOutletNode</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5401"></a>                              <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5402"></a>                              <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5403"></a>                              <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDBranchNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5404"></a>                              <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDCompNum</span><span class="p">)</span>
<a name="ln-5405"></a>    <span class="k">CALL </span><span class="n">PullCompInterconnectTrigger</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5406"></a>                                     <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5407"></a>                                     <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5408"></a>                                     <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5409"></a>                                     <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondMassFlowIndex</span><span class="p">,</span>              <span class="p">&amp;</span>
<a name="ln-5410"></a>                                     <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5411"></a>                                     <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-5412"></a>                                     <span class="n">CriteriaType_MassFlowRate</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5413"></a>                                     <span class="n">CondMassFlowRate</span><span class="p">)</span>
<a name="ln-5414"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">CondMassFlowRate</span> <span class="o">&lt;</span> <span class="n">MassFlowTolerance</span><span class="p">)</span> <span class="k">RETURN</span>
<a name="ln-5415"></a>
<a name="ln-5416"></a><span class="k">  END IF</span>
<a name="ln-5417"></a>
<a name="ln-5418"></a>  <span class="c">!  LOAD LOCAL VARIABLES FROM DATA STRUCTURE (for code readability)</span>
<a name="ln-5419"></a>  <span class="n">CapacityRat</span>        <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">CapRatCoef</span>
<a name="ln-5420"></a>  <span class="n">PowerRat</span>           <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">PowerRatCoef</span>
<a name="ln-5421"></a>  <span class="n">FullLoadFactor</span>     <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FullLoadCoef</span>
<a name="ln-5422"></a>  <span class="n">MinPartLoadRat</span>     <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">MinPartLoadRat</span>
<a name="ln-5423"></a>  <span class="n">MaxPartLoadRat</span>     <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">MaxPartLoadRat</span>
<a name="ln-5424"></a>  <span class="n">TempCondInDesign</span>   <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempDesCondIn</span>
<a name="ln-5425"></a>  <span class="n">TempRiseRat</span>        <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempRiseCoef</span>
<a name="ln-5426"></a>  <span class="n">TempEvapOutDesign</span>  <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempDesEvapOut</span>
<a name="ln-5427"></a>  <span class="n">ChillerNomCap</span>      <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span>
<a name="ln-5428"></a>  <span class="n">COP</span>                <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">COP</span>
<a name="ln-5429"></a>  <span class="n">TempCondIn</span>         <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-5430"></a>  <span class="n">TempEvapOut</span>        <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-5431"></a>  <span class="n">TempLowLimitEout</span>   <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempLowLimitEvapOut</span>
<a name="ln-5432"></a>  <span class="n">MaxExhaustperPowerOutput</span>  <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">MaxExhaustperPowerOutput</span>
<a name="ln-5433"></a>  <span class="n">LoopNum</span>            <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span>
<a name="ln-5434"></a>  <span class="n">LoopSideNum</span>        <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span>
<a name="ln-5435"></a>  <span class="n">EvapMassFlowRateMax</span>    <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapMassFlowRateMax</span>
<a name="ln-5436"></a>
<a name="ln-5437"></a><span class="c">!*********************************</span>
<a name="ln-5438"></a>
<a name="ln-5439"></a>
<a name="ln-5440"></a>  <span class="c">!Calculate chiller performance from this set of performance equations.</span>
<a name="ln-5441"></a>  <span class="c">!  from BLAST...Z=(TECONDW-ADJTC(1))/ADJTC(2)-(TLCHLRW-ADJTC(3))</span>
<a name="ln-5442"></a>    <span class="n">DeltaTemp</span><span class="o">=</span> <span class="p">(</span><span class="n">TempCondIn</span>   <span class="o">-</span>  <span class="n">TempCondInDesign</span><span class="p">)</span> <span class="o">/</span> <span class="n">TempRiseRat</span> <span class="p">&amp;</span>
<a name="ln-5443"></a>           <span class="o">-</span> <span class="p">(</span><span class="n">TempEvapOut</span> <span class="o">-</span>  <span class="n">TempEvapOutDesign</span><span class="p">)</span>
<a name="ln-5444"></a>
<a name="ln-5445"></a>  <span class="c">!  from BLAST...RCAV=RCAVC(1)+RCAVC(2)*Z+RCAVC(3)*Z**2</span>
<a name="ln-5446"></a>    <span class="n">AvailNomCapRat</span> <span class="o">=</span>   <span class="n">CapacityRat</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>                   <span class="p">&amp;</span>
<a name="ln-5447"></a>                     <span class="o">+</span> <span class="n">CapacityRat</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">DeltaTemp</span>       <span class="p">&amp;</span>
<a name="ln-5448"></a>                     <span class="o">+</span> <span class="n">CapacityRat</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="n">DeltaTemp</span> <span class="o">**</span> <span class="mi">2</span>
<a name="ln-5449"></a>
<a name="ln-5450"></a>    <span class="n">AvailChillerCap</span> <span class="o">=</span> <span class="n">ChillerNomCap</span><span class="o">*</span><span class="n">AvailNomCapRat</span>
<a name="ln-5451"></a>
<a name="ln-5452"></a>   <span class="c">! from BLAST...G=ADJEC(1)+ADJEC(2)*RCAV+ADJEC(3)*RCAV**2.</span>
<a name="ln-5453"></a>    <span class="n">FullLoadPowerRat</span><span class="o">=</span>   <span class="n">PowerRat</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>                         <span class="p">&amp;</span>
<a name="ln-5454"></a>                      <span class="o">+</span> <span class="n">PowerRat</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">AvailNomCapRat</span>      <span class="p">&amp;</span>
<a name="ln-5455"></a>                      <span class="o">+</span> <span class="n">PowerRat</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="n">AvailNomCapRat</span> <span class="o">**</span> <span class="mi">2</span>
<a name="ln-5456"></a>
<a name="ln-5457"></a>  <span class="c">!  from BLAST...RCLOAD=AMAX1(MINCHFR(I,IPLCTR),AMIN1(CHLRLOAD(I)/CHLROCAP(I) &amp;</span>
<a name="ln-5458"></a>  <span class="c">!         /RCAV,MAXCHFR(I,IPLCTR)))</span>
<a name="ln-5459"></a> <span class="k">IF</span> <span class="p">(</span><span class="n">AvailChillerCap</span> <span class="o">&gt;</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5460"></a><span class="k">   </span><span class="n">PartLoadRat</span> <span class="o">=</span> <span class="nb">MAX</span><span class="p">(</span><span class="n">MinPartLoadRat</span><span class="p">,</span> <span class="nb">MIN</span><span class="p">(</span><span class="nb">ABS</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">)</span><span class="o">/</span><span class="n">AvailChillerCap</span><span class="p">,</span><span class="n">MaxPartLoadRat</span><span class="p">))</span>
<a name="ln-5461"></a> <span class="n">ENDIF</span>
<a name="ln-5462"></a>   <span class="c">! from BLAST...RPOWER=RPWRC(1)+RPWRC(2)*RCLOAD+RPWRC(3)*RCLOAD**2</span>
<a name="ln-5463"></a>    <span class="n">FracFullLoadPower</span> <span class="o">=</span> <span class="n">FullLoadFactor</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>                      <span class="p">&amp;</span>
<a name="ln-5464"></a>                      <span class="o">+</span> <span class="n">FullLoadFactor</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">PartLoadRat</span>      <span class="p">&amp;</span>
<a name="ln-5465"></a>                      <span class="o">+</span> <span class="n">FullLoadFactor</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="n">PartLoadRat</span> <span class="o">**</span> <span class="mi">2</span>
<a name="ln-5466"></a>
<a name="ln-5467"></a> <span class="k">IF</span> <span class="p">(</span><span class="n">AvailChillerCap</span> <span class="o">&gt;</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5468"></a><span class="k">   IF</span><span class="p">(</span><span class="nb">ABS</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">)</span><span class="o">/</span><span class="n">AvailChillerCap</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="n">MinPartLoadRat</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5469"></a><span class="k">     </span><span class="n">OperPartLoadRat</span> <span class="o">=</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">)</span><span class="o">/</span><span class="n">AvailChillerCap</span>
<a name="ln-5470"></a>   <span class="k">ELSE</span>
<a name="ln-5471"></a><span class="k">     </span><span class="n">OperPartLoadRat</span> <span class="o">=</span> <span class="n">PartLoadRat</span>
<a name="ln-5472"></a>   <span class="k">END IF</span>
<a name="ln-5473"></a><span class="k"> ELSE</span>
<a name="ln-5474"></a><span class="k">   </span><span class="n">OperPartLoadRat</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5475"></a> <span class="n">ENDIF</span>
<a name="ln-5476"></a><span class="c">!*********************************</span>
<a name="ln-5477"></a>  <span class="n">Cp</span> <span class="o">=</span> <span class="n">GetSpecificHeatGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-5478"></a>                         <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span><span class="p">,</span>                      <span class="p">&amp;</span>
<a name="ln-5479"></a>                         <span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5480"></a>                         <span class="s1">&#39;CalcEngineDrivenChillerModel&#39;</span><span class="p">)</span>
<a name="ln-5481"></a>
<a name="ln-5482"></a>  <span class="c">! If FlowLock is True, the new resolved mdot is used to update Power, QEvap, Qcond, and</span>
<a name="ln-5483"></a>  <span class="c">! condenser side outlet temperature.</span>
<a name="ln-5484"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">LoopNum</span><span class="p">)%</span><span class="n">LoopSide</span><span class="p">(</span><span class="n">LoopSideNum</span><span class="p">)%</span><span class="n">FlowLock</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5485"></a><span class="k">    </span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PossibleSubCooling</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-5486"></a>    <span class="n">QEvaporator</span> <span class="o">=</span> <span class="n">AvailChillerCap</span> <span class="o">*</span> <span class="n">OperPartLoadRat</span>
<a name="ln-5487"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">OperPartLoadRat</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="n">MinPartLoadRat</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5488"></a><span class="k">     </span><span class="n">FRAC</span> <span class="o">=</span> <span class="nb">MIN</span><span class="p">(</span><span class="mf">1.0d0</span><span class="p">,(</span><span class="n">OperPartLoadRat</span><span class="o">/</span><span class="n">MinPartLoadRat</span><span class="p">))</span>
<a name="ln-5489"></a>    <span class="k">ELSE</span>
<a name="ln-5490"></a><span class="k">     </span><span class="n">FRAC</span> <span class="o">=</span> <span class="mf">1.0d0</span>
<a name="ln-5491"></a>    <span class="k">END IF</span>
<a name="ln-5492"></a><span class="k">    </span><span class="n">Power</span> <span class="o">=</span> <span class="n">FracFullLoadPower</span> <span class="o">*</span> <span class="n">FullLoadPowerRat</span> <span class="o">*</span> <span class="n">AvailChillerCap</span><span class="o">/</span><span class="n">COP</span> <span class="o">*</span> <span class="n">FRAC</span>
<a name="ln-5493"></a>
<a name="ln-5494"></a>    <span class="c">! Either set the flow to the Constant value or caluclate the flow for the variable volume</span>
<a name="ln-5495"></a>    <span class="k">If</span> <span class="p">((</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">ConstantFlow</span><span class="p">)</span>  <span class="p">&amp;</span>
<a name="ln-5496"></a>        <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">NotModulated</span><span class="p">))</span> <span class="k">THEN</span>
<a name="ln-5497"></a>      <span class="c">! Start by assuming max (design) flow</span>
<a name="ln-5498"></a>      <span class="n">EvapMassFlowRate</span> <span class="o">=</span> <span class="n">EvapMassFlowRateMax</span>
<a name="ln-5499"></a>      <span class="c">! Use SetComponentFlowRate to decide actual flow</span>
<a name="ln-5500"></a>      <span class="k">Call </span><span class="n">SetComponentFlowRate</span><span class="p">(</span> <span class="n">EvapMassFlowRate</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-5501"></a>                          <span class="n">EvapInletNode</span> <span class="p">,</span> <span class="n">EvapOutletNode</span>  <span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5502"></a>                          <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-5503"></a>                          <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5504"></a>                          <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-5505"></a>                          <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)</span>
<a name="ln-5506"></a>      <span class="c">! Evaluate delta temp based on actual flow rate</span>
<a name="ln-5507"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">EvapMassFlowRate</span> <span class="o">/=</span> <span class="mf">0.0D0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5508"></a><span class="k">        </span><span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">QEvaporator</span><span class="o">/</span><span class="n">EvapMassFlowRate</span><span class="o">/</span><span class="n">Cp</span>
<a name="ln-5509"></a>      <span class="k">ELSE</span>
<a name="ln-5510"></a><span class="k">        </span><span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="mf">0.0D0</span>
<a name="ln-5511"></a>      <span class="n">ENDIF</span>
<a name="ln-5512"></a>      <span class="c">! Evaluate outlet temp based on delta</span>
<a name="ln-5513"></a>      <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapDeltaTemp</span>
<a name="ln-5514"></a>
<a name="ln-5515"></a>    <span class="k">ELSE IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">LeavingSetpointModulated</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5516"></a>
<a name="ln-5517"></a>      <span class="c">! Calculate the Delta Temp from the inlet temp to the chiller outlet setpoint</span>
<a name="ln-5518"></a>      <span class="k">SELECT CASE</span> <span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">LoopDemandCalcScheme</span><span class="p">)</span>
<a name="ln-5519"></a>      <span class="k">CASE</span> <span class="p">(</span><span class="n">SingleSetpoint</span><span class="p">)</span>
<a name="ln-5520"></a>        <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPoint</span>
<a name="ln-5521"></a>      <span class="k">CASE</span> <span class="p">(</span><span class="n">DualSetpointDeadband</span><span class="p">)</span>
<a name="ln-5522"></a>        <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPointHi</span>
<a name="ln-5523"></a>      <span class="k">END SELECT</span>
<a name="ln-5524"></a>
<a name="ln-5525"></a><span class="k">      IF</span> <span class="p">(</span><span class="n">EvapDeltaTemp</span> <span class="o">/=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5526"></a><span class="k">        </span><span class="n">EvapMassFlowRate</span> <span class="o">=</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">QEvaporator</span><span class="o">/</span><span class="n">Cp</span><span class="o">/</span><span class="n">EvapDeltaTemp</span><span class="p">)</span>
<a name="ln-5527"></a>        <span class="k">IF</span><span class="p">((</span><span class="n">EvapMassFlowRate</span> <span class="o">-</span> <span class="n">EvapMassFlowRateMax</span><span class="p">)</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="n">MassFlowTolerance</span><span class="p">)</span> <span class="p">&amp;</span>
<a name="ln-5528"></a>             <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PossibleSubCooling</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-5529"></a>        <span class="c">!Check to see if the Maximum is exceeded, if so set to maximum</span>
<a name="ln-5530"></a>        <span class="n">EvapMassFlowRate</span> <span class="o">=</span> <span class="nb">MIN</span><span class="p">(</span><span class="n">EvapMassFlowRateMax</span><span class="p">,</span> <span class="n">EvapMassFlowRate</span><span class="p">)</span>
<a name="ln-5531"></a>        <span class="c">! Use SetComponentFlowRate to decide actual flow</span>
<a name="ln-5532"></a>        <span class="k">Call </span><span class="n">SetComponentFlowRate</span><span class="p">(</span> <span class="n">EvapMassFlowRate</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-5533"></a>                          <span class="n">EvapInletNode</span> <span class="p">,</span> <span class="n">EvapOutletNode</span>  <span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5534"></a>                          <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-5535"></a>                          <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5536"></a>                          <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-5537"></a>                          <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)</span>
<a name="ln-5538"></a>        <span class="k">SELECT CASE</span> <span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">LoopDemandCalcScheme</span><span class="p">)</span>
<a name="ln-5539"></a>        <span class="k">CASE</span> <span class="p">(</span><span class="n">SingleSetpoint</span><span class="p">)</span>
<a name="ln-5540"></a>          <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPoint</span>
<a name="ln-5541"></a>        <span class="k">CASE</span> <span class="p">(</span><span class="n">DualSetpointDeadband</span><span class="p">)</span>
<a name="ln-5542"></a>          <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPointHi</span>
<a name="ln-5543"></a>        <span class="k">END SELECT</span>
<a name="ln-5544"></a><span class="k">      ELSE</span>
<a name="ln-5545"></a>        <span class="c">! Try to request zero flow</span>
<a name="ln-5546"></a>        <span class="n">EvapMassFlowRate</span><span class="o">=</span><span class="mf">0.0d0</span>
<a name="ln-5547"></a>        <span class="c">! Use SetComponentFlowRate to decide actual flow</span>
<a name="ln-5548"></a>        <span class="k">Call </span><span class="n">SetComponentFlowRate</span><span class="p">(</span> <span class="n">EvapMassFlowRate</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-5549"></a>                          <span class="n">EvapInletNode</span> <span class="p">,</span> <span class="n">EvapOutletNode</span>  <span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5550"></a>                          <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-5551"></a>                          <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5552"></a>                          <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-5553"></a>                          <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)</span>
<a name="ln-5554"></a>        <span class="c">! No deltaT since component is not running</span>
<a name="ln-5555"></a>        <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-5556"></a>
<a name="ln-5557"></a>      <span class="k">END IF</span>
<a name="ln-5558"></a><span class="k">    End If</span>  <span class="c">!End of Constant Variable Flow If Block</span>
<a name="ln-5559"></a>  <span class="k">ELSE</span>  <span class="c">! If FlowLock is True</span>
<a name="ln-5560"></a>
<a name="ln-5561"></a>    <span class="n">EvapMassFlowRate</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">MassFlowRate</span>
<a name="ln-5562"></a>    <span class="k">Call </span><span class="n">SetComponentFlowRate</span><span class="p">(</span> <span class="n">EvapMassFlowRate</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-5563"></a>                              <span class="n">EvapInletNode</span> <span class="p">,</span> <span class="n">EvapOutletNode</span>  <span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5564"></a>                              <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-5565"></a>                              <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5566"></a>                              <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-5567"></a>                              <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)</span>
<a name="ln-5568"></a>    <span class="c">! Some other component set the flow to 0. No reason to continue with calculations.</span>
<a name="ln-5569"></a>    <span class="k">IF</span><span class="p">(</span><span class="n">EvapMassFlowRate</span> <span class="o">==</span> <span class="mf">0.0d0</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-5570"></a><span class="k">      </span><span class="n">MyLoad</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5571"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5572"></a><span class="k">        CALL </span><span class="n">CalcBasinHeaterPower</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPowerFTempDiff</span><span class="p">,&amp;</span>
<a name="ln-5573"></a>                            <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSchedulePtr</span><span class="p">,&amp;</span>
<a name="ln-5574"></a>                            <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSetPointTemp</span><span class="p">,</span><span class="n">BasinHeaterPower</span><span class="p">)</span>
<a name="ln-5575"></a>      <span class="n">ENDIF</span>
<a name="ln-5576"></a>      <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-5577"></a>      <span class="k">RETURN</span>
<a name="ln-5578"></a><span class="k">    END IF</span>
<a name="ln-5579"></a>
<a name="ln-5580"></a><span class="k">    IF</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PossibleSubCooling</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5581"></a><span class="k">      </span><span class="n">QEvaporator</span> <span class="o">=</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">)</span>
<a name="ln-5582"></a>      <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">QEvaporator</span><span class="o">/</span><span class="n">EvapMassFlowRate</span><span class="o">/</span><span class="n">Cp</span>
<a name="ln-5583"></a>      <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapDeltaTemp</span>
<a name="ln-5584"></a>      <span class="k">IF</span><span class="p">(</span><span class="n">EvapOutletTemp</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempMin</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5585"></a><span class="k">        </span><span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempMin</span>
<a name="ln-5586"></a>        <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapOutletTemp</span>
<a name="ln-5587"></a>        <span class="n">QEvaporator</span> <span class="o">=</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">EvapMassFlowRate</span><span class="o">*</span><span class="n">Cp</span><span class="o">*</span><span class="n">EvapDeltaTemp</span><span class="p">)</span>
<a name="ln-5588"></a>      <span class="k">END IF</span>
<a name="ln-5589"></a><span class="k">    ELSE</span> <span class="c">!No subcooling in this case.No recalculation required.Still need to check chiller low temp limit</span>
<a name="ln-5590"></a>
<a name="ln-5591"></a>      <span class="k">SELECT CASE</span> <span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">LoopNum</span><span class="p">)%</span><span class="n">LoopDemandCalcScheme</span><span class="p">)</span>
<a name="ln-5592"></a>      <span class="k">CASE</span> <span class="p">(</span><span class="n">SingleSetpoint</span><span class="p">)</span>
<a name="ln-5593"></a>        <span class="k">IF</span> <span class="p">((</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">LeavingSetpointModulated</span><span class="p">)</span> <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-5594"></a>            <span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">LoopNum</span><span class="p">)%</span><span class="n">LoopSide</span><span class="p">(</span><span class="n">LoopSideNum</span><span class="p">)%</span><span class="n">Branch</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">)</span> <span class="p">&amp;</span>
<a name="ln-5595"></a>              <span class="p">%</span><span class="n">Comp</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)%</span><span class="n">CurOpSchemeType</span> <span class="p">&amp;</span>
<a name="ln-5596"></a>                 <span class="o">==</span> <span class="n">CompSetPtBasedSchemeType</span><span class="p">)</span>          <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-5597"></a>            <span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPoint</span> <span class="o">/=</span> <span class="n">SensedNodeFlagValue</span><span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5598"></a><span class="k">          </span><span class="n">TempEvapOutSetpoint</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPoint</span>
<a name="ln-5599"></a>        <span class="k">ELSE</span>
<a name="ln-5600"></a><span class="k">          </span><span class="n">TempEvapOutSetpoint</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">LoopNum</span><span class="p">)%</span><span class="n">TempSetPointNodeNum</span><span class="p">)%</span><span class="n">TempSetPoint</span>
<a name="ln-5601"></a>        <span class="n">ENDIF</span>
<a name="ln-5602"></a>      <span class="k">CASE</span> <span class="p">(</span><span class="n">DualSetpointDeadband</span><span class="p">)</span>
<a name="ln-5603"></a>        <span class="k">IF</span> <span class="p">((</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">LeavingSetpointModulated</span><span class="p">)</span> <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-5604"></a>            <span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">LoopNum</span><span class="p">)%</span><span class="n">LoopSide</span><span class="p">(</span><span class="n">LoopSideNum</span><span class="p">)%</span><span class="n">Branch</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">)</span> <span class="p">&amp;</span>
<a name="ln-5605"></a>              <span class="p">%</span><span class="n">Comp</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)%</span><span class="n">CurOpSchemeType</span> <span class="p">&amp;</span>
<a name="ln-5606"></a>                 <span class="o">==</span> <span class="n">CompSetPtBasedSchemeType</span><span class="p">)</span>          <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-5607"></a>            <span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPointHi</span> <span class="o">/=</span> <span class="n">SensedNodeFlagValue</span><span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5608"></a><span class="k">          </span><span class="n">TempEvapOutSetpoint</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPointHi</span>
<a name="ln-5609"></a>        <span class="k">ELSE</span>
<a name="ln-5610"></a><span class="k">          </span><span class="n">TempEvapOutSetpoint</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">LoopNum</span><span class="p">)%</span><span class="n">TempSetPointNodeNum</span><span class="p">)%</span><span class="n">TempSetPointHi</span>
<a name="ln-5611"></a>        <span class="n">ENDIF</span>
<a name="ln-5612"></a>      <span class="k">END SELECT</span>
<a name="ln-5613"></a><span class="k">      </span><span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">TempEvapOutSetpoint</span>
<a name="ln-5614"></a>      <span class="n">QEvaporator</span> <span class="o">=</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">EvapMassFlowRate</span><span class="o">*</span><span class="n">Cp</span><span class="o">*</span><span class="n">EvapDeltaTemp</span><span class="p">)</span>
<a name="ln-5615"></a>      <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">TempEvapOutSetpoint</span>
<a name="ln-5616"></a>    <span class="k">END IF</span>
<a name="ln-5617"></a>    <span class="c">!Check that the Evap outlet temp honors both plant loop temp low limit and also the chiller low limit</span>
<a name="ln-5618"></a>    <span class="k">IF</span><span class="p">(</span><span class="n">EvapOutletTemp</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="n">TempLowLimitEout</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5619"></a><span class="k">      IF</span><span class="p">((</span><span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">TempLowLimitEout</span><span class="p">)</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="n">DeltaTemptol</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5620"></a><span class="k">        </span><span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">TempLowLimitEout</span>
<a name="ln-5621"></a>        <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapOutletTemp</span>
<a name="ln-5622"></a>        <span class="n">QEvaporator</span> <span class="o">=</span> <span class="n">EvapMassFlowRate</span><span class="o">*</span><span class="n">Cp</span><span class="o">*</span><span class="n">EvapDeltaTemp</span>
<a name="ln-5623"></a>      <span class="k">ELSE</span>
<a name="ln-5624"></a><span class="k">        </span><span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-5625"></a>        <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapOutletTemp</span>
<a name="ln-5626"></a>        <span class="n">QEvaporator</span> <span class="o">=</span> <span class="n">EvapMassFlowRate</span><span class="o">*</span><span class="n">Cp</span><span class="o">*</span><span class="n">EvapDeltaTemp</span>
<a name="ln-5627"></a>      <span class="k">END IF</span>
<a name="ln-5628"></a><span class="k">    END IF</span>
<a name="ln-5629"></a><span class="k">    IF</span><span class="p">(</span><span class="n">EvapOutletTemp</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempMin</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5630"></a><span class="k">      IF</span><span class="p">((</span><span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempMin</span><span class="p">)</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="n">DeltaTemptol</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5631"></a><span class="k">        </span><span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempMin</span>
<a name="ln-5632"></a>        <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapOutletTemp</span>
<a name="ln-5633"></a>        <span class="n">QEvaporator</span> <span class="o">=</span> <span class="n">EvapMassFlowRate</span><span class="o">*</span><span class="n">Cp</span><span class="o">*</span><span class="n">EvapDeltaTemp</span>
<a name="ln-5634"></a>      <span class="k">ELSE</span>
<a name="ln-5635"></a><span class="k">        </span><span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-5636"></a>        <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapOutletTemp</span>
<a name="ln-5637"></a>        <span class="n">QEvaporator</span> <span class="o">=</span> <span class="n">EvapMassFlowRate</span><span class="o">*</span><span class="n">Cp</span><span class="o">*</span><span class="n">EvapDeltaTemp</span>
<a name="ln-5638"></a>      <span class="k">END IF</span>
<a name="ln-5639"></a><span class="k">    END IF</span>
<a name="ln-5640"></a>    <span class="c">! If load exceeds the distributed load set to the distributed load</span>
<a name="ln-5641"></a>    <span class="k">If</span><span class="p">(</span><span class="n">QEvaporator</span> <span class="o">&gt;</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">))</span> <span class="k">Then</span>
<a name="ln-5642"></a><span class="k">      If</span><span class="p">(</span><span class="n">EvapMassFlowRate</span> <span class="o">&gt;</span> <span class="n">MassFlowTolerance</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5643"></a><span class="k">        </span><span class="n">QEvaporator</span> <span class="o">=</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">)</span>
<a name="ln-5644"></a>        <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">QEvaporator</span><span class="o">/</span><span class="n">EvapMassFlowRate</span><span class="o">/</span><span class="n">Cp</span>
<a name="ln-5645"></a>        <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapDeltaTemp</span>
<a name="ln-5646"></a>      <span class="k">Else</span>
<a name="ln-5647"></a><span class="k">        </span><span class="n">QEvaporator</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5648"></a>        <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-5649"></a>      <span class="k">End If</span>
<a name="ln-5650"></a><span class="k">    End IF</span>
<a name="ln-5651"></a>
<a name="ln-5652"></a>    <span class="c">! Checks QEvaporator on the basis of the machine limits.</span>
<a name="ln-5653"></a>    <span class="k">If</span><span class="p">(</span><span class="n">QEvaporator</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">AvailChillerCap</span> <span class="o">*</span> <span class="n">MaxPartLoadRat</span><span class="p">))</span><span class="k">Then</span>
<a name="ln-5654"></a><span class="k">      If</span><span class="p">(</span><span class="n">EvapMassFlowRate</span> <span class="o">&gt;</span> <span class="n">MassFlowTolerance</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5655"></a><span class="k">        </span><span class="n">QEvaporator</span> <span class="o">=</span> <span class="n">AvailChillerCap</span> <span class="o">*</span> <span class="n">OperPartLoadRat</span>
<a name="ln-5656"></a>        <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">QEvaporator</span><span class="o">/</span><span class="n">EvapMassFlowRate</span><span class="o">/</span><span class="n">Cp</span>
<a name="ln-5657"></a>        <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapDeltaTemp</span>
<a name="ln-5658"></a>      <span class="k">Else</span>
<a name="ln-5659"></a><span class="k">        </span><span class="n">QEvaporator</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5660"></a>        <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-5661"></a>      <span class="k">End If</span>
<a name="ln-5662"></a><span class="k">    End If</span>
<a name="ln-5663"></a>
<a name="ln-5664"></a><span class="k">   IF</span> <span class="p">(</span><span class="n">OperPartLoadRat</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="n">MinPartLoadRat</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5665"></a><span class="k">     </span><span class="n">FRAC</span> <span class="o">=</span> <span class="nb">MIN</span><span class="p">(</span><span class="mf">1.0d0</span><span class="p">,(</span><span class="n">OperPartLoadRat</span><span class="o">/</span><span class="n">MinPartLoadRat</span><span class="p">))</span>
<a name="ln-5666"></a>   <span class="k">ELSE</span>
<a name="ln-5667"></a><span class="k">     </span><span class="n">FRAC</span> <span class="o">=</span> <span class="mf">1.0d0</span>
<a name="ln-5668"></a>   <span class="k">END IF</span>
<a name="ln-5669"></a>
<a name="ln-5670"></a>  <span class="c">! set the module level variable used for reporting FRAC</span>
<a name="ln-5671"></a>   <span class="n">ChillerCyclingRatio</span> <span class="o">=</span> <span class="n">FRAC</span>
<a name="ln-5672"></a>
<a name="ln-5673"></a>  <span class="c">! Chiller is false loading below PLR = minimum unloading ratio, find PLR used for energy calculation</span>
<a name="ln-5674"></a>    <span class="n">Power</span> <span class="o">=</span> <span class="n">FracFullLoadPower</span> <span class="o">*</span> <span class="n">FullLoadPowerRat</span> <span class="o">*</span> <span class="n">AvailChillerCap</span> <span class="o">/</span><span class="n">COP</span> <span class="o">*</span> <span class="n">FRAC</span>
<a name="ln-5675"></a>
<a name="ln-5676"></a>    <span class="k">IF</span><span class="p">(</span><span class="n">EvapMassFlowRate</span> <span class="o">==</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5677"></a><span class="k">      </span><span class="n">QEvaporator</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5678"></a>      <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-5679"></a>      <span class="n">Power</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5680"></a>      <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-5681"></a>    <span class="k">END IF</span>
<a name="ln-5682"></a><span class="k">    IF</span><span class="p">(</span><span class="n">QEvaporator</span> <span class="o">==</span> <span class="mf">0.0d0</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5683"></a><span class="k">      CALL </span><span class="n">CalcBasinHeaterPower</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPowerFTempDiff</span><span class="p">,&amp;</span>
<a name="ln-5684"></a>                                <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSchedulePtr</span><span class="p">,&amp;</span>
<a name="ln-5685"></a>                                <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSetPointTemp</span><span class="p">,</span><span class="n">BasinHeaterPower</span><span class="p">)</span>
<a name="ln-5686"></a>    <span class="k">END IF</span>
<a name="ln-5687"></a><span class="k">  END IF</span>  <span class="c">!This is the end of the FlowLock Block</span>
<a name="ln-5688"></a>
<a name="ln-5689"></a>
<a name="ln-5690"></a><span class="c">!Now determine Cooling</span>
<a name="ln-5691"></a>    <span class="c">!QCondenser is calculated the same for each type, but the power consumption should be different</span>
<a name="ln-5692"></a>    <span class="c">!  depending on the performance coefficients used for the chiller model.</span>
<a name="ln-5693"></a>  <span class="n">QCondenser</span> <span class="o">=</span> <span class="n">Power</span> <span class="o">+</span> <span class="n">QEvaporator</span>
<a name="ln-5694"></a>
<a name="ln-5695"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5696"></a>
<a name="ln-5697"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">CondMassFlowRate</span> <span class="o">&gt;</span> <span class="n">MassFlowTolerance</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5698"></a><span class="k">      </span><span class="n">CpCond</span> <span class="o">=</span> <span class="n">GetSpecificHeatGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-5699"></a>                                         <span class="n">CondInletTemp</span><span class="p">,</span>                      <span class="p">&amp;</span>
<a name="ln-5700"></a>                                         <span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5701"></a>                                         <span class="s1">&#39;CalcEngineDrivenChillerModel&#39;</span><span class="p">)</span>
<a name="ln-5702"></a>      <span class="n">CondOutletTemp</span> <span class="o">=</span> <span class="n">QCondenser</span><span class="o">/</span><span class="n">CondMassFlowRate</span><span class="o">/</span><span class="n">CpCond</span> <span class="o">+</span> <span class="n">CondInletTemp</span>
<a name="ln-5703"></a>    <span class="k">ELSE</span>
<a name="ln-5704"></a><span class="k">      CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;CalcEngineDrivenChillerModel: Condenser flow = 0, for EngineDrivenChiller=&#39;</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-5705"></a>                           <span class="nb">TRIM</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">))</span>
<a name="ln-5706"></a>      <span class="k">CALL </span><span class="n">ShowContinueErrorTimeStamp</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<a name="ln-5707"></a>    <span class="k">END IF</span>
<a name="ln-5708"></a>
<a name="ln-5709"></a><span class="k">  ELSE</span> <span class="c">!Air Cooled or Evap Cooled</span>
<a name="ln-5710"></a>
<a name="ln-5711"></a>    <span class="c">!don&#39;t care about outlet temp for Air-Cooled or Evap Cooled</span>
<a name="ln-5712"></a>    <span class="n">CondOutletTemp</span> <span class="o">=</span> <span class="n">CondInletTemp</span>
<a name="ln-5713"></a>  <span class="k">END IF</span>
<a name="ln-5714"></a>
<a name="ln-5715"></a><span class="c">! EngineDriven Portion of the Engine Driven Chiller:</span>
<a name="ln-5716"></a>
<a name="ln-5717"></a><span class="c">!DETERMINE FUEL CONSUMED AND AVAILABLE WASTE HEAT</span>
<a name="ln-5718"></a>
<a name="ln-5719"></a><span class="c">!Use Curve fit to determine Fuel Energy Input.  For electric power generated in Watts, the fuel</span>
<a name="ln-5720"></a><span class="c">!energy input is calculated in J/s.  The PLBasedFuelInputCurve selects ratio of fuel flow (J/s)/cooling load (J/s).</span>
<a name="ln-5721"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">PartLoadRat</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-5722"></a><span class="k">    </span><span class="n">EngineDrivenFuelEnergy</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5723"></a>  <span class="k">ELSE</span>
<a name="ln-5724"></a><span class="k">    </span><span class="n">PartLoadRat</span> <span class="o">=</span> <span class="nb">MAX</span><span class="p">(</span><span class="n">MinPartLoadRat</span><span class="p">,</span><span class="n">PartLoadRat</span><span class="p">)</span>
<a name="ln-5725"></a>    <span class="n">ClngLoadFuelRat</span> <span class="o">=</span> <span class="n">CurveValue</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">ClngLoadtoFuelCurve</span><span class="p">,</span> <span class="n">PartLoadRat</span><span class="p">)</span>
<a name="ln-5726"></a>    <span class="n">EngineDrivenFuelEnergy</span> <span class="o">=</span> <span class="n">QEvaporator</span> <span class="o">/</span> <span class="n">ClngLoadFuelRat</span>
<a name="ln-5727"></a>  <span class="k">END IF</span>
<a name="ln-5728"></a><span class="c">!Use Curve fit to determine energy recovered in the water jacket.  This curve calculates the water jacket energy recovered (J/s) by</span>
<a name="ln-5729"></a><span class="c">!multiplying the total fuel input (J/s) by the fraction of that power that could be recovered in the water jacket at that</span>
<a name="ln-5730"></a><span class="c">!particular part load.</span>
<a name="ln-5731"></a>
<a name="ln-5732"></a>  <span class="n">RecJacHeattoFuelRat</span> <span class="o">=</span> <span class="n">CurveValue</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">RecJacHeattoFuelCurve</span><span class="p">,</span> <span class="n">PartLoadRat</span><span class="p">)</span>
<a name="ln-5733"></a>  <span class="n">QJacketRecovered</span> <span class="o">=</span> <span class="n">EngineDrivenFuelEnergy</span> <span class="o">*</span> <span class="n">RecJacHeattoFuelRat</span>
<a name="ln-5734"></a>
<a name="ln-5735"></a><span class="c">!Use Curve fit to determine Heat Recovered Lubricant Energy.  This curve calculates the lube energy recovered (J/s) by</span>
<a name="ln-5736"></a><span class="c">!multiplying the total fuel input (J/s) by the fraction of that power that could be recovered in the lube oil at that</span>
<a name="ln-5737"></a><span class="c">!particular part load.</span>
<a name="ln-5738"></a>  <span class="n">RecLubeHeattoFuelRat</span> <span class="o">=</span> <span class="n">CurveValue</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">RecLubeHeattoFuelCurve</span><span class="p">,</span> <span class="n">PartLoadRat</span><span class="p">)</span>
<a name="ln-5739"></a>  <span class="n">QLubeOilRecovered</span> <span class="o">=</span> <span class="n">EngineDrivenFuelEnergy</span> <span class="o">*</span> <span class="n">RecLubeHeattoFuelRat</span>
<a name="ln-5740"></a>
<a name="ln-5741"></a><span class="c">!Use Curve fit to determine Heat Recovered from the exhaust.  This curve calculates the  energy recovered (J/s) by</span>
<a name="ln-5742"></a><span class="c">!multiplying the total fuel input (J/s) by the fraction of that power that could be recovered in the exhaust at that</span>
<a name="ln-5743"></a><span class="c">!particular part load.</span>
<a name="ln-5744"></a>  <span class="n">TotExhausttoFuelRat</span> <span class="o">=</span> <span class="n">CurveValue</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TotExhausttoFuelCurve</span><span class="p">,</span> <span class="n">PartLoadRat</span><span class="p">)</span>
<a name="ln-5745"></a>  <span class="n">TotalExhaustEnergy</span> <span class="o">=</span> <span class="n">EngineDrivenFuelEnergy</span> <span class="o">*</span> <span class="n">TotExhausttoFuelRat</span>
<a name="ln-5746"></a>
<a name="ln-5747"></a>
<a name="ln-5748"></a><span class="c">!Use Curve fit to determine Exhaust Temperature in C.  The temperature is simply a curve fit</span>
<a name="ln-5749"></a><span class="c">!of the exhaust temperature in C to the part load ratio.</span>
<a name="ln-5750"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">PartLoadRat</span> <span class="o">/=</span> <span class="mi">0</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-5751"></a><span class="k">    </span><span class="n">ExhaustTemp</span> <span class="o">=</span> <span class="n">CurveValue</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">ExhaustTempCurve</span><span class="p">,</span> <span class="n">PartLoadRat</span><span class="p">)</span>
<a name="ln-5752"></a>    <span class="n">ExhaustGasFlow</span> <span class="o">=</span> <span class="n">TotalExhaustEnergy</span> <span class="o">/</span> <span class="p">(</span><span class="n">ExhaustCP</span><span class="o">*</span><span class="p">(</span><span class="n">ExhaustTemp</span><span class="o">-</span><span class="n">ReferenceTemp</span><span class="p">))</span>
<a name="ln-5753"></a>
<a name="ln-5754"></a>
<a name="ln-5755"></a><span class="c">!Use Curve fit to determine stack temp after heat recovery</span>
<a name="ln-5756"></a>    <span class="n">UA</span> <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">UACoef</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">ChillerNomCap</span> <span class="o">**</span>  <span class="p">&amp;</span>
<a name="ln-5757"></a>                   <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">UACoef</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<a name="ln-5758"></a>
<a name="ln-5759"></a>    <span class="n">DesignMinExitGasTemp</span> <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">DesignMinExitGasTemp</span>
<a name="ln-5760"></a>    <span class="n">ExhaustStackTemp</span> <span class="o">=</span> <span class="n">DesignMinExitGasTemp</span> <span class="o">+</span> <span class="p">(</span><span class="n">ExhaustTemp</span> <span class="o">-</span> <span class="n">DesignMinExitGasTemp</span><span class="p">)</span> <span class="o">/</span> <span class="p">&amp;</span>
<a name="ln-5761"></a>                         <span class="nb">EXP</span><span class="p">(</span><span class="n">UA</span><span class="o">/</span><span class="p">(</span><span class="nb">MAX</span><span class="p">(</span><span class="n">ExhaustGasFlow</span><span class="p">,</span> <span class="n">MaxExhaustperPowerOutput</span> <span class="o">*</span> <span class="n">ChillerNomCap</span><span class="p">)</span> <span class="o">*</span> <span class="n">ExhaustCP</span><span class="p">))</span>
<a name="ln-5762"></a>
<a name="ln-5763"></a>    <span class="n">QExhaustRecovered</span> <span class="o">=</span> <span class="nb">MAX</span><span class="p">(</span><span class="n">ExhaustGasFlow</span><span class="o">*</span><span class="n">ExhaustCP</span><span class="o">*</span><span class="p">(</span><span class="n">ExhaustTemp</span><span class="o">-</span><span class="n">ExhaustStackTemp</span><span class="p">),</span><span class="mf">0.0d0</span><span class="p">)</span>
<a name="ln-5764"></a>  <span class="k">ELSE</span>
<a name="ln-5765"></a><span class="k">    </span><span class="n">QExhaustRecovered</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5766"></a>  <span class="k">END IF</span>
<a name="ln-5767"></a>
<a name="ln-5768"></a>
<a name="ln-5769"></a><span class="k">  </span><span class="n">QTotalHeatRecovered</span> <span class="o">=</span> <span class="n">QExhaustRecovered</span> <span class="o">+</span> <span class="n">QLubeOilRecovered</span> <span class="o">+</span> <span class="n">QJacketRecovered</span>
<a name="ln-5770"></a>
<a name="ln-5771"></a>  <span class="c">!Update Heat Recovery temperatures</span>
<a name="ln-5772"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5773"></a><span class="k">    CALL </span><span class="n">CalcEngineChillerHeatRec</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">,</span><span class="n">QTotalHeatRecovered</span><span class="p">,</span><span class="n">HeatRecRatio</span><span class="p">)</span>
<a name="ln-5774"></a>    <span class="n">QExhaustRecovered</span> <span class="o">=</span> <span class="n">QExhaustRecovered</span><span class="o">*</span><span class="n">HeatRecRatio</span>
<a name="ln-5775"></a>    <span class="n">QLubeOilRecovered</span> <span class="o">=</span> <span class="n">QLubeOilRecovered</span><span class="o">*</span><span class="n">HeatRecRatio</span>
<a name="ln-5776"></a>    <span class="n">QJacketRecovered</span>  <span class="o">=</span> <span class="n">QJacketRecovered</span><span class="o">*</span><span class="n">HeatRecRatio</span>
<a name="ln-5777"></a>
<a name="ln-5778"></a>  <span class="n">ENDIF</span>
<a name="ln-5779"></a>
<a name="ln-5780"></a>      <span class="c">!Calculate Energy</span>
<a name="ln-5781"></a>  <span class="n">CondenserEnergy</span>  <span class="o">=</span> <span class="n">QCondenser</span><span class="o">*</span><span class="n">TimeStepSys</span><span class="o">*</span><span class="n">SecInHour</span>
<a name="ln-5782"></a>  <span class="n">Energy</span>           <span class="o">=</span> <span class="n">Power</span><span class="o">*</span><span class="n">TimeStepSys</span><span class="o">*</span><span class="n">SecInHour</span>
<a name="ln-5783"></a>  <span class="n">EvaporatorEnergy</span> <span class="o">=</span> <span class="n">QEvaporator</span><span class="o">*</span><span class="n">TimeStepSys</span><span class="o">*</span><span class="n">SecInHour</span>
<a name="ln-5784"></a>  <span class="n">FuelEnergyUseRate</span> <span class="o">=</span> <span class="n">EngineDrivenFuelEnergy</span>
<a name="ln-5785"></a>  <span class="n">FuelEnergy</span>       <span class="o">=</span> <span class="n">FuelEnergyUseRate</span><span class="o">*</span><span class="n">TimeStepSys</span><span class="o">*</span><span class="n">SecInHour</span>
<a name="ln-5786"></a>  <span class="n">JacketEnergyRec</span>      <span class="o">=</span> <span class="n">QJacketRecovered</span><span class="o">*</span><span class="n">TimeStepSys</span><span class="o">*</span><span class="n">SecInHour</span>
<a name="ln-5787"></a>  <span class="n">LubeOilEnergyRec</span>     <span class="o">=</span> <span class="n">QLubeOilRecovered</span><span class="o">*</span><span class="n">TimeStepSys</span><span class="o">*</span><span class="n">SecInHour</span>
<a name="ln-5788"></a>  <span class="n">ExhaustEnergyRec</span>     <span class="o">=</span> <span class="n">QExhaustRecovered</span><span class="o">*</span><span class="n">TimeStepSys</span><span class="o">*</span><span class="n">SecInHour</span>
<a name="ln-5789"></a>  <span class="n">QTotalHeatRecovered</span> <span class="o">=</span> <span class="n">QExhaustRecovered</span> <span class="o">+</span> <span class="n">QLubeOilRecovered</span> <span class="o">+</span> <span class="n">QJacketRecovered</span>
<a name="ln-5790"></a>  <span class="n">TotalHeatEnergyRec</span>  <span class="o">=</span> <span class="n">ExhaustEnergyRec</span> <span class="o">+</span> <span class="n">LubeOilEnergyRec</span> <span class="o">+</span> <span class="n">JacketEnergyRec</span>
<a name="ln-5791"></a>  <span class="n">FuelEnergyUseRate</span>   <span class="o">=</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">FuelEnergyUseRate</span><span class="p">)</span>
<a name="ln-5792"></a>  <span class="n">FuelEnergy</span>          <span class="o">=</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">FuelEnergy</span><span class="p">)</span>
<a name="ln-5793"></a>  <span class="n">FuelMdot</span>      <span class="o">=</span>  <span class="nb">ABS</span><span class="p">(</span><span class="n">FuelEnergyUseRate</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelHeatingValue</span> <span class="o">*</span> <span class="n">KJtoJ</span><span class="p">)</span>
<a name="ln-5794"></a>
<a name="ln-5795"></a> <span class="c">!check for problems BG 9/12/06 (deal with observed negative energy results)</span>
<a name="ln-5796"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">Energy</span> <span class="o">&lt;</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">then</span>  <span class="c">! there is a serious problem</span>
<a name="ln-5797"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5798"></a>     <span class="c">! first check for run away condenser loop temps (only reason yet to be observed for this?)</span>
<a name="ln-5799"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">CondInletTemp</span> <span class="o">&gt;</span> <span class="mi">7</span><span class="mf">0.0d0</span> <span class="p">)</span>  <span class="k">then</span>
<a name="ln-5800"></a><span class="k">        CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;CalcEngineDrivenChillerModel: Condenser loop inlet temperatures &#39;</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-5801"></a>           <span class="s1">&#39;&gt; 70.0 C for EngineDrivenChiller=&#39;</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-5802"></a>           <span class="nb">TRIM</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">))</span>
<a name="ln-5803"></a>        <span class="k">CALL </span><span class="n">ShowContinueErrorTimeStamp</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<a name="ln-5804"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Condenser loop water temperatures are too high at&#39;</span><span class="o">//</span><span class="nb">trim</span><span class="p">(</span><span class="n">RoundSigDigits</span><span class="p">(</span><span class="n">CondInletTemp</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span> <span class="p">)</span>
<a name="ln-5805"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Check input for condenser plant loop, especially cooling tower&#39;</span><span class="p">)</span>
<a name="ln-5806"></a>        <span class="k">CALL </span><span class="n">showContinueError</span><span class="p">(</span><span class="s1">&#39;Evaporator inlet temperature: &#39;</span><span class="o">//</span><span class="nb">trim</span><span class="p">(</span><span class="n">RoundSigDigits</span><span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span> <span class="p">)</span>
<a name="ln-5807"></a>
<a name="ln-5808"></a>        <span class="k">CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;Program Terminates due to previous error condition&#39;</span><span class="p">)</span>
<a name="ln-5809"></a>      <span class="n">ENDIF</span>
<a name="ln-5810"></a>    <span class="n">ENDIF</span>
<a name="ln-5811"></a>    <span class="k">IF</span><span class="p">(.</span><span class="nb">NOT</span><span class="p">.</span><span class="n">WarmupFlag</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-5812"></a><span class="k">      If</span> <span class="p">(</span><span class="n">AvailNomCapRat</span> <span class="o">&lt;</span> <span class="mf">0.0d0</span> <span class="p">)</span> <span class="k">then</span>     <span class="c">! apparently the real reason energy goes negative</span>
<a name="ln-5813"></a>        <span class="k">CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;CalcEngineDrivenChillerModel: Capacity ratio below zero for EngineDrivenChiller=&#39;</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-5814"></a>                              <span class="nb">TRIM</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">))</span>
<a name="ln-5815"></a>        <span class="k">CALL </span><span class="n">ShowContinueErrorTimeStamp</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<a name="ln-5816"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Check input for Capacity Ratio Curve&#39;</span><span class="p">)</span>
<a name="ln-5817"></a>        <span class="k">CALL </span><span class="n">showContinueError</span><span class="p">(</span><span class="s1">&#39;Condenser inlet temperature: &#39;</span><span class="o">//</span><span class="nb">trim</span><span class="p">(</span><span class="n">RoundSigDigits</span><span class="p">(</span><span class="n">CondInletTemp</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span> <span class="p">)</span>
<a name="ln-5818"></a>        <span class="k">CALL </span><span class="n">showContinueError</span><span class="p">(</span><span class="s1">&#39;Evaporator inlet temperature: &#39;</span><span class="o">//</span><span class="nb">trim</span><span class="p">(</span><span class="n">RoundSigDigits</span><span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span> <span class="p">)</span>
<a name="ln-5819"></a>        <span class="k">CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;Program Terminates due to previous error condition&#39;</span><span class="p">)</span>
<a name="ln-5820"></a>      <span class="n">ENDIF</span>
<a name="ln-5821"></a>    <span class="n">ENDIF</span>
<a name="ln-5822"></a>    <span class="c">! If makes it here, set limits, chiller can&#39;t have negative energy/power</span>
<a name="ln-5823"></a>    <span class="c">! proceeding silently for now but may want to throw error here</span>
<a name="ln-5824"></a>    <span class="n">Power</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5825"></a>    <span class="n">Energy</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5826"></a>  <span class="n">ENDIF</span>
<a name="ln-5827"></a>
<a name="ln-5828"></a>  <span class="k">RETURN</span>
<a name="ln-5829"></a><span class="k">END SUBROUTINE </span><span class="n">CalcEngineDrivenChillerModel</span>
<a name="ln-5830"></a>
<a name="ln-5831"></a><span class="k">SUBROUTINE </span><span class="n">CalcGTChillerModel</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">,</span><span class="n">MyLoad</span><span class="p">,</span><span class="n">Runflag</span><span class="p">,</span><span class="n">EquipFlowCtrl</span><span class="p">)</span>
<a name="ln-5832"></a>          <span class="c">! SUBROUTINE INFORMATION:</span>
<a name="ln-5833"></a>          <span class="c">!       AUTHOR         Dan Fisher / Brandon Anderson</span>
<a name="ln-5834"></a>          <span class="c">!       DATE WRITTEN   Sept. 2000</span>
<a name="ln-5835"></a>          <span class="c">!       MODIFIED       Chandan Sharma, FSEC, February 2010, Added basin heater</span>
<a name="ln-5836"></a>          <span class="c">!       RE-ENGINEERED  na</span>
<a name="ln-5837"></a>
<a name="ln-5838"></a>          <span class="c">! PURPOSE OF THIS SUBROUTINE:</span>
<a name="ln-5839"></a>          <span class="c">! simulate a vapor compression chiller using the GT model</span>
<a name="ln-5840"></a>
<a name="ln-5841"></a>          <span class="c">! METHODOLOGY EMPLOYED:</span>
<a name="ln-5842"></a>          <span class="c">! curve fit of performance data:</span>
<a name="ln-5843"></a>
<a name="ln-5844"></a>          <span class="c">! REFERENCES:</span>
<a name="ln-5845"></a>          <span class="c">! 1. BLAST Users Manual</span>
<a name="ln-5846"></a>          <span class="c">! 2. CHILLER User Manual</span>
<a name="ln-5847"></a>
<a name="ln-5848"></a>          <span class="c">! USE STATEMENTS:</span>
<a name="ln-5849"></a>  <span class="k">USE </span><span class="n">DataGlobals</span><span class="p">,</span>     <span class="n">ONLY</span> <span class="p">:</span> <span class="n">BeginEnvrnFlag</span><span class="p">,</span> <span class="n">SecInHour</span><span class="p">,</span> <span class="n">CurrentTime</span>
<a name="ln-5850"></a>  <span class="k">USE </span><span class="n">DataHVACGlobals</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">FirstTimeStepSysFlag</span><span class="p">,</span> <span class="n">TimeStepSys</span><span class="p">,</span> <span class="n">SysTimeElapsed</span>
<a name="ln-5851"></a>  <span class="k">USE </span><span class="n">General</span><span class="p">,</span>         <span class="n">ONLY</span> <span class="p">:</span> <span class="n">RoundSigDigits</span><span class="p">,</span> <span class="n">CreateSysTimeIntervalString</span>
<a name="ln-5852"></a>  <span class="k">USE </span><span class="n">DataPlant</span><span class="p">,</span>       <span class="n">ONLY</span> <span class="p">:</span> <span class="n">PlantLoop</span><span class="p">,</span> <span class="n">TypeOf_Chiller_CombTurbine</span><span class="p">,</span> <span class="n">CompSetPtBasedSchemeType</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5853"></a>                              <span class="n">CriteriaType_MassFlowRate</span><span class="p">,</span> <span class="n">SingleSetpoint</span><span class="p">,</span> <span class="n">DualSetpointDeadband</span>
<a name="ln-5854"></a>  <span class="k">USE </span><span class="n">DataBranchAirLoopPlant</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">ControlType_SeriesActive</span><span class="p">,</span> <span class="n">MassFlowTolerance</span>
<a name="ln-5855"></a>  <span class="k">USE </span><span class="n">DataEnvironment</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">OutDryBulbTemp</span><span class="p">,</span> <span class="n">EnvironmentName</span><span class="p">,</span> <span class="n">CurMnDy</span>
<a name="ln-5856"></a>  <span class="k">USE </span><span class="n">FluidProperties</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">GetSpecificHeatGlycol</span>
<a name="ln-5857"></a>  <span class="k">USE </span><span class="n">PlantUtilities</span><span class="p">,</span>  <span class="n">ONLY</span> <span class="p">:</span> <span class="n">SetComponentFlowRate</span><span class="p">,</span> <span class="n">PullCompInterconnectTrigger</span>
<a name="ln-5858"></a>
<a name="ln-5859"></a>  <span class="k">IMPLICIT NONE</span>
<a name="ln-5860"></a>
<a name="ln-5861"></a>
<a name="ln-5862"></a>          <span class="c">! SUBROUTINE ARGUMENT DEFINITIONS:</span>
<a name="ln-5863"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">ChillerNum</span>        <span class="c">! chiller number</span>
<a name="ln-5864"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">MyLoad</span>          <span class="c">! operating load</span>
<a name="ln-5865"></a>  <span class="kt">LOGICAL</span><span class="p">,</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">RunFlag</span>         <span class="c">! TRUE when chiller operating</span>
<a name="ln-5866"></a>  <span class="kt">INTEGER</span><span class="p">,</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span> <span class="kd">::</span> <span class="n">EquipFlowCtrl</span>  <span class="c">! Flow control mode for the equipment</span>
<a name="ln-5867"></a>
<a name="ln-5868"></a>          <span class="c">! SUBROUTINE PARAMETER DEFINITIONS:</span>
<a name="ln-5869"></a>
<a name="ln-5870"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span> <span class="k">PARAMETER</span>        <span class="kd">::</span> <span class="n">ExhaustCP</span> <span class="o">=</span> <span class="mf">1.047d0</span> <span class="c">!Exhaust Gas Specific Heat</span>
<a name="ln-5871"></a>  <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span> <span class="k">PARAMETER</span> <span class="kd">::</span> <span class="n">OutputFormat</span>  <span class="o">=</span><span class="s1">&#39;(F6.2)&#39;</span>
<a name="ln-5872"></a>
<a name="ln-5873"></a>          <span class="c">! INTERFACE BLOCK SPECIFICATIONS</span>
<a name="ln-5874"></a>          <span class="c">! na</span>
<a name="ln-5875"></a>
<a name="ln-5876"></a>          <span class="c">! DERIVED TYPE DEFINITIONS</span>
<a name="ln-5877"></a>          <span class="c">! na</span>
<a name="ln-5878"></a>
<a name="ln-5879"></a>          <span class="c">! SUBROUTINE LOCAL VARIABLE DECLARATIONS:</span>
<a name="ln-5880"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span> <span class="k">DIMENSION</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>     <span class="kd">::</span> <span class="n">CapacityRat</span>           <span class="c">! intermediate result:  capacity ratio</span>
<a name="ln-5881"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span> <span class="k">DIMENSION</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>     <span class="kd">::</span> <span class="n">PowerRat</span>              <span class="c">! intermediate result:  power ratio</span>
<a name="ln-5882"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span> <span class="k">DIMENSION</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>     <span class="kd">::</span> <span class="n">FullLoadFactor</span>        <span class="c">! intermediate result:  full load factor</span>
<a name="ln-5883"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">MinPartLoadRat</span>        <span class="c">! min allowed operating frac full load</span>
<a name="ln-5884"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">MaxPartLoadRat</span>        <span class="c">! max allowed operating frac full load</span>
<a name="ln-5885"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">TempCondIn</span>            <span class="c">! C - (GT ADJTC(1)The design secondary loop fluid</span>
<a name="ln-5886"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">TempCondInDesign</span>      <span class="c">! C - (GT ADJTC(1)The design secondary loop fluid</span>
<a name="ln-5887"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">TempRiseRat</span>           <span class="c">! intermediate result:  temperature rise ratio</span>
<a name="ln-5888"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">EvapInletTemp</span>         <span class="c">! C - evaporator inlet temperature, water side</span>
<a name="ln-5889"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">CondInletTemp</span>         <span class="c">! C - condenser inlet temperature, water side</span>
<a name="ln-5890"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">TempEvapOut</span>           <span class="c">! C - evaporator outlet temperature, water side</span>
<a name="ln-5891"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">TempEvapOutSetpoint</span>   <span class="c">! C - evaporator outlet temperature setpoint</span>
<a name="ln-5892"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">TempEvapOutDesign</span>     <span class="c">! design evaporator outlet temperature, water side</span>
<a name="ln-5893"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">ChillerNomCap</span>         <span class="c">! chiller nominal capacity</span>
<a name="ln-5894"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">AvailChillerCap</span>       <span class="c">! chiller available capacity</span>
<a name="ln-5895"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">COP</span>                   <span class="c">! coefficient of performance</span>
<a name="ln-5896"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">FracFullLoadPower</span>     <span class="c">! fraction of full load power</span>
<a name="ln-5897"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">EvapDeltaTemp</span>         <span class="c">! C - evaporator temperature difference, water side</span>
<a name="ln-5898"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">DeltaTemp</span>             <span class="c">! C - intermediate result: condenser/evaporator temp diff</span>
<a name="ln-5899"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">AvailNomCapRat</span>        <span class="c">! intermediate result: available nominal capacity ratio</span>
<a name="ln-5900"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">FullLoadPowerRat</span>      <span class="c">! intermediate result: full load power ratio</span>
<a name="ln-5901"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">PartLoadRat</span>           <span class="c">! part load ratio for efficiency calculations</span>
<a name="ln-5902"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">OperPartLoadRat</span>       <span class="c">! Actual Operating PLR</span>
<a name="ln-5903"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">EvapInletNode</span>         <span class="c">! evaporator inlet node number, water side</span>
<a name="ln-5904"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">EvapOutletNode</span>        <span class="c">! evaporator outlet node number, water side</span>
<a name="ln-5905"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">CondInletNode</span>         <span class="c">! condenser inlet node number, water side</span>
<a name="ln-5906"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">CondOutletNode</span>        <span class="c">! condenser outlet node number, water side</span>
<a name="ln-5907"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span> <span class="k">SAVE</span>             <span class="kd">::</span> <span class="n">EvapMassFlowRateMax</span><span class="o">=</span><span class="mf">0.0d0</span>   <span class="c">! Max Design Evaporator Mass Flow Rate converted from Volume Flow Rate</span>
<a name="ln-5908"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">TempLowLimitEout</span>      <span class="c">! C - Evaporator low temp. limit cut off</span>
<a name="ln-5909"></a><span class="c">! Special variables for GT Chiller</span>
<a name="ln-5910"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">RPLoad</span>
<a name="ln-5911"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">PLoad</span>
<a name="ln-5912"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">GTEngineCapacity</span>      <span class="c">! Capacity of GT Unit attached to Chiller</span>
<a name="ln-5913"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">MaxExhaustperGTPower</span>  <span class="c">! Maximum Exhaust Flow per KW Power Out</span>
<a name="ln-5914"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">RL</span>
<a name="ln-5915"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">RL2</span>
<a name="ln-5916"></a>
<a name="ln-5917"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">FuelEnergyIn</span>          <span class="c">!(EFUEL) Amount of Fuel Energy Required to run gas turbine</span>
<a name="ln-5918"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">ExhaustFlow</span>           <span class="c">!(FEX) Exhaust Gas Flow Rate cubic meters per second</span>
<a name="ln-5919"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">ExhaustTemp</span>           <span class="c">!(TEX) Exhaust Gas Temperature in C</span>
<a name="ln-5920"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">QHeatRecLube</span>          <span class="c">!(ELUBE) Recoverable Lube Oil Energy (W)</span>
<a name="ln-5921"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">UAtoCapRat</span>            <span class="c">!(UACGC) Heat Exchanger UA to Capacity</span>
<a name="ln-5922"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">AmbientDeltaT</span>         <span class="c">!(ATAIR) Difference between ambient actual and ambient design temperatures</span>
<a name="ln-5923"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">DesignSteamSatTemp</span>         <span class="c">!Saturization Temperature of Steam in Stack</span>
<a name="ln-5924"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">ExhaustStackTemp</span>           <span class="c">!Temperature of Exhaust Gases</span>
<a name="ln-5925"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">SAVE</span>  <span class="kd">::</span> <span class="n">TimeStepSysLast</span><span class="o">=</span><span class="mf">0.0d0</span>     <span class="c">! last system time step (used to check for downshifting)</span>
<a name="ln-5926"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>       <span class="kd">::</span> <span class="n">CurrentEndTime</span>          <span class="c">! end time of time step for current simulation time step</span>
<a name="ln-5927"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">SAVE</span>  <span class="kd">::</span> <span class="n">CurrentEndTimeLast</span><span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">! end time of time step for last simulation time step</span>
<a name="ln-5928"></a>  <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span><span class="kd">::</span> <span class="n">OutputChar</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span>        <span class="c">! character string for warning messages</span>
<a name="ln-5929"></a>
<a name="ln-5930"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">HeatRecInNode</span>     <span class="c">!Heat Recovery Fluid Inlet Node Num</span>
<a name="ln-5931"></a>  <span class="kt">INTEGER</span>           <span class="kd">::</span> <span class="n">HeatRecOutNode</span>    <span class="c">!Heat Recovery Fluid Outlet Node Num</span>
<a name="ln-5932"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">HeatRecInTemp</span>     <span class="c">!Heat Recovery Fluid Inlet Temperature</span>
<a name="ln-5933"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">HeatRecOutTemp</span>    <span class="c">!Heat Recovery Fluid Outlet Temperature</span>
<a name="ln-5934"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">HeatRecMdot</span>       <span class="c">!Heat Recovery Fluid Mass FlowRate</span>
<a name="ln-5935"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">HeatRecCp</span>         <span class="c">!Specific Heat of the Heat Recovery Fluid</span>
<a name="ln-5936"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">FuelHeatingValue</span>  <span class="c">!Heating Value of Fuel in kJ/kg</span>
<a name="ln-5937"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">MinHeatRecMdot</span>    <span class="c">!Mass Flow rate that keeps from exceeding max temp</span>
<a name="ln-5938"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">HeatRecRatio</span>      <span class="c">!Reduced ratio to multiply recovered heat terms by</span>
<a name="ln-5939"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">FRAC</span>
<a name="ln-5940"></a><span class="c">!  LOGICAL,SAVE      :: PossibleSubCooling=.FALSE.</span>
<a name="ln-5941"></a>
<a name="ln-5942"></a>  <span class="kt">INTEGER</span>     <span class="kd">::</span> <span class="n">LoopNum</span>
<a name="ln-5943"></a>  <span class="kt">INTEGER</span>     <span class="kd">::</span> <span class="n">LoopSideNum</span>
<a name="ln-5944"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>   <span class="kd">::</span> <span class="n">Cp</span>      <span class="c">! local for fluid specif heat, for evaporator</span>
<a name="ln-5945"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>   <span class="kd">::</span> <span class="n">CpCond</span>  <span class="c">! local for fluid specif heat, for condenser</span>
<a name="ln-5946"></a>
<a name="ln-5947"></a>          <span class="c">!set module level inlet and outlet nodes</span>
<a name="ln-5948"></a>  <span class="n">EvapMassFlowRate</span>           <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5949"></a>  <span class="n">CondMassFlowRate</span>           <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5950"></a>  <span class="n">Power</span>                      <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5951"></a>  <span class="n">QCondenser</span>                 <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5952"></a>  <span class="n">QEvaporator</span>                <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5953"></a>  <span class="n">Energy</span>                     <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5954"></a>  <span class="n">CondenserEnergy</span>            <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5955"></a>  <span class="n">EvaporatorEnergy</span>           <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5956"></a>  <span class="n">EvapInletNode</span>  <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletNodeNum</span>
<a name="ln-5957"></a>  <span class="n">EvapOutletNode</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span>
<a name="ln-5958"></a>  <span class="n">CondInletNode</span>  <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span>
<a name="ln-5959"></a>  <span class="n">CondOutletNode</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletNodeNum</span>
<a name="ln-5960"></a>  <span class="n">HeatRecInNode</span>  <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span>
<a name="ln-5961"></a>  <span class="n">HeatRecOutNode</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecOutletNodeNum</span>
<a name="ln-5962"></a>  <span class="n">QHeatRecLube</span>   <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-5963"></a>  <span class="n">FRAC</span>           <span class="o">=</span> <span class="mf">1.0d0</span>
<a name="ln-5964"></a>  <span class="n">LoopNum</span>        <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span>
<a name="ln-5965"></a>  <span class="n">LoopSideNum</span>    <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span>
<a name="ln-5966"></a>  <span class="n">EvapInletTemp</span>  <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-5967"></a>
<a name="ln-5968"></a><span class="c">! calculate end time of current time step</span>
<a name="ln-5969"></a>  <span class="n">CurrentEndTime</span> <span class="o">=</span> <span class="n">CurrentTime</span> <span class="o">+</span> <span class="n">SysTimeElapsed</span>
<a name="ln-5970"></a>
<a name="ln-5971"></a><span class="c">! Print warning messages only when valid and only for the first ocurrance. Let summary provide statistics.</span>
<a name="ln-5972"></a><span class="c">! Wait for next time step to print warnings. If simulation iterates, print out</span>
<a name="ln-5973"></a><span class="c">! the warning for the last iteration only. Must wait for next time step to accomplish this.</span>
<a name="ln-5974"></a><span class="c">! If a warning occurs and the simulation down shifts, the warning is not valid.</span>
<a name="ln-5975"></a>  <span class="k">IF</span><span class="p">(</span><span class="n">CurrentEndTime</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="n">CurrentEndTimeLast</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="n">TimeStepSys</span> <span class="p">.</span><span class="n">GE</span><span class="p">.</span> <span class="n">TimeStepSysLast</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-5976"></a><span class="k">    IF</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-5977"></a><span class="k">      </span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgErrorCount</span> <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-5978"></a>                         <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgErrorCount</span> <span class="o">+</span> <span class="mi">1</span>
<a name="ln-5979"></a>     <span class="c">! Show single warning and pass additional info to ShowRecurringWarningErrorAtEnd</span>
<a name="ln-5980"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgErrorCount</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5981"></a><span class="k">        CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgBuffer1</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
<a name="ln-5982"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgBuffer2</span><span class="p">))</span>
<a name="ln-5983"></a>      <span class="k">ELSE</span>
<a name="ln-5984"></a><span class="k">        CALL </span><span class="n">ShowRecurringWarningErrorAtEnd</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgBuffer1</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39; error continues.&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-5985"></a>          <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">ErrCount1</span><span class="p">,</span><span class="n">ReportMaxOf</span><span class="o">=</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgDataLast</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-5986"></a>          <span class="n">ReportMinOf</span><span class="o">=</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgDataLast</span><span class="p">,</span><span class="n">ReportMaxUnits</span><span class="o">=</span><span class="s1">&#39;[C]&#39;</span><span class="p">,</span><span class="n">ReportMinUnits</span><span class="o">=</span><span class="s1">&#39;[C]&#39;</span><span class="p">)</span>
<a name="ln-5987"></a>      <span class="k">END IF</span>
<a name="ln-5988"></a><span class="k">    END IF</span>
<a name="ln-5989"></a><span class="k">  END IF</span>
<a name="ln-5990"></a>
<a name="ln-5991"></a><span class="c">! save last system time step and last end time of current time step (used to determine if warning is valid)</span>
<a name="ln-5992"></a>  <span class="n">TimeStepSysLast</span>    <span class="o">=</span> <span class="n">TimeStepSys</span>
<a name="ln-5993"></a>  <span class="n">CurrentEndTimeLast</span> <span class="o">=</span> <span class="n">CurrentEndTime</span>
<a name="ln-5994"></a>
<a name="ln-5995"></a><span class="c">! If Chiller load is 0 or chiller is not running then leave the subroutine.Before leaving</span>
<a name="ln-5996"></a><span class="c">! if the component control is SERIESACTIVE we set the component flow to inlet flow so that</span>
<a name="ln-5997"></a><span class="c">! flow resolver will not shut down the branch</span>
<a name="ln-5998"></a>  <span class="k">IF</span><span class="p">(</span><span class="n">MyLoad</span> <span class="o">&gt;=</span> <span class="mf">0.d0</span> <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">RunFlag</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-5999"></a><span class="k">    IF</span><span class="p">(</span><span class="n">EquipFlowCtrl</span> <span class="o">==</span> <span class="n">ControlType_SeriesActive</span> <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="n">PlantLoop</span><span class="p">(</span><span class="n">LoopNum</span><span class="p">)%</span><span class="n">LoopSide</span><span class="p">(</span><span class="n">LoopSideNum</span><span class="p">)%</span><span class="n">FlowLock</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6000"></a><span class="k">      </span><span class="n">EvapMassFlowRate</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">MassFlowrate</span>
<a name="ln-6001"></a>    <span class="k">ELSE</span>
<a name="ln-6002"></a><span class="k">      </span><span class="n">EvapMassFlowRate</span>           <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-6003"></a>
<a name="ln-6004"></a>      <span class="k">CALL </span><span class="n">SetComponentFlowRate</span><span class="p">(</span> <span class="n">EvapMassFlowRate</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-6005"></a>                          <span class="n">EvapInletNode</span> <span class="p">,</span> <span class="n">EvapOutletNode</span>  <span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6006"></a>                          <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-6007"></a>                          <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6008"></a>                          <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-6009"></a>                          <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)</span>
<a name="ln-6010"></a>    <span class="n">ENDIF</span>
<a name="ln-6011"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6012"></a><span class="k">      IF</span> <span class="p">(</span> <span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span> <span class="p">&amp;</span>
<a name="ln-6013"></a>            <span class="n">LoopSide</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">)%</span> <span class="p">&amp;</span>
<a name="ln-6014"></a>              <span class="n">Branch</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDBranchNum</span><span class="p">)%</span>  <span class="p">&amp;</span>
<a name="ln-6015"></a>                <span class="n">Comp</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDCompNum</span><span class="p">)%</span><span class="n">FlowCtrl</span> <span class="o">==</span> <span class="n">ControlType_SeriesActive</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6016"></a><span class="k">        </span><span class="n">CondMassFlowRate</span>         <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowrate</span>
<a name="ln-6017"></a>      <span class="k">ELSE</span>
<a name="ln-6018"></a><span class="k">        </span><span class="n">CondMassFlowRate</span>           <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-6019"></a>        <span class="k">CALL </span><span class="n">SetComponentFlowRate</span><span class="p">(</span><span class="n">CondMassFlowRate</span><span class="p">,</span> <span class="n">CondInletNode</span><span class="p">,</span> <span class="n">CondOutletNode</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6020"></a>                                <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6021"></a>                                <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6022"></a>                                <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDBranchNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6023"></a>                                <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDCompNum</span><span class="p">)</span>
<a name="ln-6024"></a>      <span class="n">ENDIF</span>
<a name="ln-6025"></a>    <span class="n">ENDIF</span>
<a name="ln-6026"></a>
<a name="ln-6027"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6028"></a><span class="k">      CALL </span><span class="n">CalcBasinHeaterPower</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPowerFTempDiff</span><span class="p">,&amp;</span>
<a name="ln-6029"></a>                                <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSchedulePtr</span><span class="p">,&amp;</span>
<a name="ln-6030"></a>                                <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSetPointTemp</span><span class="p">,</span><span class="n">BasinHeaterPower</span><span class="p">)</span>
<a name="ln-6031"></a>    <span class="n">ENDIF</span>
<a name="ln-6032"></a>    <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-6033"></a>    <span class="k">RETURN</span>
<a name="ln-6034"></a><span class="k">  END IF</span>
<a name="ln-6035"></a>
<a name="ln-6036"></a><span class="k">  IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">AirCooled</span><span class="p">)</span> <span class="k">THEN</span> <span class="c">!Condenser inlet temp = outdoor temp</span>
<a name="ln-6037"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">OutAirDryBulb</span>
<a name="ln-6038"></a><span class="c">!  Warn user if entering condenser temperature falls below 0C</span>
<a name="ln-6039"></a>    <span class="k">IF</span><span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="mf">0.0d0</span> <span class="p">.</span><span class="nb">and</span><span class="p">.</span> <span class="p">.</span><span class="nb">not</span><span class="p">.</span> <span class="n">WarmupFlag</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6040"></a><span class="k">      </span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-6041"></a>      <span class="k">WRITE</span><span class="p">(</span><span class="n">OutputChar</span><span class="p">,</span><span class="n">OutputFormat</span><span class="p">)</span><span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-6042"></a>      <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgBuffer1</span> <span class="o">=</span> <span class="s1">&#39;CalcGasTurbineChillerModel - Chiller:CombustionTurbine &quot;&#39;</span> <span class="p">&amp;</span>
<a name="ln-6043"></a>                           <span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span><span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-6044"></a>                           <span class="s1">&#39;&quot; - Air Cooled Condenser Inlet Temperature below 0C&#39;</span>
<a name="ln-6045"></a>      <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgBuffer2</span> <span class="o">=</span> <span class="s1">&#39;... Outdoor Dry-bulb Condition = &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">OutputChar</span><span class="p">)</span><span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-6046"></a>                 <span class="s1">&#39; C. Occurrence info = &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">EnvironmentName</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;, &#39;</span><span class="o">//</span><span class="nb">Trim</span><span class="p">(</span><span class="n">CurMnDy</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39; &#39;</span><span class="p">&amp;</span>
<a name="ln-6047"></a>                 <span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">CreateSysTimeIntervalString</span><span class="p">())</span>
<a name="ln-6048"></a>      <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgDataLast</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-6049"></a>    <span class="k">ELSE</span>
<a name="ln-6050"></a><span class="k">      </span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-6051"></a>    <span class="n">ENDIF</span>
<a name="ln-6052"></a>  <span class="k">Else IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span> <span class="c">!Condenser inlet temp = (outdoor wet bulb)</span>
<a name="ln-6053"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">OutAirWetBulb</span>
<a name="ln-6054"></a><span class="c">!  Warn user if evap condenser wet bulb temperature falls below 10C</span>
<a name="ln-6055"></a>    <span class="k">IF</span><span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="mi">1</span><span class="mf">0.0d0</span> <span class="p">.</span><span class="nb">and</span><span class="p">.</span> <span class="p">.</span><span class="nb">not</span><span class="p">.</span> <span class="n">WarmupFlag</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6056"></a><span class="k">      </span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-6057"></a>      <span class="k">WRITE</span><span class="p">(</span><span class="n">OutputChar</span><span class="p">,</span><span class="n">OutputFormat</span><span class="p">)</span><span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-6058"></a>      <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgBuffer1</span> <span class="o">=</span> <span class="s1">&#39;CalcGasTurbineChillerModel - Chiller:CombustionTurbine &quot;&#39;</span> <span class="p">&amp;</span>
<a name="ln-6059"></a>                           <span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span><span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-6060"></a>                           <span class="s1">&#39;&quot; - Evap Cooled Condenser Inlet Temperature below 10C&#39;</span>
<a name="ln-6061"></a>      <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgBuffer2</span> <span class="o">=</span> <span class="s1">&#39;... Outdoor Wet-bulb Condition = &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">OutputChar</span><span class="p">)</span><span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-6062"></a>                 <span class="s1">&#39; C. Occurrence info = &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">EnvironmentName</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;, &#39;</span><span class="o">//</span><span class="nb">Trim</span><span class="p">(</span><span class="n">CurMnDy</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39; &#39;</span><span class="p">&amp;</span>
<a name="ln-6063"></a>                 <span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">CreateSysTimeIntervalString</span><span class="p">())</span>
<a name="ln-6064"></a>      <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgDataLast</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-6065"></a>    <span class="k">ELSE</span>
<a name="ln-6066"></a><span class="k">      </span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-6067"></a>    <span class="n">ENDIF</span>
<a name="ln-6068"></a>  <span class="n">ENDIF</span> <span class="c">! End of the Air Cooled/Evap Cooled Logic block</span>
<a name="ln-6069"></a>
<a name="ln-6070"></a>  <span class="c">! If not air or evap cooled then set to the condenser node that is attached to a cooling tower</span>
<a name="ln-6071"></a>  <span class="n">CondInletTemp</span>  <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-6072"></a>
<a name="ln-6073"></a>  <span class="c">!Set mass flow rates</span>
<a name="ln-6074"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6075"></a><span class="k">    </span><span class="n">CondMassFlowRate</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondMassFlowRateMax</span>
<a name="ln-6076"></a>    <span class="k">CALL </span><span class="n">SetComponentFlowRate</span><span class="p">(</span><span class="n">CondMassFlowRate</span><span class="p">,</span> <span class="n">CondInletNode</span><span class="p">,</span> <span class="n">CondOutletNode</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6077"></a>                              <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6078"></a>                              <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6079"></a>                              <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDBranchNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6080"></a>                              <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDCompNum</span><span class="p">)</span>
<a name="ln-6081"></a>    <span class="k">CALL </span><span class="n">PullCompInterconnectTrigger</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6082"></a>                                     <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6083"></a>                                     <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6084"></a>                                     <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6085"></a>                                     <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondMassFlowIndex</span><span class="p">,</span>              <span class="p">&amp;</span>
<a name="ln-6086"></a>                                     <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6087"></a>                                     <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-6088"></a>                                     <span class="n">CriteriaType_MassFlowRate</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6089"></a>                                     <span class="n">CondMassFlowRate</span><span class="p">)</span>
<a name="ln-6090"></a>
<a name="ln-6091"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">CondMassFlowRate</span> <span class="o">&lt;</span> <span class="n">MassFlowTolerance</span><span class="p">)</span> <span class="k">RETURN</span>
<a name="ln-6092"></a>
<a name="ln-6093"></a><span class="k">  END IF</span>
<a name="ln-6094"></a>
<a name="ln-6095"></a>  <span class="c">!  LOAD LOCAL VARIABLES FROM DATA STRUCTURE (for code readability)</span>
<a name="ln-6096"></a>  <span class="n">CapacityRat</span>        <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">CapRatCoef</span>
<a name="ln-6097"></a>  <span class="n">PowerRat</span>           <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">PowerRatCoef</span>
<a name="ln-6098"></a>  <span class="n">FullLoadFactor</span>     <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FullLoadCoef</span>
<a name="ln-6099"></a>  <span class="n">MinPartLoadRat</span>     <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">MinPartLoadRat</span>
<a name="ln-6100"></a>  <span class="n">MaxPartLoadRat</span>     <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">MaxPartLoadRat</span>
<a name="ln-6101"></a>  <span class="n">TempCondInDesign</span>   <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempDesCondIn</span>
<a name="ln-6102"></a>  <span class="n">TempRiseRat</span>        <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempRiseCoef</span>
<a name="ln-6103"></a>  <span class="n">TempEvapOutDesign</span>  <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempDesEvapOut</span>
<a name="ln-6104"></a>  <span class="n">ChillerNomCap</span>      <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span>
<a name="ln-6105"></a>  <span class="n">COP</span>                <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">COP</span>
<a name="ln-6106"></a>  <span class="n">TempCondIn</span>         <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-6107"></a>  <span class="n">TempEvapOut</span>        <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-6108"></a>  <span class="n">TempLowLimitEout</span>   <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempLowLimitEvapOut</span>
<a name="ln-6109"></a>  <span class="n">EvapMassFlowRateMax</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapMassFlowRateMax</span>
<a name="ln-6110"></a>  <span class="n">LoopNum</span>            <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span>
<a name="ln-6111"></a>  <span class="n">LoopSideNum</span>        <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span>
<a name="ln-6112"></a>
<a name="ln-6113"></a><span class="c">!*********************************</span>
<a name="ln-6114"></a>
<a name="ln-6115"></a>  <span class="c">!Calculate chiller performance from this set of performance equations.</span>
<a name="ln-6116"></a>  <span class="c">!  from BLAST...Z=(TECONDW-ADJTC(1))/ADJTC(2)-(TLCHLRW-ADJTC(3))</span>
<a name="ln-6117"></a>  <span class="n">DeltaTemp</span><span class="o">=</span> <span class="p">(</span><span class="n">TempCondIn</span>   <span class="o">-</span>  <span class="n">TempCondInDesign</span><span class="p">)</span> <span class="o">/</span> <span class="n">TempRiseRat</span> <span class="p">&amp;</span>
<a name="ln-6118"></a>           <span class="o">-</span> <span class="p">(</span><span class="n">TempEvapOut</span> <span class="o">-</span>  <span class="n">TempEvapOutDesign</span><span class="p">)</span>
<a name="ln-6119"></a>
<a name="ln-6120"></a>  <span class="c">!  from BLAST...RCAV=RCAVC(1)+RCAVC(2)*Z+RCAVC(3)*Z**2</span>
<a name="ln-6121"></a>  <span class="n">AvailNomCapRat</span> <span class="o">=</span>   <span class="n">CapacityRat</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>                   <span class="p">&amp;</span>
<a name="ln-6122"></a>                     <span class="o">+</span> <span class="n">CapacityRat</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">DeltaTemp</span>       <span class="p">&amp;</span>
<a name="ln-6123"></a>                     <span class="o">+</span> <span class="n">CapacityRat</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="n">DeltaTemp</span> <span class="o">**</span> <span class="mi">2</span>
<a name="ln-6124"></a>
<a name="ln-6125"></a>  <span class="n">AvailChillerCap</span> <span class="o">=</span> <span class="n">ChillerNomCap</span><span class="o">*</span><span class="n">AvailNomCapRat</span>
<a name="ln-6126"></a>
<a name="ln-6127"></a>  <span class="c">! from BLAST...G=ADJEC(1)+ADJEC(2)*RCAV+ADJEC(3)*RCAV**2.</span>
<a name="ln-6128"></a>  <span class="n">FullLoadPowerRat</span><span class="o">=</span>   <span class="n">PowerRat</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>                         <span class="p">&amp;</span>
<a name="ln-6129"></a>                      <span class="o">+</span> <span class="n">PowerRat</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">AvailNomCapRat</span>      <span class="p">&amp;</span>
<a name="ln-6130"></a>                      <span class="o">+</span> <span class="n">PowerRat</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="n">AvailNomCapRat</span> <span class="o">**</span> <span class="mi">2</span>
<a name="ln-6131"></a>
<a name="ln-6132"></a>  <span class="c">!  from BLAST...RCLOAD=AMAX1(MINCHFR(I,IPLCTR),AMIN1(CHLRLOAD(I)/CHLROCAP(I) &amp;</span>
<a name="ln-6133"></a>  <span class="c">!         /RCAV,MAXCHFR(I,IPLCTR)))</span>
<a name="ln-6134"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">AvailChillerCap</span> <span class="o">&gt;</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6135"></a><span class="k">    </span><span class="n">PartLoadRat</span> <span class="o">=</span> <span class="nb">MAX</span><span class="p">(</span><span class="n">MinPartLoadRat</span><span class="p">,</span> <span class="nb">MIN</span><span class="p">(</span><span class="nb">ABS</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">)</span><span class="o">/</span><span class="n">AvailChillerCap</span><span class="p">,</span><span class="n">MaxPartLoadRat</span><span class="p">))</span>
<a name="ln-6136"></a>  <span class="n">ENDIF</span>
<a name="ln-6137"></a>
<a name="ln-6138"></a>  <span class="c">! from BLAST...RPOWER=RPWRC(1)+RPWRC(2)*RCLOAD+RPWRC(3)*RCLOAD**2</span>
<a name="ln-6139"></a>  <span class="n">FracFullLoadPower</span> <span class="o">=</span> <span class="n">FullLoadFactor</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>                      <span class="p">&amp;</span>
<a name="ln-6140"></a>                      <span class="o">+</span> <span class="n">FullLoadFactor</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">PartLoadRat</span>      <span class="p">&amp;</span>
<a name="ln-6141"></a>                      <span class="o">+</span> <span class="n">FullLoadFactor</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="n">PartLoadRat</span> <span class="o">**</span> <span class="mi">2</span>
<a name="ln-6142"></a>
<a name="ln-6143"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">AvailChillerCap</span> <span class="o">&gt;</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6144"></a><span class="k">    IF</span><span class="p">(</span><span class="nb">ABS</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">)</span><span class="o">/</span><span class="n">AvailChillerCap</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="n">MinPartLoadRat</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6145"></a><span class="k">     </span><span class="n">OperPartLoadRat</span> <span class="o">=</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">)</span><span class="o">/</span><span class="n">AvailChillerCap</span>
<a name="ln-6146"></a>    <span class="k">ELSE</span>
<a name="ln-6147"></a><span class="k">     </span><span class="n">OperPartLoadRat</span> <span class="o">=</span> <span class="n">PartLoadRat</span>
<a name="ln-6148"></a>    <span class="k">END IF</span>
<a name="ln-6149"></a><span class="k">  ELSE</span>
<a name="ln-6150"></a><span class="k">    </span><span class="n">OperPartLoadRat</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-6151"></a>  <span class="n">ENDIF</span>
<a name="ln-6152"></a><span class="c">!*********************************</span>
<a name="ln-6153"></a>  <span class="n">Cp</span> <span class="o">=</span> <span class="n">GetSpecificHeatGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-6154"></a>                         <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span><span class="p">,</span>                      <span class="p">&amp;</span>
<a name="ln-6155"></a>                         <span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6156"></a>                         <span class="s1">&#39;CalcGTChillerModel&#39;</span><span class="p">)</span>
<a name="ln-6157"></a><span class="c">! If FlowLock is True, the new resolved mdot is used to update Power, QEvap, Qcond, and</span>
<a name="ln-6158"></a><span class="c">! condenser side outlet temperature.</span>
<a name="ln-6159"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">LoopNum</span><span class="p">)%</span><span class="n">LoopSide</span><span class="p">(</span><span class="n">LoopSideNum</span><span class="p">)%</span><span class="n">FlowLock</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6160"></a><span class="k">    </span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PossibleSubCooling</span>  <span class="o">=</span><span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-6161"></a>    <span class="n">QEvaporator</span> <span class="o">=</span> <span class="n">AvailChillerCap</span> <span class="o">*</span> <span class="n">OperPartLoadRat</span>
<a name="ln-6162"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">OperPartLoadRat</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="n">MinPartLoadRat</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6163"></a><span class="k">     </span><span class="n">FRAC</span> <span class="o">=</span> <span class="nb">MIN</span><span class="p">(</span><span class="mf">1.0d0</span><span class="p">,(</span><span class="n">OperPartLoadRat</span><span class="o">/</span><span class="n">MinPartLoadRat</span><span class="p">))</span>
<a name="ln-6164"></a>    <span class="k">ELSE</span>
<a name="ln-6165"></a><span class="k">     </span><span class="n">FRAC</span> <span class="o">=</span> <span class="mf">1.0d0</span>
<a name="ln-6166"></a>    <span class="k">END IF</span>
<a name="ln-6167"></a><span class="k">    </span><span class="n">Power</span> <span class="o">=</span> <span class="n">FracFullLoadPower</span> <span class="o">*</span> <span class="n">FullLoadPowerRat</span> <span class="o">*</span> <span class="n">AvailChillerCap</span><span class="o">/</span><span class="n">COP</span> <span class="o">*</span> <span class="n">FRAC</span>
<a name="ln-6168"></a>
<a name="ln-6169"></a>    <span class="c">! Either set the flow to the Constant value or caluclate the flow for the variable volume</span>
<a name="ln-6170"></a>    <span class="k">IF</span> <span class="p">((</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">ConstantFlow</span><span class="p">)</span> <span class="p">&amp;</span>
<a name="ln-6171"></a>        <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">NotModulated</span> <span class="p">))</span> <span class="k">THEN</span>
<a name="ln-6172"></a>      <span class="c">! Start by assuming max (design) flow</span>
<a name="ln-6173"></a>      <span class="n">EvapMassFlowRate</span> <span class="o">=</span> <span class="n">EvapMassFlowRateMax</span>
<a name="ln-6174"></a>      <span class="c">! Use SetComponentFlowRate to decide actual flow</span>
<a name="ln-6175"></a>      <span class="k">Call </span><span class="n">SetComponentFlowRate</span><span class="p">(</span> <span class="n">EvapMassFlowRate</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-6176"></a>                          <span class="n">EvapInletNode</span> <span class="p">,</span> <span class="n">EvapOutletNode</span>  <span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6177"></a>                          <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-6178"></a>                          <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6179"></a>                          <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-6180"></a>                          <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)</span>
<a name="ln-6181"></a>      <span class="c">! Evaluate delta temp based on actual flow rate</span>
<a name="ln-6182"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">EvapMassFlowRate</span> <span class="o">/=</span> <span class="mf">0.0D0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6183"></a><span class="k">        </span><span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">QEvaporator</span><span class="o">/</span><span class="n">EvapMassFlowRate</span><span class="o">/</span><span class="n">Cp</span>
<a name="ln-6184"></a>      <span class="k">ELSE</span>
<a name="ln-6185"></a><span class="k">        </span><span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="mf">0.0D0</span>
<a name="ln-6186"></a>      <span class="n">ENDIF</span>
<a name="ln-6187"></a>      <span class="c">! Evaluate outlet temp based on delta</span>
<a name="ln-6188"></a>      <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapDeltaTemp</span>
<a name="ln-6189"></a>    <span class="k">ELSE IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">LeavingSetpointModulated</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6190"></a>      <span class="c">! Calculate the Delta Temp from the inlet temp to the chiller outlet setpoint</span>
<a name="ln-6191"></a>      <span class="k">SELECT CASE</span> <span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">LoopDemandCalcScheme</span><span class="p">)</span>
<a name="ln-6192"></a>      <span class="k">CASE</span> <span class="p">(</span><span class="n">SingleSetpoint</span><span class="p">)</span>
<a name="ln-6193"></a>        <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPoint</span>
<a name="ln-6194"></a>      <span class="k">CASE</span> <span class="p">(</span><span class="n">DualSetpointDeadband</span><span class="p">)</span>
<a name="ln-6195"></a>        <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPointHi</span>
<a name="ln-6196"></a>      <span class="k">END SELECT</span>
<a name="ln-6197"></a><span class="k">      IF</span> <span class="p">(</span><span class="n">EvapDeltaTemp</span> <span class="o">/=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6198"></a>        <span class="c">! Calculate desired flow to request based on load</span>
<a name="ln-6199"></a>        <span class="n">EvapMassFlowRate</span> <span class="o">=</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">QEvaporator</span><span class="o">/</span><span class="n">Cp</span><span class="o">/</span><span class="n">EvapDeltaTemp</span><span class="p">)</span>
<a name="ln-6200"></a>        <span class="k">IF</span><span class="p">((</span><span class="n">EvapMassFlowRate</span> <span class="o">-</span> <span class="n">EvapMassFlowRateMax</span><span class="p">)</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="n">MassFlowTolerance</span><span class="p">)</span> <span class="p">&amp;</span>
<a name="ln-6201"></a>               <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PossibleSubCooling</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-6202"></a>        <span class="c">!Check to see if the Maximum is exceeded, if so set to maximum</span>
<a name="ln-6203"></a>        <span class="n">EvapMassFlowRate</span> <span class="o">=</span> <span class="nb">MIN</span><span class="p">(</span><span class="n">EvapMassFlowRateMax</span><span class="p">,</span> <span class="n">EvapMassFlowRate</span><span class="p">)</span>
<a name="ln-6204"></a>        <span class="c">! Use SetComponentFlowRate to decide actual flow</span>
<a name="ln-6205"></a>        <span class="k">Call </span><span class="n">SetComponentFlowRate</span><span class="p">(</span> <span class="n">EvapMassFlowRate</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-6206"></a>                          <span class="n">EvapInletNode</span> <span class="p">,</span> <span class="n">EvapOutletNode</span>  <span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6207"></a>                          <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-6208"></a>                          <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6209"></a>                          <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-6210"></a>                          <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)</span>
<a name="ln-6211"></a>        <span class="k">SELECT CASE</span> <span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">LoopDemandCalcScheme</span><span class="p">)</span>
<a name="ln-6212"></a>        <span class="k">CASE</span> <span class="p">(</span><span class="n">SingleSetpoint</span><span class="p">)</span>
<a name="ln-6213"></a>          <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPoint</span>
<a name="ln-6214"></a>        <span class="k">CASE</span> <span class="p">(</span><span class="n">DualSetpointDeadband</span><span class="p">)</span>
<a name="ln-6215"></a>          <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPointHi</span>
<a name="ln-6216"></a>        <span class="k">END SELECT</span>
<a name="ln-6217"></a><span class="k">      ELSE</span>
<a name="ln-6218"></a>        <span class="c">! Try to request zero flow</span>
<a name="ln-6219"></a>        <span class="n">EvapMassFlowRate</span><span class="o">=</span><span class="mf">0.0d0</span>
<a name="ln-6220"></a>        <span class="c">! Use SetComponentFlowRate to decide actual flow</span>
<a name="ln-6221"></a>        <span class="k">Call </span><span class="n">SetComponentFlowRate</span><span class="p">(</span> <span class="n">EvapMassFlowRate</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-6222"></a>                          <span class="n">EvapInletNode</span> <span class="p">,</span> <span class="n">EvapOutletNode</span>  <span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6223"></a>                          <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-6224"></a>                          <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6225"></a>                          <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-6226"></a>                          <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)</span>
<a name="ln-6227"></a>        <span class="c">! No deltaT since component is not running</span>
<a name="ln-6228"></a>        <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-6229"></a>
<a name="ln-6230"></a>      <span class="k">END IF</span>
<a name="ln-6231"></a><span class="k">    End If</span>  <span class="c">!End of Constant Variable Flow If Block</span>
<a name="ln-6232"></a>  <span class="k">ELSE</span>  <span class="c">! If FlowLock is True</span>
<a name="ln-6233"></a>
<a name="ln-6234"></a>    <span class="n">EvapMassFlowRate</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">MassFlowRate</span>
<a name="ln-6235"></a>    <span class="k">Call </span><span class="n">SetComponentFlowRate</span><span class="p">(</span> <span class="n">EvapMassFlowRate</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-6236"></a>                              <span class="n">EvapInletNode</span> <span class="p">,</span> <span class="n">EvapOutletNode</span>  <span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6237"></a>                              <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-6238"></a>                              <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6239"></a>                              <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-6240"></a>                              <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)</span>
<a name="ln-6241"></a><span class="c">!       Some other component set the flow to 0. No reason to continue with calculations.</span>
<a name="ln-6242"></a>    <span class="k">IF</span><span class="p">(</span><span class="n">EvapMassFlowRate</span> <span class="o">==</span> <span class="mf">0.0d0</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-6243"></a><span class="k">      </span><span class="n">MyLoad</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-6244"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6245"></a><span class="k">        CALL </span><span class="n">CalcBasinHeaterPower</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPowerFTempDiff</span><span class="p">,&amp;</span>
<a name="ln-6246"></a>                            <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSchedulePtr</span><span class="p">,&amp;</span>
<a name="ln-6247"></a>                            <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSetPointTemp</span><span class="p">,</span><span class="n">BasinHeaterPower</span><span class="p">)</span>
<a name="ln-6248"></a>      <span class="n">ENDIF</span>
<a name="ln-6249"></a>      <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-6250"></a>      <span class="k">RETURN</span>
<a name="ln-6251"></a><span class="k">    END IF</span>
<a name="ln-6252"></a>
<a name="ln-6253"></a><span class="k">    IF</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PossibleSubCooling</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6254"></a><span class="k">      </span><span class="n">QEvaporator</span> <span class="o">=</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">)</span>
<a name="ln-6255"></a>      <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">QEvaporator</span><span class="o">/</span><span class="n">EvapMassFlowRate</span><span class="o">/</span><span class="n">Cp</span>
<a name="ln-6256"></a>      <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapDeltaTemp</span>
<a name="ln-6257"></a>    <span class="k">ELSE</span>  <span class="c">!No subcooling in this case.No recalculation required.Still need to check chiller low temp limit</span>
<a name="ln-6258"></a>      <span class="k">SELECT CASE</span> <span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">LoopNum</span><span class="p">)%</span><span class="n">LoopDemandCalcScheme</span><span class="p">)</span>
<a name="ln-6259"></a>      <span class="k">CASE</span> <span class="p">(</span><span class="n">SingleSetpoint</span><span class="p">)</span>
<a name="ln-6260"></a>        <span class="k">IF</span> <span class="p">((</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">LeavingSetpointModulated</span><span class="p">)</span> <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-6261"></a>            <span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">LoopNum</span><span class="p">)%</span><span class="n">LoopSide</span><span class="p">(</span><span class="n">LoopSideNum</span><span class="p">)%</span><span class="n">Branch</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">)</span> <span class="p">&amp;</span>
<a name="ln-6262"></a>              <span class="p">%</span><span class="n">Comp</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)%</span><span class="n">CurOpSchemeType</span> <span class="p">&amp;</span>
<a name="ln-6263"></a>                 <span class="o">==</span> <span class="n">CompSetPtBasedSchemeType</span><span class="p">)</span>          <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-6264"></a>            <span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPoint</span> <span class="o">/=</span> <span class="n">SensedNodeFlagValue</span><span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6265"></a><span class="k">          </span><span class="n">TempEvapOutSetpoint</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPoint</span>
<a name="ln-6266"></a>        <span class="k">ELSE</span>
<a name="ln-6267"></a><span class="k">          </span><span class="n">TempEvapOutSetpoint</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">LoopNum</span><span class="p">)%</span><span class="n">TempSetPointNodeNum</span><span class="p">)%</span><span class="n">TempSetPoint</span>
<a name="ln-6268"></a>        <span class="n">ENDIF</span>
<a name="ln-6269"></a>      <span class="k">CASE</span> <span class="p">(</span><span class="n">DualSetpointDeadband</span><span class="p">)</span>
<a name="ln-6270"></a>        <span class="k">IF</span> <span class="p">((</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">LeavingSetpointModulated</span><span class="p">)</span> <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-6271"></a>            <span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">LoopNum</span><span class="p">)%</span><span class="n">LoopSide</span><span class="p">(</span><span class="n">LoopSideNum</span><span class="p">)%</span><span class="n">Branch</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">)</span> <span class="p">&amp;</span>
<a name="ln-6272"></a>              <span class="p">%</span><span class="n">Comp</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)%</span><span class="n">CurOpSchemeType</span> <span class="p">&amp;</span>
<a name="ln-6273"></a>                 <span class="o">==</span> <span class="n">CompSetPtBasedSchemeType</span><span class="p">)</span>          <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-6274"></a>            <span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPointHi</span> <span class="o">/=</span> <span class="n">SensedNodeFlagValue</span><span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6275"></a><span class="k">          </span><span class="n">TempEvapOutSetpoint</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPointHi</span>
<a name="ln-6276"></a>        <span class="k">ELSE</span>
<a name="ln-6277"></a><span class="k">          </span><span class="n">TempEvapOutSetpoint</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">LoopNum</span><span class="p">)%</span><span class="n">TempSetPointNodeNum</span><span class="p">)%</span><span class="n">TempSetPointHi</span>
<a name="ln-6278"></a>        <span class="n">ENDIF</span>
<a name="ln-6279"></a>      <span class="k">END SELECT</span>
<a name="ln-6280"></a><span class="k">      </span><span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">TempEvapOutSetpoint</span>
<a name="ln-6281"></a>      <span class="n">QEvaporator</span> <span class="o">=</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">EvapMassFlowRate</span><span class="o">*</span><span class="n">Cp</span><span class="o">*</span><span class="n">EvapDeltaTemp</span><span class="p">)</span>
<a name="ln-6282"></a>      <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">TempEvapOutSetpoint</span>
<a name="ln-6283"></a>    <span class="k">END IF</span>
<a name="ln-6284"></a>    <span class="c">!Check that the Evap outlet temp honors both plant loop temp low limit and also the chiller low limit</span>
<a name="ln-6285"></a>    <span class="k">IF</span><span class="p">(</span><span class="n">EvapOutletTemp</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="n">TempLowLimitEout</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6286"></a><span class="k">      IF</span><span class="p">((</span><span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">TempLowLimitEout</span><span class="p">)</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="n">DeltaTempTol</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6287"></a><span class="k">        </span><span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">TempLowLimitEout</span>
<a name="ln-6288"></a>        <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapOutletTemp</span>
<a name="ln-6289"></a>        <span class="n">QEvaporator</span> <span class="o">=</span> <span class="n">EvapMassFlowRate</span><span class="o">*</span><span class="n">Cp</span><span class="o">*</span><span class="n">EvapDeltaTemp</span>
<a name="ln-6290"></a>      <span class="k">ELSE</span>
<a name="ln-6291"></a><span class="k">        </span><span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-6292"></a>        <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapOutletTemp</span>
<a name="ln-6293"></a>        <span class="n">QEvaporator</span> <span class="o">=</span> <span class="n">EvapMassFlowRate</span><span class="o">*</span><span class="n">Cp</span><span class="o">*</span><span class="n">EvapDeltaTemp</span>
<a name="ln-6294"></a>      <span class="k">END IF</span>
<a name="ln-6295"></a><span class="k">    END IF</span>
<a name="ln-6296"></a><span class="k">    IF</span><span class="p">(</span><span class="n">EvapOutletTemp</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempMin</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6297"></a><span class="k">      IF</span><span class="p">((</span><span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempMin</span><span class="p">)</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="n">DeltaTempTol</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6298"></a><span class="k">        </span><span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempMin</span>
<a name="ln-6299"></a>        <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapOutletTemp</span>
<a name="ln-6300"></a>        <span class="n">QEvaporator</span> <span class="o">=</span> <span class="n">EvapMassFlowRate</span><span class="o">*</span><span class="n">Cp</span><span class="o">*</span><span class="n">EvapDeltaTemp</span>
<a name="ln-6301"></a>      <span class="k">ELSE</span>
<a name="ln-6302"></a><span class="k">        </span><span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-6303"></a>        <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapOutletTemp</span>
<a name="ln-6304"></a>        <span class="n">QEvaporator</span> <span class="o">=</span> <span class="n">EvapMassFlowRate</span><span class="o">*</span><span class="n">Cp</span><span class="o">*</span><span class="n">EvapDeltaTemp</span>
<a name="ln-6305"></a>      <span class="k">END IF</span>
<a name="ln-6306"></a><span class="k">    END IF</span>
<a name="ln-6307"></a>    <span class="c">! If load exceeds the distributed load set to the distributed load</span>
<a name="ln-6308"></a>    <span class="k">If</span><span class="p">(</span><span class="n">QEvaporator</span> <span class="o">&gt;</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">))</span> <span class="k">Then</span>
<a name="ln-6309"></a><span class="k">      If</span><span class="p">(</span><span class="n">EvapMassFlowRate</span> <span class="o">&gt;</span> <span class="n">MassFlowTolerance</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6310"></a><span class="k">        </span><span class="n">QEvaporator</span> <span class="o">=</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">)</span>
<a name="ln-6311"></a>        <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">QEvaporator</span><span class="o">/</span><span class="n">EvapMassFlowRate</span><span class="o">/</span><span class="n">Cp</span>
<a name="ln-6312"></a>        <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapDeltaTemp</span>
<a name="ln-6313"></a>      <span class="k">Else</span>
<a name="ln-6314"></a><span class="k">        </span><span class="n">QEvaporator</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-6315"></a>        <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-6316"></a>      <span class="k">End If</span>
<a name="ln-6317"></a><span class="k">    End IF</span>
<a name="ln-6318"></a>
<a name="ln-6319"></a>    <span class="c">! Checks QEvaporator on the basis of the machine limits.</span>
<a name="ln-6320"></a>    <span class="k">If</span><span class="p">(</span><span class="n">QEvaporator</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">AvailChillerCap</span> <span class="o">*</span> <span class="n">MaxPartLoadRat</span><span class="p">))</span><span class="k">Then</span>
<a name="ln-6321"></a><span class="k">      If</span><span class="p">(</span><span class="n">EvapMassFlowRate</span> <span class="o">&gt;</span> <span class="n">MassFlowTolerance</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6322"></a><span class="k">        </span><span class="n">QEvaporator</span> <span class="o">=</span> <span class="n">AvailChillerCap</span> <span class="o">*</span> <span class="n">PartLoadRat</span>
<a name="ln-6323"></a>        <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">QEvaporator</span><span class="o">/</span><span class="n">EvapMassFlowRate</span><span class="o">/</span><span class="n">Cp</span>
<a name="ln-6324"></a>        <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapDeltaTemp</span>
<a name="ln-6325"></a>      <span class="k">Else</span>
<a name="ln-6326"></a><span class="k">        </span><span class="n">QEvaporator</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-6327"></a>        <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-6328"></a>      <span class="k">End If</span>
<a name="ln-6329"></a><span class="k">    End If</span>
<a name="ln-6330"></a>
<a name="ln-6331"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">OperPartLoadRat</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="n">MinPartLoadRat</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6332"></a><span class="k">      </span><span class="n">FRAC</span> <span class="o">=</span> <span class="nb">MIN</span><span class="p">(</span><span class="mf">1.0d0</span><span class="p">,(</span><span class="n">OperPartLoadRat</span><span class="o">/</span><span class="n">MinPartLoadRat</span><span class="p">))</span>
<a name="ln-6333"></a>    <span class="k">ELSE</span>
<a name="ln-6334"></a><span class="k">      </span><span class="n">FRAC</span> <span class="o">=</span> <span class="mf">1.0d0</span>
<a name="ln-6335"></a>    <span class="k">END IF</span>
<a name="ln-6336"></a>
<a name="ln-6337"></a>    <span class="c">! set the module level variable used for reporting FRAC</span>
<a name="ln-6338"></a>    <span class="n">ChillerCyclingRatio</span> <span class="o">=</span> <span class="n">FRAC</span>
<a name="ln-6339"></a>
<a name="ln-6340"></a>    <span class="c">! Chiller is false loading below PLR = minimum unloading ratio, find PLR used for energy calculation</span>
<a name="ln-6341"></a>    <span class="n">Power</span> <span class="o">=</span> <span class="n">FracFullLoadPower</span> <span class="o">*</span> <span class="n">FullLoadPowerRat</span> <span class="o">*</span> <span class="n">AvailChillerCap</span> <span class="o">/</span><span class="n">COP</span> <span class="o">*</span> <span class="n">FRAC</span>
<a name="ln-6342"></a>
<a name="ln-6343"></a>    <span class="k">IF</span><span class="p">(</span><span class="n">EvapMassFlowRate</span> <span class="o">==</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6344"></a><span class="k">     </span><span class="n">QEvaporator</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-6345"></a>     <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-6346"></a>     <span class="n">Power</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-6347"></a>     <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-6348"></a>    <span class="k">END IF</span>
<a name="ln-6349"></a><span class="k">    IF</span><span class="p">(</span><span class="n">QEvaporator</span> <span class="o">==</span> <span class="mf">0.0d0</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6350"></a><span class="k">       CALL </span><span class="n">CalcBasinHeaterPower</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPowerFTempDiff</span><span class="p">,&amp;</span>
<a name="ln-6351"></a>                                 <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSchedulePtr</span><span class="p">,&amp;</span>
<a name="ln-6352"></a>                                 <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSetPointTemp</span><span class="p">,</span><span class="n">BasinHeaterPower</span><span class="p">)</span>
<a name="ln-6353"></a>    <span class="k">END IF</span>
<a name="ln-6354"></a>
<a name="ln-6355"></a><span class="k">    END IF</span>  <span class="c">!This is the end of the FlowLock Block</span>
<a name="ln-6356"></a>
<a name="ln-6357"></a>    <span class="c">!Now determine Cooling</span>
<a name="ln-6358"></a>    <span class="c">!QCondenser is calculated the same for each type, but the power consumption should be different</span>
<a name="ln-6359"></a>    <span class="c">!  depending on the performance coefficients used for the chiller model.</span>
<a name="ln-6360"></a>    <span class="n">QCondenser</span> <span class="o">=</span> <span class="n">Power</span> <span class="o">+</span> <span class="n">QEvaporator</span>
<a name="ln-6361"></a>
<a name="ln-6362"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6363"></a>
<a name="ln-6364"></a><span class="k">      IF</span> <span class="p">(</span><span class="n">CondMassFlowRate</span> <span class="o">&gt;</span> <span class="n">MassFlowTolerance</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6365"></a><span class="k">        </span><span class="n">CpCond</span> <span class="o">=</span> <span class="n">GetSpecificHeatGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-6366"></a>                                       <span class="n">CondInletTemp</span><span class="p">,</span>                      <span class="p">&amp;</span>
<a name="ln-6367"></a>                                       <span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6368"></a>                                       <span class="s1">&#39;CalcGTChillerModel&#39;</span><span class="p">)</span>
<a name="ln-6369"></a>        <span class="n">CondOutletTemp</span> <span class="o">=</span> <span class="n">QCondenser</span><span class="o">/</span><span class="n">CondMassFlowRate</span><span class="o">/</span><span class="n">CpCond</span> <span class="o">+</span> <span class="n">CondInletTemp</span>
<a name="ln-6370"></a>      <span class="k">ELSE</span>
<a name="ln-6371"></a><span class="k">        CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;CalcGasTurbineChillerModel: Condenser flow = 0, for GasTurbineChiller=&#39;</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-6372"></a>                             <span class="nb">TRIM</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">))</span>
<a name="ln-6373"></a>        <span class="k">CALL </span><span class="n">ShowContinueErrorTimeStamp</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<a name="ln-6374"></a>
<a name="ln-6375"></a>      <span class="k">END IF</span>
<a name="ln-6376"></a>
<a name="ln-6377"></a><span class="k">    ELSE</span> <span class="c">!Air Cooled or Evap Cooled</span>
<a name="ln-6378"></a>
<a name="ln-6379"></a>      <span class="c">!don&#39;t care about outlet temp for Air-Cooled or Evap Cooled and there is no CondMassFlowRate and would divide by zero</span>
<a name="ln-6380"></a>      <span class="n">CondOutletTemp</span> <span class="o">=</span> <span class="n">CondInletTemp</span>
<a name="ln-6381"></a>    <span class="k">END IF</span>
<a name="ln-6382"></a>
<a name="ln-6383"></a>
<a name="ln-6384"></a>
<a name="ln-6385"></a>    <span class="c">!Special GT Chiller Variables</span>
<a name="ln-6386"></a>    <span class="c">! Gas Turbine Driven Portion of the Chiller:</span>
<a name="ln-6387"></a>
<a name="ln-6388"></a>    <span class="n">GTEngineCapacity</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">GTEngineCapacity</span>
<a name="ln-6389"></a>    <span class="n">MaxExhaustperGTPower</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">MaxExhaustperGTPower</span>
<a name="ln-6390"></a>
<a name="ln-6391"></a>
<a name="ln-6392"></a><span class="c">!Note: All Old Blast Code comments begin at left.</span>
<a name="ln-6393"></a>
<a name="ln-6394"></a><span class="c">!D                                   COMPUTE TOWER CLOAD</span>
<a name="ln-6395"></a><span class="c">!               ETOWER(TypeIndex) = PREQD + CHLRLOAD(TypeIndex)</span>
<a name="ln-6396"></a><span class="c">!               RPLOAD = PREQD/CHLROCAP(TypeIndex)</span>
<a name="ln-6397"></a><span class="c">!</span>
<a name="ln-6398"></a><span class="c">!               IF (RFLAGS(81)) WRITE (OUTPUT,703) PREQD,ETOWER(TypeIndex),RPLOAD</span>
<a name="ln-6399"></a><span class="c">!               IF (PREQD .GT. 0.0d0) THEN</span>
<a name="ln-6400"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">AvailChillerCap</span> <span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-6401"></a><span class="k">      </span><span class="n">RPLoad</span> <span class="o">=</span> <span class="n">Power</span> <span class="o">/</span> <span class="n">AvailChillerCap</span>
<a name="ln-6402"></a>    <span class="k">ELSE</span>
<a name="ln-6403"></a><span class="k">      </span><span class="n">RPLoad</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-6404"></a>    <span class="k">END IF</span>
<a name="ln-6405"></a>
<a name="ln-6406"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">Power</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6407"></a><span class="c">!D$                               FOR EACH CHILLER OPERATING</span>
<a name="ln-6408"></a><span class="c">!                  MAXSZ = NUMCHSIZ(TypeIndex,IPLCTR)</span>
<a name="ln-6409"></a><span class="c">!                  DO IS = 1,MAXSZ</span>
<a name="ln-6410"></a><span class="c">!</span>
<a name="ln-6411"></a><span class="c">!                     NUMOPR = CHLRIOPR(IS,TypeIndex)</span>
<a name="ln-6412"></a><span class="c">!                     IF (NUMOPR.GT.0) THEN</span>
<a name="ln-6413"></a><span class="c">!</span>
<a name="ln-6414"></a><span class="c">!                        PLOAD = CHNOMCAP(IS,TypeIndex,IPLCTR) * RPLOAD</span>
<a name="ln-6415"></a>
<a name="ln-6416"></a>    <span class="n">PLoad</span> <span class="o">=</span> <span class="n">ChillerNomCap</span> <span class="o">*</span> <span class="n">RPLoad</span>
<a name="ln-6417"></a>
<a name="ln-6418"></a><span class="c">!</span>
<a name="ln-6419"></a><span class="c">!D$                                COMPUTE FUEL AND WASTE HEAT</span>
<a name="ln-6420"></a><span class="c">!</span>
<a name="ln-6421"></a><span class="c">!     TEX IS CALCULATED USING COEFFICIENTS TEX2GC( ) TO RESULT IN TEMP.</span>
<a name="ln-6422"></a><span class="c">!     DEGREES ACTUAL, HENCE THE NECESSARY CONVERSION ?-273.?</span>
<a name="ln-6423"></a><span class="c">!</span>
<a name="ln-6424"></a><span class="c">!                        RLOAD=AMAX1(PLOAD/CHLROCAP(TypeIndex),MINCHFR(TypeIndex,IPLCTR))</span>
<a name="ln-6425"></a><span class="c">!                        RLD2 = RLOAD**2</span>
<a name="ln-6426"></a>
<a name="ln-6427"></a>     <span class="c">! RL = MAX(PLoad/GTEngineCapacity, MinPartLoadRat * ChillerNomCap)</span>
<a name="ln-6428"></a>    <span class="n">RL</span> <span class="o">=</span> <span class="nb">MAX</span><span class="p">(</span><span class="n">PLoad</span><span class="o">/</span><span class="n">ChillerNomCap</span><span class="p">,</span> <span class="n">MinPartLoadRat</span><span class="p">)</span>
<a name="ln-6429"></a>    <span class="n">RL2</span> <span class="o">=</span> <span class="n">RL</span><span class="o">**</span><span class="mi">2</span>
<a name="ln-6430"></a>
<a name="ln-6431"></a><span class="c">!     ATAIR = DELTA TEMPERATURE. ACTUAL - 25 DEG.C (77 DEG.F)</span>
<a name="ln-6432"></a><span class="c">!                                RATING POINT</span>
<a name="ln-6433"></a><span class="c">!                        ATAIR = ODB - 25.</span>
<a name="ln-6434"></a><span class="c">!                        TAR2=ATAIR**2</span>
<a name="ln-6435"></a>
<a name="ln-6436"></a>    <span class="c">! ??? Not sure about this Ambient Actual Temp - also do we need to have design ambient as input?</span>
<a name="ln-6437"></a>
<a name="ln-6438"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6439"></a><span class="k">      </span><span class="n">AmbientDeltaT</span> <span class="o">=</span> <span class="n">OutDryBulbTemp</span> <span class="o">-</span> <span class="mi">2</span><span class="mf">5.d0</span>
<a name="ln-6440"></a>    <span class="k">ELSE</span>  <span class="c">! air or evap cooled</span>
<a name="ln-6441"></a>      <span class="n">AmbientDeltaT</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">OutAirDryBulb</span> <span class="o">-</span> <span class="mi">2</span><span class="mf">5.d0</span>
<a name="ln-6442"></a>    <span class="n">ENDIF</span>
<a name="ln-6443"></a>
<a name="ln-6444"></a>
<a name="ln-6445"></a><span class="c">!                        EFUEL=PLOAD*(FUL1GC(1,IPLCTR)+FUL1GC(2,IPLCTR)*  &amp;</span>
<a name="ln-6446"></a><span class="c">!                              RLOAD+FUL1GC(3,IPLCTR)*RLD2)*              &amp;</span>
<a name="ln-6447"></a><span class="c">!                              (FUL2GC(1,IPLCTR)+FUL2GC(2,IPLCTR)*ATAIR+  &amp;</span>
<a name="ln-6448"></a><span class="c">!                              FUL2GC(3,IPLCTR)*TAR2)</span>
<a name="ln-6449"></a>
<a name="ln-6450"></a>    <span class="n">FuelEnergyIn</span> <span class="o">=</span> <span class="n">PLoad</span> <span class="o">*</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">PLBasedFuelInputCoef</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span>         <span class="p">&amp;</span>
<a name="ln-6451"></a>                               <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">PLBasedFuelInputCoef</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">RL</span> <span class="o">+</span>    <span class="p">&amp;</span>
<a name="ln-6452"></a>                                  <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">PLBasedFuelInputCoef</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">*</span><span class="n">RL2</span><span class="p">)</span>  <span class="p">&amp;</span>
<a name="ln-6453"></a>                           <span class="o">*</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempBasedFuelInputCoef</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span>       <span class="p">&amp;</span>
<a name="ln-6454"></a>                                <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempBasedFuelInputCoef</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">AmbientDeltaT</span> <span class="o">+</span> <span class="p">&amp;</span>
<a name="ln-6455"></a>                                  <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempBasedFuelInputCoef</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">*</span><span class="n">AmbientDeltaT</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<a name="ln-6456"></a>
<a name="ln-6457"></a>
<a name="ln-6458"></a><span class="c">!                        FEX=GTDSLCAP(IS,TypeIndex,IPLCTR)*(FEXGC(1,IPLCTR)+      &amp;</span>
<a name="ln-6459"></a><span class="c">!                            FEXGC(2,IPLCTR)*ATAIR+FEXGC(3,IPLCTR)*TAR2)</span>
<a name="ln-6460"></a>
<a name="ln-6461"></a>    <span class="n">ExhaustFlow</span> <span class="o">=</span> <span class="n">GTEngineCapacity</span> <span class="o">*</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">ExhaustFlowCoef</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span>      <span class="p">&amp;</span>
<a name="ln-6462"></a>                                          <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">ExhaustFlowCoef</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">AmbientDeltaT</span>  <span class="o">+</span> <span class="p">&amp;</span>
<a name="ln-6463"></a>                                            <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">ExhaustFlowCoef</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="n">AmbientDeltaT</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<a name="ln-6464"></a>
<a name="ln-6465"></a><span class="c">!                        TEX=(TEX1GC(1,IPLCTR)+TEX1GC(2,IPLCTR)*RLOAD+    &amp;</span>
<a name="ln-6466"></a><span class="c">!                            TEX1GC(3,IPLCTR)*RLD2)*(TEX2GC(1,IPLCTR)+    &amp;</span>
<a name="ln-6467"></a><span class="c">!                            TEX2GC(2,IPLCTR)*ATAIR+TEX2GC(3,IPLCTR)*     &amp;</span>
<a name="ln-6468"></a><span class="c">!                            TAR2)-273.</span>
<a name="ln-6469"></a>
<a name="ln-6470"></a>    <span class="n">ExhaustTemp</span> <span class="o">=</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">PLBasedExhaustTempCoef</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span>          <span class="p">&amp;</span>
<a name="ln-6471"></a>                       <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">PLBasedExhaustTempCoef</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">RL</span> <span class="o">+</span>     <span class="p">&amp;</span>
<a name="ln-6472"></a>                         <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">PLBasedExhaustTempCoef</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">*</span><span class="n">RL2</span><span class="p">)</span>   <span class="p">&amp;</span>
<a name="ln-6473"></a>                  <span class="o">*</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempBasedExhaustTempCoef</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span>        <span class="p">&amp;</span>
<a name="ln-6474"></a>                       <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempBasedExhaustTempCoef</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">AmbientDeltaT</span> <span class="o">+</span> <span class="p">&amp;</span>
<a name="ln-6475"></a>                         <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">TempBasedExhaustTempCoef</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">*</span><span class="n">AmbientDeltaT</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="mi">273</span>
<a name="ln-6476"></a>
<a name="ln-6477"></a>
<a name="ln-6478"></a>
<a name="ln-6479"></a><span class="c">!                        UAG=UACGC(1,IPLCTR)*GTDSLCAP(IS,TypeIndex,IPLCTR)**      &amp;</span>
<a name="ln-6480"></a><span class="c">!                            UACGC(2,IPLCTR)</span>
<a name="ln-6481"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">PLoad</span> <span class="o">/=</span> <span class="mf">0.0d0</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-6482"></a><span class="k">      </span><span class="n">UAtoCapRat</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">UAtoCapCoef</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">GTEngineCapacity</span> <span class="o">**</span>  <span class="p">&amp;</span>
<a name="ln-6483"></a>                       <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">UAtoCapCoef</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<a name="ln-6484"></a>
<a name="ln-6485"></a><span class="c">!     TSTACK = EXHAUST STACK TEMPERATURE, C.</span>
<a name="ln-6486"></a><span class="c">!</span>
<a name="ln-6487"></a><span class="c">!                        TSTACK=TSATUR(IPLCTR)+(TEX-TSATUR(IPLCTR))/      &amp;</span>
<a name="ln-6488"></a><span class="c">!                               EXP(UAG/(AMAX1(FEX,RMXKGC(IPLCTR)*        &amp;</span>
<a name="ln-6489"></a><span class="c">!                               GTDSLCAP(IS,TypeIndex,IPLCTR)) * 1.047))</span>
<a name="ln-6490"></a>
<a name="ln-6491"></a>      <span class="n">DesignSteamSatTemp</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">DesignSteamSatTemp</span>
<a name="ln-6492"></a>      <span class="n">ExhaustStackTemp</span> <span class="o">=</span> <span class="n">DesignSteamSatTemp</span> <span class="o">+</span> <span class="p">(</span><span class="n">ExhaustTemp</span> <span class="o">-</span> <span class="n">DesignSteamSatTemp</span><span class="p">)</span> <span class="o">/</span> <span class="p">&amp;</span>
<a name="ln-6493"></a>                           <span class="nb">EXP</span><span class="p">(</span><span class="n">UAtoCapRat</span><span class="o">/</span><span class="p">(</span><span class="nb">MAX</span><span class="p">(</span><span class="n">ExhaustFlow</span><span class="p">,</span> <span class="n">MaxExhaustperGTPower</span> <span class="o">*</span> <span class="n">GTEngineCapacity</span><span class="p">)</span> <span class="o">*</span> <span class="n">ExhaustCP</span><span class="p">))</span>
<a name="ln-6494"></a>
<a name="ln-6495"></a>
<a name="ln-6496"></a><span class="c">!                        EEX = AMAX1 ( FEX*1.047*(TEX-TSTACK),0.0d0)</span>
<a name="ln-6497"></a><span class="c">!                        ELUBE=PLOAD*(ELUBEGC(1,IPLCTR)+ELUBEGC(2,IPLCTR) &amp;</span>
<a name="ln-6498"></a><span class="c">!                              *RLOAD+ELUBEGC(3,IPLCTR)*RLD2 )</span>
<a name="ln-6499"></a>    <span class="k">END IF</span>
<a name="ln-6500"></a>
<a name="ln-6501"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6502"></a><span class="k">      </span><span class="n">QHeatRecLube</span> <span class="o">=</span> <span class="n">PLoad</span> <span class="o">*</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecLubeEnergyCoef</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span>      <span class="p">&amp;</span>
<a name="ln-6503"></a>                              <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecLubeEnergyCoef</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">RL</span> <span class="o">+</span> <span class="p">&amp;</span>
<a name="ln-6504"></a>                              <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecLubeEnergyCoef</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">*</span><span class="n">RL2</span><span class="p">)</span>
<a name="ln-6505"></a>
<a name="ln-6506"></a>    <span class="k">ELSE</span>
<a name="ln-6507"></a><span class="k">      </span><span class="n">QHeatRecLube</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-6508"></a>    <span class="k">End If</span>
<a name="ln-6509"></a>
<a name="ln-6510"></a><span class="c">!                        CHLRFUEL(TypeIndex) = CHLRFUEL(TypeIndex) + EFUEL * NUMOPR</span>
<a name="ln-6511"></a><span class="c">!                        EEXGC = EEXGC + EEX * NUMOPR</span>
<a name="ln-6512"></a><span class="c">!                        ELBEGC = ELBEGC + ELUBE * NUMOPR</span>
<a name="ln-6513"></a><span class="c">!</span>
<a name="ln-6514"></a>
<a name="ln-6515"></a>
<a name="ln-6516"></a><span class="c">!Heat Recovery Loop -  lube recovered heat</span>
<a name="ln-6517"></a><span class="c">!   If lube is not present, then the energy should be 0 at this point</span>
<a name="ln-6518"></a><span class="c">! Thigh = Energy / (Mdot*Cp) + Tlow</span>
<a name="ln-6519"></a>
<a name="ln-6520"></a>    <span class="c">!Need to set the HeatRecRatio to 1.0 if it is not modified</span>
<a name="ln-6521"></a>    <span class="n">HeatRecRatio</span><span class="o">=</span> <span class="mf">1.0d0</span>
<a name="ln-6522"></a>
<a name="ln-6523"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6524"></a>       <span class="c">!This mdot is input specified mdot &quot;Desired Flowrate&quot;, already set at node in init routine</span>
<a name="ln-6525"></a>      <span class="n">HeatRecMdot</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">HeatRecInNode</span><span class="p">)%</span><span class="n">MassFlowRate</span>
<a name="ln-6526"></a>      <span class="n">HeatRecInTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">HeatRecInNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-6527"></a>      <span class="n">HeatRecCp</span> <span class="o">=</span> <span class="n">GetSpecificHeatGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-6528"></a>                                        <span class="n">HeatRecInTemp</span><span class="p">,</span>                      <span class="p">&amp;</span>
<a name="ln-6529"></a>                                        <span class="n">PlantLoop</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6530"></a>                                        <span class="s1">&#39;ChillerHeatRecovery&#39;</span><span class="p">)</span>
<a name="ln-6531"></a>
<a name="ln-6532"></a>      <span class="c">!Don&#39;t divide by zero</span>
<a name="ln-6533"></a>      <span class="k">IF</span> <span class="p">((</span><span class="n">HeatRecMdot</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="mi">0</span><span class="p">)</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="p">(</span><span class="n">HeatRecCp</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="mi">0</span><span class="p">))</span> <span class="k">THEN</span>
<a name="ln-6534"></a><span class="k">        </span><span class="n">HeatRecOutTemp</span> <span class="o">=</span> <span class="p">(</span><span class="n">QHeatRecLube</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">HeatRecMdot</span> <span class="o">*</span> <span class="n">HeatRecCp</span><span class="p">)</span> <span class="o">+</span> <span class="n">HeatRecInTemp</span>
<a name="ln-6535"></a>      <span class="k">ELSE</span>
<a name="ln-6536"></a><span class="k">        </span><span class="n">HeatRecOutTemp</span> <span class="o">=</span> <span class="n">HeatRecInTemp</span>
<a name="ln-6537"></a>      <span class="k">END IF</span>
<a name="ln-6538"></a>
<a name="ln-6539"></a>      <span class="c">!Now verify that the design flowrate was large enough to prevent phase change</span>
<a name="ln-6540"></a>      <span class="k">IF</span><span class="p">(</span><span class="n">HeatRecOutTemp</span> <span class="o">&gt;</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecMaxTemp</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6541"></a><span class="k">        IF</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecMaxTemp</span> <span class="o">/=</span> <span class="n">HeatRecInTemp</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-6542"></a><span class="k">          </span><span class="n">MinHeatRecMdot</span> <span class="o">=</span> <span class="p">(</span><span class="n">QHeatRecLube</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">HeatRecCp</span> <span class="o">*</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecMaxTemp</span> <span class="o">-</span> <span class="n">HeatRecInTemp</span><span class="p">))</span>
<a name="ln-6543"></a>          <span class="k">If</span><span class="p">(</span><span class="n">MinHeatRecMdot</span> <span class="o">&lt;</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="n">MinHeatRecMdot</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-6544"></a>        <span class="k">END IF</span>
<a name="ln-6545"></a>
<a name="ln-6546"></a>        <span class="c">!Recalculate Outlet Temperature, with adjusted flowrate</span>
<a name="ln-6547"></a>        <span class="k">IF</span> <span class="p">((</span><span class="n">MinHeatRecMdot</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="p">(</span><span class="n">HeatRecCp</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="mf">0.0d0</span><span class="p">))</span> <span class="k">THEN</span>
<a name="ln-6548"></a><span class="k">          </span><span class="n">HeatRecOutTemp</span> <span class="o">=</span> <span class="p">(</span><span class="n">QHeatRecLube</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">MinHeatRecMdot</span> <span class="o">*</span> <span class="n">HeatRecCp</span><span class="p">)</span> <span class="o">+</span> <span class="n">HeatRecInTemp</span>
<a name="ln-6549"></a>          <span class="n">HeatRecRatio</span> <span class="o">=</span> <span class="n">HeatRecMdot</span><span class="o">/</span><span class="n">MinHeatRecMdot</span>
<a name="ln-6550"></a>        <span class="k">ELSE</span>
<a name="ln-6551"></a><span class="k">          </span><span class="n">HeatRecOutTemp</span> <span class="o">=</span> <span class="n">HeatRecInTemp</span>
<a name="ln-6552"></a>          <span class="n">HeatRecRatio</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-6553"></a>        <span class="k">END IF</span>
<a name="ln-6554"></a><span class="k">      End If</span>
<a name="ln-6555"></a>
<a name="ln-6556"></a><span class="k">      </span><span class="n">QHeatRecLube</span> <span class="o">=</span> <span class="n">QHeatRecLube</span><span class="o">*</span><span class="n">HeatRecRatio</span>
<a name="ln-6557"></a>    <span class="k">ELSE</span>
<a name="ln-6558"></a><span class="k">      </span><span class="n">HeatRecInTemp</span><span class="o">=</span><span class="mf">0.0d0</span>
<a name="ln-6559"></a>      <span class="n">HeatRecMDot</span><span class="o">=</span><span class="mf">0.0d0</span>
<a name="ln-6560"></a>      <span class="n">HeatRecCp</span><span class="o">=</span><span class="mf">0.0d0</span>
<a name="ln-6561"></a>      <span class="n">HeatRecOutTemp</span><span class="o">=</span><span class="mf">0.0d0</span>
<a name="ln-6562"></a>    <span class="n">ENDIF</span>
<a name="ln-6563"></a>
<a name="ln-6564"></a>  <span class="k">END IF</span>
<a name="ln-6565"></a>
<a name="ln-6566"></a><span class="k">   </span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecInletTemp</span> <span class="o">=</span> <span class="n">HeatRecInTemp</span>
<a name="ln-6567"></a>   <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecOutletTemp</span> <span class="o">=</span> <span class="n">HeatRecOutTemp</span>
<a name="ln-6568"></a>   <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecMdot</span> <span class="o">=</span> <span class="n">HeatRecMdot</span>
<a name="ln-6569"></a>   <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecLubeEnergy</span> <span class="o">=</span> <span class="n">QHeatRecLube</span><span class="o">*</span><span class="p">(</span><span class="n">TimeStepSys</span><span class="o">*</span><span class="n">SecInHour</span><span class="p">)</span>
<a name="ln-6570"></a>   <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecLubeRate</span> <span class="o">=</span> <span class="n">QHeatRecLube</span>
<a name="ln-6571"></a>   <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelEnergyIn</span> <span class="o">=</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">FuelEnergyIn</span><span class="p">)</span>
<a name="ln-6572"></a>
<a name="ln-6573"></a>   <span class="n">FuelHeatingValue</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelHeatingValue</span>
<a name="ln-6574"></a>
<a name="ln-6575"></a>   <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">FuelMassUsedRate</span> <span class="o">=</span>  <span class="nb">ABS</span><span class="p">(</span><span class="n">FuelEnergyIn</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">FuelHeatingValue</span> <span class="o">*</span> <span class="n">KJtoJ</span><span class="p">)</span>
<a name="ln-6576"></a>
<a name="ln-6577"></a>   <span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">ExhaustStackTemp</span> <span class="o">=</span> <span class="n">ExhaustStackTemp</span>
<a name="ln-6578"></a>
<a name="ln-6579"></a>      <span class="c">!Calculate Energy</span>
<a name="ln-6580"></a>   <span class="n">CondenserEnergy</span>  <span class="o">=</span> <span class="n">QCondenser</span><span class="o">*</span><span class="n">TimeStepSys</span><span class="o">*</span><span class="n">SecInHour</span>
<a name="ln-6581"></a>   <span class="n">Energy</span>           <span class="o">=</span> <span class="n">Power</span><span class="o">*</span><span class="n">TimeStepSys</span><span class="o">*</span><span class="n">SecInHour</span>
<a name="ln-6582"></a>   <span class="n">EvaporatorEnergy</span> <span class="o">=</span> <span class="n">QEvaporator</span><span class="o">*</span><span class="n">TimeStepSys</span><span class="o">*</span><span class="n">SecInHour</span>
<a name="ln-6583"></a>
<a name="ln-6584"></a> <span class="c">!check for problems BG 9/12/06 (deal with observed negative energy results)</span>
<a name="ln-6585"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">Energy</span> <span class="o">&lt;</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">then</span>  <span class="c">! there is a serious problem</span>
<a name="ln-6586"></a>
<a name="ln-6587"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6588"></a>     <span class="c">! first check for run away condenser loop temps (only reason yet to be observed for this?)</span>
<a name="ln-6589"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">CondInletTemp</span> <span class="o">&gt;</span> <span class="mi">7</span><span class="mf">0.0d0</span> <span class="p">)</span>  <span class="k">then</span>
<a name="ln-6590"></a><span class="k">        CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;CalcGTChillerModel: Condenser loop inlet temperatures over 70.0 C for GTChiller=&#39;</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-6591"></a>                            <span class="nb">TRIM</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">))</span>
<a name="ln-6592"></a>        <span class="k">CALL </span><span class="n">ShowContinueErrorTimeStamp</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<a name="ln-6593"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Condenser loop water temperatures are too high at&#39;</span><span class="o">//</span><span class="nb">trim</span><span class="p">(</span><span class="n">RoundSigDigits</span><span class="p">(</span><span class="n">CondInletTemp</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span> <span class="p">)</span>
<a name="ln-6594"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Check input for condenser plant loop, especially cooling tower&#39;</span><span class="p">)</span>
<a name="ln-6595"></a>        <span class="k">CALL </span><span class="n">showContinueError</span><span class="p">(</span><span class="s1">&#39;Evaporator inlet temperature: &#39;</span><span class="o">//</span><span class="nb">trim</span><span class="p">(</span><span class="n">RoundSigDigits</span><span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span> <span class="p">)</span>
<a name="ln-6596"></a>
<a name="ln-6597"></a>        <span class="k">CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;Program Terminates due to previous error condition&#39;</span><span class="p">)</span>
<a name="ln-6598"></a>      <span class="n">ENDIF</span>
<a name="ln-6599"></a>    <span class="n">ENDIF</span>
<a name="ln-6600"></a>    <span class="k">IF</span><span class="p">(.</span><span class="nb">NOT</span><span class="p">.</span><span class="n">WarmupFlag</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-6601"></a><span class="k">      If</span> <span class="p">(</span><span class="n">AvailNomCapRat</span> <span class="o">&lt;</span> <span class="mf">0.0d0</span> <span class="p">)</span> <span class="k">then</span>     <span class="c">! apparently the real reason energy goes negative</span>
<a name="ln-6602"></a>        <span class="k">CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;CalcGTChillerModel: Capacity ratio below zero for GTChiller=&#39;</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-6603"></a>                              <span class="nb">TRIM</span><span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">))</span>
<a name="ln-6604"></a>        <span class="k">CALL </span><span class="n">ShowContinueErrorTimeStamp</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<a name="ln-6605"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Check input for Capacity Ratio Curve&#39;</span><span class="p">)</span>
<a name="ln-6606"></a>        <span class="k">CALL </span><span class="n">showContinueError</span><span class="p">(</span><span class="s1">&#39;Condenser inlet temperature: &#39;</span><span class="o">//</span><span class="nb">trim</span><span class="p">(</span><span class="n">RoundSigDigits</span><span class="p">(</span><span class="n">CondInletTemp</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span> <span class="p">)</span>
<a name="ln-6607"></a>        <span class="k">CALL </span><span class="n">showContinueError</span><span class="p">(</span><span class="s1">&#39;Evaporator inlet temperature: &#39;</span><span class="o">//</span><span class="nb">trim</span><span class="p">(</span><span class="n">RoundSigDigits</span><span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span> <span class="p">)</span>
<a name="ln-6608"></a>        <span class="k">CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;Program Terminates due to previous error condition&#39;</span><span class="p">)</span>
<a name="ln-6609"></a>      <span class="n">ENDIF</span>
<a name="ln-6610"></a>    <span class="n">ENDIF</span>
<a name="ln-6611"></a>    <span class="c">! If makes it here, set limits, chiller can&#39;t have negative energy/power</span>
<a name="ln-6612"></a>    <span class="c">! proceeding silently for now but may want to throw error here</span>
<a name="ln-6613"></a>    <span class="n">Power</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-6614"></a>    <span class="n">Energy</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-6615"></a>  <span class="n">ENDIF</span>
<a name="ln-6616"></a>  <span class="k">RETURN</span>
<a name="ln-6617"></a><span class="k">END SUBROUTINE </span><span class="n">CalcGTChillerModel</span>
<a name="ln-6618"></a>
<a name="ln-6619"></a><span class="k">SUBROUTINE </span><span class="n">CalcConstCOPChillerModel</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">,</span><span class="n">MyLoad</span><span class="p">,</span><span class="n">Runflag</span><span class="p">,</span><span class="n">EquipFlowCtrl</span><span class="p">)</span>
<a name="ln-6620"></a>          <span class="c">! SUBROUTINE INFORMATION:</span>
<a name="ln-6621"></a>          <span class="c">!       AUTHOR         Dan Fisher</span>
<a name="ln-6622"></a>          <span class="c">!       DATE WRITTEN   Sept. 1998</span>
<a name="ln-6623"></a>          <span class="c">!       MODIFIED       Richard Liesen Nov-Dec 2001; Jan 2002,</span>
<a name="ln-6624"></a>          <span class="c">!                      Chandan Sharma, FSEC, February 2010, Added basin heater</span>
<a name="ln-6625"></a>          <span class="c">!       RE-ENGINEERED  na</span>
<a name="ln-6626"></a>
<a name="ln-6627"></a>          <span class="c">! PURPOSE OF THIS SUBROUTINE:</span>
<a name="ln-6628"></a>
<a name="ln-6629"></a>          <span class="c">! METHODOLOGY EMPLOYED:</span>
<a name="ln-6630"></a>
<a name="ln-6631"></a>          <span class="c">! REFERENCES:</span>
<a name="ln-6632"></a>
<a name="ln-6633"></a>          <span class="c">! USE STATEMENTS:</span>
<a name="ln-6634"></a>  <span class="k">USE </span><span class="n">DataGlobals</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">SecInHour</span><span class="p">,</span> <span class="n">CurrentTime</span>
<a name="ln-6635"></a>  <span class="k">USE </span><span class="n">DataInterfaces</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">ShowWarningError</span><span class="p">,</span> <span class="n">ShowSevereError</span><span class="p">,</span> <span class="n">ShowFatalError</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6636"></a>                         <span class="n">ShowContinueErrorTimeStamp</span><span class="p">,</span> <span class="n">ShowContinueError</span>
<a name="ln-6637"></a>  <span class="k">USE </span><span class="n">DataHVACGlobals</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">TimeStepSys</span><span class="p">,</span> <span class="n">SysTimeElapsed</span>
<a name="ln-6638"></a>  <span class="k">USE </span><span class="n">General</span><span class="p">,</span>         <span class="n">ONLY</span> <span class="p">:</span> <span class="n">RoundSigDigits</span><span class="p">,</span> <span class="n">CreateSysTimeIntervalString</span>
<a name="ln-6639"></a>  <span class="k">USE </span><span class="n">DataPlant</span><span class="p">,</span>       <span class="n">ONLY</span> <span class="p">:</span> <span class="n">PlantLoop</span><span class="p">,</span> <span class="n">SimPlantEquipTypes</span><span class="p">,</span> <span class="n">CompSetPtBasedSchemeType</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6640"></a>                              <span class="n">CriteriaType_MassFlowRate</span><span class="p">,</span> <span class="n">SingleSetpoint</span><span class="p">,</span> <span class="n">DualSetpointDeadband</span>
<a name="ln-6641"></a>  <span class="k">USE </span><span class="n">DataBranchAirLoopPlant</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">ControlType_SeriesActive</span><span class="p">,</span> <span class="n">MassFlowTolerance</span>
<a name="ln-6642"></a>  <span class="k">USE </span><span class="n">DataEnvironment</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">EnvironmentName</span><span class="p">,</span> <span class="n">CurMnDy</span>
<a name="ln-6643"></a>  <span class="k">USE </span><span class="n">FluidProperties</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">GetSpecificHeatGlycol</span>
<a name="ln-6644"></a>  <span class="k">USE </span><span class="n">PlantUtilities</span><span class="p">,</span>  <span class="n">ONLY</span> <span class="p">:</span> <span class="n">SetComponentFlowRate</span><span class="p">,</span> <span class="n">PullCompInterconnectTrigger</span>
<a name="ln-6645"></a>
<a name="ln-6646"></a>  <span class="k">IMPLICIT NONE</span>
<a name="ln-6647"></a>
<a name="ln-6648"></a>          <span class="c">! SUBROUTINE ARGUMENT DEFINITIONS:</span>
<a name="ln-6649"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">ChillNum</span>
<a name="ln-6650"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">MyLoad</span>
<a name="ln-6651"></a>  <span class="kt">LOGICAL</span>                <span class="kd">::</span> <span class="n">RunFlag</span>
<a name="ln-6652"></a>  <span class="kt">INTEGER</span><span class="p">,</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span> <span class="kd">::</span> <span class="n">EquipFlowCtrl</span>  <span class="c">! Flow control mode for the equipment</span>
<a name="ln-6653"></a>
<a name="ln-6654"></a>          <span class="c">! SUBROUTINE PARAMETER DEFINITIONS:</span>
<a name="ln-6655"></a>
<a name="ln-6656"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span> <span class="k">parameter</span>        <span class="kd">::</span> <span class="n">DeltaTemptol</span><span class="o">=</span><span class="mf">0.0001d0</span>          <span class="c">! C - minimum significant mass flow rate</span>
<a name="ln-6657"></a>  <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=*</span><span class="p">),</span> <span class="k">PARAMETER</span> <span class="kd">::</span> <span class="n">OutputFormat</span>  <span class="o">=</span><span class="s1">&#39;(F6.2)&#39;</span>
<a name="ln-6658"></a>
<a name="ln-6659"></a>          <span class="c">! DERIVED TYPE DEFINITIONS</span>
<a name="ln-6660"></a>          <span class="c">! na</span>
<a name="ln-6661"></a>
<a name="ln-6662"></a>          <span class="c">! SUBROUTINE LOCAL VARIABLE DECLARATIONS:</span>
<a name="ln-6663"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">EvapDeltaTemp</span>
<a name="ln-6664"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">TempEvapOutSetpoint</span>   <span class="c">! C - evaporator outlet temperature setpoint</span>
<a name="ln-6665"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">EvapInletNode</span>
<a name="ln-6666"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">EvapOutletNode</span>
<a name="ln-6667"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">CondInletNode</span>
<a name="ln-6668"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">CondOutletNode</span>
<a name="ln-6669"></a><span class="c">!  LOGICAL,SAVE           :: PossibleSubCooling=.FALSE.</span>
<a name="ln-6670"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">LoopNum</span>
<a name="ln-6671"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">LoopSideNum</span>
<a name="ln-6672"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">SAVE</span>  <span class="kd">::</span> <span class="n">TimeStepSysLast</span><span class="o">=</span><span class="mf">0.0d0</span>     <span class="c">! last system time step (used to check for downshifting)</span>
<a name="ln-6673"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>       <span class="kd">::</span> <span class="n">CurrentEndTime</span>          <span class="c">! end time of time step for current simulation time step</span>
<a name="ln-6674"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">SAVE</span>  <span class="kd">::</span> <span class="n">CurrentEndTimeLast</span><span class="o">=</span><span class="mf">0.0d0</span>  <span class="c">! end time of time step for last simulation time step</span>
<a name="ln-6675"></a>  <span class="kt">CHARACTER</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span><span class="kd">::</span> <span class="n">OutputChar</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span>        <span class="c">! character string for warning messages</span>
<a name="ln-6676"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>       <span class="kd">::</span> <span class="n">Cp</span>      <span class="c">! local for fluid specif heat, for evaporator</span>
<a name="ln-6677"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>       <span class="kd">::</span> <span class="n">CpCond</span>  <span class="c">! local for fluid specif heat, for condenser</span>
<a name="ln-6678"></a>
<a name="ln-6679"></a>  <span class="n">EvapInletNode</span>            <span class="o">=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletNodeNum</span>
<a name="ln-6680"></a>  <span class="n">EvapOutletNode</span>           <span class="o">=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span>
<a name="ln-6681"></a>  <span class="n">CondInletNode</span>            <span class="o">=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span>
<a name="ln-6682"></a>  <span class="n">CondOutletNode</span>           <span class="o">=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletNodeNum</span>
<a name="ln-6683"></a>
<a name="ln-6684"></a>          <span class="c">!set module level chiller inlet and temperature variables</span>
<a name="ln-6685"></a>  <span class="n">LoopNum</span>                  <span class="o">=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span>
<a name="ln-6686"></a>  <span class="n">LoopSideNum</span>              <span class="o">=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span>
<a name="ln-6687"></a>  <span class="k">SELECT CASE</span> <span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">LoopNum</span><span class="p">)%</span><span class="n">LoopDemandCalcScheme</span><span class="p">)</span>
<a name="ln-6688"></a>  <span class="k">CASE</span> <span class="p">(</span><span class="n">SingleSetpoint</span><span class="p">)</span>
<a name="ln-6689"></a>    <span class="k">IF</span> <span class="p">((</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">LeavingSetpointModulated</span><span class="p">)</span> <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-6690"></a>        <span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">LoopNum</span><span class="p">)%</span><span class="n">LoopSide</span><span class="p">(</span><span class="n">LoopSideNum</span><span class="p">)%</span><span class="n">Branch</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">)</span> <span class="p">&amp;</span>
<a name="ln-6691"></a>          <span class="p">%</span><span class="n">Comp</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)%</span><span class="n">CurOpSchemeType</span> <span class="p">&amp;</span>
<a name="ln-6692"></a>             <span class="o">==</span> <span class="n">CompSetPtBasedSchemeType</span><span class="p">)</span>          <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-6693"></a>        <span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPoint</span> <span class="o">/=</span> <span class="n">SensedNodeFlagValue</span><span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6694"></a><span class="k">      </span><span class="n">TempEvapOutSetpoint</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPoint</span>
<a name="ln-6695"></a>    <span class="k">ELSE</span>
<a name="ln-6696"></a><span class="k">      </span><span class="n">TempEvapOutSetpoint</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">LoopNum</span><span class="p">)%</span><span class="n">TempSetPointNodeNum</span><span class="p">)%</span><span class="n">TempSetPoint</span>
<a name="ln-6697"></a>    <span class="n">ENDIF</span>
<a name="ln-6698"></a>  <span class="k">CASE</span> <span class="p">(</span><span class="n">DualSetpointDeadband</span><span class="p">)</span>
<a name="ln-6699"></a>    <span class="k">IF</span> <span class="p">((</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">LeavingSetpointModulated</span><span class="p">)</span> <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-6700"></a>        <span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">LoopNum</span><span class="p">)%</span><span class="n">LoopSide</span><span class="p">(</span><span class="n">LoopSideNum</span><span class="p">)%</span><span class="n">Branch</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">)</span> <span class="p">&amp;</span>
<a name="ln-6701"></a>          <span class="p">%</span><span class="n">Comp</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)%</span><span class="n">CurOpSchemeType</span> <span class="p">&amp;</span>
<a name="ln-6702"></a>             <span class="o">==</span> <span class="n">CompSetPtBasedSchemeType</span><span class="p">)</span>          <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">&amp;</span>
<a name="ln-6703"></a>        <span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPointHi</span> <span class="o">/=</span> <span class="n">SensedNodeFlagValue</span><span class="p">)</span> <span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6704"></a><span class="k">      </span><span class="n">TempEvapOutSetpoint</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPointHi</span>
<a name="ln-6705"></a>    <span class="k">ELSE</span>
<a name="ln-6706"></a><span class="k">      </span><span class="n">TempEvapOutSetpoint</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">LoopNum</span><span class="p">)%</span><span class="n">TempSetPointNodeNum</span><span class="p">)%</span><span class="n">TempSetPointHi</span>
<a name="ln-6707"></a>    <span class="n">ENDIF</span>
<a name="ln-6708"></a>  <span class="k">END SELECT</span>
<a name="ln-6709"></a><span class="k">  </span><span class="n">EvapDeltaTemp</span>            <span class="o">=</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">TempEvapOutSetpoint</span><span class="p">)</span>
<a name="ln-6710"></a>  <span class="n">EvapInletTemp</span>            <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-6711"></a>
<a name="ln-6712"></a>
<a name="ln-6713"></a>          <span class="c">!If no component demand, or chiller OFF, or Chiller type set to &#39;Passive&#39; by free</span>
<a name="ln-6714"></a>          <span class="c">!cooling heat exchanger, then set condenser side flow and heat transfer rates set to zero</span>
<a name="ln-6715"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">MyLoad</span> <span class="o">&gt;=</span> <span class="mf">0.d0</span> <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">Runflag</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6716"></a>
<a name="ln-6717"></a>   <span class="c">!If Chiller load is 0 or greater or chiller is not running then leave the subroutine.Before leaving</span>
<a name="ln-6718"></a>   <span class="c">!if the component control is SERIESACTIVE we set the component flow to inlet flow so that</span>
<a name="ln-6719"></a>   <span class="c">!flow resolver will not shut down the branch</span>
<a name="ln-6720"></a>    <span class="k">IF</span><span class="p">(</span><span class="n">EquipFlowCtrl</span> <span class="o">==</span> <span class="n">ControlType_SeriesActive</span> <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="n">PlantLoop</span><span class="p">(</span><span class="n">LoopNum</span><span class="p">)%</span><span class="n">LoopSide</span><span class="p">(</span><span class="n">LoopSideNum</span><span class="p">)%</span><span class="n">FlowLock</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6721"></a><span class="k">      </span><span class="n">EvapMassFlowRate</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">MassFlowrate</span>
<a name="ln-6722"></a>    <span class="k">ELSE</span>
<a name="ln-6723"></a><span class="k">      </span><span class="n">EvapMassFlowRate</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-6724"></a>      <span class="k">CALL </span><span class="n">SetComponentFlowRate</span><span class="p">(</span> <span class="n">EvapMassFlowRate</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-6725"></a>                                <span class="n">EvapInletNode</span> <span class="p">,</span> <span class="n">EvapOutletNode</span>  <span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6726"></a>                                <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-6727"></a>                                <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6728"></a>                                <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-6729"></a>                                <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)</span>
<a name="ln-6730"></a>    <span class="n">ENDIF</span>
<a name="ln-6731"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6732"></a><span class="k">      IF</span> <span class="p">(</span> <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span> <span class="p">&amp;</span>
<a name="ln-6733"></a>            <span class="n">LoopSide</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">)%</span> <span class="p">&amp;</span>
<a name="ln-6734"></a>              <span class="n">Branch</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDBranchNum</span><span class="p">)%</span>  <span class="p">&amp;</span>
<a name="ln-6735"></a>                <span class="n">Comp</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDCompNum</span><span class="p">)%</span><span class="n">FlowCtrl</span> <span class="o">==</span> <span class="n">ControlType_SeriesActive</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6736"></a><span class="k">        </span><span class="n">CondMassFlowRate</span>           <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">MassFlowrate</span>
<a name="ln-6737"></a>      <span class="k">ELSE</span>
<a name="ln-6738"></a><span class="k">        </span><span class="n">CondMassFlowRate</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-6739"></a>        <span class="k">CALL </span><span class="n">SetComponentFlowRate</span><span class="p">(</span><span class="n">CondMassFlowRate</span><span class="p">,</span> <span class="n">CondInletNode</span><span class="p">,</span> <span class="n">CondOutletNode</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6740"></a>                                <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6741"></a>                                <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6742"></a>                                <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDBranchNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6743"></a>                                <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDCompNum</span><span class="p">)</span>
<a name="ln-6744"></a>      <span class="n">ENDIF</span>
<a name="ln-6745"></a>    <span class="n">ENDIF</span>
<a name="ln-6746"></a>
<a name="ln-6747"></a>    <span class="n">EvapOutletTemp</span>       <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-6748"></a>    <span class="n">CondOutletTemp</span>       <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-6749"></a>
<a name="ln-6750"></a>    <span class="n">Power</span>                <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-6751"></a>    <span class="n">QEvaporator</span>          <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-6752"></a>    <span class="n">QCondenser</span>           <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-6753"></a>    <span class="n">Energy</span>               <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-6754"></a>    <span class="n">EvaporatorEnergy</span>     <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-6755"></a>    <span class="n">CondenserEnergy</span>      <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-6756"></a>
<a name="ln-6757"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6758"></a><span class="k">      CALL </span><span class="n">CalcBasinHeaterPower</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPowerFTempDiff</span><span class="p">,&amp;</span>
<a name="ln-6759"></a>                            <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSchedulePtr</span><span class="p">,&amp;</span>
<a name="ln-6760"></a>                            <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSetPointTemp</span><span class="p">,</span><span class="n">BasinHeaterPower</span><span class="p">)</span>
<a name="ln-6761"></a>    <span class="n">ENDIF</span>
<a name="ln-6762"></a>    <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-6763"></a>    <span class="k">RETURN</span>
<a name="ln-6764"></a><span class="k">  END IF</span>
<a name="ln-6765"></a>
<a name="ln-6766"></a><span class="c">!   calculate end time of current time step</span>
<a name="ln-6767"></a>    <span class="n">CurrentEndTime</span> <span class="o">=</span> <span class="n">CurrentTime</span> <span class="o">+</span> <span class="n">SysTimeElapsed</span>
<a name="ln-6768"></a>
<a name="ln-6769"></a><span class="c">!   Print warning messages only when valid and only for the first ocurrance. Let summary provide statistics.</span>
<a name="ln-6770"></a><span class="c">!   Wait for next time step to print warnings. If simulation iterates, print out</span>
<a name="ln-6771"></a><span class="c">!   the warning for the last iteration only. Must wait for next time step to accomplish this.</span>
<a name="ln-6772"></a><span class="c">!   If a warning occurs and the simulation down shifts, the warning is not valid.</span>
<a name="ln-6773"></a>  <span class="k">IF</span><span class="p">(</span><span class="n">CurrentEndTime</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="n">CurrentEndTimeLast</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="n">TimeStepSys</span> <span class="p">.</span><span class="n">GE</span><span class="p">.</span> <span class="n">TimeStepSysLast</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-6774"></a><span class="k">    IF</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-6775"></a><span class="k">        </span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgErrorCount</span> <span class="o">=</span> <span class="p">&amp;</span>
<a name="ln-6776"></a>                         <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgErrorCount</span> <span class="o">+</span> <span class="mi">1</span>
<a name="ln-6777"></a><span class="c">!       Show single warning and pass additional info to ShowRecurringWarningErrorAtEnd</span>
<a name="ln-6778"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgErrorCount</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6779"></a><span class="k">         CALL </span><span class="n">ShowWarningError</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgBuffer1</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
<a name="ln-6780"></a>         <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgBuffer2</span><span class="p">))</span>
<a name="ln-6781"></a>      <span class="k">ELSE</span>
<a name="ln-6782"></a><span class="k">        CALL </span><span class="n">ShowRecurringWarningErrorAtEnd</span><span class="p">(</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgBuffer1</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39; error continues.&#39;</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6783"></a>           <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">ErrCount1</span><span class="p">,</span><span class="n">ReportMaxOf</span><span class="o">=</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgDataLast</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-6784"></a>           <span class="n">ReportMinOf</span><span class="o">=</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgDataLast</span><span class="p">,</span><span class="n">ReportMaxUnits</span><span class="o">=</span><span class="s1">&#39;[C]&#39;</span><span class="p">,</span><span class="n">ReportMinUnits</span><span class="o">=</span><span class="s1">&#39;[C]&#39;</span><span class="p">)</span>
<a name="ln-6785"></a>      <span class="k">END IF</span>
<a name="ln-6786"></a><span class="k">    END IF</span>
<a name="ln-6787"></a><span class="k">  END IF</span>
<a name="ln-6788"></a>
<a name="ln-6789"></a><span class="c">!   save last system time step and last end time of current time step (used to determine if warning is valid)</span>
<a name="ln-6790"></a>  <span class="n">TimeStepSysLast</span>    <span class="o">=</span> <span class="n">TimeStepSys</span>
<a name="ln-6791"></a>  <span class="n">CurrentEndTimeLast</span> <span class="o">=</span> <span class="n">CurrentEndTime</span>
<a name="ln-6792"></a>
<a name="ln-6793"></a>
<a name="ln-6794"></a>
<a name="ln-6795"></a><span class="c">!otherwise the chiller is running...</span>
<a name="ln-6796"></a>
<a name="ln-6797"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">AirCooled</span><span class="p">)</span> <span class="k">THEN</span> <span class="c">!Condenser inlet temp = outdoor temp</span>
<a name="ln-6798"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">OutAirDryBulb</span>
<a name="ln-6799"></a><span class="c">!  Warn user if entering condenser temperature falls below 0C</span>
<a name="ln-6800"></a>      <span class="k">IF</span><span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="mf">0.0d0</span> <span class="p">.</span><span class="nb">and</span><span class="p">.</span> <span class="p">.</span><span class="nb">not</span><span class="p">.</span> <span class="n">WarmupFlag</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6801"></a><span class="k">        </span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-6802"></a>        <span class="k">WRITE</span><span class="p">(</span><span class="n">OutputChar</span><span class="p">,</span><span class="n">OutputFormat</span><span class="p">)</span><span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-6803"></a>        <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgBuffer1</span> <span class="o">=</span> <span class="s1">&#39;CalcConstCOPChillerModel - Chiller:ConstantCOP &quot;&#39;</span> <span class="p">&amp;</span>
<a name="ln-6804"></a>                             <span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span><span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-6805"></a>                             <span class="s1">&#39;&quot; - Air Cooled Condenser Inlet Temperature below 0C&#39;</span>
<a name="ln-6806"></a>        <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgBuffer2</span> <span class="o">=</span> <span class="s1">&#39;... Outdoor Dry-bulb Condition = &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">OutputChar</span><span class="p">)</span><span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-6807"></a>                   <span class="s1">&#39; C. Occurrence info = &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">EnvironmentName</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;, &#39;</span><span class="o">//</span><span class="nb">Trim</span><span class="p">(</span><span class="n">CurMnDy</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39; &#39;</span><span class="p">&amp;</span>
<a name="ln-6808"></a>                   <span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">CreateSysTimeIntervalString</span><span class="p">())</span>
<a name="ln-6809"></a>        <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgDataLast</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-6810"></a>      <span class="k">ELSE</span>
<a name="ln-6811"></a><span class="k">        </span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-6812"></a>      <span class="n">ENDIF</span>
<a name="ln-6813"></a>  <span class="k">Else IF</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span> <span class="c">!Condenser inlet temp = (outdoor wet bulb)</span>
<a name="ln-6814"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">OutAirWetBulb</span>
<a name="ln-6815"></a><span class="c">!  Warn user if evap condenser wet bulb temperature falls below 10C</span>
<a name="ln-6816"></a>      <span class="k">IF</span><span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="mi">1</span><span class="mf">0.0d0</span> <span class="p">.</span><span class="nb">and</span><span class="p">.</span> <span class="p">.</span><span class="nb">not</span><span class="p">.</span> <span class="n">WarmupFlag</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6817"></a><span class="k">        </span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-6818"></a>        <span class="k">WRITE</span><span class="p">(</span><span class="n">OutputChar</span><span class="p">,</span><span class="n">OutputFormat</span><span class="p">)</span><span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-6819"></a>        <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgBuffer1</span> <span class="o">=</span> <span class="s1">&#39;CalcConstCOPChillerModel - Chiller:ConstantCOP &quot;&#39;</span> <span class="p">&amp;</span>
<a name="ln-6820"></a>                             <span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">)</span><span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-6821"></a>                             <span class="s1">&#39;&quot; - Evap Cooled Condenser Inlet Temperature below 10C&#39;</span>
<a name="ln-6822"></a>        <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgBuffer2</span> <span class="o">=</span> <span class="s1">&#39;... Outdoor Wet-bulb Condition = &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">OutputChar</span><span class="p">)</span><span class="o">//</span> <span class="p">&amp;</span>
<a name="ln-6823"></a>                   <span class="s1">&#39; C. Occurrence info = &#39;</span><span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">EnvironmentName</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39;, &#39;</span><span class="o">//</span><span class="nb">Trim</span><span class="p">(</span><span class="n">CurMnDy</span><span class="p">)</span><span class="o">//</span><span class="s1">&#39; &#39;</span><span class="p">&amp;</span>
<a name="ln-6824"></a>                   <span class="o">//</span><span class="nb">TRIM</span><span class="p">(</span><span class="n">CreateSysTimeIntervalString</span><span class="p">())</span>
<a name="ln-6825"></a>        <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">MsgDataLast</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-6826"></a>      <span class="k">ELSE</span>
<a name="ln-6827"></a><span class="k">        </span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-6828"></a>      <span class="n">ENDIF</span>
<a name="ln-6829"></a>  <span class="n">ENDIF</span> <span class="c">! End of the Air Cooled/Evap Cooled Logic block</span>
<a name="ln-6830"></a>
<a name="ln-6831"></a>     <span class="c">! If not air or evap cooled then set to the condenser node that is attached to a cooling tower</span>
<a name="ln-6832"></a>  <span class="n">CondInletTemp</span>            <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-6833"></a>
<a name="ln-6834"></a>        <span class="c">!Set condenser flow rate</span>
<a name="ln-6835"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6836"></a><span class="k">    </span><span class="n">CondMassFlowRate</span> <span class="o">=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondMassFlowRateMax</span>
<a name="ln-6837"></a>    <span class="k">CALL </span><span class="n">SetComponentFlowRate</span><span class="p">(</span><span class="n">CondMassFlowRate</span><span class="p">,</span> <span class="n">CondInletNode</span><span class="p">,</span> <span class="n">CondOutletNode</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6838"></a>                              <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6839"></a>                              <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6840"></a>                              <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDBranchNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6841"></a>                              <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDCompNum</span><span class="p">)</span>
<a name="ln-6842"></a>    <span class="k">CALL </span><span class="n">PullCompInterconnectTrigger</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6843"></a>                                     <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6844"></a>                                     <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6845"></a>                                     <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6846"></a>                                     <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondMassFlowIndex</span><span class="p">,</span>              <span class="p">&amp;</span>
<a name="ln-6847"></a>                                     <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6848"></a>                                     <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopSideNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-6849"></a>                                     <span class="n">CriteriaType_MassFlowRate</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6850"></a>                                     <span class="n">CondMassFlowRate</span><span class="p">)</span>
<a name="ln-6851"></a>
<a name="ln-6852"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">CondMassFlowRate</span> <span class="o">&lt;</span> <span class="n">MassFlowTolerance</span><span class="p">)</span> <span class="k">RETURN</span>
<a name="ln-6853"></a>
<a name="ln-6854"></a><span class="k">  END IF</span>
<a name="ln-6855"></a>
<a name="ln-6856"></a>    <span class="c">! If FlowLock is True, the new resolved mdot is used to update Power, QEvap, Qcond, and</span>
<a name="ln-6857"></a>    <span class="c">! condenser side outlet temperature.</span>
<a name="ln-6858"></a>
<a name="ln-6859"></a>  <span class="n">Cp</span> <span class="o">=</span> <span class="n">GetSpecificHeatGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-6860"></a>                         <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span><span class="p">,</span>                      <span class="p">&amp;</span>
<a name="ln-6861"></a>                         <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6862"></a>                         <span class="s1">&#39;CalcConstCOPChillerModel&#39;</span><span class="p">)</span>
<a name="ln-6863"></a>
<a name="ln-6864"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">LoopNum</span><span class="p">)%</span><span class="n">LoopSide</span><span class="p">(</span><span class="n">LoopSideNum</span><span class="p">)%</span><span class="n">FlowLock</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6865"></a><span class="k">     </span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PossibleSubCooling</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-6866"></a>     <span class="n">QEvaporator</span> <span class="o">=</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">)</span>
<a name="ln-6867"></a>     <span class="n">Power</span> <span class="o">=</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">)</span> <span class="o">/</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">COP</span>
<a name="ln-6868"></a>
<a name="ln-6869"></a>     <span class="c">! Either set the flow to the Constant value or caluclate the flow for the variable volume</span>
<a name="ln-6870"></a>     <span class="k">IF</span> <span class="p">((</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">ConstantFlow</span><span class="p">)</span>  <span class="p">&amp;</span>
<a name="ln-6871"></a>        <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">NotModulated</span><span class="p">))</span> <span class="k">THEN</span>
<a name="ln-6872"></a>
<a name="ln-6873"></a>          <span class="c">! Start by assuming max (design) flow</span>
<a name="ln-6874"></a>        <span class="n">EvapMassFlowRate</span> <span class="o">=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapMassFlowRateMax</span>
<a name="ln-6875"></a>          <span class="c">! Use SetComponentFlowRate to decide actual flow</span>
<a name="ln-6876"></a>          <span class="k">Call </span><span class="n">SetComponentFlowRate</span><span class="p">(</span> <span class="n">EvapMassFlowRate</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-6877"></a>                              <span class="n">EvapInletNode</span> <span class="p">,</span> <span class="n">EvapOutletNode</span>  <span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6878"></a>                              <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-6879"></a>                              <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6880"></a>                              <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-6881"></a>                              <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)</span>
<a name="ln-6882"></a>          <span class="c">! Evaluate delta temp based on actual flow rate</span>
<a name="ln-6883"></a>        <span class="k">IF</span> <span class="p">(</span><span class="n">EvapMassFlowRate</span> <span class="o">/=</span> <span class="mf">0.0D0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6884"></a><span class="k">          </span><span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">QEvaporator</span><span class="o">/</span><span class="n">EvapMassFlowRate</span><span class="o">/</span><span class="n">Cp</span>
<a name="ln-6885"></a>        <span class="k">ELSE</span>
<a name="ln-6886"></a><span class="k">          </span><span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="mf">0.0D0</span>
<a name="ln-6887"></a>        <span class="n">ENDIF</span>
<a name="ln-6888"></a>          <span class="c">! Evaluate outlet temp based on delta</span>
<a name="ln-6889"></a>        <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapDeltaTemp</span>
<a name="ln-6890"></a>
<a name="ln-6891"></a>     <span class="k">ELSE IF</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">FlowMode</span> <span class="o">==</span> <span class="n">LeavingSetpointModulated</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6892"></a>
<a name="ln-6893"></a>        <span class="c">! Calculate the Delta Temp from the inlet temp to the chiller outlet setpoint</span>
<a name="ln-6894"></a>        <span class="k">SELECT CASE</span> <span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">LoopDemandCalcScheme</span><span class="p">)</span>
<a name="ln-6895"></a>        <span class="k">CASE</span> <span class="p">(</span><span class="n">SingleSetpoint</span><span class="p">)</span>
<a name="ln-6896"></a>          <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPoint</span><span class="p">)</span>
<a name="ln-6897"></a>        <span class="k">CASE</span> <span class="p">(</span><span class="n">DualSetpointDeadband</span><span class="p">)</span>
<a name="ln-6898"></a>          <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPointHi</span><span class="p">)</span>
<a name="ln-6899"></a>        <span class="k">END SELECT</span>
<a name="ln-6900"></a>
<a name="ln-6901"></a><span class="k">        IF</span> <span class="p">(</span><span class="n">EvapDeltaTemp</span> <span class="o">&gt;</span> <span class="n">DeltaTemptol</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6902"></a><span class="k">          </span><span class="n">EvapMassFlowRate</span> <span class="o">=</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">QEvaporator</span><span class="o">/</span><span class="n">Cp</span><span class="o">/</span><span class="n">EvapDeltaTemp</span><span class="p">)</span>
<a name="ln-6903"></a>          <span class="k">IF</span><span class="p">((</span><span class="n">EvapMassFlowRate</span> <span class="o">-</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapMassFlowRateMax</span><span class="p">)</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="n">MassFlowTolerance</span><span class="p">)</span> <span class="p">&amp;</span>
<a name="ln-6904"></a>                    <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PossibleSubCooling</span> <span class="o">=</span> <span class="p">.</span><span class="n">TRUE</span><span class="p">.</span>
<a name="ln-6905"></a>          <span class="c">!Check to see if the Maximum is exceeded, if so set to maximum</span>
<a name="ln-6906"></a>          <span class="n">EvapMassFlowRate</span> <span class="o">=</span> <span class="nb">MIN</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapMassFlowRateMax</span><span class="p">,</span> <span class="n">EvapMassFlowRate</span><span class="p">)</span>
<a name="ln-6907"></a>            <span class="c">! Use SetComponentFlowRate to decide actual flow</span>
<a name="ln-6908"></a>            <span class="k">Call </span><span class="n">SetComponentFlowRate</span><span class="p">(</span> <span class="n">EvapMassFlowRate</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-6909"></a>                              <span class="n">EvapInletNode</span> <span class="p">,</span> <span class="n">EvapOutletNode</span>  <span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6910"></a>                              <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-6911"></a>                              <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6912"></a>                              <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-6913"></a>                              <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)</span>
<a name="ln-6914"></a>          <span class="k">SELECT CASE</span> <span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">)%</span><span class="n">LoopDemandCalcScheme</span><span class="p">)</span>
<a name="ln-6915"></a>          <span class="k">CASE</span> <span class="p">(</span><span class="n">SingleSetpoint</span><span class="p">)</span>
<a name="ln-6916"></a>            <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPoint</span>
<a name="ln-6917"></a>          <span class="k">CASE</span> <span class="p">(</span><span class="n">DualSetpointDeadband</span><span class="p">)</span>
<a name="ln-6918"></a>            <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempSetPointHi</span>
<a name="ln-6919"></a>          <span class="k">END SELECT</span>
<a name="ln-6920"></a><span class="k">        ELSE</span>
<a name="ln-6921"></a>            <span class="c">! Try to request zero flow</span>
<a name="ln-6922"></a>          <span class="n">EvapMassFlowRate</span><span class="o">=</span><span class="mf">0.0d0</span>
<a name="ln-6923"></a>            <span class="c">! Use SetComponentFlowRate to decide actual flow</span>
<a name="ln-6924"></a>            <span class="k">Call </span><span class="n">SetComponentFlowRate</span><span class="p">(</span> <span class="n">EvapMassFlowRate</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-6925"></a>                              <span class="n">EvapInletNode</span> <span class="p">,</span> <span class="n">EvapOutletNode</span>  <span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6926"></a>                              <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-6927"></a>                              <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6928"></a>                              <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-6929"></a>                              <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)</span>
<a name="ln-6930"></a>            <span class="c">! No deltaT since component is not running</span>
<a name="ln-6931"></a>          <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-6932"></a>
<a name="ln-6933"></a>        <span class="k">END IF</span>
<a name="ln-6934"></a><span class="k">     End If</span>  <span class="c">!End of Constant or Variable Flow If Block for FlowLock = 0 (or making a flow request)</span>
<a name="ln-6935"></a>  <span class="k">ELSE</span>  <span class="c">! If FlowLock is True</span>
<a name="ln-6936"></a>
<a name="ln-6937"></a>    <span class="n">EvapMassFlowRate</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">MassFlowRate</span>
<a name="ln-6938"></a>    <span class="k">CALL </span><span class="n">SetComponentFlowRate</span><span class="p">(</span> <span class="n">EvapMassFlowRate</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-6939"></a>                              <span class="n">EvapInletNode</span> <span class="p">,</span> <span class="n">EvapOutletNode</span>  <span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6940"></a>                              <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopNum</span><span class="p">,</span>     <span class="p">&amp;</span>
<a name="ln-6941"></a>                              <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWLoopSideNum</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-6942"></a>                              <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWBranchNum</span><span class="p">,</span>   <span class="p">&amp;</span>
<a name="ln-6943"></a>                              <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CWCompNum</span><span class="p">)</span>
<a name="ln-6944"></a><span class="c">!   Some other component set the flow to 0. No reason to continue with calculations.</span>
<a name="ln-6945"></a>     <span class="k">IF</span><span class="p">(</span><span class="n">EvapMassFlowRate</span> <span class="o">==</span> <span class="mf">0.0d0</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-6946"></a><span class="k">       </span><span class="n">MyLoad</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-6947"></a>       <span class="k">IF</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6948"></a><span class="k">         CALL </span><span class="n">CalcBasinHeaterPower</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPowerFTempDiff</span><span class="p">,&amp;</span>
<a name="ln-6949"></a>                              <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSchedulePtr</span><span class="p">,&amp;</span>
<a name="ln-6950"></a>                              <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSetPointTemp</span><span class="p">,</span><span class="n">BasinHeaterPower</span><span class="p">)</span>
<a name="ln-6951"></a>       <span class="n">ENDIF</span>
<a name="ln-6952"></a>       <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-6953"></a>       <span class="k">RETURN</span>
<a name="ln-6954"></a><span class="k">     END IF</span>
<a name="ln-6955"></a>
<a name="ln-6956"></a>     <span class="c">!Recalculate the Delts Temp</span>
<a name="ln-6957"></a>        <span class="k">IF</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PossibleSubCooling</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6958"></a><span class="k">         </span><span class="n">QEvaporator</span> <span class="o">=</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">)</span>
<a name="ln-6959"></a>         <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">QEvaporator</span><span class="o">/</span><span class="n">EvapMassFlowRate</span><span class="o">/</span><span class="n">Cp</span>
<a name="ln-6960"></a>         <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapDeltaTemp</span>
<a name="ln-6961"></a>         <span class="k">IF</span><span class="p">(</span><span class="n">EvapOutletTemp</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempMin</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6962"></a><span class="k">          </span><span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempMin</span>
<a name="ln-6963"></a>          <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapOutletTemp</span>
<a name="ln-6964"></a>          <span class="n">QEvaporator</span> <span class="o">=</span> <span class="n">EvapMassFlowRate</span><span class="o">*</span><span class="n">Cp</span><span class="o">*</span><span class="n">EvapDeltaTemp</span>
<a name="ln-6965"></a>         <span class="k">END IF</span>
<a name="ln-6966"></a><span class="k">        ELSE</span>
<a name="ln-6967"></a><span class="k">         </span><span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">TempEvapOutSetpoint</span>
<a name="ln-6968"></a>          <span class="c">!Calculate the evaporator heat transfer at the specified flow which could have changed</span>
<a name="ln-6969"></a>          <span class="c">!  in the Flow Resolution step.</span>
<a name="ln-6970"></a>         <span class="n">QEvaporator</span> <span class="o">=</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">EvapMassFlowRate</span><span class="o">*</span><span class="n">Cp</span><span class="o">*</span><span class="n">EvapDeltaTemp</span><span class="p">)</span>
<a name="ln-6971"></a>         <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">TempEvapOutSetpoint</span>
<a name="ln-6972"></a>       <span class="k">END IF</span>
<a name="ln-6973"></a>        <span class="c">!Check that the Evap outlet temp honors both plant loop temp low limit and also the chiller low limit</span>
<a name="ln-6974"></a>         <span class="k">IF</span><span class="p">(</span><span class="n">EvapOutletTemp</span> <span class="p">.</span><span class="n">LT</span><span class="p">.</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempMin</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6975"></a><span class="k">          IF</span><span class="p">((</span><span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempMin</span><span class="p">)</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="n">DeltaTempTol</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6976"></a><span class="k">           </span><span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">TempMin</span>
<a name="ln-6977"></a>           <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapOutletTemp</span>
<a name="ln-6978"></a>           <span class="n">QEvaporator</span> <span class="o">=</span> <span class="n">EvapMassFlowRate</span><span class="o">*</span><span class="n">Cp</span><span class="o">*</span><span class="n">EvapDeltaTemp</span>
<a name="ln-6979"></a>          <span class="k">ELSE</span>
<a name="ln-6980"></a><span class="k">           </span><span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-6981"></a>           <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapOutletTemp</span>
<a name="ln-6982"></a>           <span class="n">QEvaporator</span> <span class="o">=</span> <span class="n">EvapMassFlowRate</span><span class="o">*</span><span class="n">Cp</span><span class="o">*</span><span class="n">EvapDeltaTemp</span>
<a name="ln-6983"></a>          <span class="k">END IF</span>
<a name="ln-6984"></a><span class="k">         END IF</span>
<a name="ln-6985"></a>     <span class="c">! If load exceeds the distributed load set to the distributed load</span>
<a name="ln-6986"></a>     <span class="k">If</span><span class="p">(</span><span class="n">QEvaporator</span> <span class="o">&gt;</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">))</span> <span class="k">Then</span>
<a name="ln-6987"></a><span class="k">       If</span><span class="p">(</span><span class="n">EvapMassFlowRate</span> <span class="o">&gt;</span> <span class="n">MassFlowTolerance</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-6988"></a><span class="k">           </span><span class="n">QEvaporator</span> <span class="o">=</span> <span class="nb">ABS</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">)</span>
<a name="ln-6989"></a>           <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">QEvaporator</span><span class="o">/</span><span class="n">EvapMassFlowRate</span><span class="o">/</span><span class="n">Cp</span>
<a name="ln-6990"></a>           <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapDeltaTemp</span>
<a name="ln-6991"></a>       <span class="k">Else</span>
<a name="ln-6992"></a><span class="k">           </span><span class="n">QEvaporator</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-6993"></a>           <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-6994"></a>       <span class="k">End If</span>
<a name="ln-6995"></a><span class="k">     End IF</span>
<a name="ln-6996"></a>
<a name="ln-6997"></a>     <span class="c">! Checks QEvaporator on the basis of the machine limits.</span>
<a name="ln-6998"></a>     <span class="k">If</span><span class="p">(</span><span class="n">QEvaporator</span> <span class="o">&gt;</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span><span class="p">)</span><span class="k">Then</span>
<a name="ln-6999"></a><span class="k">       If</span><span class="p">(</span><span class="n">EvapMassFlowRate</span> <span class="o">&gt;</span> <span class="n">MassFlowTolerance</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-7000"></a><span class="k">           </span><span class="n">QEvaporator</span> <span class="o">=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">NomCap</span>
<a name="ln-7001"></a>           <span class="n">EvapDeltaTemp</span> <span class="o">=</span> <span class="n">QEvaporator</span><span class="o">/</span><span class="n">EvapMassFlowRate</span><span class="o">/</span><span class="n">Cp</span>
<a name="ln-7002"></a>           <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">-</span> <span class="n">EvapDeltaTemp</span>
<a name="ln-7003"></a>       <span class="k">Else</span>
<a name="ln-7004"></a><span class="k">           </span><span class="n">QEvaporator</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7005"></a>           <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7006"></a>       <span class="k">End If</span>
<a name="ln-7007"></a><span class="k">     End If</span>
<a name="ln-7008"></a>      <span class="c">!Calculate the Power consumption of the Const COP chiller which is a simplified calculation</span>
<a name="ln-7009"></a>     <span class="n">Power</span> <span class="o">=</span> <span class="n">QEvaporator</span> <span class="o">/</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">COP</span>
<a name="ln-7010"></a>     <span class="k">IF</span><span class="p">(</span><span class="n">EvapMassFlowRate</span> <span class="o">==</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-7011"></a><span class="k">      </span><span class="n">QEvaporator</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7012"></a>      <span class="n">EvapOutletTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7013"></a>      <span class="n">Power</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7014"></a>      <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">PrintMessage</span> <span class="o">=</span> <span class="p">.</span><span class="n">FALSE</span><span class="p">.</span>
<a name="ln-7015"></a>     <span class="k">END IF</span>
<a name="ln-7016"></a><span class="k">     IF</span><span class="p">(</span><span class="n">QEvaporator</span> <span class="o">==</span> <span class="mf">0.0d0</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-7017"></a><span class="k">        CALL </span><span class="n">CalcBasinHeaterPower</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPowerFTempDiff</span><span class="p">,&amp;</span>
<a name="ln-7018"></a>                                  <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSchedulePtr</span><span class="p">,&amp;</span>
<a name="ln-7019"></a>                                  <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterSetPointTemp</span><span class="p">,</span><span class="n">BasinHeaterPower</span><span class="p">)</span>
<a name="ln-7020"></a>     <span class="k">END IF</span>
<a name="ln-7021"></a>
<a name="ln-7022"></a><span class="k">  END IF</span> <span class="c">!This is the end of the FlowLock Block</span>
<a name="ln-7023"></a>
<a name="ln-7024"></a>    <span class="c">!QCondenser is calculated the same for each type, but the power consumption should be different</span>
<a name="ln-7025"></a>    <span class="c">!  depending on the performance coefficients used for the chiller model.</span>
<a name="ln-7026"></a>    <span class="n">QCondenser</span> <span class="o">=</span> <span class="n">Power</span> <span class="o">+</span> <span class="n">QEvaporator</span>
<a name="ln-7027"></a>
<a name="ln-7028"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-7029"></a><span class="k">       </span><span class="n">CpCond</span> <span class="o">=</span> <span class="n">GetSpecificHeatGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-7030"></a>                                      <span class="n">CondInletTemp</span><span class="p">,</span>                      <span class="p">&amp;</span>
<a name="ln-7031"></a>                                      <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-7032"></a>                                      <span class="s1">&#39;CalcConstCOPChillerModel&#39;</span><span class="p">)</span>
<a name="ln-7033"></a>       <span class="k">IF</span> <span class="p">(</span><span class="n">CondMassFlowRate</span> <span class="o">&gt;</span> <span class="n">MassFlowTolerance</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-7034"></a><span class="k">         </span><span class="n">CondOutletTemp</span> <span class="o">=</span> <span class="n">QCondenser</span><span class="o">/</span><span class="n">CondMassFlowRate</span><span class="o">/</span><span class="n">CpCond</span> <span class="o">+</span> <span class="n">CondInletTemp</span>
<a name="ln-7035"></a>       <span class="k">ELSE</span>
<a name="ln-7036"></a><span class="k">         CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;CalcConstCOPChillerModel: Condenser flow = 0, for CONST COP Chiller=&#39;</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-7037"></a>                              <span class="nb">TRIM</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">))</span>
<a name="ln-7038"></a>         <span class="k">CALL </span><span class="n">ShowContinueErrorTimeStamp</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<a name="ln-7039"></a>
<a name="ln-7040"></a>       <span class="k">END IF</span>
<a name="ln-7041"></a><span class="k">    ELSE</span> <span class="c">! Air Cooled or Evap Cooled</span>
<a name="ln-7042"></a>         <span class="c">!  Set condenser outlet temp to condenser inlet temp for Air Cooled or Evap Cooled</span>
<a name="ln-7043"></a>         <span class="c">!  since there is no CondMassFlowRate and would divide by zero</span>
<a name="ln-7044"></a>      <span class="n">CondOutletTemp</span> <span class="o">=</span> <span class="n">CondInletTemp</span>
<a name="ln-7045"></a>    <span class="k">END IF</span>
<a name="ln-7046"></a>
<a name="ln-7047"></a>        <span class="c">!Calculate Energy</span>
<a name="ln-7048"></a>   <span class="n">CondenserEnergy</span>  <span class="o">=</span> <span class="n">QCondenser</span><span class="o">*</span><span class="n">TimeStepSys</span><span class="o">*</span><span class="n">SecInHour</span>
<a name="ln-7049"></a>   <span class="n">Energy</span>           <span class="o">=</span> <span class="n">Power</span><span class="o">*</span><span class="n">TimeStepSys</span><span class="o">*</span><span class="n">SecInHour</span>
<a name="ln-7050"></a>   <span class="n">EvaporatorEnergy</span> <span class="o">=</span> <span class="n">QEvaporator</span><span class="o">*</span><span class="n">TimeStepSys</span><span class="o">*</span><span class="n">SecInHour</span>
<a name="ln-7051"></a>
<a name="ln-7052"></a> <span class="c">!check for problems BG 9/12/06 (deal with observed negative energy results)</span>
<a name="ln-7053"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">Energy</span> <span class="o">&lt;</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">then</span>  <span class="c">! there is a serious problem</span>
<a name="ln-7054"></a>
<a name="ln-7055"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-7056"></a>     <span class="c">! first check for run away condenser loop temps (only reason yet to be observed for this?)</span>
<a name="ln-7057"></a>      <span class="k">IF</span> <span class="p">(</span><span class="n">CondInletTemp</span> <span class="o">&gt;</span> <span class="mi">7</span><span class="mf">0.0d0</span> <span class="p">)</span>  <span class="k">then</span>
<a name="ln-7058"></a><span class="k">        CALL </span><span class="n">ShowSevereError</span><span class="p">(</span><span class="s1">&#39;CalcConstCOPChillerModel: Condenser loop inlet temperatures over 70.0 C for ConstCOPChiller=&#39;</span><span class="o">//</span>  <span class="p">&amp;</span>
<a name="ln-7059"></a>                            <span class="nb">TRIM</span><span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Name</span><span class="p">))</span>
<a name="ln-7060"></a>        <span class="k">CALL </span><span class="n">ShowContinueErrorTimeStamp</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<a name="ln-7061"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Condenser loop water temperatures are too high at&#39;</span><span class="o">//</span><span class="nb">trim</span><span class="p">(</span><span class="n">RoundSigDigits</span><span class="p">(</span><span class="n">CondInletTemp</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span> <span class="p">)</span>
<a name="ln-7062"></a>        <span class="k">CALL </span><span class="n">ShowContinueError</span><span class="p">(</span><span class="s1">&#39;Check input for condenser plant loop, especially cooling tower&#39;</span><span class="p">)</span>
<a name="ln-7063"></a>        <span class="k">CALL </span><span class="n">showContinueError</span><span class="p">(</span><span class="s1">&#39;Evaporator inlet temperature: &#39;</span><span class="o">//</span><span class="nb">trim</span><span class="p">(</span><span class="n">RoundSigDigits</span><span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span> <span class="p">)</span>
<a name="ln-7064"></a>
<a name="ln-7065"></a>        <span class="k">CALL </span><span class="n">ShowFatalError</span><span class="p">(</span><span class="s1">&#39;Program Terminates due to previous error condition&#39;</span><span class="p">)</span>
<a name="ln-7066"></a>      <span class="n">ENDIF</span>
<a name="ln-7067"></a>    <span class="n">ENDIF</span>
<a name="ln-7068"></a>    <span class="c">! If makes it here, set limits, chiller can&#39;t have negative energy/power</span>
<a name="ln-7069"></a>    <span class="c">! proceeding silently for now but may want to throw error here</span>
<a name="ln-7070"></a>    <span class="n">Power</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7071"></a>    <span class="n">Energy</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7072"></a>
<a name="ln-7073"></a>  <span class="n">ENDIF</span>
<a name="ln-7074"></a><span class="k">RETURN</span>
<a name="ln-7075"></a><span class="k">END SUBROUTINE </span><span class="n">CalcConstCOPChillerModel</span>
<a name="ln-7076"></a>
<a name="ln-7077"></a><span class="k">SUBROUTINE </span><span class="n">CalcElectricChillerHeatRecovery</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">,</span><span class="n">QCond</span><span class="p">,</span><span class="n">CondMassFlow</span><span class="p">,</span><span class="n">CondInletTemp</span><span class="p">,</span><span class="n">QHeatRec</span><span class="p">)</span>
<a name="ln-7078"></a>            <span class="c">! SUBROUTINE INFORMATION:</span>
<a name="ln-7079"></a>            <span class="c">!       AUTHOR:          Richard Liesen</span>
<a name="ln-7080"></a>            <span class="c">!       DATE WRITTEN:    January 2004</span>
<a name="ln-7081"></a>
<a name="ln-7082"></a>            <span class="c">! PURPOSE OF THIS SUBROUTINE:</span>
<a name="ln-7083"></a>            <span class="c">! Calculate the heat recovered from the chiller condenser</span>
<a name="ln-7084"></a>
<a name="ln-7085"></a>
<a name="ln-7086"></a>            <span class="c">! METHODOLOGY EMPLOYED: na</span>
<a name="ln-7087"></a>
<a name="ln-7088"></a>            <span class="c">! REFERENCES: na</span>
<a name="ln-7089"></a>
<a name="ln-7090"></a>            <span class="c">! USE STATEMENTS:</span>
<a name="ln-7091"></a><span class="k">USE </span><span class="n">Psychrometrics</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">PsyCpAirFnWTdb</span>
<a name="ln-7092"></a><span class="k">USE </span><span class="n">FluidProperties</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">GetSpecificHeatGlycol</span>
<a name="ln-7093"></a><span class="k">USE </span><span class="n">DataPlant</span><span class="p">,</span>       <span class="n">ONLY</span><span class="p">:</span> <span class="n">PlantLoop</span><span class="p">,</span> <span class="n">SingleSetpoint</span><span class="p">,</span> <span class="n">DualSetPointDeadBand</span>
<a name="ln-7094"></a><span class="k">USE </span><span class="n">ScheduleManager</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">GetCurrentScheduleValue</span>
<a name="ln-7095"></a>
<a name="ln-7096"></a><span class="k">IMPLICIT NONE</span>
<a name="ln-7097"></a>
<a name="ln-7098"></a>          <span class="c">! SUBROUTINE ARGUMENT DEFINITIONS:</span>
<a name="ln-7099"></a>  <span class="kt">INTEGER</span><span class="p">,</span> <span class="k">INTENT</span> <span class="p">(</span><span class="n">IN</span><span class="p">)</span>     <span class="kd">::</span> <span class="n">ChillNum</span>      <span class="c">! number of the current electric chiller being simulated</span>
<a name="ln-7100"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">INTENT</span><span class="p">(</span><span class="n">INOut</span><span class="p">)</span>       <span class="kd">::</span> <span class="n">QCond</span>         <span class="c">! current condenser load</span>
<a name="ln-7101"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">INTENT</span><span class="p">(</span><span class="n">Out</span><span class="p">)</span>         <span class="kd">::</span> <span class="n">QHeatRec</span>      <span class="c">! amount of heat recovered</span>
<a name="ln-7102"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span>          <span class="kd">::</span> <span class="n">CondMassFlow</span>  <span class="c">! current condenser Mass Flow</span>
<a name="ln-7103"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span>          <span class="kd">::</span> <span class="n">CondInletTemp</span> <span class="c">! current condenser Inlet Temp</span>
<a name="ln-7104"></a>
<a name="ln-7105"></a>          <span class="c">! SUBROUTINE PARAMETER DEFINITIONS:</span>
<a name="ln-7106"></a>          <span class="c">! na</span>
<a name="ln-7107"></a>
<a name="ln-7108"></a>          <span class="c">! DERIVED TYPE DEFINITIONS</span>
<a name="ln-7109"></a>          <span class="c">! na</span>
<a name="ln-7110"></a>
<a name="ln-7111"></a>          <span class="c">! SUBROUTINE LOCAL VARIABLE DECLARATIONS:</span>
<a name="ln-7112"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">CondInletNode</span>     <span class="c">! condenser inlet node number, water side</span>
<a name="ln-7113"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">CondOutletNode</span>    <span class="c">! condenser outlet node number, water side</span>
<a name="ln-7114"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">HeatRecInNode</span>
<a name="ln-7115"></a>  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">HeatRecOutNode</span>
<a name="ln-7116"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">QTotal</span>
<a name="ln-7117"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">QCondTmp</span>
<a name="ln-7118"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">HeatRecInletTemp</span>
<a name="ln-7119"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">HeatRecMassFlowRate</span>
<a name="ln-7120"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">FracHeatRec</span>
<a name="ln-7121"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">TAvgIn</span>
<a name="ln-7122"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">TAvgOut</span>
<a name="ln-7123"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">CpHeatRec</span>
<a name="ln-7124"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">CpCond</span>
<a name="ln-7125"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">THeatRecSetpoint</span>
<a name="ln-7126"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">QHeatRecToSetpoint</span>
<a name="ln-7127"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">HeatRecHighInletLimit</span>
<a name="ln-7128"></a>
<a name="ln-7129"></a>
<a name="ln-7130"></a>  <span class="c">! Begin routine</span>
<a name="ln-7131"></a>  <span class="n">HeatRecInNode</span>  <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span>
<a name="ln-7132"></a>  <span class="n">HeatRecOutNode</span> <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecOutletNodeNum</span>
<a name="ln-7133"></a>  <span class="n">CondInletNode</span>  <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span>
<a name="ln-7134"></a>  <span class="n">CondOutletNode</span> <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletNodeNum</span>
<a name="ln-7135"></a>  <span class="n">HeatRecInletTemp</span>  <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">HeatRecInNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7136"></a>  <span class="n">HeatRecMassFlowRate</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">HeatRecInNode</span><span class="p">)%</span><span class="n">MassFlowRate</span>
<a name="ln-7137"></a>
<a name="ln-7138"></a>  <span class="n">CpHeatRec</span> <span class="o">=</span> <span class="n">GetSpecificHeatGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-7139"></a>                                   <span class="n">HeatRecInletTemp</span><span class="p">,</span>                      <span class="p">&amp;</span>
<a name="ln-7140"></a>                                   <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-7141"></a>                                   <span class="s1">&#39;ChillerHeatRecovery&#39;</span><span class="p">)</span>
<a name="ln-7142"></a>
<a name="ln-7143"></a>  <span class="k">IF</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-7144"></a><span class="k">     </span><span class="n">CpCond</span> <span class="o">=</span> <span class="n">GetSpecificHeatGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-7145"></a>                                   <span class="n">CondInletTemp</span><span class="p">,</span>                      <span class="p">&amp;</span>
<a name="ln-7146"></a>                                   <span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CDLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-7147"></a>                                   <span class="s1">&#39;ChillerHeatRecovery&#39;</span><span class="p">)</span>
<a name="ln-7148"></a>  <span class="k">ELSE</span>
<a name="ln-7149"></a><span class="k">    </span><span class="n">CpCond</span> <span class="o">=</span> <span class="n">PsyCpAirFnWTdb</span><span class="p">(</span><span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">HumRat</span><span class="p">,</span><span class="n">CondInletTemp</span><span class="p">,</span><span class="s1">&#39;ElecChillerHeatRecovery&#39;</span><span class="p">)</span>
<a name="ln-7150"></a>  <span class="k">END IF</span>
<a name="ln-7151"></a>
<a name="ln-7152"></a>  <span class="c">! Before we modify the QCondenser, the total or original value is transferred to QTot</span>
<a name="ln-7153"></a>  <span class="n">QTotal</span> <span class="o">=</span> <span class="n">QCond</span>
<a name="ln-7154"></a>
<a name="ln-7155"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecSetpointNodeNum</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span> <span class="c">! use original algorithm that blends temps</span>
<a name="ln-7156"></a>    <span class="n">TAvgIn</span> <span class="o">=</span> <span class="p">(</span><span class="n">HeatRecMassFlowRate</span><span class="o">*</span><span class="n">CpHeatRec</span><span class="o">*</span><span class="n">HeatRecInletTemp</span> <span class="o">+</span> <span class="n">CondMassFlow</span><span class="o">*</span><span class="n">CpCond</span><span class="o">*</span><span class="n">CondInletTemp</span><span class="p">)</span><span class="o">/</span>  <span class="p">&amp;</span>
<a name="ln-7157"></a>               <span class="p">(</span><span class="n">HeatRecMassFlowRate</span><span class="o">*</span><span class="n">CpHeatRec</span> <span class="o">+</span> <span class="n">CondMassFlow</span><span class="o">*</span><span class="n">CpCond</span><span class="p">)</span>
<a name="ln-7158"></a>
<a name="ln-7159"></a>    <span class="n">TAvgOut</span> <span class="o">=</span> <span class="n">QTotal</span><span class="o">/</span><span class="p">(</span><span class="n">HeatRecMassFlowRate</span><span class="o">*</span><span class="n">CpHeatRec</span> <span class="o">+</span> <span class="n">CondMassFlow</span><span class="o">*</span><span class="n">CpCond</span><span class="p">)</span> <span class="o">+</span> <span class="n">TAvgIn</span>
<a name="ln-7160"></a>
<a name="ln-7161"></a>    <span class="n">QHeatRec</span> <span class="o">=</span> <span class="n">HeatRecMassFlowRate</span> <span class="o">*</span> <span class="n">CpHeatRec</span> <span class="o">*</span> <span class="p">(</span><span class="n">TAvgOut</span> <span class="o">-</span> <span class="n">HeatRecInletTemp</span><span class="p">)</span>
<a name="ln-7162"></a>    <span class="n">QHeatRec</span> <span class="o">=</span> <span class="nb">MAX</span><span class="p">(</span><span class="n">QHeatRec</span><span class="p">,</span> <span class="mf">0.d0</span><span class="p">)</span> <span class="c">! ensure non negative</span>
<a name="ln-7163"></a>   <span class="c">!check if heat flow too large for physical size of bundle</span>
<a name="ln-7164"></a>    <span class="n">QHeatRec</span> <span class="o">=</span> <span class="nb">MIN</span><span class="p">(</span><span class="n">QHeatRec</span><span class="p">,</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecMaxCapacityLimit</span><span class="p">)</span>
<a name="ln-7165"></a>  <span class="k">ELSE</span> <span class="c">! use new algorithm to meet setpoint</span>
<a name="ln-7166"></a>    <span class="k">SELECT CASE</span> <span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">)%</span><span class="n">LoopDemandCalcScheme</span><span class="p">)</span>
<a name="ln-7167"></a>
<a name="ln-7168"></a>    <span class="k">CASE</span> <span class="p">(</span><span class="n">SingleSetPoint</span><span class="p">)</span>
<a name="ln-7169"></a>      <span class="n">THeatRecSetpoint</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecSetpointNodeNum</span><span class="p">)%</span><span class="n">TempSetPoint</span>
<a name="ln-7170"></a>    <span class="k">CASE</span> <span class="p">(</span><span class="n">DualSetPointDeadBand</span><span class="p">)</span>
<a name="ln-7171"></a>      <span class="n">THeatRecSetpoint</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecSetpointNodeNum</span><span class="p">)%</span><span class="n">TempSetPointHi</span>
<a name="ln-7172"></a>    <span class="k">END SELECT</span>
<a name="ln-7173"></a>
<a name="ln-7174"></a><span class="k">    </span><span class="n">QHeatRecToSetpoint</span> <span class="o">=</span> <span class="n">HeatRecMassFlowRate</span> <span class="o">*</span>  <span class="n">CpHeatRec</span> <span class="o">*</span> <span class="p">(</span><span class="n">THeatRecSetpoint</span> <span class="o">-</span> <span class="n">HeatRecInletTemp</span><span class="p">)</span>
<a name="ln-7175"></a>    <span class="n">QHeatRecToSetpoint</span> <span class="o">=</span> <span class="nb">MAX</span><span class="p">(</span><span class="n">QHeatRecToSetpoint</span><span class="p">,</span> <span class="mf">0.d0</span><span class="p">)</span>
<a name="ln-7176"></a>    <span class="n">QHeatRec</span> <span class="o">=</span> <span class="nb">MIN</span><span class="p">(</span><span class="n">QTotal</span><span class="p">,</span><span class="n">QHeatRecToSetpoint</span><span class="p">)</span>
<a name="ln-7177"></a>     <span class="c">!check if heat flow too large for physical size of bundle</span>
<a name="ln-7178"></a>    <span class="n">QHeatRec</span> <span class="o">=</span> <span class="nb">MIN</span><span class="p">(</span><span class="n">QHeatRec</span><span class="p">,</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecMaxCapacityLimit</span><span class="p">)</span>
<a name="ln-7179"></a>
<a name="ln-7180"></a>  <span class="n">ENDIF</span>
<a name="ln-7181"></a>   <span class="c">! check if limit on inlet is present and exceeded.</span>
<a name="ln-7182"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecInletLimitSchedNum</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-7183"></a><span class="k">    </span><span class="n">HeatRecHighInletLimit</span> <span class="o">=</span>  <span class="n">GetCurrentScheduleValue</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">ChillNum</span><span class="p">)%</span><span class="n">HeatRecInletLimitSchedNum</span><span class="p">)</span>
<a name="ln-7184"></a>    <span class="k">IF</span> <span class="p">(</span> <span class="n">HeatRecInletTemp</span> <span class="o">&gt;</span> <span class="n">HeatRecHighInletLimit</span><span class="p">)</span> <span class="k">THEN</span> <span class="c">! shut down heat recovery</span>
<a name="ln-7185"></a>      <span class="n">QHeatRec</span> <span class="o">=</span> <span class="mf">0.d0</span>
<a name="ln-7186"></a>    <span class="n">ENDIF</span>
<a name="ln-7187"></a>  <span class="n">ENDIF</span>
<a name="ln-7188"></a>
<a name="ln-7189"></a>  <span class="n">QCond</span> <span class="o">=</span> <span class="n">QTotal</span> <span class="o">-</span> <span class="n">QHeatRec</span>
<a name="ln-7190"></a>
<a name="ln-7191"></a>  <span class="c">! Calculate a new Heat Recovery Coil Outlet Temp</span>
<a name="ln-7192"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">HeatRecMassFlowRate</span> <span class="o">&gt;</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-7193"></a><span class="k">    </span><span class="n">HeatRecOutletTemp</span> <span class="o">=</span> <span class="n">QHeatRec</span><span class="o">/</span><span class="p">(</span><span class="n">HeatRecMassFlowRate</span><span class="o">*</span><span class="n">CpHeatRec</span><span class="p">)</span> <span class="o">+</span> <span class="n">HeatRecInletTemp</span>
<a name="ln-7194"></a>  <span class="k">Else</span>
<a name="ln-7195"></a><span class="k">    </span><span class="n">HeatRecOutletTemp</span> <span class="o">=</span> <span class="n">HeatRecInletTemp</span>
<a name="ln-7196"></a>  <span class="k">End If</span>
<a name="ln-7197"></a>
<a name="ln-7198"></a>
<a name="ln-7199"></a><span class="k"> RETURN</span>
<a name="ln-7200"></a><span class="k">END SUBROUTINE </span><span class="n">CalcElectricChillerHeatRecovery</span>
<a name="ln-7201"></a>
<a name="ln-7202"></a><span class="k">SUBROUTINE </span><span class="n">CalcEngineChillerHeatRec</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">,</span> <span class="n">EnergyRecovered</span><span class="p">,</span> <span class="n">HeatRecRatio</span><span class="p">)</span>
<a name="ln-7203"></a>            <span class="c">! SUBROUTINE INFORMATION:</span>
<a name="ln-7204"></a>            <span class="c">!       AUTHOR:          Brandon Anderson</span>
<a name="ln-7205"></a>            <span class="c">!       DATE WRITTEN:    November 2000</span>
<a name="ln-7206"></a>
<a name="ln-7207"></a>            <span class="c">! PURPOSE OF THIS SUBROUTINE:</span>
<a name="ln-7208"></a>            <span class="c">! To perform heat recovery calculations and node updates</span>
<a name="ln-7209"></a>
<a name="ln-7210"></a>
<a name="ln-7211"></a>            <span class="c">! METHODOLOGY EMPLOYED: This routine is required for the heat recovery loop.</span>
<a name="ln-7212"></a>            <span class="c">! It works in conjunction with the Heat Recovery Manager, and the PlantWaterHeater.</span>
<a name="ln-7213"></a>            <span class="c">! The chiller sets the flow on the loop first by the input design flowrate and then</span>
<a name="ln-7214"></a>            <span class="c">! performs a check to verify that</span>
<a name="ln-7215"></a>
<a name="ln-7216"></a>            <span class="c">! REFERENCES: na</span>
<a name="ln-7217"></a>
<a name="ln-7218"></a>            <span class="c">! USE STATEMENTS: na</span>
<a name="ln-7219"></a><span class="k">USE </span><span class="n">Psychrometrics</span><span class="p">,</span>  <span class="n">ONLY</span><span class="p">:</span> <span class="n">PsyCpAirFnWTdb</span>
<a name="ln-7220"></a><span class="k">USE </span><span class="n">FluidProperties</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">GetSpecificHeatGlycol</span>
<a name="ln-7221"></a><span class="k">USE </span><span class="n">DataPlant</span><span class="p">,</span>       <span class="n">ONLY</span><span class="p">:</span> <span class="n">PlantLoop</span>
<a name="ln-7222"></a>
<a name="ln-7223"></a><span class="k">IMPLICIT NONE</span>
<a name="ln-7224"></a>
<a name="ln-7225"></a>          <span class="c">! SUBROUTINE ARGUMENT DEFINITIONS:</span>
<a name="ln-7226"></a>  <span class="kt">INTEGER</span><span class="p">,</span><span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span>          <span class="kd">::</span> <span class="n">ChillerNum</span>          <span class="c">! Chiller number</span>
<a name="ln-7227"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span>       <span class="kd">::</span> <span class="n">EnergyRecovered</span>     <span class="c">! Amount of heat recovered</span>
<a name="ln-7228"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">INTENT</span><span class="p">(</span><span class="n">INOUT</span><span class="p">)</span>     <span class="kd">::</span> <span class="n">HeatRecRatio</span>        <span class="c">! Max Heat recovery ratio</span>
<a name="ln-7229"></a>
<a name="ln-7230"></a>
<a name="ln-7231"></a>          <span class="c">! SUBROUTINE PARAMETER DEFINITIONS:</span>
<a name="ln-7232"></a>          <span class="c">! na</span>
<a name="ln-7233"></a>
<a name="ln-7234"></a>          <span class="c">! DERIVED TYPE DEFINITIONS</span>
<a name="ln-7235"></a>          <span class="c">! na</span>
<a name="ln-7236"></a>
<a name="ln-7237"></a>          <span class="c">! SUBROUTINE LOCAL VARIABLE DECLARATIONS:</span>
<a name="ln-7238"></a>  <span class="kt">INTEGER</span>                  <span class="kd">::</span> <span class="n">HeatRecInNode</span>
<a name="ln-7239"></a>  <span class="kt">INTEGER</span>                  <span class="kd">::</span> <span class="n">HeatRecOutNode</span>
<a name="ln-7240"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">HeatRecMdot</span>
<a name="ln-7241"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">MinHeatRecMdot</span>
<a name="ln-7242"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">HeatRecInTemp</span>
<a name="ln-7243"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">HeatRecOutTemp</span>
<a name="ln-7244"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">HeatRecCp</span>
<a name="ln-7245"></a>
<a name="ln-7246"></a>  <span class="c">!Load inputs to local structure</span>
<a name="ln-7247"></a>  <span class="n">HeatRecInNode</span>  <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span>
<a name="ln-7248"></a>  <span class="n">HeatRecOutNode</span> <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecOutletNodeNum</span>
<a name="ln-7249"></a>
<a name="ln-7250"></a>  <span class="c">!Need to set the HeatRecRatio to 1.0 if it is not modified</span>
<a name="ln-7251"></a>  <span class="n">HeatRecRatio</span><span class="o">=</span> <span class="mf">1.0d0</span>
<a name="ln-7252"></a>
<a name="ln-7253"></a><span class="c">!  !This mdot is input specified mdot &quot;Desired Flowrate&quot;, already set in init routine</span>
<a name="ln-7254"></a>  <span class="n">HeatRecMdot</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">HeatRecInNode</span><span class="p">)%</span><span class="n">MassFlowRate</span>
<a name="ln-7255"></a>
<a name="ln-7256"></a>  <span class="n">HeatRecInTemp</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">HeatRecInNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7257"></a>  <span class="n">HeatRecCp</span> <span class="o">=</span> <span class="n">GetSpecificHeatGlycol</span><span class="p">(</span><span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">)%</span><span class="n">FluidName</span><span class="p">,</span>  <span class="p">&amp;</span>
<a name="ln-7258"></a>                                   <span class="n">HeatRecInletTemp</span><span class="p">,</span>                      <span class="p">&amp;</span>
<a name="ln-7259"></a>                                   <span class="n">PlantLoop</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HRLoopNum</span><span class="p">)%</span><span class="n">FluidIndex</span><span class="p">,</span> <span class="p">&amp;</span>
<a name="ln-7260"></a>                                   <span class="s1">&#39;ChillerHeatRecovery&#39;</span><span class="p">)</span>
<a name="ln-7261"></a>
<a name="ln-7262"></a>
<a name="ln-7263"></a>  <span class="c">!Don&#39;t divide by zero - Note This also results in no heat recovery when</span>
<a name="ln-7264"></a>  <span class="c">!  design Mdot for Heat Recovery - Specified on Chiller Input - is zero</span>
<a name="ln-7265"></a>  <span class="c">!  In order to see what minimum heat recovery flow rate is for the design temperature</span>
<a name="ln-7266"></a>  <span class="c">!  The design heat recovery flow rate can be set very small, but greater than zero.</span>
<a name="ln-7267"></a>  <span class="k">IF</span> <span class="p">((</span><span class="n">HeatRecMdot</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="mi">0</span><span class="p">)</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="p">(</span><span class="n">HeatRecCp</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="mi">0</span><span class="p">))</span> <span class="k">THEN</span>
<a name="ln-7268"></a><span class="k">    </span><span class="n">HeatRecOutTemp</span> <span class="o">=</span> <span class="p">(</span><span class="n">EnergyRecovered</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">HeatRecMdot</span> <span class="o">*</span> <span class="n">HeatRecCp</span><span class="p">)</span> <span class="o">+</span> <span class="n">HeatRecInTemp</span>
<a name="ln-7269"></a>  <span class="k">ELSE</span>
<a name="ln-7270"></a><span class="k">    </span><span class="n">HeatRecOutTemp</span> <span class="o">=</span> <span class="n">HeatRecInTemp</span>
<a name="ln-7271"></a>  <span class="k">END IF</span>
<a name="ln-7272"></a>
<a name="ln-7273"></a>  <span class="c">!Now verify that the design flowrate was large enough to prevent phase change</span>
<a name="ln-7274"></a>  <span class="k">IF</span><span class="p">(</span><span class="n">HeatRecOutTemp</span> <span class="o">&gt;</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecMaxTemp</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-7275"></a><span class="k">   IF</span><span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecMaxTemp</span> <span class="o">/=</span> <span class="n">HeatRecInTemp</span><span class="p">)</span><span class="k">THEN</span>
<a name="ln-7276"></a><span class="k">      </span><span class="n">MinHeatRecMdot</span> <span class="o">=</span> <span class="p">(</span><span class="n">EnergyRecovered</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">HeatRecCp</span> <span class="o">*</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">ChillerNum</span><span class="p">)%</span><span class="n">HeatRecMaxTemp</span> <span class="o">-</span> <span class="n">HeatRecInTemp</span><span class="p">))</span>
<a name="ln-7277"></a>      <span class="k">If</span><span class="p">(</span><span class="n">MinHeatRecMdot</span> <span class="o">&lt;</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="n">MinHeatRecMdot</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7278"></a>    <span class="k">END IF</span>
<a name="ln-7279"></a>
<a name="ln-7280"></a>    <span class="c">!Recalculate Outlet Temperature, with adjusted flowrate</span>
<a name="ln-7281"></a>    <span class="k">IF</span> <span class="p">((</span><span class="n">MinHeatRecMdot</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="p">.</span><span class="nb">AND</span><span class="p">.</span> <span class="p">(</span><span class="n">HeatRecCp</span> <span class="p">.</span><span class="n">GT</span><span class="p">.</span> <span class="mf">0.0d0</span><span class="p">))</span> <span class="k">THEN</span>
<a name="ln-7282"></a><span class="k">      </span><span class="n">HeatRecOutTemp</span> <span class="o">=</span> <span class="p">(</span><span class="n">EnergyRecovered</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">MinHeatRecMdot</span> <span class="o">*</span> <span class="n">HeatRecCp</span><span class="p">)</span> <span class="o">+</span> <span class="n">HeatRecInTemp</span>
<a name="ln-7283"></a>      <span class="n">HeatRecRatio</span> <span class="o">=</span> <span class="n">HeatRecMdot</span><span class="o">/</span><span class="n">MinHeatRecMdot</span>
<a name="ln-7284"></a>    <span class="k">ELSE</span>
<a name="ln-7285"></a><span class="k">      </span><span class="n">HeatRecOutTemp</span> <span class="o">=</span> <span class="n">HeatRecInTemp</span>
<a name="ln-7286"></a>      <span class="n">HeatRecRatio</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7287"></a>    <span class="k">END IF</span>
<a name="ln-7288"></a>
<a name="ln-7289"></a><span class="k">  END IF</span>
<a name="ln-7290"></a>
<a name="ln-7291"></a>
<a name="ln-7292"></a>  <span class="c">!Update global variables for reporting later</span>
<a name="ln-7293"></a>  <span class="n">HeatRecInletTemp</span>  <span class="o">=</span> <span class="n">HeatRecInTemp</span>
<a name="ln-7294"></a>  <span class="n">HeatRecOutletTemp</span> <span class="o">=</span> <span class="n">HeatRecOutTemp</span>
<a name="ln-7295"></a>  <span class="n">HeatRecMdotActual</span> <span class="o">=</span> <span class="n">HeatRecMdot</span>
<a name="ln-7296"></a>
<a name="ln-7297"></a><span class="k">END SUBROUTINE </span><span class="n">CalcEngineChillerHeatRec</span>
<a name="ln-7298"></a>
<a name="ln-7299"></a><span class="k">SUBROUTINE </span><span class="n">UpdateElectricChillerRecords</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">,</span><span class="n">RunFlag</span><span class="p">,</span> <span class="n">Num</span><span class="p">)</span>
<a name="ln-7300"></a>            <span class="c">! SUBROUTINE INFORMATION:</span>
<a name="ln-7301"></a>            <span class="c">!       AUTHOR:          Dan Fisher / Brandon Anderson</span>
<a name="ln-7302"></a>            <span class="c">!       DATE WRITTEN:    September 2000</span>
<a name="ln-7303"></a>
<a name="ln-7304"></a>            <span class="c">! PURPOSE OF THIS SUBROUTINE:</span>
<a name="ln-7305"></a>            <span class="c">! reporting</span>
<a name="ln-7306"></a>
<a name="ln-7307"></a>
<a name="ln-7308"></a>            <span class="c">! METHODOLOGY EMPLOYED: na</span>
<a name="ln-7309"></a>
<a name="ln-7310"></a>            <span class="c">! REFERENCES: na</span>
<a name="ln-7311"></a>
<a name="ln-7312"></a>            <span class="c">! USE STATEMENTS: na</span>
<a name="ln-7313"></a>  <span class="k">USE </span><span class="n">DataGlobals</span><span class="p">,</span>     <span class="n">ONLY</span> <span class="p">:</span> <span class="n">SecInHour</span>
<a name="ln-7314"></a>  <span class="k">USE </span><span class="n">DataHVACGlobals</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">TimeStepSys</span>
<a name="ln-7315"></a>  <span class="k">USE </span><span class="n">PlantUtilities</span><span class="p">,</span>  <span class="n">ONLY</span> <span class="p">:</span> <span class="n">SetComponentFlowRate</span><span class="p">,</span> <span class="n">SafeCopyPlantNode</span>
<a name="ln-7316"></a>  <span class="k">USE </span><span class="n">Psychrometrics</span><span class="p">,</span>  <span class="n">ONLY</span> <span class="p">:</span> <span class="n">PsyHFnTdbW</span>
<a name="ln-7317"></a>
<a name="ln-7318"></a>
<a name="ln-7319"></a><span class="k">IMPLICIT NONE</span>
<a name="ln-7320"></a>
<a name="ln-7321"></a>          <span class="c">! SUBROUTINE ARGUMENT DEFINITIONS:</span>
<a name="ln-7322"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span>          <span class="kd">::</span> <span class="n">MyLoad</span>    <span class="c">! current load</span>
<a name="ln-7323"></a>  <span class="kt">LOGICAL</span><span class="p">,</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span>      <span class="kd">::</span> <span class="n">RunFlag</span>   <span class="c">! TRUE if chiller operating</span>
<a name="ln-7324"></a>  <span class="kt">INTEGER</span><span class="p">,</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span>      <span class="kd">::</span> <span class="n">Num</span>       <span class="c">! chiller number</span>
<a name="ln-7325"></a>
<a name="ln-7326"></a>          <span class="c">! SUBROUTINE PARAMETER DEFINITIONS:</span>
<a name="ln-7327"></a>          <span class="c">! na</span>
<a name="ln-7328"></a>
<a name="ln-7329"></a>          <span class="c">! DERIVED TYPE DEFINITIONS</span>
<a name="ln-7330"></a>          <span class="c">! na</span>
<a name="ln-7331"></a>
<a name="ln-7332"></a>          <span class="c">! SUBROUTINE LOCAL VARIABLE DECLARATIONS:</span>
<a name="ln-7333"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">EvapInletNode</span>         <span class="c">! evaporator inlet node number, water side</span>
<a name="ln-7334"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">EvapOutletNode</span>        <span class="c">! evaporator outlet node number, water side</span>
<a name="ln-7335"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">CondInletNode</span>         <span class="c">! condenser inlet node number, water side</span>
<a name="ln-7336"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">CondOutletNode</span>        <span class="c">! condenser outlet node number, water side</span>
<a name="ln-7337"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">HeatRecInNode</span>
<a name="ln-7338"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">HeatRecOutNode</span>
<a name="ln-7339"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">ReportingConstant</span>     <span class="c">! Number of seconds per HVAC system time step, to convert from W (J/s) to J</span>
<a name="ln-7340"></a>
<a name="ln-7341"></a>  <span class="n">ReportingConstant</span> <span class="o">=</span> <span class="n">TimeStepSys</span><span class="o">*</span><span class="n">SecInHour</span>
<a name="ln-7342"></a>
<a name="ln-7343"></a>  <span class="n">EvapInletNode</span>  <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletNodeNum</span>
<a name="ln-7344"></a>  <span class="n">EvapOutletNode</span> <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span>
<a name="ln-7345"></a>  <span class="n">CondInletNode</span>  <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span>
<a name="ln-7346"></a>  <span class="n">CondOutletNode</span> <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletNodeNum</span>
<a name="ln-7347"></a>  <span class="n">HeatRecInNode</span>  <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span>
<a name="ln-7348"></a>  <span class="n">HeatRecOutNode</span> <span class="o">=</span> <span class="n">ElectricChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecOutletNodeNum</span>
<a name="ln-7349"></a>
<a name="ln-7350"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">MyLoad</span> <span class="o">&gt;=</span> <span class="mf">0.d0</span> <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">RunFlag</span><span class="p">)</span><span class="k">THEN</span> <span class="c">!Chiller not running so pass inlet states to outlet states</span>
<a name="ln-7351"></a>          <span class="c">!set node temperatures</span>
<a name="ln-7352"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">Temp</span>     <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7353"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">Temp</span>     <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7354"></a>    <span class="k">IF</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">/=</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-7355"></a><span class="k">      </span><span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">HumRat</span>   <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">HumRat</span>
<a name="ln-7356"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">Enthalpy</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Enthalpy</span>
<a name="ln-7357"></a>    <span class="k">END IF</span>
<a name="ln-7358"></a>
<a name="ln-7359"></a>
<a name="ln-7360"></a><span class="k">    </span><span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Power</span>            <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7361"></a>    <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QEvap</span>            <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7362"></a>    <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QCond</span>            <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7363"></a>    <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Energy</span>           <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7364"></a>    <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapEnergy</span>       <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7365"></a>    <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondEnergy</span>       <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7366"></a>    <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletTemp</span>    <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7367"></a>    <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletTemp</span>    <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7368"></a>    <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletTemp</span>   <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7369"></a>    <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletTemp</span>   <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7370"></a>    <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Evapmdot</span>         <span class="o">=</span> <span class="n">EvapMassFlowRate</span>
<a name="ln-7371"></a>    <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Condmdot</span>         <span class="o">=</span> <span class="n">CondMassFlowRate</span>
<a name="ln-7372"></a>    <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">ActualCOP</span>        <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7373"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-7374"></a><span class="k">      </span><span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPower</span>       <span class="o">=</span> <span class="n">BasinHeaterPower</span>
<a name="ln-7375"></a>      <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterConsumption</span> <span class="o">=</span> <span class="n">BasinHeaterPower</span><span class="o">*</span><span class="n">ReportingConstant</span>
<a name="ln-7376"></a>    <span class="n">ENDIF</span>
<a name="ln-7377"></a>
<a name="ln-7378"></a>    <span class="k">If</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="p">)</span> <span class="k">Then</span>
<a name="ln-7379"></a>
<a name="ln-7380"></a><span class="k">      CALL </span><span class="n">SafeCopyPlantNode</span><span class="p">(</span> <span class="n">HeatRecInNode</span><span class="p">,</span> <span class="n">HeatRecOutNode</span><span class="p">)</span>
<a name="ln-7381"></a>
<a name="ln-7382"></a>      <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">QHeatRecovery</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7383"></a>      <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">EnergyHeatRecovery</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7384"></a>      <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecInletTemp</span>   <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">HeatRecInNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7385"></a>      <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecOutletTemp</span>  <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">HeatRecOutNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7386"></a>      <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecMassFlow</span>    <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">HeatRecInNode</span><span class="p">)%</span><span class="n">MassFlowRate</span>
<a name="ln-7387"></a>
<a name="ln-7388"></a>      <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">ChillerCondAvgTemp</span> <span class="o">=</span> <span class="n">AvgCondSinkTemp</span>
<a name="ln-7389"></a>    <span class="k">End If</span>
<a name="ln-7390"></a>
<a name="ln-7391"></a><span class="k">  ELSE</span> <span class="c">!Chiller is running, so pass calculated values</span>
<a name="ln-7392"></a>          <span class="c">!set node temperatures</span>
<a name="ln-7393"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">Temp</span>     <span class="o">=</span> <span class="n">EvapOutletTemp</span>
<a name="ln-7394"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">Temp</span>     <span class="o">=</span> <span class="n">CondOutletTemp</span>
<a name="ln-7395"></a>    <span class="k">IF</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">/=</span> <span class="n">WaterCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-7396"></a><span class="k">      </span><span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">HumRat</span>   <span class="o">=</span> <span class="n">CondOutletHumRat</span>
<a name="ln-7397"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">Enthalpy</span> <span class="o">=</span> <span class="n">PsyHFnTdbW</span><span class="p">(</span><span class="n">CondOutletTemp</span><span class="p">,</span> <span class="n">CondOutletHumRat</span><span class="p">)</span>
<a name="ln-7398"></a>    <span class="k">END IF</span>
<a name="ln-7399"></a>          <span class="c">!set node flow rates;  for these load based models</span>
<a name="ln-7400"></a>          <span class="c">!assume that the sufficient evaporator flow rate available</span>
<a name="ln-7401"></a>    <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Power</span>            <span class="o">=</span> <span class="n">Power</span>
<a name="ln-7402"></a>    <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QEvap</span>            <span class="o">=</span> <span class="n">QEvaporator</span>
<a name="ln-7403"></a>    <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QCond</span>            <span class="o">=</span> <span class="n">QCondenser</span>
<a name="ln-7404"></a>    <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Energy</span>           <span class="o">=</span> <span class="n">Energy</span>
<a name="ln-7405"></a>    <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapEnergy</span>       <span class="o">=</span> <span class="n">EvaporatorEnergy</span>
<a name="ln-7406"></a>    <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondEnergy</span>       <span class="o">=</span> <span class="n">CondenserEnergy</span>
<a name="ln-7407"></a>    <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletTemp</span>    <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7408"></a>    <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletTemp</span>    <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7409"></a>    <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletTemp</span>   <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7410"></a>    <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletTemp</span>   <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7411"></a>    <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Evapmdot</span>         <span class="o">=</span> <span class="n">EvapMassFlowRate</span>
<a name="ln-7412"></a>    <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Condmdot</span>         <span class="o">=</span> <span class="n">CondMassFlowRate</span>
<a name="ln-7413"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-7414"></a><span class="k">      </span><span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPower</span>       <span class="o">=</span> <span class="n">BasinHeaterPower</span>
<a name="ln-7415"></a>      <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterConsumption</span> <span class="o">=</span> <span class="n">BasinHeaterPower</span><span class="o">*</span><span class="n">ReportingConstant</span>
<a name="ln-7416"></a>    <span class="n">ENDIF</span>
<a name="ln-7417"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">Power</span> <span class="p">.</span><span class="n">NE</span><span class="p">.</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-7418"></a><span class="k">       </span><span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">ActualCOP</span>     <span class="o">=</span> <span class="n">QEvaporator</span><span class="o">/</span><span class="n">Power</span>
<a name="ln-7419"></a>    <span class="k">ELSE</span>
<a name="ln-7420"></a><span class="k">       </span><span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">ActualCOP</span>     <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7421"></a>    <span class="k">END IF</span>
<a name="ln-7422"></a>
<a name="ln-7423"></a><span class="k">    If</span><span class="p">(</span><span class="n">ElectricChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="p">)</span> <span class="k">Then</span>
<a name="ln-7424"></a>
<a name="ln-7425"></a><span class="k">       CALL </span><span class="n">SafeCopyPlantNode</span><span class="p">(</span> <span class="n">HeatRecInNode</span><span class="p">,</span> <span class="n">HeatRecOutNode</span><span class="p">)</span>
<a name="ln-7426"></a>       <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">QHeatRecovery</span> <span class="o">=</span> <span class="n">QHeatRecovered</span>
<a name="ln-7427"></a>       <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">EnergyHeatRecovery</span> <span class="o">=</span> <span class="n">QHeatRecovered</span><span class="o">*</span><span class="n">TimeStepSys</span><span class="o">*</span><span class="n">SecInHour</span>
<a name="ln-7428"></a>       <span class="n">Node</span><span class="p">(</span><span class="n">HeatRecOutNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">=</span> <span class="n">HeatRecOutletTemp</span>
<a name="ln-7429"></a>       <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecInletTemp</span>   <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">HeatRecInNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7430"></a>       <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecOutletTemp</span>  <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">HeatRecOutNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7431"></a>       <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecMassFlow</span>    <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">HeatRecInNode</span><span class="p">)%</span><span class="n">MassFlowRate</span>
<a name="ln-7432"></a>       <span class="n">ElectricChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">ChillerCondAvgTemp</span> <span class="o">=</span> <span class="n">AvgCondSinkTemp</span>
<a name="ln-7433"></a>    <span class="k">End If</span>
<a name="ln-7434"></a>
<a name="ln-7435"></a><span class="k">  END IF</span>
<a name="ln-7436"></a><span class="k">RETURN</span>
<a name="ln-7437"></a><span class="k">END SUBROUTINE </span><span class="n">UpdateElectricChillerRecords</span>
<a name="ln-7438"></a>
<a name="ln-7439"></a>
<a name="ln-7440"></a>
<a name="ln-7441"></a>
<a name="ln-7442"></a>
<a name="ln-7443"></a>
<a name="ln-7444"></a>
<a name="ln-7445"></a>
<a name="ln-7446"></a>
<a name="ln-7447"></a>
<a name="ln-7448"></a><span class="c">! End of EngineDriven Chiller Module Utility Subroutines</span>
<a name="ln-7449"></a><span class="c">! *****************************************************************************</span>
<a name="ln-7450"></a>
<a name="ln-7451"></a>
<a name="ln-7452"></a><span class="c">! Beginning of Record Keeping subroutines for the EngineDriven Chiller Module</span>
<a name="ln-7453"></a><span class="c">! *****************************************************************************</span>
<a name="ln-7454"></a>
<a name="ln-7455"></a><span class="k">SUBROUTINE </span><span class="n">UpdateEngineDrivenChiller</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">,</span><span class="n">RunFlag</span><span class="p">,</span> <span class="n">Num</span><span class="p">)</span>
<a name="ln-7456"></a>            <span class="c">! SUBROUTINE INFORMATION:</span>
<a name="ln-7457"></a>            <span class="c">!       AUTHOR:          Dan Fisher / Brandon Anderson</span>
<a name="ln-7458"></a>            <span class="c">!       DATE WRITTEN:    September 2000</span>
<a name="ln-7459"></a>
<a name="ln-7460"></a>            <span class="c">! PURPOSE OF THIS SUBROUTINE:</span>
<a name="ln-7461"></a>            <span class="c">! reporting</span>
<a name="ln-7462"></a>
<a name="ln-7463"></a>
<a name="ln-7464"></a>            <span class="c">! METHODOLOGY EMPLOYED: na</span>
<a name="ln-7465"></a>
<a name="ln-7466"></a>            <span class="c">! REFERENCES: na</span>
<a name="ln-7467"></a>
<a name="ln-7468"></a>            <span class="c">! USE STATEMENTS: na</span>
<a name="ln-7469"></a>
<a name="ln-7470"></a><span class="k">USE </span><span class="n">DataGlobals</span><span class="p">,</span>     <span class="n">ONLY</span><span class="p">:</span> <span class="n">SecInHour</span>
<a name="ln-7471"></a><span class="k">USE </span><span class="n">DataHVACGlobals</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">TimeStepSys</span>
<a name="ln-7472"></a><span class="k">USE </span><span class="n">PlantUtilities</span><span class="p">,</span>  <span class="n">ONLY</span><span class="p">:</span> <span class="n">SafeCopyPlantNode</span>
<a name="ln-7473"></a>
<a name="ln-7474"></a><span class="k">IMPLICIT NONE</span>
<a name="ln-7475"></a>
<a name="ln-7476"></a>          <span class="c">! SUBROUTINE ARGUMENT DEFINITIONS:</span>
<a name="ln-7477"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span>     <span class="kd">::</span> <span class="n">MyLoad</span>    <span class="c">! current load</span>
<a name="ln-7478"></a>  <span class="kt">LOGICAL</span><span class="p">,</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span>      <span class="kd">::</span> <span class="n">RunFlag</span>   <span class="c">! TRUE if chiller operating</span>
<a name="ln-7479"></a>  <span class="kt">INTEGER</span><span class="p">,</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span>      <span class="kd">::</span> <span class="n">Num</span>       <span class="c">! chiller number</span>
<a name="ln-7480"></a>
<a name="ln-7481"></a>
<a name="ln-7482"></a>          <span class="c">! SUBROUTINE PARAMETER DEFINITIONS:</span>
<a name="ln-7483"></a>          <span class="c">! na</span>
<a name="ln-7484"></a>
<a name="ln-7485"></a>          <span class="c">! DERIVED TYPE DEFINITIONS</span>
<a name="ln-7486"></a>          <span class="c">! na</span>
<a name="ln-7487"></a>
<a name="ln-7488"></a>          <span class="c">! SUBROUTINE LOCAL VARIABLE DECLARATIONS:</span>
<a name="ln-7489"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">EvapInletNode</span>       <span class="c">! evaporator inlet node number, water side</span>
<a name="ln-7490"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">EvapOutletNode</span>      <span class="c">! evaporator outlet node number, water side</span>
<a name="ln-7491"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">CondInletNode</span>       <span class="c">! condenser inlet node number, water side</span>
<a name="ln-7492"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">CondOutletNode</span>      <span class="c">! condenser outlet node number, water side</span>
<a name="ln-7493"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">HeatRecInletNode</span>
<a name="ln-7494"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">HeatRecOutletNode</span>
<a name="ln-7495"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">ReportingConstant</span>   <span class="c">! Number of seconds per HVAC system time step, to convert from W (J/s) to J</span>
<a name="ln-7496"></a>
<a name="ln-7497"></a>  <span class="n">ReportingConstant</span> <span class="o">=</span> <span class="n">TimeStepSys</span><span class="o">*</span><span class="n">SecInHour</span>
<a name="ln-7498"></a>
<a name="ln-7499"></a>    <span class="n">EvapInletNode</span>  <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletNodeNum</span>
<a name="ln-7500"></a>    <span class="n">EvapOutletNode</span> <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span>
<a name="ln-7501"></a>    <span class="n">CondInletNode</span>  <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span>
<a name="ln-7502"></a>    <span class="n">CondOutletNode</span> <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletNodeNum</span>
<a name="ln-7503"></a>
<a name="ln-7504"></a>    <span class="n">HeatRecInletNode</span> <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span>
<a name="ln-7505"></a>    <span class="n">HeatRecOutletNode</span> <span class="o">=</span> <span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecOutletNodeNum</span>
<a name="ln-7506"></a>
<a name="ln-7507"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">MyLoad</span> <span class="o">&gt;=</span><span class="mf">0.d0</span> <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">RunFlag</span><span class="p">)</span><span class="k">THEN</span> <span class="c">!Chiller not running</span>
<a name="ln-7508"></a>          <span class="c">!set node temperatures</span>
<a name="ln-7509"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">Temp</span>     <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7510"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">Temp</span>     <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7511"></a>
<a name="ln-7512"></a>    <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Power</span>            <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7513"></a>    <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QEvap</span>            <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7514"></a>    <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QCond</span>            <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7515"></a>    <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Energy</span>           <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7516"></a>    <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapEnergy</span>       <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7517"></a>    <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondEnergy</span>       <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7518"></a>    <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletTemp</span>  <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7519"></a>    <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletTemp</span>  <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7520"></a>    <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletTemp</span>   <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7521"></a>    <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletTemp</span>   <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7522"></a>    <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Evapmdot</span>         <span class="o">=</span> <span class="n">EvapMassFlowRate</span>
<a name="ln-7523"></a>    <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Condmdot</span>         <span class="o">=</span> <span class="n">CondMassFlowRate</span>
<a name="ln-7524"></a>    <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">FuelCOP</span>          <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7525"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-7526"></a><span class="k">      </span><span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPower</span>       <span class="o">=</span> <span class="n">BasinHeaterPower</span>
<a name="ln-7527"></a>      <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterConsumption</span> <span class="o">=</span> <span class="n">BasinHeaterPower</span><span class="o">*</span><span class="n">ReportingConstant</span>
<a name="ln-7528"></a>    <span class="n">ENDIF</span>
<a name="ln-7529"></a>  <span class="k">ELSE</span> <span class="c">!Chiller is running</span>
<a name="ln-7530"></a>          <span class="c">!set node temperatures</span>
<a name="ln-7531"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">Temp</span>     <span class="o">=</span> <span class="n">EvapOutletTemp</span>
<a name="ln-7532"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">Temp</span>     <span class="o">=</span> <span class="n">CondOutletTemp</span>
<a name="ln-7533"></a>
<a name="ln-7534"></a>    <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Power</span>            <span class="o">=</span> <span class="n">Power</span>
<a name="ln-7535"></a>    <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QEvap</span>            <span class="o">=</span> <span class="n">QEvaporator</span>
<a name="ln-7536"></a>    <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QCond</span>            <span class="o">=</span> <span class="n">QCondenser</span>
<a name="ln-7537"></a>    <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Energy</span>           <span class="o">=</span> <span class="n">Energy</span>
<a name="ln-7538"></a>    <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapEnergy</span>       <span class="o">=</span> <span class="n">EvaporatorEnergy</span>
<a name="ln-7539"></a>    <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondEnergy</span>       <span class="o">=</span> <span class="n">CondenserEnergy</span>
<a name="ln-7540"></a>    <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletTemp</span>    <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7541"></a>    <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletTemp</span>    <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7542"></a>    <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletTemp</span>   <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7543"></a>    <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletTemp</span>   <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7544"></a>    <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Evapmdot</span>         <span class="o">=</span> <span class="n">EvapMassFlowRate</span>
<a name="ln-7545"></a>    <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Condmdot</span>         <span class="o">=</span> <span class="n">CondMassFlowRate</span>
<a name="ln-7546"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">FuelEnergyUseRate</span> <span class="p">.</span><span class="n">NE</span><span class="p">.</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-7547"></a><span class="k">      </span><span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">FuelCOP</span>          <span class="o">=</span> <span class="n">QEvaporator</span><span class="o">/</span><span class="n">FuelEnergyUseRate</span>
<a name="ln-7548"></a>    <span class="k">ELSE</span>
<a name="ln-7549"></a><span class="k">      </span><span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">FuelCOP</span>          <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7550"></a>    <span class="k">END IF</span>
<a name="ln-7551"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-7552"></a><span class="k">      </span><span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPower</span>       <span class="o">=</span> <span class="n">BasinHeaterPower</span>
<a name="ln-7553"></a>      <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterConsumption</span> <span class="o">=</span> <span class="n">BasinHeaterPower</span><span class="o">*</span><span class="n">ReportingConstant</span>
<a name="ln-7554"></a>    <span class="n">ENDIF</span>
<a name="ln-7555"></a>  <span class="k">END IF</span>
<a name="ln-7556"></a>
<a name="ln-7557"></a><span class="c">! Update Heat Recovery Stuff whether running or not, variables should be set correctly</span>
<a name="ln-7558"></a>  <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">QJacketRecovered</span>     <span class="o">=</span> <span class="n">QJacketRecovered</span>
<a name="ln-7559"></a>  <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">QLubeOilRecovered</span>    <span class="o">=</span> <span class="n">QLubeOilRecovered</span>
<a name="ln-7560"></a>  <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">QExhaustRecovered</span>    <span class="o">=</span> <span class="n">QExhaustRecovered</span>
<a name="ln-7561"></a>  <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">QTotalHeatRecovered</span>  <span class="o">=</span> <span class="n">QTotalHeatRecovered</span>
<a name="ln-7562"></a>  <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">FuelEnergyUseRate</span>    <span class="o">=</span> <span class="n">FuelEnergyUseRate</span>
<a name="ln-7563"></a>  <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">JacketEnergyRec</span>      <span class="o">=</span> <span class="n">JacketEnergyRec</span>
<a name="ln-7564"></a>  <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">LubeOilEnergyRec</span>     <span class="o">=</span> <span class="n">LubeOilEnergyRec</span>
<a name="ln-7565"></a>  <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">ExhaustEnergyRec</span>     <span class="o">=</span> <span class="n">ExhaustEnergyRec</span>
<a name="ln-7566"></a>  <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">TotalHeatEnergyRec</span>   <span class="o">=</span> <span class="n">TotalHeatEnergyRec</span>
<a name="ln-7567"></a>  <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">FuelEnergy</span>           <span class="o">=</span> <span class="n">FuelEnergy</span>
<a name="ln-7568"></a>  <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">FuelMdot</span>             <span class="o">=</span> <span class="n">FuelMdot</span>
<a name="ln-7569"></a>  <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">ExhaustStackTemp</span>     <span class="o">=</span> <span class="n">ExhaustStackTemp</span>
<a name="ln-7570"></a>  <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecInletTemp</span>     <span class="o">=</span> <span class="n">HeatRecInletTemp</span>
<a name="ln-7571"></a>  <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecOutletTemp</span>    <span class="o">=</span> <span class="n">HeatRecOutletTemp</span>
<a name="ln-7572"></a>  <span class="n">EngineDrivenChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecMdot</span>          <span class="o">=</span> <span class="n">HeatRecMdotActual</span>
<a name="ln-7573"></a>
<a name="ln-7574"></a>
<a name="ln-7575"></a>  <span class="c">!Update the Heat Recovery outlet</span>
<a name="ln-7576"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">EngineDrivenChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-7577"></a><span class="k">    CALL </span><span class="n">SafeCopyPlantNode</span><span class="p">(</span><span class="n">HeatRecInletNode</span><span class="p">,</span> <span class="n">HeatRecOutletNode</span><span class="p">)</span>
<a name="ln-7578"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">HeatRecOutletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">=</span> <span class="n">HeatRecOutletTemp</span>
<a name="ln-7579"></a>  <span class="n">ENDIF</span>
<a name="ln-7580"></a>
<a name="ln-7581"></a><span class="k">RETURN</span>
<a name="ln-7582"></a><span class="k">END SUBROUTINE </span><span class="n">UpdateEngineDrivenChiller</span>
<a name="ln-7583"></a>
<a name="ln-7584"></a>
<a name="ln-7585"></a>
<a name="ln-7586"></a><span class="k">SUBROUTINE </span><span class="n">UpdateGTChillerRecords</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">,</span><span class="n">RunFlag</span><span class="p">,</span> <span class="n">Num</span><span class="p">)</span>
<a name="ln-7587"></a>            <span class="c">! SUBROUTINE INFORMATION:</span>
<a name="ln-7588"></a>            <span class="c">!       AUTHOR:          Dan Fisher / Brandon Anderson</span>
<a name="ln-7589"></a>            <span class="c">!       DATE WRITTEN:    September 2000</span>
<a name="ln-7590"></a>
<a name="ln-7591"></a>            <span class="c">! PURPOSE OF THIS SUBROUTINE:</span>
<a name="ln-7592"></a>            <span class="c">! reporting</span>
<a name="ln-7593"></a>
<a name="ln-7594"></a>
<a name="ln-7595"></a>            <span class="c">! METHODOLOGY EMPLOYED: na</span>
<a name="ln-7596"></a>
<a name="ln-7597"></a>            <span class="c">! REFERENCES: na</span>
<a name="ln-7598"></a>
<a name="ln-7599"></a>            <span class="c">! USE STATEMENTS: na</span>
<a name="ln-7600"></a>  <span class="k">USE </span><span class="n">DataGlobals</span><span class="p">,</span>     <span class="n">ONLY</span> <span class="p">:</span> <span class="n">SecInHour</span>
<a name="ln-7601"></a>  <span class="k">USE </span><span class="n">DataHVACGlobals</span><span class="p">,</span> <span class="n">ONLY</span> <span class="p">:</span> <span class="n">TimeStepSys</span>
<a name="ln-7602"></a>  <span class="k">USE </span><span class="n">PlantUtilities</span><span class="p">,</span>  <span class="n">ONLY</span> <span class="p">:</span> <span class="n">SafeCopyPlantNode</span>
<a name="ln-7603"></a>
<a name="ln-7604"></a><span class="k">IMPLICIT NONE</span>
<a name="ln-7605"></a>
<a name="ln-7606"></a>          <span class="c">! SUBROUTINE ARGUMENT DEFINITIONS:</span>
<a name="ln-7607"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">),</span><span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span>     <span class="kd">::</span> <span class="n">MyLoad</span>    <span class="c">! current load</span>
<a name="ln-7608"></a>  <span class="kt">LOGICAL</span><span class="p">,</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span>      <span class="kd">::</span> <span class="n">RunFlag</span>   <span class="c">! TRUE if chiller operating</span>
<a name="ln-7609"></a>  <span class="kt">INTEGER</span><span class="p">,</span> <span class="k">INTENT</span><span class="p">(</span><span class="n">IN</span><span class="p">)</span>      <span class="kd">::</span> <span class="n">Num</span>       <span class="c">! chiller number</span>
<a name="ln-7610"></a>
<a name="ln-7611"></a>
<a name="ln-7612"></a>          <span class="c">! SUBROUTINE PARAMETER DEFINITIONS:</span>
<a name="ln-7613"></a>          <span class="c">! na</span>
<a name="ln-7614"></a>
<a name="ln-7615"></a>          <span class="c">! DERIVED TYPE DEFINITIONS</span>
<a name="ln-7616"></a>          <span class="c">! na</span>
<a name="ln-7617"></a>
<a name="ln-7618"></a>          <span class="c">! SUBROUTINE LOCAL VARIABLE DECLARATIONS:</span>
<a name="ln-7619"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">EvapInletNode</span>         <span class="c">! evaporator inlet node number, water side</span>
<a name="ln-7620"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">EvapOutletNode</span>        <span class="c">! evaporator outlet node number, water side</span>
<a name="ln-7621"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">CondInletNode</span>         <span class="c">! condenser inlet node number, water side</span>
<a name="ln-7622"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">CondOutletNode</span>        <span class="c">! condenser outlet node number, water side</span>
<a name="ln-7623"></a>
<a name="ln-7624"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">HeatRecInletNode</span>
<a name="ln-7625"></a>  <span class="kt">INTEGER</span>                <span class="kd">::</span> <span class="n">HeatRecOutletNode</span>
<a name="ln-7626"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>              <span class="kd">::</span> <span class="n">ReportingConstant</span>     <span class="c">! Number of seconds per HVAC system time step, to convert from W (J/s) to J</span>
<a name="ln-7627"></a>
<a name="ln-7628"></a>  <span class="n">ReportingConstant</span> <span class="o">=</span> <span class="n">TimeStepSys</span><span class="o">*</span><span class="n">SecInHour</span>
<a name="ln-7629"></a>
<a name="ln-7630"></a>  <span class="n">EvapInletNode</span>  <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletNodeNum</span>
<a name="ln-7631"></a>  <span class="n">EvapOutletNode</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span>
<a name="ln-7632"></a>  <span class="n">CondInletNode</span>  <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span>
<a name="ln-7633"></a>  <span class="n">CondOutletNode</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletNodeNum</span>
<a name="ln-7634"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-7635"></a><span class="k">    </span><span class="n">HeatRecInletNode</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecInletNodeNum</span>
<a name="ln-7636"></a>    <span class="n">HeatRecOutletNode</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecOutletNodeNum</span>
<a name="ln-7637"></a>  <span class="n">ENDIF</span>
<a name="ln-7638"></a>
<a name="ln-7639"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">MyLoad</span> <span class="o">&gt;=</span> <span class="mf">0.d0</span> <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">RunFlag</span><span class="p">)</span><span class="k">THEN</span> <span class="c">!Chiller not running so pass inlet states to outlet states</span>
<a name="ln-7640"></a>          <span class="c">!set node temperatures</span>
<a name="ln-7641"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">Temp</span>     <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7642"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">Temp</span>     <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7643"></a>
<a name="ln-7644"></a>
<a name="ln-7645"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-7646"></a><span class="k">      CALL </span><span class="n">SafeCopyPlantNode</span><span class="p">(</span> <span class="n">HeatRecOutletNode</span><span class="p">,</span> <span class="n">HeatRecInletNode</span><span class="p">)</span>
<a name="ln-7647"></a>      <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecInletTemp</span>     <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">HeatRecInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7648"></a>      <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecOutletTemp</span>    <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">HeatRecOutletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7649"></a>    <span class="n">ENDIF</span>
<a name="ln-7650"></a>
<a name="ln-7651"></a>
<a name="ln-7652"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Power</span>            <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7653"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QEvap</span>            <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7654"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QCond</span>            <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7655"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Energy</span>           <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7656"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapEnergy</span>       <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7657"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondEnergy</span>       <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7658"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletTemp</span>  <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7659"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletTemp</span>  <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7660"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletTemp</span>   <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7661"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletTemp</span>   <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7662"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Evapmdot</span>         <span class="o">=</span> <span class="n">EvapMassFlowRate</span>
<a name="ln-7663"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Condmdot</span>         <span class="o">=</span> <span class="n">CondMassFlowRate</span>
<a name="ln-7664"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">FuelEnergyUsedRate</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7665"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">FuelMassUsedRate</span>   <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7666"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">FuelEnergyUsed</span>     <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7667"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">FuelMassUsed</span>       <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7668"></a>
<a name="ln-7669"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecLubeEnergy</span>    <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7670"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecLubeRate</span>      <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7671"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">ExhaustStackTemp</span>     <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7672"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecMdot</span>          <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecMdot</span>
<a name="ln-7673"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">FuelCOP</span>              <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7674"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-7675"></a><span class="k">      </span><span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPower</span>       <span class="o">=</span> <span class="n">BasinHeaterPower</span>
<a name="ln-7676"></a>      <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterConsumption</span> <span class="o">=</span> <span class="n">BasinHeaterPower</span><span class="o">*</span><span class="n">ReportingConstant</span>
<a name="ln-7677"></a>    <span class="n">ENDIF</span>
<a name="ln-7678"></a>
<a name="ln-7679"></a>  <span class="k">ELSE</span> <span class="c">!Chiller is running so report calculated values</span>
<a name="ln-7680"></a>          <span class="c">!set node temperatures</span>
<a name="ln-7681"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">Temp</span>     <span class="o">=</span> <span class="n">EvapOutletTemp</span>
<a name="ln-7682"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">Temp</span>     <span class="o">=</span> <span class="n">CondOutletTemp</span>
<a name="ln-7683"></a>
<a name="ln-7684"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecActive</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-7685"></a><span class="k">      CALL </span><span class="n">SafeCopyPlantNode</span><span class="p">(</span> <span class="n">HeatRecOutletNode</span><span class="p">,</span> <span class="n">HeatRecInletNode</span><span class="p">)</span>
<a name="ln-7686"></a>      <span class="n">Node</span><span class="p">(</span><span class="n">HeatRecOutletNode</span><span class="p">)%</span><span class="n">Temp</span> <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecOutletTemp</span>
<a name="ln-7687"></a>    <span class="n">ENDIF</span>
<a name="ln-7688"></a>
<a name="ln-7689"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Power</span>            <span class="o">=</span> <span class="n">Power</span>
<a name="ln-7690"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QEvap</span>            <span class="o">=</span> <span class="n">QEvaporator</span>
<a name="ln-7691"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QCond</span>            <span class="o">=</span> <span class="n">QCondenser</span>
<a name="ln-7692"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Energy</span>           <span class="o">=</span> <span class="n">Energy</span>
<a name="ln-7693"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapEnergy</span>       <span class="o">=</span> <span class="n">EvaporatorEnergy</span>
<a name="ln-7694"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondEnergy</span>        <span class="o">=</span> <span class="n">CondenserEnergy</span>
<a name="ln-7695"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletTemp</span>    <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7696"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletTemp</span>    <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7697"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletTemp</span>   <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7698"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletTemp</span>   <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7699"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Evapmdot</span>         <span class="o">=</span> <span class="n">EvapMassFlowRate</span>
<a name="ln-7700"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Condmdot</span>         <span class="o">=</span> <span class="n">CondMassFlowRate</span>
<a name="ln-7701"></a>
<a name="ln-7702"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecLubeEnergy</span>    <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecLubeEnergy</span>
<a name="ln-7703"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecLubeRate</span>      <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecLubeRate</span>
<a name="ln-7704"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">FuelEnergyUsedRate</span>   <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">FuelEnergyIn</span>
<a name="ln-7705"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">FuelMassUsedRate</span>     <span class="o">=</span> <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">FuelMassUsedRate</span>
<a name="ln-7706"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">FuelEnergyUsed</span>       <span class="o">=</span> <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">FuelEnergyUsedRate</span><span class="o">*</span><span class="n">TimeStepSys</span><span class="o">*</span><span class="n">SecInHour</span>
<a name="ln-7707"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">FuelMassUsed</span>         <span class="o">=</span> <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">FuelMassUsedRate</span><span class="o">*</span><span class="n">TimeStepSys</span><span class="o">*</span><span class="n">SecInHour</span>
<a name="ln-7708"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">ExhaustStackTemp</span>     <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">ExhaustStackTemp</span>
<a name="ln-7709"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecInletTemp</span>     <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecInletTemp</span>
<a name="ln-7710"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecOutletTemp</span>    <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecOutletTemp</span>
<a name="ln-7711"></a>    <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecMdot</span>          <span class="o">=</span> <span class="n">GTChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">HeatRecMdot</span>
<a name="ln-7712"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">FuelEnergyUsedRate</span> <span class="p">.</span><span class="n">NE</span><span class="p">.</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-7713"></a><span class="k">      </span><span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">FuelCOP</span>              <span class="o">=</span> <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QEvap</span><span class="o">/</span><span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">FuelEnergyUsedRate</span>
<a name="ln-7714"></a>    <span class="k">ELSE</span>
<a name="ln-7715"></a><span class="k">      </span><span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">FuelCOP</span>              <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7716"></a>    <span class="k">END IF</span>
<a name="ln-7717"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">GTChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-7718"></a><span class="k">      </span><span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPower</span>       <span class="o">=</span> <span class="n">BasinHeaterPower</span>
<a name="ln-7719"></a>      <span class="n">GTChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterConsumption</span> <span class="o">=</span> <span class="n">BasinHeaterPower</span><span class="o">*</span><span class="n">ReportingConstant</span>
<a name="ln-7720"></a>    <span class="n">ENDIF</span>
<a name="ln-7721"></a>  <span class="k">END IF</span>
<a name="ln-7722"></a><span class="k">RETURN</span>
<a name="ln-7723"></a><span class="k">END SUBROUTINE </span><span class="n">UpdateGTChillerRecords</span>
<a name="ln-7724"></a>
<a name="ln-7725"></a><span class="k">SUBROUTINE </span><span class="n">UpdateConstCOPChillerRecords</span><span class="p">(</span><span class="n">MyLoad</span><span class="p">,</span><span class="n">RunFlag</span><span class="p">,</span><span class="n">Num</span><span class="p">)</span>
<a name="ln-7726"></a>            <span class="c">! SUBROUTINE INFORMATION:</span>
<a name="ln-7727"></a>            <span class="c">!       AUTHOR:          Dan Fisher</span>
<a name="ln-7728"></a>            <span class="c">!       DATE WRITTEN:    October 1998</span>
<a name="ln-7729"></a>
<a name="ln-7730"></a>            <span class="c">! PURPOSE OF THIS SUBROUTINE:</span>
<a name="ln-7731"></a>
<a name="ln-7732"></a>
<a name="ln-7733"></a>            <span class="c">! METHODOLOGY EMPLOYED:</span>
<a name="ln-7734"></a>            <span class="c">! REFERENCES:</span>
<a name="ln-7735"></a>
<a name="ln-7736"></a>            <span class="c">! USE STATEMENTS:</span>
<a name="ln-7737"></a><span class="k">USE </span><span class="n">DataGlobals</span><span class="p">,</span>     <span class="n">ONLY</span><span class="p">:</span> <span class="n">SecInHour</span>
<a name="ln-7738"></a><span class="k">USE </span><span class="n">DataHVACGlobals</span><span class="p">,</span> <span class="n">ONLY</span><span class="p">:</span> <span class="n">TimeStepSys</span>
<a name="ln-7739"></a>
<a name="ln-7740"></a><span class="k">IMPLICIT NONE</span> <span class="c">! Enforce explicit typing of all variables in this routine</span>
<a name="ln-7741"></a>
<a name="ln-7742"></a>          <span class="c">! SUBROUTINE ARGUMENT DEFINITIONS:</span>
<a name="ln-7743"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>            <span class="kd">::</span> <span class="n">MyLoad</span> <span class="c">!unused1208</span>
<a name="ln-7744"></a>  <span class="kt">LOGICAL</span>              <span class="kd">::</span> <span class="n">RunFlag</span> <span class="c">!unused1208</span>
<a name="ln-7745"></a>  <span class="kt">INTEGER</span>              <span class="kd">::</span> <span class="n">Num</span>
<a name="ln-7746"></a>
<a name="ln-7747"></a>          <span class="c">! SUBROUTINE PARAMETER DEFINITIONS:</span>
<a name="ln-7748"></a>          <span class="c">! na</span>
<a name="ln-7749"></a>
<a name="ln-7750"></a>          <span class="c">! INTERFACE BLOCK SPECIFICATIONS</span>
<a name="ln-7751"></a>          <span class="c">! na</span>
<a name="ln-7752"></a>
<a name="ln-7753"></a>          <span class="c">! DERIVED TYPE DEFINITIONS</span>
<a name="ln-7754"></a>          <span class="c">! na</span>
<a name="ln-7755"></a>
<a name="ln-7756"></a>          <span class="c">! SUBROUTINE LOCAL VARIABLE DECLARATIONS:</span>
<a name="ln-7757"></a>  <span class="kt">INTEGER</span>                  <span class="kd">::</span> <span class="n">EvapInletNode</span>
<a name="ln-7758"></a>  <span class="kt">INTEGER</span>                  <span class="kd">::</span> <span class="n">EvapOutletNode</span>
<a name="ln-7759"></a>  <span class="kt">INTEGER</span>                  <span class="kd">::</span> <span class="n">CondInletNode</span>
<a name="ln-7760"></a>  <span class="kt">INTEGER</span>                  <span class="kd">::</span> <span class="n">CondOutletNode</span>
<a name="ln-7761"></a>  <span class="kt">REAL</span><span class="p">(</span><span class="n">r64</span><span class="p">)</span>                <span class="kd">::</span> <span class="n">ReportingConstant</span>  <span class="c">! Number of seconds per HVAC system time step, to convert from W (J/s) to J</span>
<a name="ln-7762"></a>
<a name="ln-7763"></a>  <span class="n">ReportingConstant</span> <span class="o">=</span> <span class="n">TimeStepSys</span><span class="o">*</span><span class="n">SecInHour</span>
<a name="ln-7764"></a>
<a name="ln-7765"></a>  <span class="n">EvapInletNode</span>            <span class="o">=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletNodeNum</span>
<a name="ln-7766"></a>  <span class="n">EvapOutletNode</span>           <span class="o">=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletNodeNum</span>
<a name="ln-7767"></a>  <span class="n">CondInletNode</span>            <span class="o">=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletNodeNum</span>
<a name="ln-7768"></a>  <span class="n">CondOutletNode</span>           <span class="o">=</span> <span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletNodeNum</span>
<a name="ln-7769"></a>
<a name="ln-7770"></a>
<a name="ln-7771"></a>  <span class="k">IF</span> <span class="p">(</span><span class="n">MyLoad</span> <span class="o">&gt;=</span> <span class="mf">0.d0</span> <span class="p">.</span><span class="nb">OR</span><span class="p">.</span> <span class="p">.</span><span class="nb">NOT</span><span class="p">.</span> <span class="n">RunFlag</span><span class="p">)</span><span class="k">THEN</span> <span class="c">!Chiller not running so pass inlet states to outlet states</span>
<a name="ln-7772"></a>    <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Power</span>            <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7773"></a>    <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QEvap</span>            <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7774"></a>    <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QCond</span>            <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7775"></a>    <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Energy</span>           <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7776"></a>    <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapEnergy</span>       <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7777"></a>    <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondEnergy</span>       <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7778"></a>    <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletTemp</span>    <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7779"></a>    <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletTemp</span>    <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7780"></a>    <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletTemp</span>   <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7781"></a>    <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletTemp</span>   <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7782"></a>    <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Evapmdot</span>         <span class="o">=</span> <span class="n">EvapMassFlowRate</span>
<a name="ln-7783"></a>    <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Condmdot</span>         <span class="o">=</span> <span class="n">CondMassFlowRate</span>
<a name="ln-7784"></a>    <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">ActualCOP</span>        <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7785"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-7786"></a><span class="k">      </span><span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPower</span>       <span class="o">=</span> <span class="n">BasinHeaterPower</span>
<a name="ln-7787"></a>      <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterConsumption</span> <span class="o">=</span> <span class="n">BasinHeaterPower</span><span class="o">*</span><span class="n">ReportingConstant</span>
<a name="ln-7788"></a>    <span class="n">ENDIF</span>
<a name="ln-7789"></a>
<a name="ln-7790"></a>
<a name="ln-7791"></a>          <span class="c">!set outlet node temperatures</span>
<a name="ln-7792"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">Temp</span>                   <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7793"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">Temp</span>                   <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7794"></a>
<a name="ln-7795"></a>  <span class="k">ELSE</span>
<a name="ln-7796"></a><span class="k">    </span><span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Power</span>            <span class="o">=</span> <span class="n">Power</span>
<a name="ln-7797"></a>    <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QEvap</span>            <span class="o">=</span> <span class="n">QEvaporator</span>
<a name="ln-7798"></a>    <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">QCond</span>            <span class="o">=</span> <span class="n">QCondenser</span>
<a name="ln-7799"></a>    <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Energy</span>           <span class="o">=</span> <span class="n">Energy</span>
<a name="ln-7800"></a>    <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapEnergy</span>       <span class="o">=</span> <span class="n">EvaporatorEnergy</span>
<a name="ln-7801"></a>    <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondEnergy</span>       <span class="o">=</span> <span class="n">CondenserEnergy</span>
<a name="ln-7802"></a>    <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondInletTemp</span>    <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">CondInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7803"></a>    <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapInletTemp</span>    <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">EvapInletNode</span><span class="p">)%</span><span class="n">Temp</span>
<a name="ln-7804"></a>    <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondOutletTemp</span>   <span class="o">=</span> <span class="n">CondOutletTemp</span>
<a name="ln-7805"></a>    <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">EvapOutletTemp</span>   <span class="o">=</span> <span class="n">EvapOutletTemp</span>
<a name="ln-7806"></a>    <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Evapmdot</span>         <span class="o">=</span> <span class="n">EvapMassFlowRate</span>
<a name="ln-7807"></a>    <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">Condmdot</span>         <span class="o">=</span> <span class="n">CondMassFlowRate</span>
<a name="ln-7808"></a>    <span class="k">IF</span> <span class="p">(</span><span class="n">Power</span> <span class="p">.</span><span class="n">ne</span><span class="p">.</span> <span class="mf">0.0d0</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-7809"></a><span class="k">       </span><span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">ActualCOP</span> <span class="o">=</span> <span class="n">QEvaporator</span><span class="o">/</span><span class="n">Power</span>
<a name="ln-7810"></a>    <span class="k">ELSE</span>
<a name="ln-7811"></a><span class="k">       </span><span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">ActualCOP</span> <span class="o">=</span> <span class="mf">0.0d0</span>
<a name="ln-7812"></a>    <span class="k">END IF</span>
<a name="ln-7813"></a><span class="k">    IF</span> <span class="p">(</span><span class="n">ConstCOPChiller</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">CondenserType</span> <span class="o">==</span> <span class="n">EvapCooled</span><span class="p">)</span> <span class="k">THEN</span>
<a name="ln-7814"></a><span class="k">      </span><span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterPower</span>       <span class="o">=</span> <span class="n">BasinHeaterPower</span>
<a name="ln-7815"></a>      <span class="n">ConstCOPChillerReport</span><span class="p">(</span><span class="n">Num</span><span class="p">)%</span><span class="n">Base</span><span class="p">%</span><span class="n">BasinHeaterConsumption</span> <span class="o">=</span> <span class="n">BasinHeaterPower</span><span class="o">*</span><span class="n">ReportingConstant</span>
<a name="ln-7816"></a>    <span class="n">ENDIF</span>
<a name="ln-7817"></a>
<a name="ln-7818"></a>          <span class="c">!set outlet node temperatures</span>
<a name="ln-7819"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">EvapOutletNode</span><span class="p">)%</span><span class="n">Temp</span>     <span class="o">=</span> <span class="n">EvapOutletTemp</span>
<a name="ln-7820"></a>    <span class="n">Node</span><span class="p">(</span><span class="n">CondOutletNode</span><span class="p">)%</span><span class="n">Temp</span>     <span class="o">=</span> <span class="n">CondOutletTemp</span>
<a name="ln-7821"></a>  <span class="k">END IF</span>
<a name="ln-7822"></a>
<a name="ln-7823"></a><span class="k">RETURN</span>
<a name="ln-7824"></a><span class="k">END SUBROUTINE </span><span class="n">UpdateConstCOPChillerRecords</span>
<a name="ln-7825"></a>
<a name="ln-7826"></a><span class="c">! End of Record Keeping subroutines for the Const COP Chiller Module</span>
<a name="ln-7827"></a><span class="c">! *****************************************************************************</span>
<a name="ln-7828"></a>
<a name="ln-7829"></a>
<a name="ln-7830"></a><span class="k">END MODULE </span><span class="n">PlantChillers</span>
<a name="ln-7831"></a>
<a name="ln-7832"></a>
<a name="ln-7833"></a>
<a name="ln-7834"></a><span class="c">!     NOTICE</span>
<a name="ln-7835"></a><span class="c">!</span>
<a name="ln-7836"></a><span class="c">!     Copyright © 1996-2013 The Board of Trustees of the University of Illinois</span>
<a name="ln-7837"></a><span class="c">!     and The Regents of the University of California through Ernest Orlando Lawrence</span>
<a name="ln-7838"></a><span class="c">!     Berkeley National Laboratory.  All rights reserved.</span>
<a name="ln-7839"></a><span class="c">!</span>
<a name="ln-7840"></a><span class="c">!     Portions of the EnergyPlus software package have been developed and copyrighted</span>
<a name="ln-7841"></a><span class="c">!     by other individuals, companies and institutions.  These portions have been</span>
<a name="ln-7842"></a><span class="c">!     incorporated into the EnergyPlus software package under license.   For a complete</span>
<a name="ln-7843"></a><span class="c">!     list of contributors, see &quot;Notice&quot; located in EnergyPlus.f90.</span>
<a name="ln-7844"></a><span class="c">!</span>
<a name="ln-7845"></a><span class="c">!     NOTICE: The U.S. Government is granted for itself and others acting on its</span>
<a name="ln-7846"></a><span class="c">!     behalf a paid-up, nonexclusive, irrevocable, worldwide license in this data to</span>
<a name="ln-7847"></a><span class="c">!     reproduce, prepare derivative works, and perform publicly and display publicly.</span>
<a name="ln-7848"></a><span class="c">!     Beginning five (5) years after permission to assert copyright is granted,</span>
<a name="ln-7849"></a><span class="c">!     subject to two possible five year renewals, the U.S. Government is granted for</span>
<a name="ln-7850"></a><span class="c">!     itself and others acting on its behalf a paid-up, non-exclusive, irrevocable</span>
<a name="ln-7851"></a><span class="c">!     worldwide license in this data to reproduce, prepare derivative works,</span>
<a name="ln-7852"></a><span class="c">!     distribute copies to the public, perform publicly and display publicly, and to</span>
<a name="ln-7853"></a><span class="c">!     permit others to do so.</span>
<a name="ln-7854"></a><span class="c">!</span>
<a name="ln-7855"></a><span class="c">!     TRADEMARKS: EnergyPlus is a trademark of the US Department of Energy.</span>
<a name="ln-7856"></a><span class="c">!</span>
</pre></div>

    </section>
    </div>
  </div>

  <section class="visible-xs visible-sm hidden-md">
    <hr>


<div class="panel panel-default">
  <div class="panel-heading text-left"><h3 class="panel-title"><a data-toggle="collapse" href="#allfiles-1">All Source Files</a></h3></div>
  <div id="allfiles-1" class="panel-collapse collapse">
    <div class="list-group">

      <a class="list-group-item" href="../sourcefile/airflownetworkbalancemanager.f90.html">AirflowNetworkBalanceManager.f90</a>

      <a class="list-group-item" href="../sourcefile/airflownetworksolver.f90.html">AirflowNetworkSolver.f90</a>

      <a class="list-group-item" href="../sourcefile/baseboardradiator.f90.html">BaseboardRadiator.f90</a>

      <a class="list-group-item" href="../sourcefile/baseboardradiatorelectric.f90.html">BaseboardRadiatorElectric.f90</a>

      <a class="list-group-item" href="../sourcefile/baseboardradiatorsteam.f90.html">BaseboardRadiatorSteam.f90</a>

      <a class="list-group-item" href="../sourcefile/baseboardradiatorwater.f90.html">BaseboardRadiatorWater.f90</a>

      <a class="list-group-item" href="../sourcefile/branchinputmanager.f90.html">BranchInputManager.f90</a>

      <a class="list-group-item" href="../sourcefile/branchnodeconnections.f90.html">BranchNodeConnections.f90</a>

      <a class="list-group-item" href="../sourcefile/conductiontransferfunctioncalc.f90.html">ConductionTransferFunctionCalc.f90</a>

      <a class="list-group-item" href="../sourcefile/cooltower.f90.html">CoolTower.f90</a>

      <a class="list-group-item" href="../sourcefile/costestimatemanager.f90.html">CostEstimateManager.f90</a>

      <a class="list-group-item" href="../sourcefile/curvemanager.f90.html">CurveManager.f90</a>

      <a class="list-group-item" href="../sourcefile/cvfonlyroutines.f90.html">CVFOnlyRoutines.f90</a>

      <a class="list-group-item" href="../sourcefile/dataairflownetwork.f90.html">DataAirflowNetwork.f90</a>

      <a class="list-group-item" href="../sourcefile/dataairloop.f90.html">DataAirLoop.f90</a>

      <a class="list-group-item" href="../sourcefile/dataairsystems.f90.html">DataAirSystems.f90</a>

      <a class="list-group-item" href="../sourcefile/databranchairloopplant.f90.html">DataBranchAirLoopPlant.f90</a>

      <a class="list-group-item" href="../sourcefile/databranchnodeconnections.f90.html">DataBranchNodeConnections.f90</a>

      <a class="list-group-item" href="../sourcefile/databsdfwindow.f90.html">DataBSDFWindow.f90</a>

      <a class="list-group-item" href="../sourcefile/datacomplexfenestration.f90.html">DataComplexFenestration.f90</a>

      <a class="list-group-item" href="../sourcefile/datacontaminantbalance.f90.html">DataContaminantBalance.f90</a>

      <a class="list-group-item" href="../sourcefile/dataconvergparams.f90.html">DataConvergParams.f90</a>

      <a class="list-group-item" href="../sourcefile/dataconversions.f90.html">DataConversions.f90</a>

      <a class="list-group-item" href="../sourcefile/datacostestimate.f90.html">DataCostEstimate.f90</a>

      <a class="list-group-item" href="../sourcefile/datadaylighting.f90.html">DataDaylighting.f90</a>

      <a class="list-group-item" href="../sourcefile/datadaylightingdevices.f90.html">DataDaylightingDevices.f90</a>

      <a class="list-group-item" href="../sourcefile/datadefineequip.f90.html">Datadefineequip.f90</a>

      <a class="list-group-item" href="../sourcefile/datadelight.f90.html">DataDElight.f90</a>

      <a class="list-group-item" href="../sourcefile/dataenvironment.f90.html">DataEnvironment.f90</a>

      <a class="list-group-item" href="../sourcefile/dataequivalentlayerwindow.f90.html">DataEquivalentLayerWindow.f90</a>

      <a class="list-group-item" href="../sourcefile/dataerrortracking.f90.html">DataErrorTracking.f90</a>

      <a class="list-group-item" href="../sourcefile/datagenerators.f90.html">DataGenerators.f90</a>

      <a class="list-group-item" href="../sourcefile/dataglobalconstants.f90.html">DataGlobalConstants.f90</a>

      <a class="list-group-item" href="../sourcefile/dataglobals.f90.html">DataGlobals.f90</a>

      <a class="list-group-item" href="../sourcefile/dataheatbalance.f90.html">DataHeatBalance.f90</a>

      <a class="list-group-item" href="../sourcefile/dataheatbalfansys.f90.html">DataHeatBalFanSys.f90</a>

      <a class="list-group-item" href="../sourcefile/dataheatbalsurface.f90.html">DataHeatBalSurface.f90</a>

      <a class="list-group-item" href="../sourcefile/datahvaccontrollers.f90.html">DataHVACControllers.f90</a>

      <a class="list-group-item" href="../sourcefile/datahvacglobals.f90.html">DataHVACGlobals.f90</a>

      <a class="list-group-item" href="../sourcefile/datainterfaces.f90.html">DataInterfaces.f90</a>

      <a class="list-group-item" href="../sourcefile/dataipshortcuts.f90.html">DataIPShortCuts.f90</a>

      <a class="list-group-item" href="../sourcefile/dataloopnode.f90.html">DataLoopNode.f90</a>

      <a class="list-group-item" href="../sourcefile/datamoisturebalance.f90.html">DataMoistureBalance.f90</a>

      <a class="list-group-item" href="../sourcefile/datamoisturebalanceempd.f90.html">DataMoistureBalanceEMPD.f90</a>

      <a class="list-group-item" href="../sourcefile/dataoutputs.f90.html">DataOutputs.f90</a>

      <a class="list-group-item" href="../sourcefile/dataphotovoltaics.f90.html">DataPhotovoltaics.f90</a>

      <a class="list-group-item" href="../sourcefile/dataplant.f90.html">DataPlant.f90</a>

      <a class="list-group-item" href="../sourcefile/dataplantpipingsystems.f90.html">DataPlantPipingSystems.f90</a>

      <a class="list-group-item" href="../sourcefile/dataprecisionglobals.f90.html">DataPrecisionGlobals.f90</a>

      <a class="list-group-item" href="../sourcefile/datareportingflags.f90.html">DataReportingFlags.f90</a>

      <a class="list-group-item" href="../sourcefile/dataroomair.f90.html">DataRoomAir.f90</a>

      <a class="list-group-item" href="../sourcefile/datarootfinder.f90.html">DataRootFinder.f90</a>

      <a class="list-group-item" href="../sourcefile/dataruntimelanguage.f90.html">DataRuntimeLanguage.f90</a>

      <a class="list-group-item" href="../sourcefile/datashadowingcombinations.f90.html">DataShadowingCombinations.f90</a>

      <a class="list-group-item" href="../sourcefile/datasizing.f90.html">DataSizing.f90</a>

      <a class="list-group-item" href="../sourcefile/datastringglobals.f90.html">DataStringGlobals.f90</a>

      <a class="list-group-item" href="../sourcefile/datasurfacecolors.f90.html">DataSurfaceColors.f90</a>

      <a class="list-group-item" href="../sourcefile/datasurfacelists.f90.html">DataSurfaceLists.f90</a>

      <a class="list-group-item" href="../sourcefile/datasurfaces.f90.html">DataSurfaces.f90</a>

      <a class="list-group-item" href="../sourcefile/datasystemvariables.f90.html">DataSystemVariables.f90</a>

      <a class="list-group-item" href="../sourcefile/datatimings.f90.html">DataTimings.f90</a>

      <a class="list-group-item" href="../sourcefile/dataucsdshareddata.f90.html">DataUCSDSharedData.f90</a>

      <a class="list-group-item" href="../sourcefile/datavectortypes.f90.html">DataVectorTypes.f90</a>

      <a class="list-group-item" href="../sourcefile/dataviewfactorinformation.f90.html">DataViewFactorInformation.f90</a>

      <a class="list-group-item" href="../sourcefile/datawater.f90.html">DataWater.f90</a>

      <a class="list-group-item" href="../sourcefile/datazonecontrols.f90.html">DataZoneControls.f90</a>

      <a class="list-group-item" href="../sourcefile/datazoneenergydemands.f90.html">DataZoneEnergyDemands.f90</a>

      <a class="list-group-item" href="../sourcefile/datazoneequipment.f90.html">DataZoneEquipment.f90</a>

      <a class="list-group-item" href="../sourcefile/daylightingdevices.f90.html">DaylightingDevices.f90</a>

      <a class="list-group-item" href="../sourcefile/daylightingmanager.f90.html">DaylightingManager.f90</a>

      <a class="list-group-item" href="../sourcefile/delightmanagerf.f90.html">DElightManagerF.f90</a>

      <a class="list-group-item" href="../sourcefile/delightmanagerf_no.f90.html">DElightManagerF_NO.f90</a>

      <a class="list-group-item" href="../sourcefile/demandmanager.f90.html">DemandManager.f90</a>

      <a class="list-group-item" href="../sourcefile/desiccantdehumidifiers.f90.html">DesiccantDehumidifiers.f90</a>

      <a class="list-group-item" href="../sourcefile/directair.f90.html">DirectAir.f90</a>

      <a class="list-group-item" href="../sourcefile/displayroutines.f90.html">DisplayRoutines.f90</a>

      <a class="list-group-item" href="../sourcefile/dxcoil.f90.html">DXCoil.f90</a>

      <a class="list-group-item" href="../sourcefile/earthtube.f90.html">EarthTube.f90</a>

      <a class="list-group-item" href="../sourcefile/economiclifecyclecost.f90.html">EconomicLifeCycleCost.f90</a>

      <a class="list-group-item" href="../sourcefile/economictariff.f90.html">EconomicTariff.f90</a>

      <a class="list-group-item" href="../sourcefile/ecoroof.f90.html">EcoRoof.f90</a>

      <a class="list-group-item" href="../sourcefile/electricpowergenerators.f90.html">ElectricPowerGenerators.f90</a>

      <a class="list-group-item" href="../sourcefile/electricpowermanager.f90.html">ElectricPowerManager.f90</a>

      <a class="list-group-item" href="../sourcefile/emsmanager.f90.html">EMSManager.f90</a>

      <a class="list-group-item" href="../sourcefile/energyplus.f90.html">EnergyPlus.f90</a>

      <a class="list-group-item" href="../sourcefile/exteriorenergyusemanager.f90.html">ExteriorEnergyUseManager.f90</a>

      <a class="list-group-item" href="../sourcefile/externalinterface_no.f90.html">ExternalInterface_NO.f90</a>

      <a class="list-group-item" href="../sourcefile/fancoilunits.f90.html">FanCoilUnits.f90</a>

      <a class="list-group-item" href="../sourcefile/faultsmanager.f90.html">FaultsManager.f90</a>

      <a class="list-group-item" href="../sourcefile/fluidproperties.f90.html">FluidProperties.f90</a>

      <a class="list-group-item" href="../sourcefile/general.f90.html">General.f90</a>

      <a class="list-group-item" href="../sourcefile/generalroutines.f90.html">GeneralRoutines.f90</a>

      <a class="list-group-item" href="../sourcefile/globalnames.f90.html">GlobalNames.f90</a>

      <a class="list-group-item" href="../sourcefile/heatbalanceairmanager.f90.html">HeatBalanceAirManager.f90</a>

      <a class="list-group-item" href="../sourcefile/heatbalanceconvectioncoeffs.f90.html">HeatBalanceConvectionCoeffs.f90</a>

      <a class="list-group-item" href="../sourcefile/heatbalancehamtmanager.f90.html">HeatBalanceHAMTManager.f90</a>

      <a class="list-group-item" href="../sourcefile/heatbalanceinternalheatgains.f90.html">HeatBalanceInternalHeatGains.f90</a>

      <a class="list-group-item" href="../sourcefile/heatbalanceintradexchange.f90.html">HeatBalanceIntRadExchange.f90</a>

      <a class="list-group-item" href="../sourcefile/heatbalancemanager.f90.html">HeatBalanceManager.f90</a>

      <a class="list-group-item" href="../sourcefile/heatbalancemovableinsulation.f90.html">HeatBalanceMovableInsulation.f90</a>

      <a class="list-group-item" href="../sourcefile/heatbalancesurfacemanager.f90.html">HeatBalanceSurfaceManager.f90</a>

      <a class="list-group-item" href="../sourcefile/heatbalfinitedifferencemanager.f90.html">HeatBalFiniteDifferenceManager.f90</a>

      <a class="list-group-item" href="../sourcefile/heatrecovery.f90.html">HeatRecovery.f90</a>

      <a class="list-group-item" href="../sourcefile/humidifiers.f90.html">Humidifiers.f90</a>

      <a class="list-group-item" href="../sourcefile/hvaccontrollers.f90.html">HVACControllers.f90</a>

      <a class="list-group-item" href="../sourcefile/hvaccooledbeam.f90.html">HVACCooledBeam.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacdualductsystem.f90.html">HVACDualDuctSystem.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacduct.f90.html">HVACDuct.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacdxsystem.f90.html">HVACDXSystem.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacevapcomponent.f90.html">HVACEvapComponent.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacfancomponent.f90.html">HVACFanComponent.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacfurnace.f90.html">HVACFurnace.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacheatingcoils.f90.html">HVACHeatingCoils.f90</a>

      <a class="list-group-item" href="../sourcefile/hvachxassistedcoolingcoil.f90.html">HVACHXAssistedCoolingCoil.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacinterfacemanager.f90.html">HVACInterfaceManager.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacmanager.f90.html">HVACManager.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacmixercomponent.f90.html">HVACMixerComponent.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacmultispeedheatpump.f90.html">HVACMultiSpeedHeatPump.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacsingleductinduc.f90.html">HVACSingleDuctInduc.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacsingleductsystem.f90.html">HVACSingleDuctSystem.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacsplittercomponent.f90.html">HVACSplitterComponent.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacstandaloneerv.f90.html">HVACStandAloneERV.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacsteamcoilcomponent.f90.html">HVACSteamCoilComponent.f90</a>

      <a class="list-group-item" href="../sourcefile/hvactranspiredcollector.f90.html">HVACTranspiredCollector.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacunitarybypassvav.f90.html">HVACUnitaryBypassVAV.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacunitarysystem.f90.html">HVACUnitarySystem.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacvariablerefrigerantflow.f90.html">HVACVariableRefrigerantFlow.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacwatercoilcomponent.f90.html">HVACWaterCoilComponent.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacwatertoair.f90.html">HVACWatertoAir.f90</a>

      <a class="list-group-item" href="../sourcefile/hvacwatertoairmultispeedhp.f90.html">HVACWatertoAirMultiSpeedHP.f90</a>

      <a class="list-group-item" href="../sourcefile/inputprocessor.f90.html">InputProcessor.f90</a>

      <a class="list-group-item" href="../sourcefile/matrixdatamanager.f90.html">MatrixDataManager.f90</a>

      <a class="list-group-item" href="../sourcefile/mixedair.f90.html">MixedAir.f90</a>

      <a class="list-group-item" href="../sourcefile/moisturebalanceempdmanager.f90.html">MoistureBalanceEMPDManager.f90</a>

      <a class="list-group-item" href="../sourcefile/nodeinputmanager.f90.html">NodeInputManager.f90</a>

      <a class="list-group-item" href="../sourcefile/nonzoneequipmentmanager.f90.html">NonZoneEquipmentManager.f90</a>

      <a class="list-group-item" href="../sourcefile/outairnodemanager.f90.html">OutAirNodeManager.f90</a>

      <a class="list-group-item" href="../sourcefile/outdoorairunit.f90.html">OutdoorAirUnit.f90</a>

      <a class="list-group-item" href="../sourcefile/outputprocessor.f90.html">OutputProcessor.f90</a>

      <a class="list-group-item" href="../sourcefile/outputreportpredefined.f90.html">OutputReportPredefined.f90</a>

      <a class="list-group-item" href="../sourcefile/outputreports.f90.html">OutputReports.f90</a>

      <a class="list-group-item" href="../sourcefile/outputreporttabular.f90.html">OutputReportTabular.f90</a>

      <a class="list-group-item" href="../sourcefile/packagedterminalheatpump.f90.html">PackagedTerminalHeatPump.f90</a>

      <a class="list-group-item" href="../sourcefile/packagedthermalstoragecoil.f90.html">PackagedThermalStorageCoil.f90</a>

      <a class="list-group-item" href="../sourcefile/photovoltaics.f90.html">Photovoltaics.f90</a>

      <a class="list-group-item" href="../sourcefile/photovoltaicthermalcollectors.f90.html">PhotovoltaicThermalCollectors.f90</a>

      <a class="list-group-item" href="../sourcefile/plantabsorptionchillers.f90.html">PlantAbsorptionChillers.f90</a>

      <a class="list-group-item" href="../sourcefile/plantboilers.f90.html">PlantBoilers.f90</a>

      <a class="list-group-item" href="../sourcefile/plantboilerssteam.f90.html">PlantBoilersSteam.f90</a>

      <a class="list-group-item" href="../sourcefile/plantcentralgshp.f90.html">PlantCentralGSHP.f90</a>

      <a class="list-group-item" href="../sourcefile/plantchillers.f90.html">PlantChillers.f90</a>

      <a class="list-group-item" href="../sourcefile/plantcondloopoperation.f90.html">PlantCondLoopOperation.f90</a>

      <a class="list-group-item" href="../sourcefile/plantcondlooptowers.f90.html">PlantCondLoopTowers.f90</a>

      <a class="list-group-item" href="../sourcefile/planteirchillers.f90.html">PlantEIRChillers.f90</a>

      <a class="list-group-item" href="../sourcefile/plantevapfluidcoolers.f90.html">PlantEvapFluidCoolers.f90</a>

      <a class="list-group-item" href="../sourcefile/plantexhaustabsorptionchiller.f90.html">PlantExhaustAbsorptionChiller.f90</a>

      <a class="list-group-item" href="../sourcefile/plantfluidcoolers.f90.html">PlantFluidCoolers.f90</a>

      <a class="list-group-item" href="../sourcefile/plantgasabsorptionchiller.f90.html">PlantGasAbsorptionChiller.f90</a>

      <a class="list-group-item" href="../sourcefile/plantgroundheatexchangers.f90.html">PlantGroundHeatExchangers.f90</a>

      <a class="list-group-item" href="../sourcefile/plantheatexchanger.f90.html">PlantHeatExchanger.f90</a>

      <a class="list-group-item" href="../sourcefile/planticethermalstorage.f90.html">PlantIceThermalStorage.f90</a>

      <a class="list-group-item" href="../sourcefile/plantloadprofile.f90.html">PlantLoadProfile.f90</a>

      <a class="list-group-item" href="../sourcefile/plantloopequipment.f90.html">PlantLoopEquipment.f90</a>

      <a class="list-group-item" href="../sourcefile/plantloopsolver.f90.html">PlantLoopSolver.f90</a>

      <a class="list-group-item" href="../sourcefile/plantmanager.f90.html">PlantManager.f90</a>

      <a class="list-group-item" href="../sourcefile/plantoutsideenergysources.f90.html">PlantOutsideEnergySources.f90</a>

      <a class="list-group-item" href="../sourcefile/plantpipeheattransfer.f90.html">PlantPipeHeatTransfer.f90</a>

      <a class="list-group-item" href="../sourcefile/plantpipes.f90.html">PlantPipes.f90</a>

      <a class="list-group-item" href="../sourcefile/plantpipingsystemmanager.f90.html">PlantPipingSystemManager.f90</a>

      <a class="list-group-item" href="../sourcefile/plantpondgroundheatexchanger.f90.html">PlantPondGroundHeatExchanger.f90</a>

      <a class="list-group-item" href="../sourcefile/plantpressuresystem.f90.html">PlantPressureSystem.f90</a>

      <a class="list-group-item" href="../sourcefile/plantpumps.f90.html">PlantPumps.f90</a>

      <a class="list-group-item" href="../sourcefile/plantsolarcollectors.f90.html">PlantSolarCollectors.f90</a>

      <a class="list-group-item" href="../sourcefile/plantsurfacegroundheatexchanger.f90.html">PlantSurfaceGroundHeatExchanger.f90</a>

      <a class="list-group-item" href="../sourcefile/plantutilities.f90.html">PlantUtilities.f90</a>

      <a class="list-group-item" href="../sourcefile/plantvalves.f90.html">PlantValves.f90</a>

      <a class="list-group-item" href="../sourcefile/plantwatersources.f90.html">PlantWaterSources.f90</a>

      <a class="list-group-item" href="../sourcefile/plantwaterthermaltank.f90.html">PlantWaterThermalTank.f90</a>

      <a class="list-group-item" href="../sourcefile/plantwatertowatergshp.f90.html">PlantWatertoWaterGSHP.f90</a>

      <a class="list-group-item" href="../sourcefile/plantwateruse.f90.html">PlantWaterUse.f90</a>

      <a class="list-group-item" href="../sourcefile/pollutionanalysismodule.f90.html">PollutionAnalysisModule.f90</a>

      <a class="list-group-item" href="../sourcefile/poweredinductionunits.f90.html">PoweredInductionUnits.f90</a>

      <a class="list-group-item" href="../sourcefile/psychroutines.f90.html">PsychRoutines.f90</a>

      <a class="list-group-item" href="../sourcefile/purchasedairmanager.f90.html">Purchasedairmanager.f90</a>

      <a class="list-group-item" href="../sourcefile/radiantsystemhightemp.f90.html">RadiantSystemHighTemp.f90</a>

      <a class="list-group-item" href="../sourcefile/radiantsystemlowtemp.f90.html">RadiantSystemLowTemp.f90</a>

      <a class="list-group-item" href="../sourcefile/refrigeratedcase.f90.html">RefrigeratedCase.f90</a>

      <a class="list-group-item" href="../sourcefile/reportsizingmanager.f90.html">ReportSizingManager.f90</a>

      <a class="list-group-item" href="../sourcefile/returnairpath.f90.html">ReturnAirPath.f90</a>

      <a class="list-group-item" href="../sourcefile/roomairmanager.f90.html">RoomAirManager.f90</a>

      <a class="list-group-item" href="../sourcefile/roomairmodelcrossvent.f90.html">RoomAirModelCrossVent.f90</a>

      <a class="list-group-item" href="../sourcefile/roomairmodeldisplacementvent.f90.html">RoomAirModelDisplacementVent.f90</a>

      <a class="list-group-item" href="../sourcefile/roomairmodelmundt.f90.html">RoomAirModelMundt.f90</a>

      <a class="list-group-item" href="../sourcefile/roomairmodelufad.f90.html">RoomAirModelUFAD.f90</a>

      <a class="list-group-item" href="../sourcefile/roomairmodelusertemppattern.f90.html">RoomAirModelUserTempPattern.f90</a>

      <a class="list-group-item" href="../sourcefile/rootfinder.f90.html">RootFinder.f90</a>

      <a class="list-group-item" href="../sourcefile/runtimelanguageprocessor.f90.html">RuntimeLanguageProcessor.f90</a>

      <a class="list-group-item" href="../sourcefile/schedulemanager.f90.html">ScheduleManager.f90</a>

      <a class="list-group-item" href="../sourcefile/setpointmanager.f90.html">SetPointManager.f90</a>

      <a class="list-group-item" href="../sourcefile/simairservingzones.f90.html">SimAirServingZones.f90</a>

      <a class="list-group-item" href="../sourcefile/simulationmanager.f90.html">SimulationManager.f90</a>

      <a class="list-group-item" href="../sourcefile/sizingmanager.f90.html">SizingManager.f90</a>

      <a class="list-group-item" href="../sourcefile/solarreflectionmanager.f90.html">SolarReflectionManager.f90</a>

      <a class="list-group-item" href="../sourcefile/solarshading.f90.html">SolarShading.f90</a>

      <a class="list-group-item" href="../sourcefile/sortandstringutilities.f90.html">SortAndStringUtilities.f90</a>

      <a class="list-group-item" href="../sourcefile/sqlite3.c.html">sqlite3.c</a>

      <a class="list-group-item" href="../sourcefile/sqlitecroutines.c.html">SQLiteCRoutines.c</a>

      <a class="list-group-item" href="../sourcefile/sqlitefortranroutines.f90.html">SQLiteFortranRoutines.f90</a>

      <a class="list-group-item" href="../sourcefile/sqlitefortranroutines_no.f90.html">SQLiteFortranRoutines_NO.f90</a>

      <a class="list-group-item" href="../sourcefile/standardratings.f90.html">StandardRatings.f90</a>

      <a class="list-group-item" href="../sourcefile/surfacegeometry.f90.html">SurfaceGeometry.f90</a>

      <a class="list-group-item" href="../sourcefile/systemavailabilitymanager.f90.html">SystemAvailabilityManager.f90</a>

      <a class="list-group-item" href="../sourcefile/systemreports.f90.html">SystemReports.f90</a>

      <a class="list-group-item" href="../sourcefile/tarcogcomplexfenestration.f90.html">TarcogComplexFenestration.f90</a>

      <a class="list-group-item" href="../sourcefile/thermalchimney.f90.html">ThermalChimney.f90</a>

      <a class="list-group-item" href="../sourcefile/thermalcomfort.f90.html">ThermalComfort.f90</a>

      <a class="list-group-item" href="../sourcefile/unitheater.f90.html">UnitHeater.f90</a>

      <a class="list-group-item" href="../sourcefile/unitventilator.f90.html">UnitVentilator.f90</a>

      <a class="list-group-item" href="../sourcefile/userdefinedcomponents.f90.html">UserDefinedComponents.f90</a>

      <a class="list-group-item" href="../sourcefile/utilityroutines.f90.html">UtilityRoutines.f90</a>

      <a class="list-group-item" href="../sourcefile/vectorutilities.f90.html">VectorUtilities.f90</a>

      <a class="list-group-item" href="../sourcefile/ventilatedslab.f90.html">VentilatedSlab.f90</a>

      <a class="list-group-item" href="../sourcefile/watermanager.f90.html">WaterManager.f90</a>

      <a class="list-group-item" href="../sourcefile/weathermanager.f90.html">WeatherManager.f90</a>

      <a class="list-group-item" href="../sourcefile/windowac.f90.html">WindowAC.f90</a>

      <a class="list-group-item" href="../sourcefile/windowcomplexmanager.f90.html">WindowComplexManager.f90</a>

      <a class="list-group-item" href="../sourcefile/windowequivalentlayer.f90.html">WindowEquivalentLayer.f90</a>

      <a class="list-group-item" href="../sourcefile/windowmanager.f90.html">WindowManager.f90</a>

      <a class="list-group-item" href="../sourcefile/windturbine.f90.html">WindTurbine.f90</a>

      <a class="list-group-item" href="../sourcefile/zoneairloopequipmentmanager.f90.html">Zoneairloopequipmentmanager.f90</a>

      <a class="list-group-item" href="../sourcefile/zonecontaminantpredictorcorrector.f90.html">ZoneContaminantPredictorCorrector.f90</a>

      <a class="list-group-item" href="../sourcefile/zonedehumidifier.f90.html">ZoneDehumidifier.f90</a>

      <a class="list-group-item" href="../sourcefile/zoneequipmentmanager.f90.html">Zoneequipmentmanager.f90</a>

      <a class="list-group-item" href="../sourcefile/zoneplenumcomponent.f90.html">ZonePlenumComponent.f90</a>

      <a class="list-group-item" href="../sourcefile/zonetemppredictorcorrector.f90.html">ZoneTempPredictorCorrector.f90</a>

    </div>
  </div>
</div>


  </section>

    <hr>
    </div> <!-- /container -->
    <footer>
      <div class="container">
      <div class="row">
        <div class="col-xs-6 col-md-4"><p>&copy; 2017 </p></div>
        <div class="col-xs-6 col-md-4 col-md-push-4">
          <p class="text-right">
            Documentation generated by
            <a href="https://github.com/cmacmackin/ford">FORD</a>

          </p>
        </div>
        <div class="col-xs-12 col-md-4 col-md-pull-4"><p class="text-center"> EnergyPlusFortran</p></div>
      </div>
      <br>
      </div> <!-- /container -->
    </footer>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
<!--
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
-->
    <script src="../js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../js/ie10-viewport-bug-workaround.js"></script>

    <!-- MathJax JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } },
        jax: ['input/TeX','input/MathML','output/HTML-CSS'],
        extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js'],
        'HTML-CSS': {
           styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: '#000000 ! important'} }
        }
      });
    </script>
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  </body>
</html>
